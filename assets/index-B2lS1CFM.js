(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();function v_(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Dm={exports:{}},uu={},Om={exports:{}},Oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rw;function Fx(){if(Rw)return Oe;Rw=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),m=Symbol.iterator;function y(z){return z===null||typeof z!="object"?null:(z=m&&z[m]||z["@@iterator"],typeof z=="function"?z:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,b={};function C(z,J,pe){this.props=z,this.context=J,this.refs=b,this.updater=pe||w}C.prototype.isReactComponent={},C.prototype.setState=function(z,J){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,J,"setState")},C.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function k(){}k.prototype=C.prototype;function N(z,J,pe){this.props=z,this.context=J,this.refs=b,this.updater=pe||w}var j=N.prototype=new k;j.constructor=N,S(j,C.prototype),j.isPureReactComponent=!0;var H=Array.isArray,Y=Object.prototype.hasOwnProperty,X={current:null},x={key:!0,ref:!0,__self:!0,__source:!0};function A(z,J,pe){var ke,Ne={},De=null,$e=null;if(J!=null)for(ke in J.ref!==void 0&&($e=J.ref),J.key!==void 0&&(De=""+J.key),J)Y.call(J,ke)&&!x.hasOwnProperty(ke)&&(Ne[ke]=J[ke]);var Ge=arguments.length-2;if(Ge===1)Ne.children=pe;else if(1<Ge){for(var Xe=Array(Ge),yt=0;yt<Ge;yt++)Xe[yt]=arguments[yt+2];Ne.children=Xe}if(z&&z.defaultProps)for(ke in Ge=z.defaultProps,Ge)Ne[ke]===void 0&&(Ne[ke]=Ge[ke]);return{$$typeof:n,type:z,key:De,ref:$e,props:Ne,_owner:X.current}}function P(z,J){return{$$typeof:n,type:z.type,key:J,ref:z.ref,props:z.props,_owner:z._owner}}function L(z){return typeof z=="object"&&z!==null&&z.$$typeof===n}function V(z){var J={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(pe){return J[pe]})}var B=/\/+/g;function O(z,J){return typeof z=="object"&&z!==null&&z.key!=null?V(""+z.key):J.toString(36)}function rt(z,J,pe,ke,Ne){var De=typeof z;(De==="undefined"||De==="boolean")&&(z=null);var $e=!1;if(z===null)$e=!0;else switch(De){case"string":case"number":$e=!0;break;case"object":switch(z.$$typeof){case n:case e:$e=!0}}if($e)return $e=z,Ne=Ne($e),z=ke===""?"."+O($e,0):ke,H(Ne)?(pe="",z!=null&&(pe=z.replace(B,"$&/")+"/"),rt(Ne,J,pe,"",function(yt){return yt})):Ne!=null&&(L(Ne)&&(Ne=P(Ne,pe+(!Ne.key||$e&&$e.key===Ne.key?"":(""+Ne.key).replace(B,"$&/")+"/")+z)),J.push(Ne)),1;if($e=0,ke=ke===""?".":ke+":",H(z))for(var Ge=0;Ge<z.length;Ge++){De=z[Ge];var Xe=ke+O(De,Ge);$e+=rt(De,J,pe,Xe,Ne)}else if(Xe=y(z),typeof Xe=="function")for(z=Xe.call(z),Ge=0;!(De=z.next()).done;)De=De.value,Xe=ke+O(De,Ge++),$e+=rt(De,J,pe,Xe,Ne);else if(De==="object")throw J=String(z),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.");return $e}function Je(z,J,pe){if(z==null)return z;var ke=[],Ne=0;return rt(z,ke,"","",function(De){return J.call(pe,De,Ne++)}),ke}function _t(z){if(z._status===-1){var J=z._result;J=J(),J.then(function(pe){(z._status===0||z._status===-1)&&(z._status=1,z._result=pe)},function(pe){(z._status===0||z._status===-1)&&(z._status=2,z._result=pe)}),z._status===-1&&(z._status=0,z._result=J)}if(z._status===1)return z._result.default;throw z._result}var Ue={current:null},ie={transition:null},ye={ReactCurrentDispatcher:Ue,ReactCurrentBatchConfig:ie,ReactCurrentOwner:X};function ue(){throw Error("act(...) is not supported in production builds of React.")}return Oe.Children={map:Je,forEach:function(z,J,pe){Je(z,function(){J.apply(this,arguments)},pe)},count:function(z){var J=0;return Je(z,function(){J++}),J},toArray:function(z){return Je(z,function(J){return J})||[]},only:function(z){if(!L(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},Oe.Component=C,Oe.Fragment=t,Oe.Profiler=i,Oe.PureComponent=N,Oe.StrictMode=r,Oe.Suspense=d,Oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ye,Oe.act=ue,Oe.cloneElement=function(z,J,pe){if(z==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+z+".");var ke=S({},z.props),Ne=z.key,De=z.ref,$e=z._owner;if(J!=null){if(J.ref!==void 0&&(De=J.ref,$e=X.current),J.key!==void 0&&(Ne=""+J.key),z.type&&z.type.defaultProps)var Ge=z.type.defaultProps;for(Xe in J)Y.call(J,Xe)&&!x.hasOwnProperty(Xe)&&(ke[Xe]=J[Xe]===void 0&&Ge!==void 0?Ge[Xe]:J[Xe])}var Xe=arguments.length-2;if(Xe===1)ke.children=pe;else if(1<Xe){Ge=Array(Xe);for(var yt=0;yt<Xe;yt++)Ge[yt]=arguments[yt+2];ke.children=Ge}return{$$typeof:n,type:z.type,key:Ne,ref:De,props:ke,_owner:$e}},Oe.createContext=function(z){return z={$$typeof:l,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},z.Provider={$$typeof:o,_context:z},z.Consumer=z},Oe.createElement=A,Oe.createFactory=function(z){var J=A.bind(null,z);return J.type=z,J},Oe.createRef=function(){return{current:null}},Oe.forwardRef=function(z){return{$$typeof:c,render:z}},Oe.isValidElement=L,Oe.lazy=function(z){return{$$typeof:_,_payload:{_status:-1,_result:z},_init:_t}},Oe.memo=function(z,J){return{$$typeof:p,type:z,compare:J===void 0?null:J}},Oe.startTransition=function(z){var J=ie.transition;ie.transition={};try{z()}finally{ie.transition=J}},Oe.unstable_act=ue,Oe.useCallback=function(z,J){return Ue.current.useCallback(z,J)},Oe.useContext=function(z){return Ue.current.useContext(z)},Oe.useDebugValue=function(){},Oe.useDeferredValue=function(z){return Ue.current.useDeferredValue(z)},Oe.useEffect=function(z,J){return Ue.current.useEffect(z,J)},Oe.useId=function(){return Ue.current.useId()},Oe.useImperativeHandle=function(z,J,pe){return Ue.current.useImperativeHandle(z,J,pe)},Oe.useInsertionEffect=function(z,J){return Ue.current.useInsertionEffect(z,J)},Oe.useLayoutEffect=function(z,J){return Ue.current.useLayoutEffect(z,J)},Oe.useMemo=function(z,J){return Ue.current.useMemo(z,J)},Oe.useReducer=function(z,J,pe){return Ue.current.useReducer(z,J,pe)},Oe.useRef=function(z){return Ue.current.useRef(z)},Oe.useState=function(z){return Ue.current.useState(z)},Oe.useSyncExternalStore=function(z,J,pe){return Ue.current.useSyncExternalStore(z,J,pe)},Oe.useTransition=function(){return Ue.current.useTransition()},Oe.version="18.3.1",Oe}var Aw;function mf(){return Aw||(Aw=1,Om.exports=Fx()),Om.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xw;function Ux(){if(xw)return uu;xw=1;var n=mf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(c,d,p){var _,m={},y=null,w=null;p!==void 0&&(y=""+p),d.key!==void 0&&(y=""+d.key),d.ref!==void 0&&(w=d.ref);for(_ in d)r.call(d,_)&&!o.hasOwnProperty(_)&&(m[_]=d[_]);if(c&&c.defaultProps)for(_ in d=c.defaultProps,d)m[_]===void 0&&(m[_]=d[_]);return{$$typeof:e,type:c,key:y,ref:w,props:m,_owner:i.current}}return uu.Fragment=t,uu.jsx=l,uu.jsxs=l,uu}var Pw;function Bx(){return Pw||(Pw=1,Dm.exports=Ux()),Dm.exports}var q=Bx(),M=mf();const be=v_(M);var Jd={},Lm={exports:{}},kn={},Mm={exports:{}},Vm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kw;function jx(){return kw||(kw=1,function(n){function e(ie,ye){var ue=ie.length;ie.push(ye);e:for(;0<ue;){var z=ue-1>>>1,J=ie[z];if(0<i(J,ye))ie[z]=ye,ie[ue]=J,ue=z;else break e}}function t(ie){return ie.length===0?null:ie[0]}function r(ie){if(ie.length===0)return null;var ye=ie[0],ue=ie.pop();if(ue!==ye){ie[0]=ue;e:for(var z=0,J=ie.length,pe=J>>>1;z<pe;){var ke=2*(z+1)-1,Ne=ie[ke],De=ke+1,$e=ie[De];if(0>i(Ne,ue))De<J&&0>i($e,Ne)?(ie[z]=$e,ie[De]=ue,z=De):(ie[z]=Ne,ie[ke]=ue,z=ke);else if(De<J&&0>i($e,ue))ie[z]=$e,ie[De]=ue,z=De;else break e}}return ye}function i(ie,ye){var ue=ie.sortIndex-ye.sortIndex;return ue!==0?ue:ie.id-ye.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();n.unstable_now=function(){return l.now()-c}}var d=[],p=[],_=1,m=null,y=3,w=!1,S=!1,b=!1,C=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(ie){for(var ye=t(p);ye!==null;){if(ye.callback===null)r(p);else if(ye.startTime<=ie)r(p),ye.sortIndex=ye.expirationTime,e(d,ye);else break;ye=t(p)}}function H(ie){if(b=!1,j(ie),!S)if(t(d)!==null)S=!0,_t(Y);else{var ye=t(p);ye!==null&&Ue(H,ye.startTime-ie)}}function Y(ie,ye){S=!1,b&&(b=!1,k(A),A=-1),w=!0;var ue=y;try{for(j(ye),m=t(d);m!==null&&(!(m.expirationTime>ye)||ie&&!V());){var z=m.callback;if(typeof z=="function"){m.callback=null,y=m.priorityLevel;var J=z(m.expirationTime<=ye);ye=n.unstable_now(),typeof J=="function"?m.callback=J:m===t(d)&&r(d),j(ye)}else r(d);m=t(d)}if(m!==null)var pe=!0;else{var ke=t(p);ke!==null&&Ue(H,ke.startTime-ye),pe=!1}return pe}finally{m=null,y=ue,w=!1}}var X=!1,x=null,A=-1,P=5,L=-1;function V(){return!(n.unstable_now()-L<P)}function B(){if(x!==null){var ie=n.unstable_now();L=ie;var ye=!0;try{ye=x(!0,ie)}finally{ye?O():(X=!1,x=null)}}else X=!1}var O;if(typeof N=="function")O=function(){N(B)};else if(typeof MessageChannel<"u"){var rt=new MessageChannel,Je=rt.port2;rt.port1.onmessage=B,O=function(){Je.postMessage(null)}}else O=function(){C(B,0)};function _t(ie){x=ie,X||(X=!0,O())}function Ue(ie,ye){A=C(function(){ie(n.unstable_now())},ye)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ie){ie.callback=null},n.unstable_continueExecution=function(){S||w||(S=!0,_t(Y))},n.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<ie?Math.floor(1e3/ie):5},n.unstable_getCurrentPriorityLevel=function(){return y},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function(ie){switch(y){case 1:case 2:case 3:var ye=3;break;default:ye=y}var ue=y;y=ye;try{return ie()}finally{y=ue}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ie,ye){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var ue=y;y=ie;try{return ye()}finally{y=ue}},n.unstable_scheduleCallback=function(ie,ye,ue){var z=n.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?z+ue:z):ue=z,ie){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=ue+J,ie={id:_++,callback:ye,priorityLevel:ie,startTime:ue,expirationTime:J,sortIndex:-1},ue>z?(ie.sortIndex=ue,e(p,ie),t(d)===null&&ie===t(p)&&(b?(k(A),A=-1):b=!0,Ue(H,ue-z))):(ie.sortIndex=J,e(d,ie),S||w||(S=!0,_t(Y))),ie},n.unstable_shouldYield=V,n.unstable_wrapCallback=function(ie){var ye=y;return function(){var ue=y;y=ye;try{return ie.apply(this,arguments)}finally{y=ue}}}}(Vm)),Vm}var Nw;function zx(){return Nw||(Nw=1,Mm.exports=jx()),Mm.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dw;function $x(){if(Dw)return kn;Dw=1;var n=mf(),e=zx();function t(s){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+s,u=1;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function o(s,a){l(s,a),l(s+"Capture",a)}function l(s,a){for(i[s]=a,s=0;s<a.length;s++)r.add(a[s])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_={},m={};function y(s){return d.call(m,s)?!0:d.call(_,s)?!1:p.test(s)?m[s]=!0:(_[s]=!0,!1)}function w(s,a,u,f){if(u!==null&&u.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return f?!1:u!==null?!u.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function S(s,a,u,f){if(a===null||typeof a>"u"||w(s,a,u,f))return!0;if(f)return!1;if(u!==null)switch(u.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function b(s,a,u,f,g,E,I){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=f,this.attributeNamespace=g,this.mustUseProperty=u,this.propertyName=s,this.type=a,this.sanitizeURL=E,this.removeEmptyString=I}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){C[s]=new b(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var a=s[0];C[a]=new b(a,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){C[s]=new b(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){C[s]=new b(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){C[s]=new b(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){C[s]=new b(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){C[s]=new b(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){C[s]=new b(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){C[s]=new b(s,5,!1,s.toLowerCase(),null,!1,!1)});var k=/[\-:]([a-z])/g;function N(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var a=s.replace(k,N);C[a]=new b(a,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var a=s.replace(k,N);C[a]=new b(a,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var a=s.replace(k,N);C[a]=new b(a,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){C[s]=new b(s,1,!1,s.toLowerCase(),null,!1,!1)}),C.xlinkHref=new b("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){C[s]=new b(s,1,!1,s.toLowerCase(),null,!0,!0)});function j(s,a,u,f){var g=C.hasOwnProperty(a)?C[a]:null;(g!==null?g.type!==0:f||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(S(a,u,g,f)&&(u=null),f||g===null?y(a)&&(u===null?s.removeAttribute(a):s.setAttribute(a,""+u)):g.mustUseProperty?s[g.propertyName]=u===null?g.type===3?!1:"":u:(a=g.attributeName,f=g.attributeNamespace,u===null?s.removeAttribute(a):(g=g.type,u=g===3||g===4&&u===!0?"":""+u,f?s.setAttributeNS(f,a,u):s.setAttribute(a,u))))}var H=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Y=Symbol.for("react.element"),X=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),L=Symbol.for("react.provider"),V=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),rt=Symbol.for("react.suspense_list"),Je=Symbol.for("react.memo"),_t=Symbol.for("react.lazy"),Ue=Symbol.for("react.offscreen"),ie=Symbol.iterator;function ye(s){return s===null||typeof s!="object"?null:(s=ie&&s[ie]||s["@@iterator"],typeof s=="function"?s:null)}var ue=Object.assign,z;function J(s){if(z===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);z=a&&a[1]||""}return`
`+z+s}var pe=!1;function ke(s,a){if(!s||pe)return"";pe=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(K){var f=K}Reflect.construct(s,[],a)}else{try{a.call()}catch(K){f=K}s.call(a.prototype)}else{try{throw Error()}catch(K){f=K}s()}}catch(K){if(K&&f&&typeof K.stack=="string"){for(var g=K.stack.split(`
`),E=f.stack.split(`
`),I=g.length-1,D=E.length-1;1<=I&&0<=D&&g[I]!==E[D];)D--;for(;1<=I&&0<=D;I--,D--)if(g[I]!==E[D]){if(I!==1||D!==1)do if(I--,D--,0>D||g[I]!==E[D]){var F=`
`+g[I].replace(" at new "," at ");return s.displayName&&F.includes("<anonymous>")&&(F=F.replace("<anonymous>",s.displayName)),F}while(1<=I&&0<=D);break}}}finally{pe=!1,Error.prepareStackTrace=u}return(s=s?s.displayName||s.name:"")?J(s):""}function Ne(s){switch(s.tag){case 5:return J(s.type);case 16:return J("Lazy");case 13:return J("Suspense");case 19:return J("SuspenseList");case 0:case 2:case 15:return s=ke(s.type,!1),s;case 11:return s=ke(s.type.render,!1),s;case 1:return s=ke(s.type,!0),s;default:return""}}function De(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case x:return"Fragment";case X:return"Portal";case P:return"Profiler";case A:return"StrictMode";case O:return"Suspense";case rt:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case V:return(s.displayName||"Context")+".Consumer";case L:return(s._context.displayName||"Context")+".Provider";case B:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case Je:return a=s.displayName||null,a!==null?a:De(s.type)||"Memo";case _t:a=s._payload,s=s._init;try{return De(s(a))}catch{}}return null}function $e(s){var a=s.type;switch(s.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=a.render,s=s.displayName||s.name||"",a.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return De(a);case 8:return a===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function Ge(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Xe(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function yt(s){var a=Xe(s)?"checked":"value",u=Object.getOwnPropertyDescriptor(s.constructor.prototype,a),f=""+s[a];if(!s.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,E=u.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return g.call(this)},set:function(I){f=""+I,E.call(this,I)}}),Object.defineProperty(s,a,{enumerable:u.enumerable}),{getValue:function(){return f},setValue:function(I){f=""+I},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function Dr(s){s._valueTracker||(s._valueTracker=yt(s))}function Pt(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var u=a.getValue(),f="";return s&&(f=Xe(s)?s.checked?"true":"false":s.value),s=f,s!==u?(a.setValue(s),!0):!1}function In(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function Ls(s,a){var u=a.checked;return ue({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??s._wrapperState.initialChecked})}function Lo(s,a){var u=a.defaultValue==null?"":a.defaultValue,f=a.checked!=null?a.checked:a.defaultChecked;u=Ge(a.value!=null?a.value:u),s._wrapperState={initialChecked:f,initialValue:u,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function ml(s,a){a=a.checked,a!=null&&j(s,"checked",a,!1)}function gl(s,a){ml(s,a);var u=Ge(a.value),f=a.type;if(u!=null)f==="number"?(u===0&&s.value===""||s.value!=u)&&(s.value=""+u):s.value!==""+u&&(s.value=""+u);else if(f==="submit"||f==="reset"){s.removeAttribute("value");return}a.hasOwnProperty("value")?Mo(s,a.type,u):a.hasOwnProperty("defaultValue")&&Mo(s,a.type,Ge(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(s.defaultChecked=!!a.defaultChecked)}function Vc(s,a,u){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var f=a.type;if(!(f!=="submit"&&f!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+s._wrapperState.initialValue,u||a===s.value||(s.value=a),s.defaultValue=a}u=s.name,u!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,u!==""&&(s.name=u)}function Mo(s,a,u){(a!=="number"||In(s.ownerDocument)!==s)&&(u==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+u&&(s.defaultValue=""+u))}var ri=Array.isArray;function ii(s,a,u,f){if(s=s.options,a){a={};for(var g=0;g<u.length;g++)a["$"+u[g]]=!0;for(u=0;u<s.length;u++)g=a.hasOwnProperty("$"+s[u].value),s[u].selected!==g&&(s[u].selected=g),g&&f&&(s[u].defaultSelected=!0)}else{for(u=""+Ge(u),a=null,g=0;g<s.length;g++){if(s[g].value===u){s[g].selected=!0,f&&(s[g].defaultSelected=!0);return}a!==null||s[g].disabled||(a=s[g])}a!==null&&(a.selected=!0)}}function _l(s,a){if(a.dangerouslySetInnerHTML!=null)throw Error(t(91));return ue({},a,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function Vo(s,a){var u=a.value;if(u==null){if(u=a.children,a=a.defaultValue,u!=null){if(a!=null)throw Error(t(92));if(ri(u)){if(1<u.length)throw Error(t(93));u=u[0]}a=u}a==null&&(a=""),u=a}s._wrapperState={initialValue:Ge(u)}}function Fo(s,a){var u=Ge(a.value),f=Ge(a.defaultValue);u!=null&&(u=""+u,u!==s.value&&(s.value=u),a.defaultValue==null&&s.defaultValue!==u&&(s.defaultValue=u)),f!=null&&(s.defaultValue=""+f)}function yl(s){var a=s.textContent;a===s._wrapperState.initialValue&&a!==""&&a!==null&&(s.value=a)}function kt(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Nt(s,a){return s==null||s==="http://www.w3.org/1999/xhtml"?kt(a):s==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var si,vl=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,u,f,g){MSApp.execUnsafeLocalFunction(function(){return s(a,u,f,g)})}:s}(function(s,a){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=a;else{for(si=si||document.createElement("div"),si.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=si.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;a.firstChild;)s.appendChild(a.firstChild)}});function Vi(s,a){if(a){var u=s.firstChild;if(u&&u===s.lastChild&&u.nodeType===3){u.nodeValue=a;return}}s.textContent=a}var Ms={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Vs=["Webkit","ms","Moz","O"];Object.keys(Ms).forEach(function(s){Vs.forEach(function(a){a=a+s.charAt(0).toUpperCase()+s.substring(1),Ms[a]=Ms[s]})});function El(s,a,u){return a==null||typeof a=="boolean"||a===""?"":u||typeof a!="number"||a===0||Ms.hasOwnProperty(s)&&Ms[s]?(""+a).trim():a+"px"}function wl(s,a){s=s.style;for(var u in a)if(a.hasOwnProperty(u)){var f=u.indexOf("--")===0,g=El(u,a[u],f);u==="float"&&(u="cssFloat"),f?s.setProperty(u,g):s[u]=g}}var Tl=ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Il(s,a){if(a){if(Tl[s]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(t(137,s));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(t(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(t(61))}if(a.style!=null&&typeof a.style!="object")throw Error(t(62))}}function Sl(s,a){if(s.indexOf("-")===-1)return typeof a.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fs=null;function Uo(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Bo=null,Wn=null,Or=null;function jo(s){if(s=Kl(s)){if(typeof Bo!="function")throw Error(t(280));var a=s.stateNode;a&&(a=fd(a),Bo(s.stateNode,s.type,a))}}function Lr(s){Wn?Or?Or.push(s):Or=[s]:Wn=s}function Cl(){if(Wn){var s=Wn,a=Or;if(Or=Wn=null,jo(s),a)for(s=0;s<a.length;s++)jo(a[s])}}function Us(s,a){return s(a)}function bl(){}var oi=!1;function Rl(s,a,u){if(oi)return s(a,u);oi=!0;try{return Us(s,a,u)}finally{oi=!1,(Wn!==null||Or!==null)&&(bl(),Cl())}}function It(s,a){var u=s.stateNode;if(u===null)return null;var f=fd(u);if(f===null)return null;u=f[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(s=s.type,f=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!f;break e;default:s=!1}if(s)return null;if(u&&typeof u!="function")throw Error(t(231,a,typeof u));return u}var zo=!1;if(c)try{var lr={};Object.defineProperty(lr,"passive",{get:function(){zo=!0}}),window.addEventListener("test",lr,lr),window.removeEventListener("test",lr,lr)}catch{zo=!1}function Bs(s,a,u,f,g,E,I,D,F){var K=Array.prototype.slice.call(arguments,3);try{a.apply(u,K)}catch(te){this.onError(te)}}var js=!1,$o=null,ur=!1,Al=null,ap={onError:function(s){js=!0,$o=s}};function Wo(s,a,u,f,g,E,I,D,F){js=!1,$o=null,Bs.apply(ap,arguments)}function Fc(s,a,u,f,g,E,I,D,F){if(Wo.apply(this,arguments),js){if(js){var K=$o;js=!1,$o=null}else throw Error(t(198));ur||(ur=!0,Al=K)}}function cr(s){var a=s,u=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,a.flags&4098&&(u=a.return),s=a.return;while(s)}return a.tag===3?u:null}function zs(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function dr(s){if(cr(s)!==s)throw Error(t(188))}function Uc(s){var a=s.alternate;if(!a){if(a=cr(s),a===null)throw Error(t(188));return a!==s?null:s}for(var u=s,f=a;;){var g=u.return;if(g===null)break;var E=g.alternate;if(E===null){if(f=g.return,f!==null){u=f;continue}break}if(g.child===E.child){for(E=g.child;E;){if(E===u)return dr(g),s;if(E===f)return dr(g),a;E=E.sibling}throw Error(t(188))}if(u.return!==f.return)u=g,f=E;else{for(var I=!1,D=g.child;D;){if(D===u){I=!0,u=g,f=E;break}if(D===f){I=!0,f=g,u=E;break}D=D.sibling}if(!I){for(D=E.child;D;){if(D===u){I=!0,u=E,f=g;break}if(D===f){I=!0,f=E,u=g;break}D=D.sibling}if(!I)throw Error(t(189))}}if(u.alternate!==f)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?s:a}function xl(s){return s=Uc(s),s!==null?Ho(s):null}function Ho(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var a=Ho(s);if(a!==null)return a;s=s.sibling}return null}var Go=e.unstable_scheduleCallback,Pl=e.unstable_cancelCallback,Bc=e.unstable_shouldYield,lp=e.unstable_requestPaint,st=e.unstable_now,jc=e.unstable_getCurrentPriorityLevel,$s=e.unstable_ImmediatePriority,Fi=e.unstable_UserBlockingPriority,Hn=e.unstable_NormalPriority,kl=e.unstable_LowPriority,zc=e.unstable_IdlePriority,Ws=null,Dn=null;function $c(s){if(Dn&&typeof Dn.onCommitFiberRoot=="function")try{Dn.onCommitFiberRoot(Ws,s,void 0,(s.current.flags&128)===128)}catch{}}var pn=Math.clz32?Math.clz32:Hc,Nl=Math.log,Wc=Math.LN2;function Hc(s){return s>>>=0,s===0?32:31-(Nl(s)/Wc|0)|0}var qo=64,Ko=4194304;function Ui(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function Hs(s,a){var u=s.pendingLanes;if(u===0)return 0;var f=0,g=s.suspendedLanes,E=s.pingedLanes,I=u&268435455;if(I!==0){var D=I&~g;D!==0?f=Ui(D):(E&=I,E!==0&&(f=Ui(E)))}else I=u&~g,I!==0?f=Ui(I):E!==0&&(f=Ui(E));if(f===0)return 0;if(a!==0&&a!==f&&!(a&g)&&(g=f&-f,E=a&-a,g>=E||g===16&&(E&4194240)!==0))return a;if(f&4&&(f|=u&16),a=s.entangledLanes,a!==0)for(s=s.entanglements,a&=f;0<a;)u=31-pn(a),g=1<<u,f|=s[u],a&=~g;return f}function up(s,a){switch(s){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ai(s,a){for(var u=s.suspendedLanes,f=s.pingedLanes,g=s.expirationTimes,E=s.pendingLanes;0<E;){var I=31-pn(E),D=1<<I,F=g[I];F===-1?(!(D&u)||D&f)&&(g[I]=up(D,a)):F<=a&&(s.expiredLanes|=D),E&=~D}}function On(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function Gs(){var s=qo;return qo<<=1,!(qo&4194240)&&(qo=64),s}function Bi(s){for(var a=[],u=0;31>u;u++)a.push(s);return a}function ji(s,a,u){s.pendingLanes|=a,a!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,a=31-pn(a),s[a]=u}function it(s,a){var u=s.pendingLanes&~a;s.pendingLanes=a,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=a,s.mutableReadLanes&=a,s.entangledLanes&=a,a=s.entanglements;var f=s.eventTimes;for(s=s.expirationTimes;0<u;){var g=31-pn(u),E=1<<g;a[g]=0,f[g]=-1,s[g]=-1,u&=~E}}function zi(s,a){var u=s.entangledLanes|=a;for(s=s.entanglements;u;){var f=31-pn(u),g=1<<f;g&a|s[f]&a&&(s[f]|=a),u&=~g}}var je=0;function $i(s){return s&=-s,1<s?4<s?s&268435455?16:536870912:4:1}var Gc,Qo,qc,Kc,Qc,Dl=!1,Mr=[],Qt=null,hr=null,fr=null,Wi=new Map,Gn=new Map,Vr=[],cp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Yc(s,a){switch(s){case"focusin":case"focusout":Qt=null;break;case"dragenter":case"dragleave":hr=null;break;case"mouseover":case"mouseout":fr=null;break;case"pointerover":case"pointerout":Wi.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gn.delete(a.pointerId)}}function Sn(s,a,u,f,g,E){return s===null||s.nativeEvent!==E?(s={blockedOn:a,domEventName:u,eventSystemFlags:f,nativeEvent:E,targetContainers:[g]},a!==null&&(a=Kl(a),a!==null&&Qo(a)),s):(s.eventSystemFlags|=f,a=s.targetContainers,g!==null&&a.indexOf(g)===-1&&a.push(g),s)}function dp(s,a,u,f,g){switch(a){case"focusin":return Qt=Sn(Qt,s,a,u,f,g),!0;case"dragenter":return hr=Sn(hr,s,a,u,f,g),!0;case"mouseover":return fr=Sn(fr,s,a,u,f,g),!0;case"pointerover":var E=g.pointerId;return Wi.set(E,Sn(Wi.get(E)||null,s,a,u,f,g)),!0;case"gotpointercapture":return E=g.pointerId,Gn.set(E,Sn(Gn.get(E)||null,s,a,u,f,g)),!0}return!1}function Xc(s){var a=Xs(s.target);if(a!==null){var u=cr(a);if(u!==null){if(a=u.tag,a===13){if(a=zs(u),a!==null){s.blockedOn=a,Qc(s.priority,function(){qc(u)});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){s.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}s.blockedOn=null}function li(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var u=Yo(s.domEventName,s.eventSystemFlags,a[0],s.nativeEvent);if(u===null){u=s.nativeEvent;var f=new u.constructor(u.type,u);Fs=f,u.target.dispatchEvent(f),Fs=null}else return a=Kl(u),a!==null&&Qo(a),s.blockedOn=u,!1;a.shift()}return!0}function qs(s,a,u){li(s)&&u.delete(a)}function Jc(){Dl=!1,Qt!==null&&li(Qt)&&(Qt=null),hr!==null&&li(hr)&&(hr=null),fr!==null&&li(fr)&&(fr=null),Wi.forEach(qs),Gn.forEach(qs)}function pr(s,a){s.blockedOn===a&&(s.blockedOn=null,Dl||(Dl=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Jc)))}function mr(s){function a(g){return pr(g,s)}if(0<Mr.length){pr(Mr[0],s);for(var u=1;u<Mr.length;u++){var f=Mr[u];f.blockedOn===s&&(f.blockedOn=null)}}for(Qt!==null&&pr(Qt,s),hr!==null&&pr(hr,s),fr!==null&&pr(fr,s),Wi.forEach(a),Gn.forEach(a),u=0;u<Vr.length;u++)f=Vr[u],f.blockedOn===s&&(f.blockedOn=null);for(;0<Vr.length&&(u=Vr[0],u.blockedOn===null);)Xc(u),u.blockedOn===null&&Vr.shift()}var ui=H.ReactCurrentBatchConfig,Hi=!0;function dt(s,a,u,f){var g=je,E=ui.transition;ui.transition=null;try{je=1,Ol(s,a,u,f)}finally{je=g,ui.transition=E}}function hp(s,a,u,f){var g=je,E=ui.transition;ui.transition=null;try{je=4,Ol(s,a,u,f)}finally{je=g,ui.transition=E}}function Ol(s,a,u,f){if(Hi){var g=Yo(s,a,u,f);if(g===null)Ip(s,a,f,Ks,u),Yc(s,f);else if(dp(g,s,a,u,f))f.stopPropagation();else if(Yc(s,f),a&4&&-1<cp.indexOf(s)){for(;g!==null;){var E=Kl(g);if(E!==null&&Gc(E),E=Yo(s,a,u,f),E===null&&Ip(s,a,f,Ks,u),E===g)break;g=E}g!==null&&f.stopPropagation()}else Ip(s,a,f,null,u)}}var Ks=null;function Yo(s,a,u,f){if(Ks=null,s=Uo(f),s=Xs(s),s!==null)if(a=cr(s),a===null)s=null;else if(u=a.tag,u===13){if(s=zs(a),s!==null)return s;s=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null);return Ks=s,null}function Ll(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(jc()){case $s:return 1;case Fi:return 4;case Hn:case kl:return 16;case zc:return 536870912;default:return 16}default:return 16}}var Ln=null,Xo=null,Cn=null;function Ml(){if(Cn)return Cn;var s,a=Xo,u=a.length,f,g="value"in Ln?Ln.value:Ln.textContent,E=g.length;for(s=0;s<u&&a[s]===g[s];s++);var I=u-s;for(f=1;f<=I&&a[u-f]===g[E-f];f++);return Cn=g.slice(s,1<f?1-f:void 0)}function Jo(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function Fr(){return!0}function Vl(){return!1}function Yt(s){function a(u,f,g,E,I){this._reactName=u,this._targetInst=g,this.type=f,this.nativeEvent=E,this.target=I,this.currentTarget=null;for(var D in s)s.hasOwnProperty(D)&&(u=s[D],this[D]=u?u(E):E[D]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?Fr:Vl,this.isPropagationStopped=Vl,this}return ue(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Fr)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Fr)},persist:function(){},isPersistent:Fr}),a}var gr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zo=Yt(gr),Ur=ue({},gr,{view:0,detail:0}),fp=Yt(Ur),ea,ci,Gi,Qs=ue({},Ur,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Br,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Gi&&(Gi&&s.type==="mousemove"?(ea=s.screenX-Gi.screenX,ci=s.screenY-Gi.screenY):ci=ea=0,Gi=s),ea)},movementY:function(s){return"movementY"in s?s.movementY:ci}}),ta=Yt(Qs),Fl=ue({},Qs,{dataTransfer:0}),Zc=Yt(Fl),na=ue({},Ur,{relatedTarget:0}),ra=Yt(na),ed=ue({},gr,{animationName:0,elapsedTime:0,pseudoElement:0}),di=Yt(ed),td=ue({},gr,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),nd=Yt(td),rd=ue({},gr,{data:0}),Ul=Yt(rd),ia={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},id={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sd(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=id[s])?!!a[s]:!1}function Br(){return sd}var h=ue({},Ur,{key:function(s){if(s.key){var a=ia[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=Jo(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?mn[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Br,charCode:function(s){return s.type==="keypress"?Jo(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Jo(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),v=Yt(h),T=ue({},Qs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),R=Yt(T),$=ue({},Ur,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Br}),Q=Yt($),le=ue({},gr,{propertyName:0,elapsedTime:0,pseudoElement:0}),tt=Yt(le),Dt=ue({},Qs,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),We=Yt(Dt),jt=[9,13,27,32],bt=c&&"CompositionEvent"in window,qn=null;c&&"documentMode"in document&&(qn=document.documentMode);var Mn=c&&"TextEvent"in window&&!qn,Ys=c&&(!bt||qn&&8<qn&&11>=qn),sa=" ",wv=!1;function Tv(s,a){switch(s){case"keyup":return jt.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Iv(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var oa=!1;function MA(s,a){switch(s){case"compositionend":return Iv(a);case"keypress":return a.which!==32?null:(wv=!0,sa);case"textInput":return s=a.data,s===sa&&wv?null:s;default:return null}}function VA(s,a){if(oa)return s==="compositionend"||!bt&&Tv(s,a)?(s=Ml(),Cn=Xo=Ln=null,oa=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Ys&&a.locale!=="ko"?null:a.data;default:return null}}var FA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sv(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!FA[s.type]:a==="textarea"}function Cv(s,a,u,f){Lr(f),a=cd(a,"onChange"),0<a.length&&(u=new Zo("onChange","change",null,u,f),s.push({event:u,listeners:a}))}var Bl=null,jl=null;function UA(s){$v(s,0)}function od(s){var a=da(s);if(Pt(a))return s}function BA(s,a){if(s==="change")return a}var bv=!1;if(c){var pp;if(c){var mp="oninput"in document;if(!mp){var Rv=document.createElement("div");Rv.setAttribute("oninput","return;"),mp=typeof Rv.oninput=="function"}pp=mp}else pp=!1;bv=pp&&(!document.documentMode||9<document.documentMode)}function Av(){Bl&&(Bl.detachEvent("onpropertychange",xv),jl=Bl=null)}function xv(s){if(s.propertyName==="value"&&od(jl)){var a=[];Cv(a,jl,s,Uo(s)),Rl(UA,a)}}function jA(s,a,u){s==="focusin"?(Av(),Bl=a,jl=u,Bl.attachEvent("onpropertychange",xv)):s==="focusout"&&Av()}function zA(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return od(jl)}function $A(s,a){if(s==="click")return od(a)}function WA(s,a){if(s==="input"||s==="change")return od(a)}function HA(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var _r=typeof Object.is=="function"?Object.is:HA;function zl(s,a){if(_r(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var u=Object.keys(s),f=Object.keys(a);if(u.length!==f.length)return!1;for(f=0;f<u.length;f++){var g=u[f];if(!d.call(a,g)||!_r(s[g],a[g]))return!1}return!0}function Pv(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function kv(s,a){var u=Pv(s);s=0;for(var f;u;){if(u.nodeType===3){if(f=s+u.textContent.length,s<=a&&f>=a)return{node:u,offset:a-s};s=f}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=Pv(u)}}function Nv(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?Nv(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function Dv(){for(var s=window,a=In();a instanceof s.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)s=a.contentWindow;else break;a=In(s.document)}return a}function gp(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}function GA(s){var a=Dv(),u=s.focusedElem,f=s.selectionRange;if(a!==u&&u&&u.ownerDocument&&Nv(u.ownerDocument.documentElement,u)){if(f!==null&&gp(u)){if(a=f.start,s=f.end,s===void 0&&(s=a),"selectionStart"in u)u.selectionStart=a,u.selectionEnd=Math.min(s,u.value.length);else if(s=(a=u.ownerDocument||document)&&a.defaultView||window,s.getSelection){s=s.getSelection();var g=u.textContent.length,E=Math.min(f.start,g);f=f.end===void 0?E:Math.min(f.end,g),!s.extend&&E>f&&(g=f,f=E,E=g),g=kv(u,E);var I=kv(u,f);g&&I&&(s.rangeCount!==1||s.anchorNode!==g.node||s.anchorOffset!==g.offset||s.focusNode!==I.node||s.focusOffset!==I.offset)&&(a=a.createRange(),a.setStart(g.node,g.offset),s.removeAllRanges(),E>f?(s.addRange(a),s.extend(I.node,I.offset)):(a.setEnd(I.node,I.offset),s.addRange(a)))}}for(a=[],s=u;s=s.parentNode;)s.nodeType===1&&a.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<a.length;u++)s=a[u],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var qA=c&&"documentMode"in document&&11>=document.documentMode,aa=null,_p=null,$l=null,yp=!1;function Ov(s,a,u){var f=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;yp||aa==null||aa!==In(f)||(f=aa,"selectionStart"in f&&gp(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),$l&&zl($l,f)||($l=f,f=cd(_p,"onSelect"),0<f.length&&(a=new Zo("onSelect","select",null,a,u),s.push({event:a,listeners:f}),a.target=aa)))}function ad(s,a){var u={};return u[s.toLowerCase()]=a.toLowerCase(),u["Webkit"+s]="webkit"+a,u["Moz"+s]="moz"+a,u}var la={animationend:ad("Animation","AnimationEnd"),animationiteration:ad("Animation","AnimationIteration"),animationstart:ad("Animation","AnimationStart"),transitionend:ad("Transition","TransitionEnd")},vp={},Lv={};c&&(Lv=document.createElement("div").style,"AnimationEvent"in window||(delete la.animationend.animation,delete la.animationiteration.animation,delete la.animationstart.animation),"TransitionEvent"in window||delete la.transitionend.transition);function ld(s){if(vp[s])return vp[s];if(!la[s])return s;var a=la[s],u;for(u in a)if(a.hasOwnProperty(u)&&u in Lv)return vp[s]=a[u];return s}var Mv=ld("animationend"),Vv=ld("animationiteration"),Fv=ld("animationstart"),Uv=ld("transitionend"),Bv=new Map,jv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qi(s,a){Bv.set(s,a),o(a,[s])}for(var Ep=0;Ep<jv.length;Ep++){var wp=jv[Ep],KA=wp.toLowerCase(),QA=wp[0].toUpperCase()+wp.slice(1);qi(KA,"on"+QA)}qi(Mv,"onAnimationEnd"),qi(Vv,"onAnimationIteration"),qi(Fv,"onAnimationStart"),qi("dblclick","onDoubleClick"),qi("focusin","onFocus"),qi("focusout","onBlur"),qi(Uv,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),YA=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wl));function zv(s,a,u){var f=s.type||"unknown-event";s.currentTarget=u,Fc(f,a,void 0,s),s.currentTarget=null}function $v(s,a){a=(a&4)!==0;for(var u=0;u<s.length;u++){var f=s[u],g=f.event;f=f.listeners;e:{var E=void 0;if(a)for(var I=f.length-1;0<=I;I--){var D=f[I],F=D.instance,K=D.currentTarget;if(D=D.listener,F!==E&&g.isPropagationStopped())break e;zv(g,D,K),E=F}else for(I=0;I<f.length;I++){if(D=f[I],F=D.instance,K=D.currentTarget,D=D.listener,F!==E&&g.isPropagationStopped())break e;zv(g,D,K),E=F}}}if(ur)throw s=Al,ur=!1,Al=null,s}function ut(s,a){var u=a[xp];u===void 0&&(u=a[xp]=new Set);var f=s+"__bubble";u.has(f)||(Wv(a,s,2,!1),u.add(f))}function Tp(s,a,u){var f=0;a&&(f|=4),Wv(u,s,f,a)}var ud="_reactListening"+Math.random().toString(36).slice(2);function Hl(s){if(!s[ud]){s[ud]=!0,r.forEach(function(u){u!=="selectionchange"&&(YA.has(u)||Tp(u,!1,s),Tp(u,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[ud]||(a[ud]=!0,Tp("selectionchange",!1,a))}}function Wv(s,a,u,f){switch(Ll(a)){case 1:var g=dt;break;case 4:g=hp;break;default:g=Ol}u=g.bind(null,a,u,s),g=void 0,!zo||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(g=!0),f?g!==void 0?s.addEventListener(a,u,{capture:!0,passive:g}):s.addEventListener(a,u,!0):g!==void 0?s.addEventListener(a,u,{passive:g}):s.addEventListener(a,u,!1)}function Ip(s,a,u,f,g){var E=f;if(!(a&1)&&!(a&2)&&f!==null)e:for(;;){if(f===null)return;var I=f.tag;if(I===3||I===4){var D=f.stateNode.containerInfo;if(D===g||D.nodeType===8&&D.parentNode===g)break;if(I===4)for(I=f.return;I!==null;){var F=I.tag;if((F===3||F===4)&&(F=I.stateNode.containerInfo,F===g||F.nodeType===8&&F.parentNode===g))return;I=I.return}for(;D!==null;){if(I=Xs(D),I===null)return;if(F=I.tag,F===5||F===6){f=E=I;continue e}D=D.parentNode}}f=f.return}Rl(function(){var K=E,te=Uo(u),ne=[];e:{var ee=Bv.get(s);if(ee!==void 0){var ce=Zo,fe=s;switch(s){case"keypress":if(Jo(u)===0)break e;case"keydown":case"keyup":ce=v;break;case"focusin":fe="focus",ce=ra;break;case"focusout":fe="blur",ce=ra;break;case"beforeblur":case"afterblur":ce=ra;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ce=ta;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ce=Zc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ce=Q;break;case Mv:case Vv:case Fv:ce=di;break;case Uv:ce=tt;break;case"scroll":ce=fp;break;case"wheel":ce=We;break;case"copy":case"cut":case"paste":ce=nd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ce=R}var me=(a&4)!==0,St=!me&&s==="scroll",W=me?ee!==null?ee+"Capture":null:ee;me=[];for(var U=K,G;U!==null;){G=U;var se=G.stateNode;if(G.tag===5&&se!==null&&(G=se,W!==null&&(se=It(U,W),se!=null&&me.push(Gl(U,se,G)))),St)break;U=U.return}0<me.length&&(ee=new ce(ee,fe,null,u,te),ne.push({event:ee,listeners:me}))}}if(!(a&7)){e:{if(ee=s==="mouseover"||s==="pointerover",ce=s==="mouseout"||s==="pointerout",ee&&u!==Fs&&(fe=u.relatedTarget||u.fromElement)&&(Xs(fe)||fe[hi]))break e;if((ce||ee)&&(ee=te.window===te?te:(ee=te.ownerDocument)?ee.defaultView||ee.parentWindow:window,ce?(fe=u.relatedTarget||u.toElement,ce=K,fe=fe?Xs(fe):null,fe!==null&&(St=cr(fe),fe!==St||fe.tag!==5&&fe.tag!==6)&&(fe=null)):(ce=null,fe=K),ce!==fe)){if(me=ta,se="onMouseLeave",W="onMouseEnter",U="mouse",(s==="pointerout"||s==="pointerover")&&(me=R,se="onPointerLeave",W="onPointerEnter",U="pointer"),St=ce==null?ee:da(ce),G=fe==null?ee:da(fe),ee=new me(se,U+"leave",ce,u,te),ee.target=St,ee.relatedTarget=G,se=null,Xs(te)===K&&(me=new me(W,U+"enter",fe,u,te),me.target=G,me.relatedTarget=St,se=me),St=se,ce&&fe)t:{for(me=ce,W=fe,U=0,G=me;G;G=ua(G))U++;for(G=0,se=W;se;se=ua(se))G++;for(;0<U-G;)me=ua(me),U--;for(;0<G-U;)W=ua(W),G--;for(;U--;){if(me===W||W!==null&&me===W.alternate)break t;me=ua(me),W=ua(W)}me=null}else me=null;ce!==null&&Hv(ne,ee,ce,me,!1),fe!==null&&St!==null&&Hv(ne,St,fe,me,!0)}}e:{if(ee=K?da(K):window,ce=ee.nodeName&&ee.nodeName.toLowerCase(),ce==="select"||ce==="input"&&ee.type==="file")var ge=BA;else if(Sv(ee))if(bv)ge=WA;else{ge=zA;var ve=jA}else(ce=ee.nodeName)&&ce.toLowerCase()==="input"&&(ee.type==="checkbox"||ee.type==="radio")&&(ge=$A);if(ge&&(ge=ge(s,K))){Cv(ne,ge,u,te);break e}ve&&ve(s,ee,K),s==="focusout"&&(ve=ee._wrapperState)&&ve.controlled&&ee.type==="number"&&Mo(ee,"number",ee.value)}switch(ve=K?da(K):window,s){case"focusin":(Sv(ve)||ve.contentEditable==="true")&&(aa=ve,_p=K,$l=null);break;case"focusout":$l=_p=aa=null;break;case"mousedown":yp=!0;break;case"contextmenu":case"mouseup":case"dragend":yp=!1,Ov(ne,u,te);break;case"selectionchange":if(qA)break;case"keydown":case"keyup":Ov(ne,u,te)}var Ee;if(bt)e:{switch(s){case"compositionstart":var Ce="onCompositionStart";break e;case"compositionend":Ce="onCompositionEnd";break e;case"compositionupdate":Ce="onCompositionUpdate";break e}Ce=void 0}else oa?Tv(s,u)&&(Ce="onCompositionEnd"):s==="keydown"&&u.keyCode===229&&(Ce="onCompositionStart");Ce&&(Ys&&u.locale!=="ko"&&(oa||Ce!=="onCompositionStart"?Ce==="onCompositionEnd"&&oa&&(Ee=Ml()):(Ln=te,Xo="value"in Ln?Ln.value:Ln.textContent,oa=!0)),ve=cd(K,Ce),0<ve.length&&(Ce=new Ul(Ce,s,null,u,te),ne.push({event:Ce,listeners:ve}),Ee?Ce.data=Ee:(Ee=Iv(u),Ee!==null&&(Ce.data=Ee)))),(Ee=Mn?MA(s,u):VA(s,u))&&(K=cd(K,"onBeforeInput"),0<K.length&&(te=new Ul("onBeforeInput","beforeinput",null,u,te),ne.push({event:te,listeners:K}),te.data=Ee))}$v(ne,a)})}function Gl(s,a,u){return{instance:s,listener:a,currentTarget:u}}function cd(s,a){for(var u=a+"Capture",f=[];s!==null;){var g=s,E=g.stateNode;g.tag===5&&E!==null&&(g=E,E=It(s,u),E!=null&&f.unshift(Gl(s,E,g)),E=It(s,a),E!=null&&f.push(Gl(s,E,g))),s=s.return}return f}function ua(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function Hv(s,a,u,f,g){for(var E=a._reactName,I=[];u!==null&&u!==f;){var D=u,F=D.alternate,K=D.stateNode;if(F!==null&&F===f)break;D.tag===5&&K!==null&&(D=K,g?(F=It(u,E),F!=null&&I.unshift(Gl(u,F,D))):g||(F=It(u,E),F!=null&&I.push(Gl(u,F,D)))),u=u.return}I.length!==0&&s.push({event:a,listeners:I})}var XA=/\r\n?/g,JA=/\u0000|\uFFFD/g;function Gv(s){return(typeof s=="string"?s:""+s).replace(XA,`
`).replace(JA,"")}function dd(s,a,u){if(a=Gv(a),Gv(s)!==a&&u)throw Error(t(425))}function hd(){}var Sp=null,Cp=null;function bp(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Rp=typeof setTimeout=="function"?setTimeout:void 0,ZA=typeof clearTimeout=="function"?clearTimeout:void 0,qv=typeof Promise=="function"?Promise:void 0,ex=typeof queueMicrotask=="function"?queueMicrotask:typeof qv<"u"?function(s){return qv.resolve(null).then(s).catch(tx)}:Rp;function tx(s){setTimeout(function(){throw s})}function Ap(s,a){var u=a,f=0;do{var g=u.nextSibling;if(s.removeChild(u),g&&g.nodeType===8)if(u=g.data,u==="/$"){if(f===0){s.removeChild(g),mr(a);return}f--}else u!=="$"&&u!=="$?"&&u!=="$!"||f++;u=g}while(u);mr(a)}function Ki(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return s}function Kv(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var u=s.data;if(u==="$"||u==="$!"||u==="$?"){if(a===0)return s;a--}else u==="/$"&&a++}s=s.previousSibling}return null}var ca=Math.random().toString(36).slice(2),jr="__reactFiber$"+ca,ql="__reactProps$"+ca,hi="__reactContainer$"+ca,xp="__reactEvents$"+ca,nx="__reactListeners$"+ca,rx="__reactHandles$"+ca;function Xs(s){var a=s[jr];if(a)return a;for(var u=s.parentNode;u;){if(a=u[hi]||u[jr]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(s=Kv(s);s!==null;){if(u=s[jr])return u;s=Kv(s)}return a}s=u,u=s.parentNode}return null}function Kl(s){return s=s[jr]||s[hi],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function da(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(t(33))}function fd(s){return s[ql]||null}var Pp=[],ha=-1;function Qi(s){return{current:s}}function ct(s){0>ha||(s.current=Pp[ha],Pp[ha]=null,ha--)}function ot(s,a){ha++,Pp[ha]=s.current,s.current=a}var Yi={},on=Qi(Yi),bn=Qi(!1),Js=Yi;function fa(s,a){var u=s.type.contextTypes;if(!u)return Yi;var f=s.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===a)return f.__reactInternalMemoizedMaskedChildContext;var g={},E;for(E in u)g[E]=a[E];return f&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=a,s.__reactInternalMemoizedMaskedChildContext=g),g}function Rn(s){return s=s.childContextTypes,s!=null}function pd(){ct(bn),ct(on)}function Qv(s,a,u){if(on.current!==Yi)throw Error(t(168));ot(on,a),ot(bn,u)}function Yv(s,a,u){var f=s.stateNode;if(a=a.childContextTypes,typeof f.getChildContext!="function")return u;f=f.getChildContext();for(var g in f)if(!(g in a))throw Error(t(108,$e(s)||"Unknown",g));return ue({},u,f)}function md(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||Yi,Js=on.current,ot(on,s),ot(bn,bn.current),!0}function Xv(s,a,u){var f=s.stateNode;if(!f)throw Error(t(169));u?(s=Yv(s,a,Js),f.__reactInternalMemoizedMergedChildContext=s,ct(bn),ct(on),ot(on,s)):ct(bn),ot(bn,u)}var fi=null,gd=!1,kp=!1;function Jv(s){fi===null?fi=[s]:fi.push(s)}function ix(s){gd=!0,Jv(s)}function Xi(){if(!kp&&fi!==null){kp=!0;var s=0,a=je;try{var u=fi;for(je=1;s<u.length;s++){var f=u[s];do f=f(!0);while(f!==null)}fi=null,gd=!1}catch(g){throw fi!==null&&(fi=fi.slice(s+1)),Go($s,Xi),g}finally{je=a,kp=!1}}return null}var pa=[],ma=0,_d=null,yd=0,Kn=[],Qn=0,Zs=null,pi=1,mi="";function eo(s,a){pa[ma++]=yd,pa[ma++]=_d,_d=s,yd=a}function Zv(s,a,u){Kn[Qn++]=pi,Kn[Qn++]=mi,Kn[Qn++]=Zs,Zs=s;var f=pi;s=mi;var g=32-pn(f)-1;f&=~(1<<g),u+=1;var E=32-pn(a)+g;if(30<E){var I=g-g%5;E=(f&(1<<I)-1).toString(32),f>>=I,g-=I,pi=1<<32-pn(a)+g|u<<g|f,mi=E+s}else pi=1<<E|u<<g|f,mi=s}function Np(s){s.return!==null&&(eo(s,1),Zv(s,1,0))}function Dp(s){for(;s===_d;)_d=pa[--ma],pa[ma]=null,yd=pa[--ma],pa[ma]=null;for(;s===Zs;)Zs=Kn[--Qn],Kn[Qn]=null,mi=Kn[--Qn],Kn[Qn]=null,pi=Kn[--Qn],Kn[Qn]=null}var Vn=null,Fn=null,ht=!1,yr=null;function eE(s,a){var u=Zn(5,null,null,0);u.elementType="DELETED",u.stateNode=a,u.return=s,a=s.deletions,a===null?(s.deletions=[u],s.flags|=16):a.push(u)}function tE(s,a){switch(s.tag){case 5:var u=s.type;return a=a.nodeType!==1||u.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(s.stateNode=a,Vn=s,Fn=Ki(a.firstChild),!0):!1;case 6:return a=s.pendingProps===""||a.nodeType!==3?null:a,a!==null?(s.stateNode=a,Vn=s,Fn=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(u=Zs!==null?{id:pi,overflow:mi}:null,s.memoizedState={dehydrated:a,treeContext:u,retryLane:1073741824},u=Zn(18,null,null,0),u.stateNode=a,u.return=s,s.child=u,Vn=s,Fn=null,!0):!1;default:return!1}}function Op(s){return(s.mode&1)!==0&&(s.flags&128)===0}function Lp(s){if(ht){var a=Fn;if(a){var u=a;if(!tE(s,a)){if(Op(s))throw Error(t(418));a=Ki(u.nextSibling);var f=Vn;a&&tE(s,a)?eE(f,u):(s.flags=s.flags&-4097|2,ht=!1,Vn=s)}}else{if(Op(s))throw Error(t(418));s.flags=s.flags&-4097|2,ht=!1,Vn=s}}}function nE(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;Vn=s}function vd(s){if(s!==Vn)return!1;if(!ht)return nE(s),ht=!0,!1;var a;if((a=s.tag!==3)&&!(a=s.tag!==5)&&(a=s.type,a=a!=="head"&&a!=="body"&&!bp(s.type,s.memoizedProps)),a&&(a=Fn)){if(Op(s))throw rE(),Error(t(418));for(;a;)eE(s,a),a=Ki(a.nextSibling)}if(nE(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(t(317));e:{for(s=s.nextSibling,a=0;s;){if(s.nodeType===8){var u=s.data;if(u==="/$"){if(a===0){Fn=Ki(s.nextSibling);break e}a--}else u!=="$"&&u!=="$!"&&u!=="$?"||a++}s=s.nextSibling}Fn=null}}else Fn=Vn?Ki(s.stateNode.nextSibling):null;return!0}function rE(){for(var s=Fn;s;)s=Ki(s.nextSibling)}function ga(){Fn=Vn=null,ht=!1}function Mp(s){yr===null?yr=[s]:yr.push(s)}var sx=H.ReactCurrentBatchConfig;function Ql(s,a,u){if(s=u.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var f=u.stateNode}if(!f)throw Error(t(147,s));var g=f,E=""+s;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===E?a.ref:(a=function(I){var D=g.refs;I===null?delete D[E]:D[E]=I},a._stringRef=E,a)}if(typeof s!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,s))}return s}function Ed(s,a){throw s=Object.prototype.toString.call(a),Error(t(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s))}function iE(s){var a=s._init;return a(s._payload)}function sE(s){function a(W,U){if(s){var G=W.deletions;G===null?(W.deletions=[U],W.flags|=16):G.push(U)}}function u(W,U){if(!s)return null;for(;U!==null;)a(W,U),U=U.sibling;return null}function f(W,U){for(W=new Map;U!==null;)U.key!==null?W.set(U.key,U):W.set(U.index,U),U=U.sibling;return W}function g(W,U){return W=ss(W,U),W.index=0,W.sibling=null,W}function E(W,U,G){return W.index=G,s?(G=W.alternate,G!==null?(G=G.index,G<U?(W.flags|=2,U):G):(W.flags|=2,U)):(W.flags|=1048576,U)}function I(W){return s&&W.alternate===null&&(W.flags|=2),W}function D(W,U,G,se){return U===null||U.tag!==6?(U=Rm(G,W.mode,se),U.return=W,U):(U=g(U,G),U.return=W,U)}function F(W,U,G,se){var ge=G.type;return ge===x?te(W,U,G.props.children,se,G.key):U!==null&&(U.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===_t&&iE(ge)===U.type)?(se=g(U,G.props),se.ref=Ql(W,U,G),se.return=W,se):(se=Wd(G.type,G.key,G.props,null,W.mode,se),se.ref=Ql(W,U,G),se.return=W,se)}function K(W,U,G,se){return U===null||U.tag!==4||U.stateNode.containerInfo!==G.containerInfo||U.stateNode.implementation!==G.implementation?(U=Am(G,W.mode,se),U.return=W,U):(U=g(U,G.children||[]),U.return=W,U)}function te(W,U,G,se,ge){return U===null||U.tag!==7?(U=lo(G,W.mode,se,ge),U.return=W,U):(U=g(U,G),U.return=W,U)}function ne(W,U,G){if(typeof U=="string"&&U!==""||typeof U=="number")return U=Rm(""+U,W.mode,G),U.return=W,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case Y:return G=Wd(U.type,U.key,U.props,null,W.mode,G),G.ref=Ql(W,null,U),G.return=W,G;case X:return U=Am(U,W.mode,G),U.return=W,U;case _t:var se=U._init;return ne(W,se(U._payload),G)}if(ri(U)||ye(U))return U=lo(U,W.mode,G,null),U.return=W,U;Ed(W,U)}return null}function ee(W,U,G,se){var ge=U!==null?U.key:null;if(typeof G=="string"&&G!==""||typeof G=="number")return ge!==null?null:D(W,U,""+G,se);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case Y:return G.key===ge?F(W,U,G,se):null;case X:return G.key===ge?K(W,U,G,se):null;case _t:return ge=G._init,ee(W,U,ge(G._payload),se)}if(ri(G)||ye(G))return ge!==null?null:te(W,U,G,se,null);Ed(W,G)}return null}function ce(W,U,G,se,ge){if(typeof se=="string"&&se!==""||typeof se=="number")return W=W.get(G)||null,D(U,W,""+se,ge);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case Y:return W=W.get(se.key===null?G:se.key)||null,F(U,W,se,ge);case X:return W=W.get(se.key===null?G:se.key)||null,K(U,W,se,ge);case _t:var ve=se._init;return ce(W,U,G,ve(se._payload),ge)}if(ri(se)||ye(se))return W=W.get(G)||null,te(U,W,se,ge,null);Ed(U,se)}return null}function fe(W,U,G,se){for(var ge=null,ve=null,Ee=U,Ce=U=0,Wt=null;Ee!==null&&Ce<G.length;Ce++){Ee.index>Ce?(Wt=Ee,Ee=null):Wt=Ee.sibling;var Qe=ee(W,Ee,G[Ce],se);if(Qe===null){Ee===null&&(Ee=Wt);break}s&&Ee&&Qe.alternate===null&&a(W,Ee),U=E(Qe,U,Ce),ve===null?ge=Qe:ve.sibling=Qe,ve=Qe,Ee=Wt}if(Ce===G.length)return u(W,Ee),ht&&eo(W,Ce),ge;if(Ee===null){for(;Ce<G.length;Ce++)Ee=ne(W,G[Ce],se),Ee!==null&&(U=E(Ee,U,Ce),ve===null?ge=Ee:ve.sibling=Ee,ve=Ee);return ht&&eo(W,Ce),ge}for(Ee=f(W,Ee);Ce<G.length;Ce++)Wt=ce(Ee,W,Ce,G[Ce],se),Wt!==null&&(s&&Wt.alternate!==null&&Ee.delete(Wt.key===null?Ce:Wt.key),U=E(Wt,U,Ce),ve===null?ge=Wt:ve.sibling=Wt,ve=Wt);return s&&Ee.forEach(function(os){return a(W,os)}),ht&&eo(W,Ce),ge}function me(W,U,G,se){var ge=ye(G);if(typeof ge!="function")throw Error(t(150));if(G=ge.call(G),G==null)throw Error(t(151));for(var ve=ge=null,Ee=U,Ce=U=0,Wt=null,Qe=G.next();Ee!==null&&!Qe.done;Ce++,Qe=G.next()){Ee.index>Ce?(Wt=Ee,Ee=null):Wt=Ee.sibling;var os=ee(W,Ee,Qe.value,se);if(os===null){Ee===null&&(Ee=Wt);break}s&&Ee&&os.alternate===null&&a(W,Ee),U=E(os,U,Ce),ve===null?ge=os:ve.sibling=os,ve=os,Ee=Wt}if(Qe.done)return u(W,Ee),ht&&eo(W,Ce),ge;if(Ee===null){for(;!Qe.done;Ce++,Qe=G.next())Qe=ne(W,Qe.value,se),Qe!==null&&(U=E(Qe,U,Ce),ve===null?ge=Qe:ve.sibling=Qe,ve=Qe);return ht&&eo(W,Ce),ge}for(Ee=f(W,Ee);!Qe.done;Ce++,Qe=G.next())Qe=ce(Ee,W,Ce,Qe.value,se),Qe!==null&&(s&&Qe.alternate!==null&&Ee.delete(Qe.key===null?Ce:Qe.key),U=E(Qe,U,Ce),ve===null?ge=Qe:ve.sibling=Qe,ve=Qe);return s&&Ee.forEach(function(Vx){return a(W,Vx)}),ht&&eo(W,Ce),ge}function St(W,U,G,se){if(typeof G=="object"&&G!==null&&G.type===x&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case Y:e:{for(var ge=G.key,ve=U;ve!==null;){if(ve.key===ge){if(ge=G.type,ge===x){if(ve.tag===7){u(W,ve.sibling),U=g(ve,G.props.children),U.return=W,W=U;break e}}else if(ve.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===_t&&iE(ge)===ve.type){u(W,ve.sibling),U=g(ve,G.props),U.ref=Ql(W,ve,G),U.return=W,W=U;break e}u(W,ve);break}else a(W,ve);ve=ve.sibling}G.type===x?(U=lo(G.props.children,W.mode,se,G.key),U.return=W,W=U):(se=Wd(G.type,G.key,G.props,null,W.mode,se),se.ref=Ql(W,U,G),se.return=W,W=se)}return I(W);case X:e:{for(ve=G.key;U!==null;){if(U.key===ve)if(U.tag===4&&U.stateNode.containerInfo===G.containerInfo&&U.stateNode.implementation===G.implementation){u(W,U.sibling),U=g(U,G.children||[]),U.return=W,W=U;break e}else{u(W,U);break}else a(W,U);U=U.sibling}U=Am(G,W.mode,se),U.return=W,W=U}return I(W);case _t:return ve=G._init,St(W,U,ve(G._payload),se)}if(ri(G))return fe(W,U,G,se);if(ye(G))return me(W,U,G,se);Ed(W,G)}return typeof G=="string"&&G!==""||typeof G=="number"?(G=""+G,U!==null&&U.tag===6?(u(W,U.sibling),U=g(U,G),U.return=W,W=U):(u(W,U),U=Rm(G,W.mode,se),U.return=W,W=U),I(W)):u(W,U)}return St}var _a=sE(!0),oE=sE(!1),wd=Qi(null),Td=null,ya=null,Vp=null;function Fp(){Vp=ya=Td=null}function Up(s){var a=wd.current;ct(wd),s._currentValue=a}function Bp(s,a,u){for(;s!==null;){var f=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,f!==null&&(f.childLanes|=a)):f!==null&&(f.childLanes&a)!==a&&(f.childLanes|=a),s===u)break;s=s.return}}function va(s,a){Td=s,Vp=ya=null,s=s.dependencies,s!==null&&s.firstContext!==null&&(s.lanes&a&&(An=!0),s.firstContext=null)}function Yn(s){var a=s._currentValue;if(Vp!==s)if(s={context:s,memoizedValue:a,next:null},ya===null){if(Td===null)throw Error(t(308));ya=s,Td.dependencies={lanes:0,firstContext:s}}else ya=ya.next=s;return a}var to=null;function jp(s){to===null?to=[s]:to.push(s)}function aE(s,a,u,f){var g=a.interleaved;return g===null?(u.next=u,jp(a)):(u.next=g.next,g.next=u),a.interleaved=u,gi(s,f)}function gi(s,a){s.lanes|=a;var u=s.alternate;for(u!==null&&(u.lanes|=a),u=s,s=s.return;s!==null;)s.childLanes|=a,u=s.alternate,u!==null&&(u.childLanes|=a),u=s,s=s.return;return u.tag===3?u.stateNode:null}var Ji=!1;function zp(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lE(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function _i(s,a){return{eventTime:s,lane:a,tag:0,payload:null,callback:null,next:null}}function Zi(s,a,u){var f=s.updateQueue;if(f===null)return null;if(f=f.shared,qe&2){var g=f.pending;return g===null?a.next=a:(a.next=g.next,g.next=a),f.pending=a,gi(s,u)}return g=f.interleaved,g===null?(a.next=a,jp(f)):(a.next=g.next,g.next=a),f.interleaved=a,gi(s,u)}function Id(s,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194240)!==0)){var f=a.lanes;f&=s.pendingLanes,u|=f,a.lanes=u,zi(s,u)}}function uE(s,a){var u=s.updateQueue,f=s.alternate;if(f!==null&&(f=f.updateQueue,u===f)){var g=null,E=null;if(u=u.firstBaseUpdate,u!==null){do{var I={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};E===null?g=E=I:E=E.next=I,u=u.next}while(u!==null);E===null?g=E=a:E=E.next=a}else g=E=a;u={baseState:f.baseState,firstBaseUpdate:g,lastBaseUpdate:E,shared:f.shared,effects:f.effects},s.updateQueue=u;return}s=u.lastBaseUpdate,s===null?u.firstBaseUpdate=a:s.next=a,u.lastBaseUpdate=a}function Sd(s,a,u,f){var g=s.updateQueue;Ji=!1;var E=g.firstBaseUpdate,I=g.lastBaseUpdate,D=g.shared.pending;if(D!==null){g.shared.pending=null;var F=D,K=F.next;F.next=null,I===null?E=K:I.next=K,I=F;var te=s.alternate;te!==null&&(te=te.updateQueue,D=te.lastBaseUpdate,D!==I&&(D===null?te.firstBaseUpdate=K:D.next=K,te.lastBaseUpdate=F))}if(E!==null){var ne=g.baseState;I=0,te=K=F=null,D=E;do{var ee=D.lane,ce=D.eventTime;if((f&ee)===ee){te!==null&&(te=te.next={eventTime:ce,lane:0,tag:D.tag,payload:D.payload,callback:D.callback,next:null});e:{var fe=s,me=D;switch(ee=a,ce=u,me.tag){case 1:if(fe=me.payload,typeof fe=="function"){ne=fe.call(ce,ne,ee);break e}ne=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=me.payload,ee=typeof fe=="function"?fe.call(ce,ne,ee):fe,ee==null)break e;ne=ue({},ne,ee);break e;case 2:Ji=!0}}D.callback!==null&&D.lane!==0&&(s.flags|=64,ee=g.effects,ee===null?g.effects=[D]:ee.push(D))}else ce={eventTime:ce,lane:ee,tag:D.tag,payload:D.payload,callback:D.callback,next:null},te===null?(K=te=ce,F=ne):te=te.next=ce,I|=ee;if(D=D.next,D===null){if(D=g.shared.pending,D===null)break;ee=D,D=ee.next,ee.next=null,g.lastBaseUpdate=ee,g.shared.pending=null}}while(!0);if(te===null&&(F=ne),g.baseState=F,g.firstBaseUpdate=K,g.lastBaseUpdate=te,a=g.shared.interleaved,a!==null){g=a;do I|=g.lane,g=g.next;while(g!==a)}else E===null&&(g.shared.lanes=0);io|=I,s.lanes=I,s.memoizedState=ne}}function cE(s,a,u){if(s=a.effects,a.effects=null,s!==null)for(a=0;a<s.length;a++){var f=s[a],g=f.callback;if(g!==null){if(f.callback=null,f=u,typeof g!="function")throw Error(t(191,g));g.call(f)}}}var Yl={},zr=Qi(Yl),Xl=Qi(Yl),Jl=Qi(Yl);function no(s){if(s===Yl)throw Error(t(174));return s}function $p(s,a){switch(ot(Jl,a),ot(Xl,s),ot(zr,Yl),s=a.nodeType,s){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:Nt(null,"");break;default:s=s===8?a.parentNode:a,a=s.namespaceURI||null,s=s.tagName,a=Nt(a,s)}ct(zr),ot(zr,a)}function Ea(){ct(zr),ct(Xl),ct(Jl)}function dE(s){no(Jl.current);var a=no(zr.current),u=Nt(a,s.type);a!==u&&(ot(Xl,s),ot(zr,u))}function Wp(s){Xl.current===s&&(ct(zr),ct(Xl))}var pt=Qi(0);function Cd(s){for(var a=s;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if(a.flags&128)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Hp=[];function Gp(){for(var s=0;s<Hp.length;s++)Hp[s]._workInProgressVersionPrimary=null;Hp.length=0}var bd=H.ReactCurrentDispatcher,qp=H.ReactCurrentBatchConfig,ro=0,mt=null,Ot=null,zt=null,Rd=!1,Zl=!1,eu=0,ox=0;function an(){throw Error(t(321))}function Kp(s,a){if(a===null)return!1;for(var u=0;u<a.length&&u<s.length;u++)if(!_r(s[u],a[u]))return!1;return!0}function Qp(s,a,u,f,g,E){if(ro=E,mt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,bd.current=s===null||s.memoizedState===null?cx:dx,s=u(f,g),Zl){E=0;do{if(Zl=!1,eu=0,25<=E)throw Error(t(301));E+=1,zt=Ot=null,a.updateQueue=null,bd.current=hx,s=u(f,g)}while(Zl)}if(bd.current=Pd,a=Ot!==null&&Ot.next!==null,ro=0,zt=Ot=mt=null,Rd=!1,a)throw Error(t(300));return s}function Yp(){var s=eu!==0;return eu=0,s}function $r(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zt===null?mt.memoizedState=zt=s:zt=zt.next=s,zt}function Xn(){if(Ot===null){var s=mt.alternate;s=s!==null?s.memoizedState:null}else s=Ot.next;var a=zt===null?mt.memoizedState:zt.next;if(a!==null)zt=a,Ot=s;else{if(s===null)throw Error(t(310));Ot=s,s={memoizedState:Ot.memoizedState,baseState:Ot.baseState,baseQueue:Ot.baseQueue,queue:Ot.queue,next:null},zt===null?mt.memoizedState=zt=s:zt=zt.next=s}return zt}function tu(s,a){return typeof a=="function"?a(s):a}function Xp(s){var a=Xn(),u=a.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=s;var f=Ot,g=f.baseQueue,E=u.pending;if(E!==null){if(g!==null){var I=g.next;g.next=E.next,E.next=I}f.baseQueue=g=E,u.pending=null}if(g!==null){E=g.next,f=f.baseState;var D=I=null,F=null,K=E;do{var te=K.lane;if((ro&te)===te)F!==null&&(F=F.next={lane:0,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),f=K.hasEagerState?K.eagerState:s(f,K.action);else{var ne={lane:te,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null};F===null?(D=F=ne,I=f):F=F.next=ne,mt.lanes|=te,io|=te}K=K.next}while(K!==null&&K!==E);F===null?I=f:F.next=D,_r(f,a.memoizedState)||(An=!0),a.memoizedState=f,a.baseState=I,a.baseQueue=F,u.lastRenderedState=f}if(s=u.interleaved,s!==null){g=s;do E=g.lane,mt.lanes|=E,io|=E,g=g.next;while(g!==s)}else g===null&&(u.lanes=0);return[a.memoizedState,u.dispatch]}function Jp(s){var a=Xn(),u=a.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=s;var f=u.dispatch,g=u.pending,E=a.memoizedState;if(g!==null){u.pending=null;var I=g=g.next;do E=s(E,I.action),I=I.next;while(I!==g);_r(E,a.memoizedState)||(An=!0),a.memoizedState=E,a.baseQueue===null&&(a.baseState=E),u.lastRenderedState=E}return[E,f]}function hE(){}function fE(s,a){var u=mt,f=Xn(),g=a(),E=!_r(f.memoizedState,g);if(E&&(f.memoizedState=g,An=!0),f=f.queue,Zp(gE.bind(null,u,f,s),[s]),f.getSnapshot!==a||E||zt!==null&&zt.memoizedState.tag&1){if(u.flags|=2048,nu(9,mE.bind(null,u,f,g,a),void 0,null),$t===null)throw Error(t(349));ro&30||pE(u,a,g)}return g}function pE(s,a,u){s.flags|=16384,s={getSnapshot:a,value:u},a=mt.updateQueue,a===null?(a={lastEffect:null,stores:null},mt.updateQueue=a,a.stores=[s]):(u=a.stores,u===null?a.stores=[s]:u.push(s))}function mE(s,a,u,f){a.value=u,a.getSnapshot=f,_E(a)&&yE(s)}function gE(s,a,u){return u(function(){_E(a)&&yE(s)})}function _E(s){var a=s.getSnapshot;s=s.value;try{var u=a();return!_r(s,u)}catch{return!0}}function yE(s){var a=gi(s,1);a!==null&&Tr(a,s,1,-1)}function vE(s){var a=$r();return typeof s=="function"&&(s=s()),a.memoizedState=a.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:tu,lastRenderedState:s},a.queue=s,s=s.dispatch=ux.bind(null,mt,s),[a.memoizedState,s]}function nu(s,a,u,f){return s={tag:s,create:a,destroy:u,deps:f,next:null},a=mt.updateQueue,a===null?(a={lastEffect:null,stores:null},mt.updateQueue=a,a.lastEffect=s.next=s):(u=a.lastEffect,u===null?a.lastEffect=s.next=s:(f=u.next,u.next=s,s.next=f,a.lastEffect=s)),s}function EE(){return Xn().memoizedState}function Ad(s,a,u,f){var g=$r();mt.flags|=s,g.memoizedState=nu(1|a,u,void 0,f===void 0?null:f)}function xd(s,a,u,f){var g=Xn();f=f===void 0?null:f;var E=void 0;if(Ot!==null){var I=Ot.memoizedState;if(E=I.destroy,f!==null&&Kp(f,I.deps)){g.memoizedState=nu(a,u,E,f);return}}mt.flags|=s,g.memoizedState=nu(1|a,u,E,f)}function wE(s,a){return Ad(8390656,8,s,a)}function Zp(s,a){return xd(2048,8,s,a)}function TE(s,a){return xd(4,2,s,a)}function IE(s,a){return xd(4,4,s,a)}function SE(s,a){if(typeof a=="function")return s=s(),a(s),function(){a(null)};if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function CE(s,a,u){return u=u!=null?u.concat([s]):null,xd(4,4,SE.bind(null,a,s),u)}function em(){}function bE(s,a){var u=Xn();a=a===void 0?null:a;var f=u.memoizedState;return f!==null&&a!==null&&Kp(a,f[1])?f[0]:(u.memoizedState=[s,a],s)}function RE(s,a){var u=Xn();a=a===void 0?null:a;var f=u.memoizedState;return f!==null&&a!==null&&Kp(a,f[1])?f[0]:(s=s(),u.memoizedState=[s,a],s)}function AE(s,a,u){return ro&21?(_r(u,a)||(u=Gs(),mt.lanes|=u,io|=u,s.baseState=!0),a):(s.baseState&&(s.baseState=!1,An=!0),s.memoizedState=u)}function ax(s,a){var u=je;je=u!==0&&4>u?u:4,s(!0);var f=qp.transition;qp.transition={};try{s(!1),a()}finally{je=u,qp.transition=f}}function xE(){return Xn().memoizedState}function lx(s,a,u){var f=rs(s);if(u={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null},PE(s))kE(a,u);else if(u=aE(s,a,u,f),u!==null){var g=_n();Tr(u,s,f,g),NE(u,a,f)}}function ux(s,a,u){var f=rs(s),g={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null};if(PE(s))kE(a,g);else{var E=s.alternate;if(s.lanes===0&&(E===null||E.lanes===0)&&(E=a.lastRenderedReducer,E!==null))try{var I=a.lastRenderedState,D=E(I,u);if(g.hasEagerState=!0,g.eagerState=D,_r(D,I)){var F=a.interleaved;F===null?(g.next=g,jp(a)):(g.next=F.next,F.next=g),a.interleaved=g;return}}catch{}finally{}u=aE(s,a,g,f),u!==null&&(g=_n(),Tr(u,s,f,g),NE(u,a,f))}}function PE(s){var a=s.alternate;return s===mt||a!==null&&a===mt}function kE(s,a){Zl=Rd=!0;var u=s.pending;u===null?a.next=a:(a.next=u.next,u.next=a),s.pending=a}function NE(s,a,u){if(u&4194240){var f=a.lanes;f&=s.pendingLanes,u|=f,a.lanes=u,zi(s,u)}}var Pd={readContext:Yn,useCallback:an,useContext:an,useEffect:an,useImperativeHandle:an,useInsertionEffect:an,useLayoutEffect:an,useMemo:an,useReducer:an,useRef:an,useState:an,useDebugValue:an,useDeferredValue:an,useTransition:an,useMutableSource:an,useSyncExternalStore:an,useId:an,unstable_isNewReconciler:!1},cx={readContext:Yn,useCallback:function(s,a){return $r().memoizedState=[s,a===void 0?null:a],s},useContext:Yn,useEffect:wE,useImperativeHandle:function(s,a,u){return u=u!=null?u.concat([s]):null,Ad(4194308,4,SE.bind(null,a,s),u)},useLayoutEffect:function(s,a){return Ad(4194308,4,s,a)},useInsertionEffect:function(s,a){return Ad(4,2,s,a)},useMemo:function(s,a){var u=$r();return a=a===void 0?null:a,s=s(),u.memoizedState=[s,a],s},useReducer:function(s,a,u){var f=$r();return a=u!==void 0?u(a):a,f.memoizedState=f.baseState=a,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:a},f.queue=s,s=s.dispatch=lx.bind(null,mt,s),[f.memoizedState,s]},useRef:function(s){var a=$r();return s={current:s},a.memoizedState=s},useState:vE,useDebugValue:em,useDeferredValue:function(s){return $r().memoizedState=s},useTransition:function(){var s=vE(!1),a=s[0];return s=ax.bind(null,s[1]),$r().memoizedState=s,[a,s]},useMutableSource:function(){},useSyncExternalStore:function(s,a,u){var f=mt,g=$r();if(ht){if(u===void 0)throw Error(t(407));u=u()}else{if(u=a(),$t===null)throw Error(t(349));ro&30||pE(f,a,u)}g.memoizedState=u;var E={value:u,getSnapshot:a};return g.queue=E,wE(gE.bind(null,f,E,s),[s]),f.flags|=2048,nu(9,mE.bind(null,f,E,u,a),void 0,null),u},useId:function(){var s=$r(),a=$t.identifierPrefix;if(ht){var u=mi,f=pi;u=(f&~(1<<32-pn(f)-1)).toString(32)+u,a=":"+a+"R"+u,u=eu++,0<u&&(a+="H"+u.toString(32)),a+=":"}else u=ox++,a=":"+a+"r"+u.toString(32)+":";return s.memoizedState=a},unstable_isNewReconciler:!1},dx={readContext:Yn,useCallback:bE,useContext:Yn,useEffect:Zp,useImperativeHandle:CE,useInsertionEffect:TE,useLayoutEffect:IE,useMemo:RE,useReducer:Xp,useRef:EE,useState:function(){return Xp(tu)},useDebugValue:em,useDeferredValue:function(s){var a=Xn();return AE(a,Ot.memoizedState,s)},useTransition:function(){var s=Xp(tu)[0],a=Xn().memoizedState;return[s,a]},useMutableSource:hE,useSyncExternalStore:fE,useId:xE,unstable_isNewReconciler:!1},hx={readContext:Yn,useCallback:bE,useContext:Yn,useEffect:Zp,useImperativeHandle:CE,useInsertionEffect:TE,useLayoutEffect:IE,useMemo:RE,useReducer:Jp,useRef:EE,useState:function(){return Jp(tu)},useDebugValue:em,useDeferredValue:function(s){var a=Xn();return Ot===null?a.memoizedState=s:AE(a,Ot.memoizedState,s)},useTransition:function(){var s=Jp(tu)[0],a=Xn().memoizedState;return[s,a]},useMutableSource:hE,useSyncExternalStore:fE,useId:xE,unstable_isNewReconciler:!1};function vr(s,a){if(s&&s.defaultProps){a=ue({},a),s=s.defaultProps;for(var u in s)a[u]===void 0&&(a[u]=s[u]);return a}return a}function tm(s,a,u,f){a=s.memoizedState,u=u(f,a),u=u==null?a:ue({},a,u),s.memoizedState=u,s.lanes===0&&(s.updateQueue.baseState=u)}var kd={isMounted:function(s){return(s=s._reactInternals)?cr(s)===s:!1},enqueueSetState:function(s,a,u){s=s._reactInternals;var f=_n(),g=rs(s),E=_i(f,g);E.payload=a,u!=null&&(E.callback=u),a=Zi(s,E,g),a!==null&&(Tr(a,s,g,f),Id(a,s,g))},enqueueReplaceState:function(s,a,u){s=s._reactInternals;var f=_n(),g=rs(s),E=_i(f,g);E.tag=1,E.payload=a,u!=null&&(E.callback=u),a=Zi(s,E,g),a!==null&&(Tr(a,s,g,f),Id(a,s,g))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var u=_n(),f=rs(s),g=_i(u,f);g.tag=2,a!=null&&(g.callback=a),a=Zi(s,g,f),a!==null&&(Tr(a,s,f,u),Id(a,s,f))}};function DE(s,a,u,f,g,E,I){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(f,E,I):a.prototype&&a.prototype.isPureReactComponent?!zl(u,f)||!zl(g,E):!0}function OE(s,a,u){var f=!1,g=Yi,E=a.contextType;return typeof E=="object"&&E!==null?E=Yn(E):(g=Rn(a)?Js:on.current,f=a.contextTypes,E=(f=f!=null)?fa(s,g):Yi),a=new a(u,E),s.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=kd,s.stateNode=a,a._reactInternals=s,f&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=g,s.__reactInternalMemoizedMaskedChildContext=E),a}function LE(s,a,u,f){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,f),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,f),a.state!==s&&kd.enqueueReplaceState(a,a.state,null)}function nm(s,a,u,f){var g=s.stateNode;g.props=u,g.state=s.memoizedState,g.refs={},zp(s);var E=a.contextType;typeof E=="object"&&E!==null?g.context=Yn(E):(E=Rn(a)?Js:on.current,g.context=fa(s,E)),g.state=s.memoizedState,E=a.getDerivedStateFromProps,typeof E=="function"&&(tm(s,a,E,u),g.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(a=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),a!==g.state&&kd.enqueueReplaceState(g,g.state,null),Sd(s,u,g,f),g.state=s.memoizedState),typeof g.componentDidMount=="function"&&(s.flags|=4194308)}function wa(s,a){try{var u="",f=a;do u+=Ne(f),f=f.return;while(f);var g=u}catch(E){g=`
Error generating stack: `+E.message+`
`+E.stack}return{value:s,source:a,stack:g,digest:null}}function rm(s,a,u){return{value:s,source:null,stack:u??null,digest:a??null}}function im(s,a){try{console.error(a.value)}catch(u){setTimeout(function(){throw u})}}var fx=typeof WeakMap=="function"?WeakMap:Map;function ME(s,a,u){u=_i(-1,u),u.tag=3,u.payload={element:null};var f=a.value;return u.callback=function(){Fd||(Fd=!0,vm=f),im(s,a)},u}function VE(s,a,u){u=_i(-1,u),u.tag=3;var f=s.type.getDerivedStateFromError;if(typeof f=="function"){var g=a.value;u.payload=function(){return f(g)},u.callback=function(){im(s,a)}}var E=s.stateNode;return E!==null&&typeof E.componentDidCatch=="function"&&(u.callback=function(){im(s,a),typeof f!="function"&&(ts===null?ts=new Set([this]):ts.add(this));var I=a.stack;this.componentDidCatch(a.value,{componentStack:I!==null?I:""})}),u}function FE(s,a,u){var f=s.pingCache;if(f===null){f=s.pingCache=new fx;var g=new Set;f.set(a,g)}else g=f.get(a),g===void 0&&(g=new Set,f.set(a,g));g.has(u)||(g.add(u),s=Rx.bind(null,s,a,u),a.then(s,s))}function UE(s){do{var a;if((a=s.tag===13)&&(a=s.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return s;s=s.return}while(s!==null);return null}function BE(s,a,u,f,g){return s.mode&1?(s.flags|=65536,s.lanes=g,s):(s===a?s.flags|=65536:(s.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(a=_i(-1,1),a.tag=2,Zi(u,a,1))),u.lanes|=1),s)}var px=H.ReactCurrentOwner,An=!1;function gn(s,a,u,f){a.child=s===null?oE(a,null,u,f):_a(a,s.child,u,f)}function jE(s,a,u,f,g){u=u.render;var E=a.ref;return va(a,g),f=Qp(s,a,u,f,E,g),u=Yp(),s!==null&&!An?(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~g,yi(s,a,g)):(ht&&u&&Np(a),a.flags|=1,gn(s,a,f,g),a.child)}function zE(s,a,u,f,g){if(s===null){var E=u.type;return typeof E=="function"&&!bm(E)&&E.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(a.tag=15,a.type=E,$E(s,a,E,f,g)):(s=Wd(u.type,null,f,a,a.mode,g),s.ref=a.ref,s.return=a,a.child=s)}if(E=s.child,!(s.lanes&g)){var I=E.memoizedProps;if(u=u.compare,u=u!==null?u:zl,u(I,f)&&s.ref===a.ref)return yi(s,a,g)}return a.flags|=1,s=ss(E,f),s.ref=a.ref,s.return=a,a.child=s}function $E(s,a,u,f,g){if(s!==null){var E=s.memoizedProps;if(zl(E,f)&&s.ref===a.ref)if(An=!1,a.pendingProps=f=E,(s.lanes&g)!==0)s.flags&131072&&(An=!0);else return a.lanes=s.lanes,yi(s,a,g)}return sm(s,a,u,f,g)}function WE(s,a,u){var f=a.pendingProps,g=f.children,E=s!==null?s.memoizedState:null;if(f.mode==="hidden")if(!(a.mode&1))a.memoizedState={baseLanes:0,cachePool:null,transitions:null},ot(Ia,Un),Un|=u;else{if(!(u&1073741824))return s=E!==null?E.baseLanes|u:u,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:s,cachePool:null,transitions:null},a.updateQueue=null,ot(Ia,Un),Un|=s,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=E!==null?E.baseLanes:u,ot(Ia,Un),Un|=f}else E!==null?(f=E.baseLanes|u,a.memoizedState=null):f=u,ot(Ia,Un),Un|=f;return gn(s,a,g,u),a.child}function HE(s,a){var u=a.ref;(s===null&&u!==null||s!==null&&s.ref!==u)&&(a.flags|=512,a.flags|=2097152)}function sm(s,a,u,f,g){var E=Rn(u)?Js:on.current;return E=fa(a,E),va(a,g),u=Qp(s,a,u,f,E,g),f=Yp(),s!==null&&!An?(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~g,yi(s,a,g)):(ht&&f&&Np(a),a.flags|=1,gn(s,a,u,g),a.child)}function GE(s,a,u,f,g){if(Rn(u)){var E=!0;md(a)}else E=!1;if(va(a,g),a.stateNode===null)Dd(s,a),OE(a,u,f),nm(a,u,f,g),f=!0;else if(s===null){var I=a.stateNode,D=a.memoizedProps;I.props=D;var F=I.context,K=u.contextType;typeof K=="object"&&K!==null?K=Yn(K):(K=Rn(u)?Js:on.current,K=fa(a,K));var te=u.getDerivedStateFromProps,ne=typeof te=="function"||typeof I.getSnapshotBeforeUpdate=="function";ne||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(D!==f||F!==K)&&LE(a,I,f,K),Ji=!1;var ee=a.memoizedState;I.state=ee,Sd(a,f,I,g),F=a.memoizedState,D!==f||ee!==F||bn.current||Ji?(typeof te=="function"&&(tm(a,u,te,f),F=a.memoizedState),(D=Ji||DE(a,u,D,f,ee,F,K))?(ne||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount()),typeof I.componentDidMount=="function"&&(a.flags|=4194308)):(typeof I.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=f,a.memoizedState=F),I.props=f,I.state=F,I.context=K,f=D):(typeof I.componentDidMount=="function"&&(a.flags|=4194308),f=!1)}else{I=a.stateNode,lE(s,a),D=a.memoizedProps,K=a.type===a.elementType?D:vr(a.type,D),I.props=K,ne=a.pendingProps,ee=I.context,F=u.contextType,typeof F=="object"&&F!==null?F=Yn(F):(F=Rn(u)?Js:on.current,F=fa(a,F));var ce=u.getDerivedStateFromProps;(te=typeof ce=="function"||typeof I.getSnapshotBeforeUpdate=="function")||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(D!==ne||ee!==F)&&LE(a,I,f,F),Ji=!1,ee=a.memoizedState,I.state=ee,Sd(a,f,I,g);var fe=a.memoizedState;D!==ne||ee!==fe||bn.current||Ji?(typeof ce=="function"&&(tm(a,u,ce,f),fe=a.memoizedState),(K=Ji||DE(a,u,K,f,ee,fe,F)||!1)?(te||typeof I.UNSAFE_componentWillUpdate!="function"&&typeof I.componentWillUpdate!="function"||(typeof I.componentWillUpdate=="function"&&I.componentWillUpdate(f,fe,F),typeof I.UNSAFE_componentWillUpdate=="function"&&I.UNSAFE_componentWillUpdate(f,fe,F)),typeof I.componentDidUpdate=="function"&&(a.flags|=4),typeof I.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof I.componentDidUpdate!="function"||D===s.memoizedProps&&ee===s.memoizedState||(a.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||D===s.memoizedProps&&ee===s.memoizedState||(a.flags|=1024),a.memoizedProps=f,a.memoizedState=fe),I.props=f,I.state=fe,I.context=F,f=K):(typeof I.componentDidUpdate!="function"||D===s.memoizedProps&&ee===s.memoizedState||(a.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||D===s.memoizedProps&&ee===s.memoizedState||(a.flags|=1024),f=!1)}return om(s,a,u,f,E,g)}function om(s,a,u,f,g,E){HE(s,a);var I=(a.flags&128)!==0;if(!f&&!I)return g&&Xv(a,u,!1),yi(s,a,E);f=a.stateNode,px.current=a;var D=I&&typeof u.getDerivedStateFromError!="function"?null:f.render();return a.flags|=1,s!==null&&I?(a.child=_a(a,s.child,null,E),a.child=_a(a,null,D,E)):gn(s,a,D,E),a.memoizedState=f.state,g&&Xv(a,u,!0),a.child}function qE(s){var a=s.stateNode;a.pendingContext?Qv(s,a.pendingContext,a.pendingContext!==a.context):a.context&&Qv(s,a.context,!1),$p(s,a.containerInfo)}function KE(s,a,u,f,g){return ga(),Mp(g),a.flags|=256,gn(s,a,u,f),a.child}var am={dehydrated:null,treeContext:null,retryLane:0};function lm(s){return{baseLanes:s,cachePool:null,transitions:null}}function QE(s,a,u){var f=a.pendingProps,g=pt.current,E=!1,I=(a.flags&128)!==0,D;if((D=I)||(D=s!==null&&s.memoizedState===null?!1:(g&2)!==0),D?(E=!0,a.flags&=-129):(s===null||s.memoizedState!==null)&&(g|=1),ot(pt,g&1),s===null)return Lp(a),s=a.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?(a.mode&1?s.data==="$!"?a.lanes=8:a.lanes=1073741824:a.lanes=1,null):(I=f.children,s=f.fallback,E?(f=a.mode,E=a.child,I={mode:"hidden",children:I},!(f&1)&&E!==null?(E.childLanes=0,E.pendingProps=I):E=Hd(I,f,0,null),s=lo(s,f,u,null),E.return=a,s.return=a,E.sibling=s,a.child=E,a.child.memoizedState=lm(u),a.memoizedState=am,s):um(a,I));if(g=s.memoizedState,g!==null&&(D=g.dehydrated,D!==null))return mx(s,a,I,f,D,g,u);if(E){E=f.fallback,I=a.mode,g=s.child,D=g.sibling;var F={mode:"hidden",children:f.children};return!(I&1)&&a.child!==g?(f=a.child,f.childLanes=0,f.pendingProps=F,a.deletions=null):(f=ss(g,F),f.subtreeFlags=g.subtreeFlags&14680064),D!==null?E=ss(D,E):(E=lo(E,I,u,null),E.flags|=2),E.return=a,f.return=a,f.sibling=E,a.child=f,f=E,E=a.child,I=s.child.memoizedState,I=I===null?lm(u):{baseLanes:I.baseLanes|u,cachePool:null,transitions:I.transitions},E.memoizedState=I,E.childLanes=s.childLanes&~u,a.memoizedState=am,f}return E=s.child,s=E.sibling,f=ss(E,{mode:"visible",children:f.children}),!(a.mode&1)&&(f.lanes=u),f.return=a,f.sibling=null,s!==null&&(u=a.deletions,u===null?(a.deletions=[s],a.flags|=16):u.push(s)),a.child=f,a.memoizedState=null,f}function um(s,a){return a=Hd({mode:"visible",children:a},s.mode,0,null),a.return=s,s.child=a}function Nd(s,a,u,f){return f!==null&&Mp(f),_a(a,s.child,null,u),s=um(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function mx(s,a,u,f,g,E,I){if(u)return a.flags&256?(a.flags&=-257,f=rm(Error(t(422))),Nd(s,a,I,f)):a.memoizedState!==null?(a.child=s.child,a.flags|=128,null):(E=f.fallback,g=a.mode,f=Hd({mode:"visible",children:f.children},g,0,null),E=lo(E,g,I,null),E.flags|=2,f.return=a,E.return=a,f.sibling=E,a.child=f,a.mode&1&&_a(a,s.child,null,I),a.child.memoizedState=lm(I),a.memoizedState=am,E);if(!(a.mode&1))return Nd(s,a,I,null);if(g.data==="$!"){if(f=g.nextSibling&&g.nextSibling.dataset,f)var D=f.dgst;return f=D,E=Error(t(419)),f=rm(E,f,void 0),Nd(s,a,I,f)}if(D=(I&s.childLanes)!==0,An||D){if(f=$t,f!==null){switch(I&-I){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=g&(f.suspendedLanes|I)?0:g,g!==0&&g!==E.retryLane&&(E.retryLane=g,gi(s,g),Tr(f,s,g,-1))}return Cm(),f=rm(Error(t(421))),Nd(s,a,I,f)}return g.data==="$?"?(a.flags|=128,a.child=s.child,a=Ax.bind(null,s),g._reactRetry=a,null):(s=E.treeContext,Fn=Ki(g.nextSibling),Vn=a,ht=!0,yr=null,s!==null&&(Kn[Qn++]=pi,Kn[Qn++]=mi,Kn[Qn++]=Zs,pi=s.id,mi=s.overflow,Zs=a),a=um(a,f.children),a.flags|=4096,a)}function YE(s,a,u){s.lanes|=a;var f=s.alternate;f!==null&&(f.lanes|=a),Bp(s.return,a,u)}function cm(s,a,u,f,g){var E=s.memoizedState;E===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:f,tail:u,tailMode:g}:(E.isBackwards=a,E.rendering=null,E.renderingStartTime=0,E.last=f,E.tail=u,E.tailMode=g)}function XE(s,a,u){var f=a.pendingProps,g=f.revealOrder,E=f.tail;if(gn(s,a,f.children,u),f=pt.current,f&2)f=f&1|2,a.flags|=128;else{if(s!==null&&s.flags&128)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&YE(s,u,a);else if(s.tag===19)YE(s,u,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}f&=1}if(ot(pt,f),!(a.mode&1))a.memoizedState=null;else switch(g){case"forwards":for(u=a.child,g=null;u!==null;)s=u.alternate,s!==null&&Cd(s)===null&&(g=u),u=u.sibling;u=g,u===null?(g=a.child,a.child=null):(g=u.sibling,u.sibling=null),cm(a,!1,g,u,E);break;case"backwards":for(u=null,g=a.child,a.child=null;g!==null;){if(s=g.alternate,s!==null&&Cd(s)===null){a.child=g;break}s=g.sibling,g.sibling=u,u=g,g=s}cm(a,!0,u,null,E);break;case"together":cm(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Dd(s,a){!(a.mode&1)&&s!==null&&(s.alternate=null,a.alternate=null,a.flags|=2)}function yi(s,a,u){if(s!==null&&(a.dependencies=s.dependencies),io|=a.lanes,!(u&a.childLanes))return null;if(s!==null&&a.child!==s.child)throw Error(t(153));if(a.child!==null){for(s=a.child,u=ss(s,s.pendingProps),a.child=u,u.return=a;s.sibling!==null;)s=s.sibling,u=u.sibling=ss(s,s.pendingProps),u.return=a;u.sibling=null}return a.child}function gx(s,a,u){switch(a.tag){case 3:qE(a),ga();break;case 5:dE(a);break;case 1:Rn(a.type)&&md(a);break;case 4:$p(a,a.stateNode.containerInfo);break;case 10:var f=a.type._context,g=a.memoizedProps.value;ot(wd,f._currentValue),f._currentValue=g;break;case 13:if(f=a.memoizedState,f!==null)return f.dehydrated!==null?(ot(pt,pt.current&1),a.flags|=128,null):u&a.child.childLanes?QE(s,a,u):(ot(pt,pt.current&1),s=yi(s,a,u),s!==null?s.sibling:null);ot(pt,pt.current&1);break;case 19:if(f=(u&a.childLanes)!==0,s.flags&128){if(f)return XE(s,a,u);a.flags|=128}if(g=a.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),ot(pt,pt.current),f)break;return null;case 22:case 23:return a.lanes=0,WE(s,a,u)}return yi(s,a,u)}var JE,dm,ZE,ew;JE=function(s,a){for(var u=a.child;u!==null;){if(u.tag===5||u.tag===6)s.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},dm=function(){},ZE=function(s,a,u,f){var g=s.memoizedProps;if(g!==f){s=a.stateNode,no(zr.current);var E=null;switch(u){case"input":g=Ls(s,g),f=Ls(s,f),E=[];break;case"select":g=ue({},g,{value:void 0}),f=ue({},f,{value:void 0}),E=[];break;case"textarea":g=_l(s,g),f=_l(s,f),E=[];break;default:typeof g.onClick!="function"&&typeof f.onClick=="function"&&(s.onclick=hd)}Il(u,f);var I;u=null;for(K in g)if(!f.hasOwnProperty(K)&&g.hasOwnProperty(K)&&g[K]!=null)if(K==="style"){var D=g[K];for(I in D)D.hasOwnProperty(I)&&(u||(u={}),u[I]="")}else K!=="dangerouslySetInnerHTML"&&K!=="children"&&K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&K!=="autoFocus"&&(i.hasOwnProperty(K)?E||(E=[]):(E=E||[]).push(K,null));for(K in f){var F=f[K];if(D=g!=null?g[K]:void 0,f.hasOwnProperty(K)&&F!==D&&(F!=null||D!=null))if(K==="style")if(D){for(I in D)!D.hasOwnProperty(I)||F&&F.hasOwnProperty(I)||(u||(u={}),u[I]="");for(I in F)F.hasOwnProperty(I)&&D[I]!==F[I]&&(u||(u={}),u[I]=F[I])}else u||(E||(E=[]),E.push(K,u)),u=F;else K==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,D=D?D.__html:void 0,F!=null&&D!==F&&(E=E||[]).push(K,F)):K==="children"?typeof F!="string"&&typeof F!="number"||(E=E||[]).push(K,""+F):K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&(i.hasOwnProperty(K)?(F!=null&&K==="onScroll"&&ut("scroll",s),E||D===F||(E=[])):(E=E||[]).push(K,F))}u&&(E=E||[]).push("style",u);var K=E;(a.updateQueue=K)&&(a.flags|=4)}},ew=function(s,a,u,f){u!==f&&(a.flags|=4)};function ru(s,a){if(!ht)switch(s.tailMode){case"hidden":a=s.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?s.tail=null:u.sibling=null;break;case"collapsed":u=s.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:f.sibling=null}}function ln(s){var a=s.alternate!==null&&s.alternate.child===s.child,u=0,f=0;if(a)for(var g=s.child;g!==null;)u|=g.lanes|g.childLanes,f|=g.subtreeFlags&14680064,f|=g.flags&14680064,g.return=s,g=g.sibling;else for(g=s.child;g!==null;)u|=g.lanes|g.childLanes,f|=g.subtreeFlags,f|=g.flags,g.return=s,g=g.sibling;return s.subtreeFlags|=f,s.childLanes=u,a}function _x(s,a,u){var f=a.pendingProps;switch(Dp(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ln(a),null;case 1:return Rn(a.type)&&pd(),ln(a),null;case 3:return f=a.stateNode,Ea(),ct(bn),ct(on),Gp(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(s===null||s.child===null)&&(vd(a)?a.flags|=4:s===null||s.memoizedState.isDehydrated&&!(a.flags&256)||(a.flags|=1024,yr!==null&&(Tm(yr),yr=null))),dm(s,a),ln(a),null;case 5:Wp(a);var g=no(Jl.current);if(u=a.type,s!==null&&a.stateNode!=null)ZE(s,a,u,f,g),s.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!f){if(a.stateNode===null)throw Error(t(166));return ln(a),null}if(s=no(zr.current),vd(a)){f=a.stateNode,u=a.type;var E=a.memoizedProps;switch(f[jr]=a,f[ql]=E,s=(a.mode&1)!==0,u){case"dialog":ut("cancel",f),ut("close",f);break;case"iframe":case"object":case"embed":ut("load",f);break;case"video":case"audio":for(g=0;g<Wl.length;g++)ut(Wl[g],f);break;case"source":ut("error",f);break;case"img":case"image":case"link":ut("error",f),ut("load",f);break;case"details":ut("toggle",f);break;case"input":Lo(f,E),ut("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!E.multiple},ut("invalid",f);break;case"textarea":Vo(f,E),ut("invalid",f)}Il(u,E),g=null;for(var I in E)if(E.hasOwnProperty(I)){var D=E[I];I==="children"?typeof D=="string"?f.textContent!==D&&(E.suppressHydrationWarning!==!0&&dd(f.textContent,D,s),g=["children",D]):typeof D=="number"&&f.textContent!==""+D&&(E.suppressHydrationWarning!==!0&&dd(f.textContent,D,s),g=["children",""+D]):i.hasOwnProperty(I)&&D!=null&&I==="onScroll"&&ut("scroll",f)}switch(u){case"input":Dr(f),Vc(f,E,!0);break;case"textarea":Dr(f),yl(f);break;case"select":case"option":break;default:typeof E.onClick=="function"&&(f.onclick=hd)}f=g,a.updateQueue=f,f!==null&&(a.flags|=4)}else{I=g.nodeType===9?g:g.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=kt(u)),s==="http://www.w3.org/1999/xhtml"?u==="script"?(s=I.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof f.is=="string"?s=I.createElement(u,{is:f.is}):(s=I.createElement(u),u==="select"&&(I=s,f.multiple?I.multiple=!0:f.size&&(I.size=f.size))):s=I.createElementNS(s,u),s[jr]=a,s[ql]=f,JE(s,a,!1,!1),a.stateNode=s;e:{switch(I=Sl(u,f),u){case"dialog":ut("cancel",s),ut("close",s),g=f;break;case"iframe":case"object":case"embed":ut("load",s),g=f;break;case"video":case"audio":for(g=0;g<Wl.length;g++)ut(Wl[g],s);g=f;break;case"source":ut("error",s),g=f;break;case"img":case"image":case"link":ut("error",s),ut("load",s),g=f;break;case"details":ut("toggle",s),g=f;break;case"input":Lo(s,f),g=Ls(s,f),ut("invalid",s);break;case"option":g=f;break;case"select":s._wrapperState={wasMultiple:!!f.multiple},g=ue({},f,{value:void 0}),ut("invalid",s);break;case"textarea":Vo(s,f),g=_l(s,f),ut("invalid",s);break;default:g=f}Il(u,g),D=g;for(E in D)if(D.hasOwnProperty(E)){var F=D[E];E==="style"?wl(s,F):E==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,F!=null&&vl(s,F)):E==="children"?typeof F=="string"?(u!=="textarea"||F!=="")&&Vi(s,F):typeof F=="number"&&Vi(s,""+F):E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&E!=="autoFocus"&&(i.hasOwnProperty(E)?F!=null&&E==="onScroll"&&ut("scroll",s):F!=null&&j(s,E,F,I))}switch(u){case"input":Dr(s),Vc(s,f,!1);break;case"textarea":Dr(s),yl(s);break;case"option":f.value!=null&&s.setAttribute("value",""+Ge(f.value));break;case"select":s.multiple=!!f.multiple,E=f.value,E!=null?ii(s,!!f.multiple,E,!1):f.defaultValue!=null&&ii(s,!!f.multiple,f.defaultValue,!0);break;default:typeof g.onClick=="function"&&(s.onclick=hd)}switch(u){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return ln(a),null;case 6:if(s&&a.stateNode!=null)ew(s,a,s.memoizedProps,f);else{if(typeof f!="string"&&a.stateNode===null)throw Error(t(166));if(u=no(Jl.current),no(zr.current),vd(a)){if(f=a.stateNode,u=a.memoizedProps,f[jr]=a,(E=f.nodeValue!==u)&&(s=Vn,s!==null))switch(s.tag){case 3:dd(f.nodeValue,u,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&dd(f.nodeValue,u,(s.mode&1)!==0)}E&&(a.flags|=4)}else f=(u.nodeType===9?u:u.ownerDocument).createTextNode(f),f[jr]=a,a.stateNode=f}return ln(a),null;case 13:if(ct(pt),f=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(ht&&Fn!==null&&a.mode&1&&!(a.flags&128))rE(),ga(),a.flags|=98560,E=!1;else if(E=vd(a),f!==null&&f.dehydrated!==null){if(s===null){if(!E)throw Error(t(318));if(E=a.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(t(317));E[jr]=a}else ga(),!(a.flags&128)&&(a.memoizedState=null),a.flags|=4;ln(a),E=!1}else yr!==null&&(Tm(yr),yr=null),E=!0;if(!E)return a.flags&65536?a:null}return a.flags&128?(a.lanes=u,a):(f=f!==null,f!==(s!==null&&s.memoizedState!==null)&&f&&(a.child.flags|=8192,a.mode&1&&(s===null||pt.current&1?Lt===0&&(Lt=3):Cm())),a.updateQueue!==null&&(a.flags|=4),ln(a),null);case 4:return Ea(),dm(s,a),s===null&&Hl(a.stateNode.containerInfo),ln(a),null;case 10:return Up(a.type._context),ln(a),null;case 17:return Rn(a.type)&&pd(),ln(a),null;case 19:if(ct(pt),E=a.memoizedState,E===null)return ln(a),null;if(f=(a.flags&128)!==0,I=E.rendering,I===null)if(f)ru(E,!1);else{if(Lt!==0||s!==null&&s.flags&128)for(s=a.child;s!==null;){if(I=Cd(s),I!==null){for(a.flags|=128,ru(E,!1),f=I.updateQueue,f!==null&&(a.updateQueue=f,a.flags|=4),a.subtreeFlags=0,f=u,u=a.child;u!==null;)E=u,s=f,E.flags&=14680066,I=E.alternate,I===null?(E.childLanes=0,E.lanes=s,E.child=null,E.subtreeFlags=0,E.memoizedProps=null,E.memoizedState=null,E.updateQueue=null,E.dependencies=null,E.stateNode=null):(E.childLanes=I.childLanes,E.lanes=I.lanes,E.child=I.child,E.subtreeFlags=0,E.deletions=null,E.memoizedProps=I.memoizedProps,E.memoizedState=I.memoizedState,E.updateQueue=I.updateQueue,E.type=I.type,s=I.dependencies,E.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),u=u.sibling;return ot(pt,pt.current&1|2),a.child}s=s.sibling}E.tail!==null&&st()>Sa&&(a.flags|=128,f=!0,ru(E,!1),a.lanes=4194304)}else{if(!f)if(s=Cd(I),s!==null){if(a.flags|=128,f=!0,u=s.updateQueue,u!==null&&(a.updateQueue=u,a.flags|=4),ru(E,!0),E.tail===null&&E.tailMode==="hidden"&&!I.alternate&&!ht)return ln(a),null}else 2*st()-E.renderingStartTime>Sa&&u!==1073741824&&(a.flags|=128,f=!0,ru(E,!1),a.lanes=4194304);E.isBackwards?(I.sibling=a.child,a.child=I):(u=E.last,u!==null?u.sibling=I:a.child=I,E.last=I)}return E.tail!==null?(a=E.tail,E.rendering=a,E.tail=a.sibling,E.renderingStartTime=st(),a.sibling=null,u=pt.current,ot(pt,f?u&1|2:u&1),a):(ln(a),null);case 22:case 23:return Sm(),f=a.memoizedState!==null,s!==null&&s.memoizedState!==null!==f&&(a.flags|=8192),f&&a.mode&1?Un&1073741824&&(ln(a),a.subtreeFlags&6&&(a.flags|=8192)):ln(a),null;case 24:return null;case 25:return null}throw Error(t(156,a.tag))}function yx(s,a){switch(Dp(a),a.tag){case 1:return Rn(a.type)&&pd(),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return Ea(),ct(bn),ct(on),Gp(),s=a.flags,s&65536&&!(s&128)?(a.flags=s&-65537|128,a):null;case 5:return Wp(a),null;case 13:if(ct(pt),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(t(340));ga()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return ct(pt),null;case 4:return Ea(),null;case 10:return Up(a.type._context),null;case 22:case 23:return Sm(),null;case 24:return null;default:return null}}var Od=!1,un=!1,vx=typeof WeakSet=="function"?WeakSet:Set,he=null;function Ta(s,a){var u=s.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(f){vt(s,a,f)}else u.current=null}function hm(s,a,u){try{u()}catch(f){vt(s,a,f)}}var tw=!1;function Ex(s,a){if(Sp=Hi,s=Dv(),gp(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{u=(u=s.ownerDocument)&&u.defaultView||window;var f=u.getSelection&&u.getSelection();if(f&&f.rangeCount!==0){u=f.anchorNode;var g=f.anchorOffset,E=f.focusNode;f=f.focusOffset;try{u.nodeType,E.nodeType}catch{u=null;break e}var I=0,D=-1,F=-1,K=0,te=0,ne=s,ee=null;t:for(;;){for(var ce;ne!==u||g!==0&&ne.nodeType!==3||(D=I+g),ne!==E||f!==0&&ne.nodeType!==3||(F=I+f),ne.nodeType===3&&(I+=ne.nodeValue.length),(ce=ne.firstChild)!==null;)ee=ne,ne=ce;for(;;){if(ne===s)break t;if(ee===u&&++K===g&&(D=I),ee===E&&++te===f&&(F=I),(ce=ne.nextSibling)!==null)break;ne=ee,ee=ne.parentNode}ne=ce}u=D===-1||F===-1?null:{start:D,end:F}}else u=null}u=u||{start:0,end:0}}else u=null;for(Cp={focusedElem:s,selectionRange:u},Hi=!1,he=a;he!==null;)if(a=he,s=a.child,(a.subtreeFlags&1028)!==0&&s!==null)s.return=a,he=s;else for(;he!==null;){a=he;try{var fe=a.alternate;if(a.flags&1024)switch(a.tag){case 0:case 11:case 15:break;case 1:if(fe!==null){var me=fe.memoizedProps,St=fe.memoizedState,W=a.stateNode,U=W.getSnapshotBeforeUpdate(a.elementType===a.type?me:vr(a.type,me),St);W.__reactInternalSnapshotBeforeUpdate=U}break;case 3:var G=a.stateNode.containerInfo;G.nodeType===1?G.textContent="":G.nodeType===9&&G.documentElement&&G.removeChild(G.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(se){vt(a,a.return,se)}if(s=a.sibling,s!==null){s.return=a.return,he=s;break}he=a.return}return fe=tw,tw=!1,fe}function iu(s,a,u){var f=a.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var g=f=f.next;do{if((g.tag&s)===s){var E=g.destroy;g.destroy=void 0,E!==void 0&&hm(a,u,E)}g=g.next}while(g!==f)}}function Ld(s,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var u=a=a.next;do{if((u.tag&s)===s){var f=u.create;u.destroy=f()}u=u.next}while(u!==a)}}function fm(s){var a=s.ref;if(a!==null){var u=s.stateNode;switch(s.tag){case 5:s=u;break;default:s=u}typeof a=="function"?a(s):a.current=s}}function nw(s){var a=s.alternate;a!==null&&(s.alternate=null,nw(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&(delete a[jr],delete a[ql],delete a[xp],delete a[nx],delete a[rx])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function rw(s){return s.tag===5||s.tag===3||s.tag===4}function iw(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||rw(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function pm(s,a,u){var f=s.tag;if(f===5||f===6)s=s.stateNode,a?u.nodeType===8?u.parentNode.insertBefore(s,a):u.insertBefore(s,a):(u.nodeType===8?(a=u.parentNode,a.insertBefore(s,u)):(a=u,a.appendChild(s)),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=hd));else if(f!==4&&(s=s.child,s!==null))for(pm(s,a,u),s=s.sibling;s!==null;)pm(s,a,u),s=s.sibling}function mm(s,a,u){var f=s.tag;if(f===5||f===6)s=s.stateNode,a?u.insertBefore(s,a):u.appendChild(s);else if(f!==4&&(s=s.child,s!==null))for(mm(s,a,u),s=s.sibling;s!==null;)mm(s,a,u),s=s.sibling}var Xt=null,Er=!1;function es(s,a,u){for(u=u.child;u!==null;)sw(s,a,u),u=u.sibling}function sw(s,a,u){if(Dn&&typeof Dn.onCommitFiberUnmount=="function")try{Dn.onCommitFiberUnmount(Ws,u)}catch{}switch(u.tag){case 5:un||Ta(u,a);case 6:var f=Xt,g=Er;Xt=null,es(s,a,u),Xt=f,Er=g,Xt!==null&&(Er?(s=Xt,u=u.stateNode,s.nodeType===8?s.parentNode.removeChild(u):s.removeChild(u)):Xt.removeChild(u.stateNode));break;case 18:Xt!==null&&(Er?(s=Xt,u=u.stateNode,s.nodeType===8?Ap(s.parentNode,u):s.nodeType===1&&Ap(s,u),mr(s)):Ap(Xt,u.stateNode));break;case 4:f=Xt,g=Er,Xt=u.stateNode.containerInfo,Er=!0,es(s,a,u),Xt=f,Er=g;break;case 0:case 11:case 14:case 15:if(!un&&(f=u.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){g=f=f.next;do{var E=g,I=E.destroy;E=E.tag,I!==void 0&&(E&2||E&4)&&hm(u,a,I),g=g.next}while(g!==f)}es(s,a,u);break;case 1:if(!un&&(Ta(u,a),f=u.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=u.memoizedProps,f.state=u.memoizedState,f.componentWillUnmount()}catch(D){vt(u,a,D)}es(s,a,u);break;case 21:es(s,a,u);break;case 22:u.mode&1?(un=(f=un)||u.memoizedState!==null,es(s,a,u),un=f):es(s,a,u);break;default:es(s,a,u)}}function ow(s){var a=s.updateQueue;if(a!==null){s.updateQueue=null;var u=s.stateNode;u===null&&(u=s.stateNode=new vx),a.forEach(function(f){var g=xx.bind(null,s,f);u.has(f)||(u.add(f),f.then(g,g))})}}function wr(s,a){var u=a.deletions;if(u!==null)for(var f=0;f<u.length;f++){var g=u[f];try{var E=s,I=a,D=I;e:for(;D!==null;){switch(D.tag){case 5:Xt=D.stateNode,Er=!1;break e;case 3:Xt=D.stateNode.containerInfo,Er=!0;break e;case 4:Xt=D.stateNode.containerInfo,Er=!0;break e}D=D.return}if(Xt===null)throw Error(t(160));sw(E,I,g),Xt=null,Er=!1;var F=g.alternate;F!==null&&(F.return=null),g.return=null}catch(K){vt(g,a,K)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)aw(a,s),a=a.sibling}function aw(s,a){var u=s.alternate,f=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(wr(a,s),Wr(s),f&4){try{iu(3,s,s.return),Ld(3,s)}catch(me){vt(s,s.return,me)}try{iu(5,s,s.return)}catch(me){vt(s,s.return,me)}}break;case 1:wr(a,s),Wr(s),f&512&&u!==null&&Ta(u,u.return);break;case 5:if(wr(a,s),Wr(s),f&512&&u!==null&&Ta(u,u.return),s.flags&32){var g=s.stateNode;try{Vi(g,"")}catch(me){vt(s,s.return,me)}}if(f&4&&(g=s.stateNode,g!=null)){var E=s.memoizedProps,I=u!==null?u.memoizedProps:E,D=s.type,F=s.updateQueue;if(s.updateQueue=null,F!==null)try{D==="input"&&E.type==="radio"&&E.name!=null&&ml(g,E),Sl(D,I);var K=Sl(D,E);for(I=0;I<F.length;I+=2){var te=F[I],ne=F[I+1];te==="style"?wl(g,ne):te==="dangerouslySetInnerHTML"?vl(g,ne):te==="children"?Vi(g,ne):j(g,te,ne,K)}switch(D){case"input":gl(g,E);break;case"textarea":Fo(g,E);break;case"select":var ee=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!E.multiple;var ce=E.value;ce!=null?ii(g,!!E.multiple,ce,!1):ee!==!!E.multiple&&(E.defaultValue!=null?ii(g,!!E.multiple,E.defaultValue,!0):ii(g,!!E.multiple,E.multiple?[]:"",!1))}g[ql]=E}catch(me){vt(s,s.return,me)}}break;case 6:if(wr(a,s),Wr(s),f&4){if(s.stateNode===null)throw Error(t(162));g=s.stateNode,E=s.memoizedProps;try{g.nodeValue=E}catch(me){vt(s,s.return,me)}}break;case 3:if(wr(a,s),Wr(s),f&4&&u!==null&&u.memoizedState.isDehydrated)try{mr(a.containerInfo)}catch(me){vt(s,s.return,me)}break;case 4:wr(a,s),Wr(s);break;case 13:wr(a,s),Wr(s),g=s.child,g.flags&8192&&(E=g.memoizedState!==null,g.stateNode.isHidden=E,!E||g.alternate!==null&&g.alternate.memoizedState!==null||(ym=st())),f&4&&ow(s);break;case 22:if(te=u!==null&&u.memoizedState!==null,s.mode&1?(un=(K=un)||te,wr(a,s),un=K):wr(a,s),Wr(s),f&8192){if(K=s.memoizedState!==null,(s.stateNode.isHidden=K)&&!te&&s.mode&1)for(he=s,te=s.child;te!==null;){for(ne=he=te;he!==null;){switch(ee=he,ce=ee.child,ee.tag){case 0:case 11:case 14:case 15:iu(4,ee,ee.return);break;case 1:Ta(ee,ee.return);var fe=ee.stateNode;if(typeof fe.componentWillUnmount=="function"){f=ee,u=ee.return;try{a=f,fe.props=a.memoizedProps,fe.state=a.memoizedState,fe.componentWillUnmount()}catch(me){vt(f,u,me)}}break;case 5:Ta(ee,ee.return);break;case 22:if(ee.memoizedState!==null){cw(ne);continue}}ce!==null?(ce.return=ee,he=ce):cw(ne)}te=te.sibling}e:for(te=null,ne=s;;){if(ne.tag===5){if(te===null){te=ne;try{g=ne.stateNode,K?(E=g.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none"):(D=ne.stateNode,F=ne.memoizedProps.style,I=F!=null&&F.hasOwnProperty("display")?F.display:null,D.style.display=El("display",I))}catch(me){vt(s,s.return,me)}}}else if(ne.tag===6){if(te===null)try{ne.stateNode.nodeValue=K?"":ne.memoizedProps}catch(me){vt(s,s.return,me)}}else if((ne.tag!==22&&ne.tag!==23||ne.memoizedState===null||ne===s)&&ne.child!==null){ne.child.return=ne,ne=ne.child;continue}if(ne===s)break e;for(;ne.sibling===null;){if(ne.return===null||ne.return===s)break e;te===ne&&(te=null),ne=ne.return}te===ne&&(te=null),ne.sibling.return=ne.return,ne=ne.sibling}}break;case 19:wr(a,s),Wr(s),f&4&&ow(s);break;case 21:break;default:wr(a,s),Wr(s)}}function Wr(s){var a=s.flags;if(a&2){try{e:{for(var u=s.return;u!==null;){if(rw(u)){var f=u;break e}u=u.return}throw Error(t(160))}switch(f.tag){case 5:var g=f.stateNode;f.flags&32&&(Vi(g,""),f.flags&=-33);var E=iw(s);mm(s,E,g);break;case 3:case 4:var I=f.stateNode.containerInfo,D=iw(s);pm(s,D,I);break;default:throw Error(t(161))}}catch(F){vt(s,s.return,F)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function wx(s,a,u){he=s,lw(s)}function lw(s,a,u){for(var f=(s.mode&1)!==0;he!==null;){var g=he,E=g.child;if(g.tag===22&&f){var I=g.memoizedState!==null||Od;if(!I){var D=g.alternate,F=D!==null&&D.memoizedState!==null||un;D=Od;var K=un;if(Od=I,(un=F)&&!K)for(he=g;he!==null;)I=he,F=I.child,I.tag===22&&I.memoizedState!==null?dw(g):F!==null?(F.return=I,he=F):dw(g);for(;E!==null;)he=E,lw(E),E=E.sibling;he=g,Od=D,un=K}uw(s)}else g.subtreeFlags&8772&&E!==null?(E.return=g,he=E):uw(s)}}function uw(s){for(;he!==null;){var a=he;if(a.flags&8772){var u=a.alternate;try{if(a.flags&8772)switch(a.tag){case 0:case 11:case 15:un||Ld(5,a);break;case 1:var f=a.stateNode;if(a.flags&4&&!un)if(u===null)f.componentDidMount();else{var g=a.elementType===a.type?u.memoizedProps:vr(a.type,u.memoizedProps);f.componentDidUpdate(g,u.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var E=a.updateQueue;E!==null&&cE(a,E,f);break;case 3:var I=a.updateQueue;if(I!==null){if(u=null,a.child!==null)switch(a.child.tag){case 5:u=a.child.stateNode;break;case 1:u=a.child.stateNode}cE(a,I,u)}break;case 5:var D=a.stateNode;if(u===null&&a.flags&4){u=D;var F=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":F.autoFocus&&u.focus();break;case"img":F.src&&(u.src=F.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var K=a.alternate;if(K!==null){var te=K.memoizedState;if(te!==null){var ne=te.dehydrated;ne!==null&&mr(ne)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}un||a.flags&512&&fm(a)}catch(ee){vt(a,a.return,ee)}}if(a===s){he=null;break}if(u=a.sibling,u!==null){u.return=a.return,he=u;break}he=a.return}}function cw(s){for(;he!==null;){var a=he;if(a===s){he=null;break}var u=a.sibling;if(u!==null){u.return=a.return,he=u;break}he=a.return}}function dw(s){for(;he!==null;){var a=he;try{switch(a.tag){case 0:case 11:case 15:var u=a.return;try{Ld(4,a)}catch(F){vt(a,u,F)}break;case 1:var f=a.stateNode;if(typeof f.componentDidMount=="function"){var g=a.return;try{f.componentDidMount()}catch(F){vt(a,g,F)}}var E=a.return;try{fm(a)}catch(F){vt(a,E,F)}break;case 5:var I=a.return;try{fm(a)}catch(F){vt(a,I,F)}}}catch(F){vt(a,a.return,F)}if(a===s){he=null;break}var D=a.sibling;if(D!==null){D.return=a.return,he=D;break}he=a.return}}var Tx=Math.ceil,Md=H.ReactCurrentDispatcher,gm=H.ReactCurrentOwner,Jn=H.ReactCurrentBatchConfig,qe=0,$t=null,Rt=null,Jt=0,Un=0,Ia=Qi(0),Lt=0,su=null,io=0,Vd=0,_m=0,ou=null,xn=null,ym=0,Sa=1/0,vi=null,Fd=!1,vm=null,ts=null,Ud=!1,ns=null,Bd=0,au=0,Em=null,jd=-1,zd=0;function _n(){return qe&6?st():jd!==-1?jd:jd=st()}function rs(s){return s.mode&1?qe&2&&Jt!==0?Jt&-Jt:sx.transition!==null?(zd===0&&(zd=Gs()),zd):(s=je,s!==0||(s=window.event,s=s===void 0?16:Ll(s.type)),s):1}function Tr(s,a,u,f){if(50<au)throw au=0,Em=null,Error(t(185));ji(s,u,f),(!(qe&2)||s!==$t)&&(s===$t&&(!(qe&2)&&(Vd|=u),Lt===4&&is(s,Jt)),Pn(s,f),u===1&&qe===0&&!(a.mode&1)&&(Sa=st()+500,gd&&Xi()))}function Pn(s,a){var u=s.callbackNode;ai(s,a);var f=Hs(s,s===$t?Jt:0);if(f===0)u!==null&&Pl(u),s.callbackNode=null,s.callbackPriority=0;else if(a=f&-f,s.callbackPriority!==a){if(u!=null&&Pl(u),a===1)s.tag===0?ix(fw.bind(null,s)):Jv(fw.bind(null,s)),ex(function(){!(qe&6)&&Xi()}),u=null;else{switch($i(f)){case 1:u=$s;break;case 4:u=Fi;break;case 16:u=Hn;break;case 536870912:u=zc;break;default:u=Hn}u=ww(u,hw.bind(null,s))}s.callbackPriority=a,s.callbackNode=u}}function hw(s,a){if(jd=-1,zd=0,qe&6)throw Error(t(327));var u=s.callbackNode;if(Ca()&&s.callbackNode!==u)return null;var f=Hs(s,s===$t?Jt:0);if(f===0)return null;if(f&30||f&s.expiredLanes||a)a=$d(s,f);else{a=f;var g=qe;qe|=2;var E=mw();($t!==s||Jt!==a)&&(vi=null,Sa=st()+500,oo(s,a));do try{Cx();break}catch(D){pw(s,D)}while(!0);Fp(),Md.current=E,qe=g,Rt!==null?a=0:($t=null,Jt=0,a=Lt)}if(a!==0){if(a===2&&(g=On(s),g!==0&&(f=g,a=wm(s,g))),a===1)throw u=su,oo(s,0),is(s,f),Pn(s,st()),u;if(a===6)is(s,f);else{if(g=s.current.alternate,!(f&30)&&!Ix(g)&&(a=$d(s,f),a===2&&(E=On(s),E!==0&&(f=E,a=wm(s,E))),a===1))throw u=su,oo(s,0),is(s,f),Pn(s,st()),u;switch(s.finishedWork=g,s.finishedLanes=f,a){case 0:case 1:throw Error(t(345));case 2:ao(s,xn,vi);break;case 3:if(is(s,f),(f&130023424)===f&&(a=ym+500-st(),10<a)){if(Hs(s,0)!==0)break;if(g=s.suspendedLanes,(g&f)!==f){_n(),s.pingedLanes|=s.suspendedLanes&g;break}s.timeoutHandle=Rp(ao.bind(null,s,xn,vi),a);break}ao(s,xn,vi);break;case 4:if(is(s,f),(f&4194240)===f)break;for(a=s.eventTimes,g=-1;0<f;){var I=31-pn(f);E=1<<I,I=a[I],I>g&&(g=I),f&=~E}if(f=g,f=st()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*Tx(f/1960))-f,10<f){s.timeoutHandle=Rp(ao.bind(null,s,xn,vi),f);break}ao(s,xn,vi);break;case 5:ao(s,xn,vi);break;default:throw Error(t(329))}}}return Pn(s,st()),s.callbackNode===u?hw.bind(null,s):null}function wm(s,a){var u=ou;return s.current.memoizedState.isDehydrated&&(oo(s,a).flags|=256),s=$d(s,a),s!==2&&(a=xn,xn=u,a!==null&&Tm(a)),s}function Tm(s){xn===null?xn=s:xn.push.apply(xn,s)}function Ix(s){for(var a=s;;){if(a.flags&16384){var u=a.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var f=0;f<u.length;f++){var g=u[f],E=g.getSnapshot;g=g.value;try{if(!_r(E(),g))return!1}catch{return!1}}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function is(s,a){for(a&=~_m,a&=~Vd,s.suspendedLanes|=a,s.pingedLanes&=~a,s=s.expirationTimes;0<a;){var u=31-pn(a),f=1<<u;s[u]=-1,a&=~f}}function fw(s){if(qe&6)throw Error(t(327));Ca();var a=Hs(s,0);if(!(a&1))return Pn(s,st()),null;var u=$d(s,a);if(s.tag!==0&&u===2){var f=On(s);f!==0&&(a=f,u=wm(s,f))}if(u===1)throw u=su,oo(s,0),is(s,a),Pn(s,st()),u;if(u===6)throw Error(t(345));return s.finishedWork=s.current.alternate,s.finishedLanes=a,ao(s,xn,vi),Pn(s,st()),null}function Im(s,a){var u=qe;qe|=1;try{return s(a)}finally{qe=u,qe===0&&(Sa=st()+500,gd&&Xi())}}function so(s){ns!==null&&ns.tag===0&&!(qe&6)&&Ca();var a=qe;qe|=1;var u=Jn.transition,f=je;try{if(Jn.transition=null,je=1,s)return s()}finally{je=f,Jn.transition=u,qe=a,!(qe&6)&&Xi()}}function Sm(){Un=Ia.current,ct(Ia)}function oo(s,a){s.finishedWork=null,s.finishedLanes=0;var u=s.timeoutHandle;if(u!==-1&&(s.timeoutHandle=-1,ZA(u)),Rt!==null)for(u=Rt.return;u!==null;){var f=u;switch(Dp(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&pd();break;case 3:Ea(),ct(bn),ct(on),Gp();break;case 5:Wp(f);break;case 4:Ea();break;case 13:ct(pt);break;case 19:ct(pt);break;case 10:Up(f.type._context);break;case 22:case 23:Sm()}u=u.return}if($t=s,Rt=s=ss(s.current,null),Jt=Un=a,Lt=0,su=null,_m=Vd=io=0,xn=ou=null,to!==null){for(a=0;a<to.length;a++)if(u=to[a],f=u.interleaved,f!==null){u.interleaved=null;var g=f.next,E=u.pending;if(E!==null){var I=E.next;E.next=g,f.next=I}u.pending=f}to=null}return s}function pw(s,a){do{var u=Rt;try{if(Fp(),bd.current=Pd,Rd){for(var f=mt.memoizedState;f!==null;){var g=f.queue;g!==null&&(g.pending=null),f=f.next}Rd=!1}if(ro=0,zt=Ot=mt=null,Zl=!1,eu=0,gm.current=null,u===null||u.return===null){Lt=1,su=a,Rt=null;break}e:{var E=s,I=u.return,D=u,F=a;if(a=Jt,D.flags|=32768,F!==null&&typeof F=="object"&&typeof F.then=="function"){var K=F,te=D,ne=te.tag;if(!(te.mode&1)&&(ne===0||ne===11||ne===15)){var ee=te.alternate;ee?(te.updateQueue=ee.updateQueue,te.memoizedState=ee.memoizedState,te.lanes=ee.lanes):(te.updateQueue=null,te.memoizedState=null)}var ce=UE(I);if(ce!==null){ce.flags&=-257,BE(ce,I,D,E,a),ce.mode&1&&FE(E,K,a),a=ce,F=K;var fe=a.updateQueue;if(fe===null){var me=new Set;me.add(F),a.updateQueue=me}else fe.add(F);break e}else{if(!(a&1)){FE(E,K,a),Cm();break e}F=Error(t(426))}}else if(ht&&D.mode&1){var St=UE(I);if(St!==null){!(St.flags&65536)&&(St.flags|=256),BE(St,I,D,E,a),Mp(wa(F,D));break e}}E=F=wa(F,D),Lt!==4&&(Lt=2),ou===null?ou=[E]:ou.push(E),E=I;do{switch(E.tag){case 3:E.flags|=65536,a&=-a,E.lanes|=a;var W=ME(E,F,a);uE(E,W);break e;case 1:D=F;var U=E.type,G=E.stateNode;if(!(E.flags&128)&&(typeof U.getDerivedStateFromError=="function"||G!==null&&typeof G.componentDidCatch=="function"&&(ts===null||!ts.has(G)))){E.flags|=65536,a&=-a,E.lanes|=a;var se=VE(E,D,a);uE(E,se);break e}}E=E.return}while(E!==null)}_w(u)}catch(ge){a=ge,Rt===u&&u!==null&&(Rt=u=u.return);continue}break}while(!0)}function mw(){var s=Md.current;return Md.current=Pd,s===null?Pd:s}function Cm(){(Lt===0||Lt===3||Lt===2)&&(Lt=4),$t===null||!(io&268435455)&&!(Vd&268435455)||is($t,Jt)}function $d(s,a){var u=qe;qe|=2;var f=mw();($t!==s||Jt!==a)&&(vi=null,oo(s,a));do try{Sx();break}catch(g){pw(s,g)}while(!0);if(Fp(),qe=u,Md.current=f,Rt!==null)throw Error(t(261));return $t=null,Jt=0,Lt}function Sx(){for(;Rt!==null;)gw(Rt)}function Cx(){for(;Rt!==null&&!Bc();)gw(Rt)}function gw(s){var a=Ew(s.alternate,s,Un);s.memoizedProps=s.pendingProps,a===null?_w(s):Rt=a,gm.current=null}function _w(s){var a=s;do{var u=a.alternate;if(s=a.return,a.flags&32768){if(u=yx(u,a),u!==null){u.flags&=32767,Rt=u;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{Lt=6,Rt=null;return}}else if(u=_x(u,a,Un),u!==null){Rt=u;return}if(a=a.sibling,a!==null){Rt=a;return}Rt=a=s}while(a!==null);Lt===0&&(Lt=5)}function ao(s,a,u){var f=je,g=Jn.transition;try{Jn.transition=null,je=1,bx(s,a,u,f)}finally{Jn.transition=g,je=f}return null}function bx(s,a,u,f){do Ca();while(ns!==null);if(qe&6)throw Error(t(327));u=s.finishedWork;var g=s.finishedLanes;if(u===null)return null;if(s.finishedWork=null,s.finishedLanes=0,u===s.current)throw Error(t(177));s.callbackNode=null,s.callbackPriority=0;var E=u.lanes|u.childLanes;if(it(s,E),s===$t&&(Rt=$t=null,Jt=0),!(u.subtreeFlags&2064)&&!(u.flags&2064)||Ud||(Ud=!0,ww(Hn,function(){return Ca(),null})),E=(u.flags&15990)!==0,u.subtreeFlags&15990||E){E=Jn.transition,Jn.transition=null;var I=je;je=1;var D=qe;qe|=4,gm.current=null,Ex(s,u),aw(u,s),GA(Cp),Hi=!!Sp,Cp=Sp=null,s.current=u,wx(u),lp(),qe=D,je=I,Jn.transition=E}else s.current=u;if(Ud&&(Ud=!1,ns=s,Bd=g),E=s.pendingLanes,E===0&&(ts=null),$c(u.stateNode),Pn(s,st()),a!==null)for(f=s.onRecoverableError,u=0;u<a.length;u++)g=a[u],f(g.value,{componentStack:g.stack,digest:g.digest});if(Fd)throw Fd=!1,s=vm,vm=null,s;return Bd&1&&s.tag!==0&&Ca(),E=s.pendingLanes,E&1?s===Em?au++:(au=0,Em=s):au=0,Xi(),null}function Ca(){if(ns!==null){var s=$i(Bd),a=Jn.transition,u=je;try{if(Jn.transition=null,je=16>s?16:s,ns===null)var f=!1;else{if(s=ns,ns=null,Bd=0,qe&6)throw Error(t(331));var g=qe;for(qe|=4,he=s.current;he!==null;){var E=he,I=E.child;if(he.flags&16){var D=E.deletions;if(D!==null){for(var F=0;F<D.length;F++){var K=D[F];for(he=K;he!==null;){var te=he;switch(te.tag){case 0:case 11:case 15:iu(8,te,E)}var ne=te.child;if(ne!==null)ne.return=te,he=ne;else for(;he!==null;){te=he;var ee=te.sibling,ce=te.return;if(nw(te),te===K){he=null;break}if(ee!==null){ee.return=ce,he=ee;break}he=ce}}}var fe=E.alternate;if(fe!==null){var me=fe.child;if(me!==null){fe.child=null;do{var St=me.sibling;me.sibling=null,me=St}while(me!==null)}}he=E}}if(E.subtreeFlags&2064&&I!==null)I.return=E,he=I;else e:for(;he!==null;){if(E=he,E.flags&2048)switch(E.tag){case 0:case 11:case 15:iu(9,E,E.return)}var W=E.sibling;if(W!==null){W.return=E.return,he=W;break e}he=E.return}}var U=s.current;for(he=U;he!==null;){I=he;var G=I.child;if(I.subtreeFlags&2064&&G!==null)G.return=I,he=G;else e:for(I=U;he!==null;){if(D=he,D.flags&2048)try{switch(D.tag){case 0:case 11:case 15:Ld(9,D)}}catch(ge){vt(D,D.return,ge)}if(D===I){he=null;break e}var se=D.sibling;if(se!==null){se.return=D.return,he=se;break e}he=D.return}}if(qe=g,Xi(),Dn&&typeof Dn.onPostCommitFiberRoot=="function")try{Dn.onPostCommitFiberRoot(Ws,s)}catch{}f=!0}return f}finally{je=u,Jn.transition=a}}return!1}function yw(s,a,u){a=wa(u,a),a=ME(s,a,1),s=Zi(s,a,1),a=_n(),s!==null&&(ji(s,1,a),Pn(s,a))}function vt(s,a,u){if(s.tag===3)yw(s,s,u);else for(;a!==null;){if(a.tag===3){yw(a,s,u);break}else if(a.tag===1){var f=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(ts===null||!ts.has(f))){s=wa(u,s),s=VE(a,s,1),a=Zi(a,s,1),s=_n(),a!==null&&(ji(a,1,s),Pn(a,s));break}}a=a.return}}function Rx(s,a,u){var f=s.pingCache;f!==null&&f.delete(a),a=_n(),s.pingedLanes|=s.suspendedLanes&u,$t===s&&(Jt&u)===u&&(Lt===4||Lt===3&&(Jt&130023424)===Jt&&500>st()-ym?oo(s,0):_m|=u),Pn(s,a)}function vw(s,a){a===0&&(s.mode&1?(a=Ko,Ko<<=1,!(Ko&130023424)&&(Ko=4194304)):a=1);var u=_n();s=gi(s,a),s!==null&&(ji(s,a,u),Pn(s,u))}function Ax(s){var a=s.memoizedState,u=0;a!==null&&(u=a.retryLane),vw(s,u)}function xx(s,a){var u=0;switch(s.tag){case 13:var f=s.stateNode,g=s.memoizedState;g!==null&&(u=g.retryLane);break;case 19:f=s.stateNode;break;default:throw Error(t(314))}f!==null&&f.delete(a),vw(s,u)}var Ew;Ew=function(s,a,u){if(s!==null)if(s.memoizedProps!==a.pendingProps||bn.current)An=!0;else{if(!(s.lanes&u)&&!(a.flags&128))return An=!1,gx(s,a,u);An=!!(s.flags&131072)}else An=!1,ht&&a.flags&1048576&&Zv(a,yd,a.index);switch(a.lanes=0,a.tag){case 2:var f=a.type;Dd(s,a),s=a.pendingProps;var g=fa(a,on.current);va(a,u),g=Qp(null,a,f,s,g,u);var E=Yp();return a.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,Rn(f)?(E=!0,md(a)):E=!1,a.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,zp(a),g.updater=kd,a.stateNode=g,g._reactInternals=a,nm(a,f,s,u),a=om(null,a,f,!0,E,u)):(a.tag=0,ht&&E&&Np(a),gn(null,a,g,u),a=a.child),a;case 16:f=a.elementType;e:{switch(Dd(s,a),s=a.pendingProps,g=f._init,f=g(f._payload),a.type=f,g=a.tag=kx(f),s=vr(f,s),g){case 0:a=sm(null,a,f,s,u);break e;case 1:a=GE(null,a,f,s,u);break e;case 11:a=jE(null,a,f,s,u);break e;case 14:a=zE(null,a,f,vr(f.type,s),u);break e}throw Error(t(306,f,""))}return a;case 0:return f=a.type,g=a.pendingProps,g=a.elementType===f?g:vr(f,g),sm(s,a,f,g,u);case 1:return f=a.type,g=a.pendingProps,g=a.elementType===f?g:vr(f,g),GE(s,a,f,g,u);case 3:e:{if(qE(a),s===null)throw Error(t(387));f=a.pendingProps,E=a.memoizedState,g=E.element,lE(s,a),Sd(a,f,null,u);var I=a.memoizedState;if(f=I.element,E.isDehydrated)if(E={element:f,isDehydrated:!1,cache:I.cache,pendingSuspenseBoundaries:I.pendingSuspenseBoundaries,transitions:I.transitions},a.updateQueue.baseState=E,a.memoizedState=E,a.flags&256){g=wa(Error(t(423)),a),a=KE(s,a,f,u,g);break e}else if(f!==g){g=wa(Error(t(424)),a),a=KE(s,a,f,u,g);break e}else for(Fn=Ki(a.stateNode.containerInfo.firstChild),Vn=a,ht=!0,yr=null,u=oE(a,null,f,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(ga(),f===g){a=yi(s,a,u);break e}gn(s,a,f,u)}a=a.child}return a;case 5:return dE(a),s===null&&Lp(a),f=a.type,g=a.pendingProps,E=s!==null?s.memoizedProps:null,I=g.children,bp(f,g)?I=null:E!==null&&bp(f,E)&&(a.flags|=32),HE(s,a),gn(s,a,I,u),a.child;case 6:return s===null&&Lp(a),null;case 13:return QE(s,a,u);case 4:return $p(a,a.stateNode.containerInfo),f=a.pendingProps,s===null?a.child=_a(a,null,f,u):gn(s,a,f,u),a.child;case 11:return f=a.type,g=a.pendingProps,g=a.elementType===f?g:vr(f,g),jE(s,a,f,g,u);case 7:return gn(s,a,a.pendingProps,u),a.child;case 8:return gn(s,a,a.pendingProps.children,u),a.child;case 12:return gn(s,a,a.pendingProps.children,u),a.child;case 10:e:{if(f=a.type._context,g=a.pendingProps,E=a.memoizedProps,I=g.value,ot(wd,f._currentValue),f._currentValue=I,E!==null)if(_r(E.value,I)){if(E.children===g.children&&!bn.current){a=yi(s,a,u);break e}}else for(E=a.child,E!==null&&(E.return=a);E!==null;){var D=E.dependencies;if(D!==null){I=E.child;for(var F=D.firstContext;F!==null;){if(F.context===f){if(E.tag===1){F=_i(-1,u&-u),F.tag=2;var K=E.updateQueue;if(K!==null){K=K.shared;var te=K.pending;te===null?F.next=F:(F.next=te.next,te.next=F),K.pending=F}}E.lanes|=u,F=E.alternate,F!==null&&(F.lanes|=u),Bp(E.return,u,a),D.lanes|=u;break}F=F.next}}else if(E.tag===10)I=E.type===a.type?null:E.child;else if(E.tag===18){if(I=E.return,I===null)throw Error(t(341));I.lanes|=u,D=I.alternate,D!==null&&(D.lanes|=u),Bp(I,u,a),I=E.sibling}else I=E.child;if(I!==null)I.return=E;else for(I=E;I!==null;){if(I===a){I=null;break}if(E=I.sibling,E!==null){E.return=I.return,I=E;break}I=I.return}E=I}gn(s,a,g.children,u),a=a.child}return a;case 9:return g=a.type,f=a.pendingProps.children,va(a,u),g=Yn(g),f=f(g),a.flags|=1,gn(s,a,f,u),a.child;case 14:return f=a.type,g=vr(f,a.pendingProps),g=vr(f.type,g),zE(s,a,f,g,u);case 15:return $E(s,a,a.type,a.pendingProps,u);case 17:return f=a.type,g=a.pendingProps,g=a.elementType===f?g:vr(f,g),Dd(s,a),a.tag=1,Rn(f)?(s=!0,md(a)):s=!1,va(a,u),OE(a,f,g),nm(a,f,g,u),om(null,a,f,!0,s,u);case 19:return XE(s,a,u);case 22:return WE(s,a,u)}throw Error(t(156,a.tag))};function ww(s,a){return Go(s,a)}function Px(s,a,u,f){this.tag=s,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zn(s,a,u,f){return new Px(s,a,u,f)}function bm(s){return s=s.prototype,!(!s||!s.isReactComponent)}function kx(s){if(typeof s=="function")return bm(s)?1:0;if(s!=null){if(s=s.$$typeof,s===B)return 11;if(s===Je)return 14}return 2}function ss(s,a){var u=s.alternate;return u===null?(u=Zn(s.tag,a,s.key,s.mode),u.elementType=s.elementType,u.type=s.type,u.stateNode=s.stateNode,u.alternate=s,s.alternate=u):(u.pendingProps=a,u.type=s.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=s.flags&14680064,u.childLanes=s.childLanes,u.lanes=s.lanes,u.child=s.child,u.memoizedProps=s.memoizedProps,u.memoizedState=s.memoizedState,u.updateQueue=s.updateQueue,a=s.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=s.sibling,u.index=s.index,u.ref=s.ref,u}function Wd(s,a,u,f,g,E){var I=2;if(f=s,typeof s=="function")bm(s)&&(I=1);else if(typeof s=="string")I=5;else e:switch(s){case x:return lo(u.children,g,E,a);case A:I=8,g|=8;break;case P:return s=Zn(12,u,a,g|2),s.elementType=P,s.lanes=E,s;case O:return s=Zn(13,u,a,g),s.elementType=O,s.lanes=E,s;case rt:return s=Zn(19,u,a,g),s.elementType=rt,s.lanes=E,s;case Ue:return Hd(u,g,E,a);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case L:I=10;break e;case V:I=9;break e;case B:I=11;break e;case Je:I=14;break e;case _t:I=16,f=null;break e}throw Error(t(130,s==null?s:typeof s,""))}return a=Zn(I,u,a,g),a.elementType=s,a.type=f,a.lanes=E,a}function lo(s,a,u,f){return s=Zn(7,s,f,a),s.lanes=u,s}function Hd(s,a,u,f){return s=Zn(22,s,f,a),s.elementType=Ue,s.lanes=u,s.stateNode={isHidden:!1},s}function Rm(s,a,u){return s=Zn(6,s,null,a),s.lanes=u,s}function Am(s,a,u){return a=Zn(4,s.children!==null?s.children:[],s.key,a),a.lanes=u,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}function Nx(s,a,u,f,g){this.tag=a,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Bi(0),this.expirationTimes=Bi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bi(0),this.identifierPrefix=f,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function xm(s,a,u,f,g,E,I,D,F){return s=new Nx(s,a,u,D,F),a===1?(a=1,E===!0&&(a|=8)):a=0,E=Zn(3,null,null,a),s.current=E,E.stateNode=s,E.memoizedState={element:f,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},zp(E),s}function Dx(s,a,u){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:X,key:f==null?null:""+f,children:s,containerInfo:a,implementation:u}}function Tw(s){if(!s)return Yi;s=s._reactInternals;e:{if(cr(s)!==s||s.tag!==1)throw Error(t(170));var a=s;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(Rn(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(t(171))}if(s.tag===1){var u=s.type;if(Rn(u))return Yv(s,u,a)}return a}function Iw(s,a,u,f,g,E,I,D,F){return s=xm(u,f,!0,s,g,E,I,D,F),s.context=Tw(null),u=s.current,f=_n(),g=rs(u),E=_i(f,g),E.callback=a??null,Zi(u,E,g),s.current.lanes=g,ji(s,g,f),Pn(s,f),s}function Gd(s,a,u,f){var g=a.current,E=_n(),I=rs(g);return u=Tw(u),a.context===null?a.context=u:a.pendingContext=u,a=_i(E,I),a.payload={element:s},f=f===void 0?null:f,f!==null&&(a.callback=f),s=Zi(g,a,I),s!==null&&(Tr(s,g,I,E),Id(s,g,I)),I}function qd(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function Sw(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var u=s.retryLane;s.retryLane=u!==0&&u<a?u:a}}function Pm(s,a){Sw(s,a),(s=s.alternate)&&Sw(s,a)}var Cw=typeof reportError=="function"?reportError:function(s){console.error(s)};function km(s){this._internalRoot=s}Kd.prototype.render=km.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(t(409));Gd(s,a,null,null)},Kd.prototype.unmount=km.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;so(function(){Gd(null,s,null,null)}),a[hi]=null}};function Kd(s){this._internalRoot=s}Kd.prototype.unstable_scheduleHydration=function(s){if(s){var a=Kc();s={blockedOn:null,target:s,priority:a};for(var u=0;u<Vr.length&&a!==0&&a<Vr[u].priority;u++);Vr.splice(u,0,s),u===0&&Xc(s)}};function Nm(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function Qd(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function bw(){}function Ox(s,a,u,f,g){if(g){if(typeof f=="function"){var E=f;f=function(){var K=qd(I);E.call(K)}}var I=Iw(a,f,s,0,null,!1,!1,"",bw);return s._reactRootContainer=I,s[hi]=I.current,Hl(s.nodeType===8?s.parentNode:s),so(),I}for(;g=s.lastChild;)s.removeChild(g);if(typeof f=="function"){var D=f;f=function(){var K=qd(F);D.call(K)}}var F=xm(s,0,!1,null,null,!1,!1,"",bw);return s._reactRootContainer=F,s[hi]=F.current,Hl(s.nodeType===8?s.parentNode:s),so(function(){Gd(a,F,u,f)}),F}function Yd(s,a,u,f,g){var E=u._reactRootContainer;if(E){var I=E;if(typeof g=="function"){var D=g;g=function(){var F=qd(I);D.call(F)}}Gd(a,I,s,g)}else I=Ox(u,a,s,g,f);return qd(I)}Gc=function(s){switch(s.tag){case 3:var a=s.stateNode;if(a.current.memoizedState.isDehydrated){var u=Ui(a.pendingLanes);u!==0&&(zi(a,u|1),Pn(a,st()),!(qe&6)&&(Sa=st()+500,Xi()))}break;case 13:so(function(){var f=gi(s,1);if(f!==null){var g=_n();Tr(f,s,1,g)}}),Pm(s,1)}},Qo=function(s){if(s.tag===13){var a=gi(s,134217728);if(a!==null){var u=_n();Tr(a,s,134217728,u)}Pm(s,134217728)}},qc=function(s){if(s.tag===13){var a=rs(s),u=gi(s,a);if(u!==null){var f=_n();Tr(u,s,a,f)}Pm(s,a)}},Kc=function(){return je},Qc=function(s,a){var u=je;try{return je=s,a()}finally{je=u}},Bo=function(s,a,u){switch(a){case"input":if(gl(s,u),a=u.name,u.type==="radio"&&a!=null){for(u=s;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<u.length;a++){var f=u[a];if(f!==s&&f.form===s.form){var g=fd(f);if(!g)throw Error(t(90));Pt(f),gl(f,g)}}}break;case"textarea":Fo(s,u);break;case"select":a=u.value,a!=null&&ii(s,!!u.multiple,a,!1)}},Us=Im,bl=so;var Lx={usingClientEntryPoint:!1,Events:[Kl,da,fd,Lr,Cl,Im]},lu={findFiberByHostInstance:Xs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Mx={bundleType:lu.bundleType,version:lu.version,rendererPackageName:lu.rendererPackageName,rendererConfig:lu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:H.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=xl(s),s===null?null:s.stateNode},findFiberByHostInstance:lu.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xd.isDisabled&&Xd.supportsFiber)try{Ws=Xd.inject(Mx),Dn=Xd}catch{}}return kn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Lx,kn.createPortal=function(s,a){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Nm(a))throw Error(t(200));return Dx(s,a,null,u)},kn.createRoot=function(s,a){if(!Nm(s))throw Error(t(299));var u=!1,f="",g=Cw;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onRecoverableError!==void 0&&(g=a.onRecoverableError)),a=xm(s,1,!1,null,null,u,!1,f,g),s[hi]=a.current,Hl(s.nodeType===8?s.parentNode:s),new km(a)},kn.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(t(188)):(s=Object.keys(s).join(","),Error(t(268,s)));return s=xl(a),s=s===null?null:s.stateNode,s},kn.flushSync=function(s){return so(s)},kn.hydrate=function(s,a,u){if(!Qd(a))throw Error(t(200));return Yd(null,s,a,!0,u)},kn.hydrateRoot=function(s,a,u){if(!Nm(s))throw Error(t(405));var f=u!=null&&u.hydratedSources||null,g=!1,E="",I=Cw;if(u!=null&&(u.unstable_strictMode===!0&&(g=!0),u.identifierPrefix!==void 0&&(E=u.identifierPrefix),u.onRecoverableError!==void 0&&(I=u.onRecoverableError)),a=Iw(a,null,s,1,u??null,g,!1,E,I),s[hi]=a.current,Hl(s),f)for(s=0;s<f.length;s++)u=f[s],g=u._getVersion,g=g(u._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[u,g]:a.mutableSourceEagerHydrationData.push(u,g);return new Kd(a)},kn.render=function(s,a,u){if(!Qd(a))throw Error(t(200));return Yd(null,s,a,!1,u)},kn.unmountComponentAtNode=function(s){if(!Qd(s))throw Error(t(40));return s._reactRootContainer?(so(function(){Yd(null,null,s,!1,function(){s._reactRootContainer=null,s[hi]=null})}),!0):!1},kn.unstable_batchedUpdates=Im,kn.unstable_renderSubtreeIntoContainer=function(s,a,u,f){if(!Qd(u))throw Error(t(200));if(s==null||s._reactInternals===void 0)throw Error(t(38));return Yd(s,a,u,!1,f)},kn.version="18.3.1-next-f1338f8080-20240426",kn}var Ow;function CS(){if(Ow)return Lm.exports;Ow=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Lm.exports=$x(),Lm.exports}var Lw;function Wx(){if(Lw)return Jd;Lw=1;var n=CS();return Jd.createRoot=n.createRoot,Jd.hydrateRoot=n.hydrateRoot,Jd}var Hx=Wx();const Gx=v_(Hx);var cu={},Mw;function qx(){if(Mw)return cu;Mw=1,Object.defineProperty(cu,"__esModule",{value:!0}),cu.parse=l,cu.serialize=p;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,o=(()=>{const y=function(){};return y.prototype=Object.create(null),y})();function l(y,w){const S=new o,b=y.length;if(b<2)return S;const C=(w==null?void 0:w.decode)||_;let k=0;do{const N=y.indexOf("=",k);if(N===-1)break;const j=y.indexOf(";",k),H=j===-1?b:j;if(N>H){k=y.lastIndexOf(";",N-1)+1;continue}const Y=c(y,k,N),X=d(y,N,Y),x=y.slice(Y,X);if(S[x]===void 0){let A=c(y,N+1,H),P=d(y,H,A);const L=C(y.slice(A,P));S[x]=L}k=H+1}while(k<b);return S}function c(y,w,S){do{const b=y.charCodeAt(w);if(b!==32&&b!==9)return w}while(++w<S);return S}function d(y,w,S){for(;w>S;){const b=y.charCodeAt(--w);if(b!==32&&b!==9)return w+1}return S}function p(y,w,S){const b=(S==null?void 0:S.encode)||encodeURIComponent;if(!n.test(y))throw new TypeError(`argument name is invalid: ${y}`);const C=b(w);if(!e.test(C))throw new TypeError(`argument val is invalid: ${w}`);let k=y+"="+C;if(!S)return k;if(S.maxAge!==void 0){if(!Number.isInteger(S.maxAge))throw new TypeError(`option maxAge is invalid: ${S.maxAge}`);k+="; Max-Age="+S.maxAge}if(S.domain){if(!t.test(S.domain))throw new TypeError(`option domain is invalid: ${S.domain}`);k+="; Domain="+S.domain}if(S.path){if(!r.test(S.path))throw new TypeError(`option path is invalid: ${S.path}`);k+="; Path="+S.path}if(S.expires){if(!m(S.expires)||!Number.isFinite(S.expires.valueOf()))throw new TypeError(`option expires is invalid: ${S.expires}`);k+="; Expires="+S.expires.toUTCString()}if(S.httpOnly&&(k+="; HttpOnly"),S.secure&&(k+="; Secure"),S.partitioned&&(k+="; Partitioned"),S.priority)switch(typeof S.priority=="string"?S.priority.toLowerCase():void 0){case"low":k+="; Priority=Low";break;case"medium":k+="; Priority=Medium";break;case"high":k+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${S.priority}`)}if(S.sameSite)switch(typeof S.sameSite=="string"?S.sameSite.toLowerCase():S.sameSite){case!0:case"strict":k+="; SameSite=Strict";break;case"lax":k+="; SameSite=Lax";break;case"none":k+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${S.sameSite}`)}return k}function _(y){if(y.indexOf("%")===-1)return y;try{return decodeURIComponent(y)}catch{return y}}function m(y){return i.call(y)==="[object Date]"}return cu}qx();/**
 * react-router v7.1.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Vw="popstate";function Kx(n={}){function e(r,i){let{pathname:o,search:l,hash:c}=r.location;return Eg("",{pathname:o,search:l,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:Uu(i)}return Yx(e,t,null,n)}function ft(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Pr(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Qx(){return Math.random().toString(36).substring(2,10)}function Fw(n,e){return{usr:n.state,key:n.key,idx:e}}function Eg(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Za(e):e,state:t,key:e&&e.key||r||Qx()}}function Uu({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Za(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function Yx(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:o=!1}=r,l=i.history,c="POP",d=null,p=_();p==null&&(p=0,l.replaceState({...l.state,idx:p},""));function _(){return(l.state||{idx:null}).idx}function m(){c="POP";let C=_(),k=C==null?null:C-p;p=C,d&&d({action:c,location:b.location,delta:k})}function y(C,k){c="PUSH";let N=Eg(b.location,C,k);p=_()+1;let j=Fw(N,p),H=b.createHref(N);try{l.pushState(j,"",H)}catch(Y){if(Y instanceof DOMException&&Y.name==="DataCloneError")throw Y;i.location.assign(H)}o&&d&&d({action:c,location:b.location,delta:1})}function w(C,k){c="REPLACE";let N=Eg(b.location,C,k);p=_();let j=Fw(N,p),H=b.createHref(N);l.replaceState(j,"",H),o&&d&&d({action:c,location:b.location,delta:0})}function S(C){let k=i.location.origin!=="null"?i.location.origin:i.location.href,N=typeof C=="string"?C:Uu(C);return N=N.replace(/ $/,"%20"),ft(k,`No window.location.(origin|href) available to create URL for href: ${N}`),new URL(N,k)}let b={get action(){return c},get location(){return n(i,l)},listen(C){if(d)throw new Error("A history only accepts one active listener");return i.addEventListener(Vw,m),d=C,()=>{i.removeEventListener(Vw,m),d=null}},createHref(C){return e(i,C)},createURL:S,encodeLocation(C){let k=S(C);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:y,replace:w,go(C){return l.go(C)}};return b}function bS(n,e,t="/"){return Xx(n,e,t,!1)}function Xx(n,e,t,r){let i=typeof e=="string"?Za(e):e,o=Es(i.pathname||"/",t);if(o==null)return null;let l=RS(n);Jx(l);let c=null;for(let d=0;c==null&&d<l.length;++d){let p=uP(o);c=aP(l[d],p,r)}return c}function RS(n,e=[],t=[],r=""){let i=(o,l,c)=>{let d={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};d.relativePath.startsWith("/")&&(ft(d.relativePath.startsWith(r),`Absolute route path "${d.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(r.length));let p=Ci([r,d.relativePath]),_=t.concat(d);o.children&&o.children.length>0&&(ft(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),RS(o.children,e,_,p)),!(o.path==null&&!o.index)&&e.push({path:p,score:sP(p,o.index),routesMeta:_})};return n.forEach((o,l)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))i(o,l);else for(let d of AS(o.path))i(o,l,d)}),e}function AS(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),o=t.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let l=AS(r.join("/")),c=[];return c.push(...l.map(d=>d===""?o:[o,d].join("/"))),i&&c.push(...l),c.map(d=>n.startsWith("/")&&d===""?"/":d)}function Jx(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:oP(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var Zx=/^:[\w-]+$/,eP=3,tP=2,nP=1,rP=10,iP=-2,Uw=n=>n==="*";function sP(n,e){let t=n.split("/"),r=t.length;return t.some(Uw)&&(r+=iP),e&&(r+=tP),t.filter(i=>!Uw(i)).reduce((i,o)=>i+(Zx.test(o)?eP:o===""?nP:rP),r)}function oP(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function aP(n,e,t=!1){let{routesMeta:r}=n,i={},o="/",l=[];for(let c=0;c<r.length;++c){let d=r[c],p=c===r.length-1,_=o==="/"?e:e.slice(o.length)||"/",m=Ch({path:d.relativePath,caseSensitive:d.caseSensitive,end:p},_),y=d.route;if(!m&&p&&t&&!r[r.length-1].route.index&&(m=Ch({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},_)),!m)return null;Object.assign(i,m.params),l.push({params:i,pathname:Ci([o,m.pathname]),pathnameBase:fP(Ci([o,m.pathnameBase])),route:y}),m.pathnameBase!=="/"&&(o=Ci([o,m.pathnameBase]))}return l}function Ch(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=lP(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let o=i[0],l=o.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:r.reduce((p,{paramName:_,isOptional:m},y)=>{if(_==="*"){let S=c[y]||"";l=o.slice(0,o.length-S.length).replace(/(.)\/+$/,"$1")}const w=c[y];return m&&!w?p[_]=void 0:p[_]=(w||"").replace(/%2F/g,"/"),p},{}),pathname:o,pathnameBase:l,pattern:n}}function lP(n,e=!1,t=!0){Pr(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,d)=>(r.push({paramName:c,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function uP(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Pr(!1,`The URL path "${n}" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Es(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function cP(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Za(n):n;return{pathname:t?t.startsWith("/")?t:dP(t,e):e,search:pP(r),hash:mP(i)}}function dP(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function Fm(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function hP(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function E_(n){let e=hP(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function w_(n,e,t,r=!1){let i;typeof n=="string"?i=Za(n):(i={...n},ft(!i.pathname||!i.pathname.includes("?"),Fm("?","pathname","search",i)),ft(!i.pathname||!i.pathname.includes("#"),Fm("#","pathname","hash",i)),ft(!i.search||!i.search.includes("#"),Fm("#","search","hash",i)));let o=n===""||i.pathname==="",l=o?"/":i.pathname,c;if(l==null)c=t;else{let m=e.length-1;if(!r&&l.startsWith("..")){let y=l.split("/");for(;y[0]==="..";)y.shift(),m-=1;i.pathname=y.join("/")}c=m>=0?e[m]:"/"}let d=cP(i,c),p=l&&l!=="/"&&l.endsWith("/"),_=(o||l===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(p||_)&&(d.pathname+="/"),d}var Ci=n=>n.join("/").replace(/\/\/+/g,"/"),fP=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),pP=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,mP=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function gP(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var xS=["POST","PUT","PATCH","DELETE"];new Set(xS);var _P=["GET",...xS];new Set(_P);var el=M.createContext(null);el.displayName="DataRouter";var gf=M.createContext(null);gf.displayName="DataRouterState";var PS=M.createContext({isTransitioning:!1});PS.displayName="ViewTransition";var yP=M.createContext(new Map);yP.displayName="Fetchers";var vP=M.createContext(null);vP.displayName="Await";var kr=M.createContext(null);kr.displayName="Navigation";var mc=M.createContext(null);mc.displayName="Location";var Nr=M.createContext({outlet:null,matches:[],isDataRoute:!1});Nr.displayName="Route";var T_=M.createContext(null);T_.displayName="RouteError";function EP(n,{relative:e}={}){ft(tl(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=M.useContext(kr),{hash:i,pathname:o,search:l}=gc(n,{relative:e}),c=o;return t!=="/"&&(c=o==="/"?t:Ci([t,o])),r.createHref({pathname:c,search:l,hash:i})}function tl(){return M.useContext(mc)!=null}function ti(){return ft(tl(),"useLocation() may be used only in the context of a <Router> component."),M.useContext(mc).location}var kS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function NS(n){M.useContext(kr).static||M.useLayoutEffect(n)}function ks(){let{isDataRoute:n}=M.useContext(Nr);return n?OP():wP()}function wP(){ft(tl(),"useNavigate() may be used only in the context of a <Router> component.");let n=M.useContext(el),{basename:e,navigator:t}=M.useContext(kr),{matches:r}=M.useContext(Nr),{pathname:i}=ti(),o=JSON.stringify(E_(r)),l=M.useRef(!1);return NS(()=>{l.current=!0}),M.useCallback((d,p={})=>{if(Pr(l.current,kS),!l.current)return;if(typeof d=="number"){t.go(d);return}let _=w_(d,JSON.parse(o),i,p.relative==="path");n==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:Ci([e,_.pathname])),(p.replace?t.replace:t.push)(_,p.state,p)},[e,t,o,i,n])}M.createContext(null);function TP(){let{matches:n}=M.useContext(Nr),e=n[n.length-1];return e?e.params:{}}function gc(n,{relative:e}={}){let{matches:t}=M.useContext(Nr),{pathname:r}=ti(),i=JSON.stringify(E_(t));return M.useMemo(()=>w_(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function IP(n,e){return DS(n,e)}function DS(n,e,t,r){var k;ft(tl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=M.useContext(kr),{matches:o}=M.useContext(Nr),l=o[o.length-1],c=l?l.params:{},d=l?l.pathname:"/",p=l?l.pathnameBase:"/",_=l&&l.route;{let N=_&&_.path||"";OS(d,!_||N.endsWith("*")||N.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${N}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${N}"> to <Route path="${N==="/"?"*":`${N}/*`}">.`)}let m=ti(),y;if(e){let N=typeof e=="string"?Za(e):e;ft(p==="/"||((k=N.pathname)==null?void 0:k.startsWith(p)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${N.pathname}" was given in the \`location\` prop.`),y=N}else y=m;let w=y.pathname||"/",S=w;if(p!=="/"){let N=p.replace(/^\//,"").split("/");S="/"+w.replace(/^\//,"").split("/").slice(N.length).join("/")}let b=bS(n,{pathname:S});Pr(_||b!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),Pr(b==null||b[b.length-1].route.element!==void 0||b[b.length-1].route.Component!==void 0||b[b.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let C=AP(b&&b.map(N=>Object.assign({},N,{params:Object.assign({},c,N.params),pathname:Ci([p,i.encodeLocation?i.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?p:Ci([p,i.encodeLocation?i.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),o,t,r);return e&&C?M.createElement(mc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},C):C}function SP(){let n=DP(),e=gP(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",n),l=M.createElement(M.Fragment,null,M.createElement("p",null," Hey developer "),M.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",M.createElement("code",{style:o},"ErrorBoundary")," or"," ",M.createElement("code",{style:o},"errorElement")," prop on your route.")),M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),t?M.createElement("pre",{style:i},t):null,l)}var CP=M.createElement(SP,null),bP=class extends M.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?M.createElement(Nr.Provider,{value:this.props.routeContext},M.createElement(T_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function RP({routeContext:n,match:e,children:t}){let r=M.useContext(el);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),M.createElement(Nr.Provider,{value:n},t)}function AP(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let i=n,o=t==null?void 0:t.errors;if(o!=null){let d=i.findIndex(p=>p.route.id&&(o==null?void 0:o[p.route.id])!==void 0);ft(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,d+1))}let l=!1,c=-1;if(t)for(let d=0;d<i.length;d++){let p=i[d];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(c=d),p.route.id){let{loaderData:_,errors:m}=t,y=p.route.loader&&!_.hasOwnProperty(p.route.id)&&(!m||m[p.route.id]===void 0);if(p.route.lazy||y){l=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}return i.reduceRight((d,p,_)=>{let m,y=!1,w=null,S=null;t&&(m=o&&p.route.id?o[p.route.id]:void 0,w=p.route.errorElement||CP,l&&(c<0&&_===0?(OS("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,S=null):c===_&&(y=!0,S=p.route.hydrateFallbackElement||null)));let b=e.concat(i.slice(0,_+1)),C=()=>{let k;return m?k=w:y?k=S:p.route.Component?k=M.createElement(p.route.Component,null):p.route.element?k=p.route.element:k=d,M.createElement(RP,{match:p,routeContext:{outlet:d,matches:b,isDataRoute:t!=null},children:k})};return t&&(p.route.ErrorBoundary||p.route.errorElement||_===0)?M.createElement(bP,{location:t.location,revalidation:t.revalidation,component:w,error:m,children:C(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):C()},null)}function I_(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function xP(n){let e=M.useContext(el);return ft(e,I_(n)),e}function PP(n){let e=M.useContext(gf);return ft(e,I_(n)),e}function kP(n){let e=M.useContext(Nr);return ft(e,I_(n)),e}function S_(n){let e=kP(n),t=e.matches[e.matches.length-1];return ft(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function NP(){return S_("useRouteId")}function DP(){var r;let n=M.useContext(T_),e=PP("useRouteError"),t=S_("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function OP(){let{router:n}=xP("useNavigate"),e=S_("useNavigate"),t=M.useRef(!1);return NS(()=>{t.current=!0}),M.useCallback(async(i,o={})=>{Pr(t.current,kS),t.current&&(typeof i=="number"?n.navigate(i):await n.navigate(i,{fromRouteId:e,...o}))},[n,e])}var Bw={};function OS(n,e,t){!e&&!Bw[n]&&(Bw[n]=!0,Pr(!1,t))}M.memo(LP);function LP({routes:n,future:e,state:t}){return DS(n,void 0,t,e)}function MP({to:n,replace:e,state:t,relative:r}){ft(tl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=M.useContext(kr);Pr(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=M.useContext(Nr),{pathname:l}=ti(),c=ks(),d=w_(n,E_(o),l,r==="path"),p=JSON.stringify(d);return M.useEffect(()=>{c(JSON.parse(p),{replace:e,state:t,relative:r})},[c,p,r,e,t]),null}function Ei(n){ft(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function VP({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:o=!1}){ft(!tl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=n.replace(/^\/*/,"/"),c=M.useMemo(()=>({basename:l,navigator:i,static:o,future:{}}),[l,i,o]);typeof t=="string"&&(t=Za(t));let{pathname:d="/",search:p="",hash:_="",state:m=null,key:y="default"}=t,w=M.useMemo(()=>{let S=Es(d,l);return S==null?null:{location:{pathname:S,search:p,hash:_,state:m,key:y},navigationType:r}},[l,d,p,_,m,y,r]);return Pr(w!=null,`<Router basename="${l}"> is not able to match the URL "${d}${p}${_}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:M.createElement(kr.Provider,{value:c},M.createElement(mc.Provider,{children:e,value:w}))}function FP({children:n,location:e}){return IP(wg(n),e)}function wg(n,e=[]){let t=[];return M.Children.forEach(n,(r,i)=>{if(!M.isValidElement(r))return;let o=[...e,i];if(r.type===M.Fragment){t.push.apply(t,wg(r.props.children,o));return}ft(r.type===Ei,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ft(!r.props.index||!r.props.children,"An index route cannot have child routes.");let l={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=wg(r.props.children,o)),t.push(l)}),t}var dh="get",hh="application/x-www-form-urlencoded";function _f(n){return n!=null&&typeof n.tagName=="string"}function UP(n){return _f(n)&&n.tagName.toLowerCase()==="button"}function BP(n){return _f(n)&&n.tagName.toLowerCase()==="form"}function jP(n){return _f(n)&&n.tagName.toLowerCase()==="input"}function zP(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function $P(n,e){return n.button===0&&(!e||e==="_self")&&!zP(n)}var Zd=null;function WP(){if(Zd===null)try{new FormData(document.createElement("form"),0),Zd=!1}catch{Zd=!0}return Zd}var HP=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Um(n){return n!=null&&!HP.has(n)?(Pr(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${hh}"`),null):n}function GP(n,e){let t,r,i,o,l;if(BP(n)){let c=n.getAttribute("action");r=c?Es(c,e):null,t=n.getAttribute("method")||dh,i=Um(n.getAttribute("enctype"))||hh,o=new FormData(n)}else if(UP(n)||jP(n)&&(n.type==="submit"||n.type==="image")){let c=n.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=n.getAttribute("formaction")||c.getAttribute("action");if(r=d?Es(d,e):null,t=n.getAttribute("formmethod")||c.getAttribute("method")||dh,i=Um(n.getAttribute("formenctype"))||Um(c.getAttribute("enctype"))||hh,o=new FormData(c,n),!WP()){let{name:p,type:_,value:m}=n;if(_==="image"){let y=p?`${p}.`:"";o.append(`${y}x`,"0"),o.append(`${y}y`,"0")}else p&&o.append(p,m)}}else{if(_f(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=dh,r=null,i=hh,l=n}return o&&i==="text/plain"&&(l=o,o=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:o,body:l}}function C_(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function qP(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function KP(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function QP(n,e,t){let r=await Promise.all(n.map(async i=>{let o=e.routes[i.route.id];if(o){let l=await qP(o,t);return l.links?l.links():[]}return[]}));return ZP(r.flat(1).filter(KP).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function jw(n,e,t,r,i,o){let l=(d,p)=>t[p]?d.route.id!==t[p].route.id:!0,c=(d,p)=>{var _;return t[p].pathname!==d.pathname||((_=t[p].route.path)==null?void 0:_.endsWith("*"))&&t[p].params["*"]!==d.params["*"]};return o==="assets"?e.filter((d,p)=>l(d,p)||c(d,p)):o==="data"?e.filter((d,p)=>{var m;let _=r.routes[d.route.id];if(!_||!_.hasLoader)return!1;if(l(d,p)||c(d,p))return!0;if(d.route.shouldRevalidate){let y=d.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((m=t[0])==null?void 0:m.params)||{},nextUrl:new URL(n,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function YP(n,e){return XP(n.map(t=>{let r=e.routes[t.route.id];if(!r)return[];let i=[r.module];return r.imports&&(i=i.concat(r.imports)),i}).flat(1))}function XP(n){return[...new Set(n)]}function JP(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function ZP(n,e){let t=new Set;return new Set(e),n.reduce((r,i)=>{let o=JSON.stringify(JP(i));return t.has(o)||(t.add(o),r.push({key:o,link:i})),r},[])}function ek(n){let e=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function tk(){let n=M.useContext(el);return C_(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function nk(){let n=M.useContext(gf);return C_(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var b_=M.createContext(void 0);b_.displayName="FrameworkContext";function LS(){let n=M.useContext(b_);return C_(n,"You must render this element inside a <HydratedRouter> element"),n}function rk(n,e){let t=M.useContext(b_),[r,i]=M.useState(!1),[o,l]=M.useState(!1),{onFocus:c,onBlur:d,onMouseEnter:p,onMouseLeave:_,onTouchStart:m}=e,y=M.useRef(null);M.useEffect(()=>{if(n==="render"&&l(!0),n==="viewport"){let b=k=>{k.forEach(N=>{l(N.isIntersecting)})},C=new IntersectionObserver(b,{threshold:.5});return y.current&&C.observe(y.current),()=>{C.disconnect()}}},[n]),M.useEffect(()=>{if(r){let b=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(b)}}},[r]);let w=()=>{i(!0)},S=()=>{i(!1),l(!1)};return t?n!=="intent"?[o,y,{}]:[o,y,{onFocus:du(c,w),onBlur:du(d,S),onMouseEnter:du(p,w),onMouseLeave:du(_,S),onTouchStart:du(m,w)}]:[!1,y,{}]}function du(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function ik({page:n,...e}){let{router:t}=tk(),r=M.useMemo(()=>bS(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?M.createElement(ok,{page:n,matches:r,...e}):null}function sk(n){let{manifest:e,routeModules:t}=LS(),[r,i]=M.useState([]);return M.useEffect(()=>{let o=!1;return QP(n,e,t).then(l=>{o||i(l)}),()=>{o=!0}},[n,e,t]),r}function ok({page:n,matches:e,...t}){let r=ti(),{manifest:i,routeModules:o}=LS(),{loaderData:l,matches:c}=nk(),d=M.useMemo(()=>jw(n,e,c,i,r,"data"),[n,e,c,i,r]),p=M.useMemo(()=>jw(n,e,c,i,r,"assets"),[n,e,c,i,r]),_=M.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let w=new Set,S=!1;if(e.forEach(C=>{var N;let k=i.routes[C.route.id];!k||!k.hasLoader||(!d.some(j=>j.route.id===C.route.id)&&C.route.id in l&&((N=o[C.route.id])!=null&&N.shouldRevalidate)||k.hasClientLoader?S=!0:w.add(C.route.id))}),w.size===0)return[];let b=ek(n);return S&&w.size>0&&b.searchParams.set("_routes",e.filter(C=>w.has(C.route.id)).map(C=>C.route.id).join(",")),[b.pathname+b.search]},[l,r,i,d,e,n,o]),m=M.useMemo(()=>YP(p,i),[p,i]),y=sk(p);return M.createElement(M.Fragment,null,_.map(w=>M.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...t})),m.map(w=>M.createElement("link",{key:w,rel:"modulepreload",href:w,...t})),y.map(({key:w,link:S})=>M.createElement("link",{key:w,...S})))}function ak(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var MS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{MS&&(window.__reactRouterVersion="7.1.1")}catch{}function lk({basename:n,children:e,window:t}){let r=M.useRef();r.current==null&&(r.current=Kx({window:t,v5Compat:!0}));let i=r.current,[o,l]=M.useState({action:i.action,location:i.location}),c=M.useCallback(d=>{M.startTransition(()=>l(d))},[l]);return M.useLayoutEffect(()=>i.listen(c),[i,c]),M.createElement(VP,{basename:n,children:e,location:o.location,navigationType:o.action,navigator:i})}var VS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,bu=M.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:o,replace:l,state:c,target:d,to:p,preventScrollReset:_,viewTransition:m,...y},w){let{basename:S}=M.useContext(kr),b=typeof p=="string"&&VS.test(p),C,k=!1;if(typeof p=="string"&&b&&(C=p,MS))try{let P=new URL(window.location.href),L=p.startsWith("//")?new URL(P.protocol+p):new URL(p),V=Es(L.pathname,S);L.origin===P.origin&&V!=null?p=V+L.search+L.hash:k=!0}catch{Pr(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let N=EP(p,{relative:i}),[j,H,Y]=rk(r,y),X=hk(p,{replace:l,state:c,target:d,preventScrollReset:_,relative:i,viewTransition:m});function x(P){e&&e(P),P.defaultPrevented||X(P)}let A=M.createElement("a",{...y,...Y,href:C||N,onClick:k||o?e:x,ref:ak(w,H),target:d,"data-discover":!b&&t==="render"?"true":void 0});return j&&!b?M.createElement(M.Fragment,null,A,M.createElement(ik,{page:N})):A});bu.displayName="Link";var uk=M.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:o,to:l,viewTransition:c,children:d,...p},_){let m=gc(l,{relative:p.relative}),y=ti(),w=M.useContext(gf),{navigator:S,basename:b}=M.useContext(kr),C=w!=null&&_k(m)&&c===!0,k=S.encodeLocation?S.encodeLocation(m).pathname:m.pathname,N=y.pathname,j=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;t||(N=N.toLowerCase(),j=j?j.toLowerCase():null,k=k.toLowerCase()),j&&b&&(j=Es(j,b)||j);const H=k!=="/"&&k.endsWith("/")?k.length-1:k.length;let Y=N===k||!i&&N.startsWith(k)&&N.charAt(H)==="/",X=j!=null&&(j===k||!i&&j.startsWith(k)&&j.charAt(k.length)==="/"),x={isActive:Y,isPending:X,isTransitioning:C},A=Y?e:void 0,P;typeof r=="function"?P=r(x):P=[r,Y?"active":null,X?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let L=typeof o=="function"?o(x):o;return M.createElement(bu,{...p,"aria-current":A,className:P,ref:_,style:L,to:l,viewTransition:c},typeof d=="function"?d(x):d)});uk.displayName="NavLink";var ck=M.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:o,method:l=dh,action:c,onSubmit:d,relative:p,preventScrollReset:_,viewTransition:m,...y},w)=>{let S=mk(),b=gk(c,{relative:p}),C=l.toLowerCase()==="get"?"get":"post",k=typeof c=="string"&&VS.test(c),N=j=>{if(d&&d(j),j.defaultPrevented)return;j.preventDefault();let H=j.nativeEvent.submitter,Y=(H==null?void 0:H.getAttribute("formmethod"))||l;S(H||j.currentTarget,{fetcherKey:e,method:Y,navigate:t,replace:i,state:o,relative:p,preventScrollReset:_,viewTransition:m})};return M.createElement("form",{ref:w,method:C,action:b,onSubmit:r?d:N,...y,"data-discover":!k&&n==="render"?"true":void 0})});ck.displayName="Form";function dk(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function FS(n){let e=M.useContext(el);return ft(e,dk(n)),e}function hk(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:o,viewTransition:l}={}){let c=ks(),d=ti(),p=gc(n,{relative:o});return M.useCallback(_=>{if($P(_,e)){_.preventDefault();let m=t!==void 0?t:Uu(d)===Uu(p);c(n,{replace:m,state:r,preventScrollReset:i,relative:o,viewTransition:l})}},[d,c,p,t,r,e,n,i,o,l])}var fk=0,pk=()=>`__${String(++fk)}__`;function mk(){let{router:n}=FS("useSubmit"),{basename:e}=M.useContext(kr),t=NP();return M.useCallback(async(r,i={})=>{let{action:o,method:l,encType:c,formData:d,body:p}=GP(r,e);if(i.navigate===!1){let _=i.fetcherKey||pk();await n.fetch(_,t,i.action||o,{preventScrollReset:i.preventScrollReset,formData:d,body:p,formMethod:i.method||l,formEncType:i.encType||c,flushSync:i.flushSync})}else await n.navigate(i.action||o,{preventScrollReset:i.preventScrollReset,formData:d,body:p,formMethod:i.method||l,formEncType:i.encType||c,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[n,e,t])}function gk(n,{relative:e}={}){let{basename:t}=M.useContext(kr),r=M.useContext(Nr);ft(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),o={...gc(n||".",{relative:e})},l=ti();if(n==null){o.search=l.search;let c=new URLSearchParams(o.search),d=c.getAll("index");if(d.some(_=>_==="")){c.delete("index"),d.filter(m=>m).forEach(m=>c.append("index",m));let _=c.toString();o.search=_?`?${_}`:""}}return(!n||n===".")&&i.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:Ci([t,o.pathname])),Uu(o)}function _k(n,e={}){let t=M.useContext(PS);ft(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=FS("useViewTransitionState"),i=gc(n,{relative:e.relative});if(!t.isTransitioning)return!1;let o=Es(t.currentLocation.pathname,r)||t.currentLocation.pathname,l=Es(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Ch(i.pathname,l)!=null||Ch(i.pathname,o)!=null}new TextEncoder;var R_=CS();const yk=v_(R_);var zw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const US={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oe=function(n,e){if(!n)throw nl(e)},nl=function(n){return new Error("Firebase Database ("+US.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BS=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},vk=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=n[t++],l=n[t++],c=n[t++],d=((i&7)<<18|(o&63)<<12|(l&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{const o=n[t++],l=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|l&63)}}return e.join("")},A_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const o=n[i],l=i+1<n.length,c=l?n[i+1]:0,d=i+2<n.length,p=d?n[i+2]:0,_=o>>2,m=(o&3)<<4|c>>4;let y=(c&15)<<2|p>>6,w=p&63;d||(w=64,l||(y=64)),r.push(t[_],t[m],t[y],t[w])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(BS(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):vk(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const o=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;const p=i<n.length?t[n.charAt(i)]:64;++i;const m=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||c==null||p==null||m==null)throw new Ek;const y=o<<2|c>>4;if(r.push(y),p!==64){const w=c<<4&240|p>>2;if(r.push(w),m!==64){const S=p<<6&192|m;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Ek extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const jS=function(n){const e=BS(n);return A_.encodeByteArray(e,!0)},bh=function(n){return jS(n).replace(/\./g,"")},Rh=function(n){try{return A_.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wk(n){return zS(void 0,n)}function zS(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!Tk(t)||(n[t]=zS(n[t],e[t]));return n}function Tk(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ik(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sk=()=>Ik().__FIREBASE_DEFAULTS__,Ck=()=>{if(typeof process>"u"||typeof zw>"u")return;const n=zw.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},bk=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Rh(n[1]);return e&&JSON.parse(e)},yf=()=>{try{return Sk()||Ck()||bk()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},$S=n=>{var e,t;return(t=(e=yf())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},WS=n=>{const e=$S(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},HS=()=>{var n;return(n=yf())===null||n===void 0?void 0:n.config},GS=n=>{var e;return(e=yf())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qS(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[bh(JSON.stringify(t)),bh(JSON.stringify(l)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function x_(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(fn())}function Rk(){var n;const e=(n=yf())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Ak(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function xk(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function KS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Pk(){const n=fn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function kk(){return US.NODE_ADMIN===!0}function Nk(){return!Rk()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Dk(){try{return typeof indexedDB=="object"}catch{return!1}}function Ok(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lk="FirebaseError";class Li extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=Lk,Object.setPrototypeOf(this,Li.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,yc.prototype.create)}}class yc{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],l=o?Mk(o,r):"Error",c=`${this.serviceName}: ${l} (${i}).`;return new Li(i,c,r)}}function Mk(n,e){return n.replace(Vk,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const Vk=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bu(n){return JSON.parse(n)}function Vt(n){return JSON.stringify(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QS=function(n){let e={},t={},r={},i="";try{const o=n.split(".");e=Bu(Rh(o[0])||""),t=Bu(Rh(o[1])||""),i=o[2],r=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:r,signature:i}},Fk=function(n){const e=QS(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},Uk=function(n){const e=QS(n).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ni(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Va(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function Tg(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ah(n,e,t){const r={};for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=e.call(t,n[i],i,n));return r}function xh(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const o=n[i],l=e[i];if($w(o)&&$w(l)){if(!xh(o,l))return!1}else if(o!==l)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function $w(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rl(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Eu(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function wu(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const r=this.W_;if(typeof e=="string")for(let m=0;m<16;m++)r[m]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let m=0;m<16;m++)r[m]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let m=16;m<80;m++){const y=r[m-3]^r[m-8]^r[m-14]^r[m-16];r[m]=(y<<1|y>>>31)&4294967295}let i=this.chain_[0],o=this.chain_[1],l=this.chain_[2],c=this.chain_[3],d=this.chain_[4],p,_;for(let m=0;m<80;m++){m<40?m<20?(p=c^o&(l^c),_=1518500249):(p=o^l^c,_=1859775393):m<60?(p=o&l|c&(o|l),_=2400959708):(p=o^l^c,_=3395469782);const y=(i<<5|i>>>27)+p+d+_+r[m]&4294967295;d=c,c=l,l=(o<<30|o>>>2)&4294967295,o=i,i=y}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);const r=t-this.blockSize;let i=0;const o=this.buf_;let l=this.inbuf_;for(;i<t;){if(l===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<t;)if(o[l]=e.charCodeAt(i),++l,++i,l===this.blockSize){this.compress_(o),l=0;break}}else for(;i<t;)if(o[l]=e[i],++l,++i,l===this.blockSize){this.compress_(o),l=0;break}}this.inbuf_=l,this.total_+=t}digest(){const e=[];let t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=t&255,t/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let o=24;o>=0;o-=8)e[r]=this.chain_[i]>>o&255,++r;return e}}function jk(n,e){const t=new zk(n,e);return t.subscribe.bind(t)}class zk{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");$k(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Bm),i.error===void 0&&(i.error=Bm),i.complete===void 0&&(i.complete=Bm);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function $k(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Bm(){}function vf(n,e){return`${n} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wk=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);if(i>=55296&&i<=56319){const o=i-55296;r++,oe(r<n.length,"Surrogate pair missing trail surrogate.");const l=n.charCodeAt(r)-56320;i=65536+(o<<10)+l}i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):i<65536?(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Ef=function(n){let e=0;for(let t=0;t<n.length;t++){const r=n.charCodeAt(t);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,t++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(n){return n&&n._delegate?n._delegate:n}class ws{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const co="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hk=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new _c;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(qk(e))try{this.getOrInitializeService({instanceIdentifier:co})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=co){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=co){return this.instances.has(e)}getOptions(e=co){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);r===c&&l.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const l=this.instances.get(i);return l&&e(l,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Gk(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=co){return this.component?this.component.multipleInstances?e:co:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Gk(n){return n===co?void 0:n}function qk(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Hk(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ve;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ve||(Ve={}));const Qk={debug:Ve.DEBUG,verbose:Ve.VERBOSE,info:Ve.INFO,warn:Ve.WARN,error:Ve.ERROR,silent:Ve.SILENT},Yk=Ve.INFO,Xk={[Ve.DEBUG]:"log",[Ve.VERBOSE]:"log",[Ve.INFO]:"info",[Ve.WARN]:"warn",[Ve.ERROR]:"error"},Jk=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=Xk[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class wf{constructor(e){this.name=e,this._logLevel=Yk,this._logHandler=Jk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Qk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ve.DEBUG,...e),this._logHandler(this,Ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ve.VERBOSE,...e),this._logHandler(this,Ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ve.INFO,...e),this._logHandler(this,Ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ve.WARN,...e),this._logHandler(this,Ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ve.ERROR,...e),this._logHandler(this,Ve.ERROR,...e)}}const Zk=(n,e)=>e.some(t=>n instanceof t);let Ww,Hw;function eN(){return Ww||(Ww=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function tN(){return Hw||(Hw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const YS=new WeakMap,Ig=new WeakMap,XS=new WeakMap,jm=new WeakMap,P_=new WeakMap;function nN(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",l)},o=()=>{t(fs(n.result)),i()},l=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&YS.set(t,n)}).catch(()=>{}),P_.set(e,n),e}function rN(n){if(Ig.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",l),n.removeEventListener("abort",l)},o=()=>{t(),i()},l=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",l),n.addEventListener("abort",l)});Ig.set(n,e)}let Sg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Ig.get(n);if(e==="objectStoreNames")return n.objectStoreNames||XS.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return fs(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function iN(n){Sg=n(Sg)}function sN(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(zm(this),e,...t);return XS.set(r,e.sort?e.sort():[e]),fs(r)}:tN().includes(n)?function(...e){return n.apply(zm(this),e),fs(YS.get(this))}:function(...e){return fs(n.apply(zm(this),e))}}function oN(n){return typeof n=="function"?sN(n):(n instanceof IDBTransaction&&rN(n),Zk(n,eN())?new Proxy(n,Sg):n)}function fs(n){if(n instanceof IDBRequest)return nN(n);if(jm.has(n))return jm.get(n);const e=oN(n);return e!==n&&(jm.set(n,e),P_.set(e,n)),e}const zm=n=>P_.get(n);function aN(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){const l=indexedDB.open(n,e),c=fs(l);return r&&l.addEventListener("upgradeneeded",d=>{r(fs(l.result),d.oldVersion,d.newVersion,fs(l.transaction),d)}),t&&l.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),c.then(d=>{o&&d.addEventListener("close",()=>o()),i&&d.addEventListener("versionchange",p=>i(p.oldVersion,p.newVersion,p))}).catch(()=>{}),c}const lN=["get","getKey","getAll","getAllKeys","count"],uN=["put","add","delete","clear"],$m=new Map;function Gw(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if($m.get(e))return $m.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=uN.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||lN.includes(t)))return;const o=async function(l,...c){const d=this.transaction(l,i?"readwrite":"readonly");let p=d.store;return r&&(p=p.index(c.shift())),(await Promise.all([p[t](...c),i&&d.done]))[0]};return $m.set(e,o),o}iN(n=>({...n,get:(e,t,r)=>Gw(e,t)||n.get(e,t,r),has:(e,t)=>!!Gw(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(dN(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function dN(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Cg="@firebase/app",qw="0.10.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xi=new wf("@firebase/app"),hN="@firebase/app-compat",fN="@firebase/analytics-compat",pN="@firebase/analytics",mN="@firebase/app-check-compat",gN="@firebase/app-check",_N="@firebase/auth",yN="@firebase/auth-compat",vN="@firebase/database",EN="@firebase/data-connect",wN="@firebase/database-compat",TN="@firebase/functions",IN="@firebase/functions-compat",SN="@firebase/installations",CN="@firebase/installations-compat",bN="@firebase/messaging",RN="@firebase/messaging-compat",AN="@firebase/performance",xN="@firebase/performance-compat",PN="@firebase/remote-config",kN="@firebase/remote-config-compat",NN="@firebase/storage",DN="@firebase/storage-compat",ON="@firebase/firestore",LN="@firebase/vertexai",MN="@firebase/firestore-compat",VN="firebase",FN="11.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bg="[DEFAULT]",UN={[Cg]:"fire-core",[hN]:"fire-core-compat",[pN]:"fire-analytics",[fN]:"fire-analytics-compat",[gN]:"fire-app-check",[mN]:"fire-app-check-compat",[_N]:"fire-auth",[yN]:"fire-auth-compat",[vN]:"fire-rtdb",[EN]:"fire-data-connect",[wN]:"fire-rtdb-compat",[TN]:"fire-fn",[IN]:"fire-fn-compat",[SN]:"fire-iid",[CN]:"fire-iid-compat",[bN]:"fire-fcm",[RN]:"fire-fcm-compat",[AN]:"fire-perf",[xN]:"fire-perf-compat",[PN]:"fire-rc",[kN]:"fire-rc-compat",[NN]:"fire-gcs",[DN]:"fire-gcs-compat",[ON]:"fire-fst",[MN]:"fire-fst-compat",[LN]:"fire-vertex","fire-js":"fire-js",[VN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ph=new Map,BN=new Map,Rg=new Map;function Kw(n,e){try{n.container.addComponent(e)}catch(t){xi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function vo(n){const e=n.name;if(Rg.has(e))return xi.debug(`There were multiple attempts to register component ${e}.`),!1;Rg.set(e,n);for(const t of Ph.values())Kw(t,n);for(const t of BN.values())Kw(t,n);return!0}function Tf(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Sr(n){return n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ps=new yc("app","Firebase",jN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ws("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ps.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ao=FN;function JS(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:bg,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw ps.create("bad-app-name",{appName:String(i)});if(t||(t=HS()),!t)throw ps.create("no-options");const o=Ph.get(i);if(o){if(xh(t,o.options)&&xh(r,o.config))return o;throw ps.create("duplicate-app",{appName:i})}const l=new Kk(i);for(const d of Rg.values())l.addComponent(d);const c=new zN(t,r,l);return Ph.set(i,c),c}function k_(n=bg){const e=Ph.get(n);if(!e&&n===bg&&HS())return JS();if(!e)throw ps.create("no-app",{appName:n});return e}function Qr(n,e,t){var r;let i=(r=UN[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const o=i.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const c=[`Unable to register library "${i}" with version "${e}":`];o&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),xi.warn(c.join(" "));return}vo(new ws(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $N="firebase-heartbeat-database",WN=1,ju="firebase-heartbeat-store";let Wm=null;function ZS(){return Wm||(Wm=aN($N,WN,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ju)}catch(t){console.warn(t)}}}}).catch(n=>{throw ps.create("idb-open",{originalErrorMessage:n.message})})),Wm}async function HN(n){try{const t=(await ZS()).transaction(ju),r=await t.objectStore(ju).get(eC(n));return await t.done,r}catch(e){if(e instanceof Li)xi.warn(e.message);else{const t=ps.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});xi.warn(t.message)}}}async function Qw(n,e){try{const r=(await ZS()).transaction(ju,"readwrite");await r.objectStore(ju).put(e,eC(n)),await r.done}catch(t){if(t instanceof Li)xi.warn(t.message);else{const r=ps.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});xi.warn(r.message)}}}function eC(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GN=1024,qN=30*24*60*60*1e3;class KN{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new YN(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Yw();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(l=>{const c=new Date(l.date).valueOf();return Date.now()-c<=qN}),this._storage.overwrite(this._heartbeatsCache))}catch(r){xi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Yw(),{heartbeatsToSend:r,unsentEntries:i}=QN(this._heartbeatsCache.heartbeats),o=bh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return xi.warn(t),""}}}function Yw(){return new Date().toISOString().substring(0,10)}function QN(n,e=GN){const t=[];let r=n.slice();for(const i of n){const o=t.find(l=>l.agent===i.agent);if(o){if(o.dates.push(i.date),Xw(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Xw(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class YN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Dk()?Ok().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await HN(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return Qw(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return Qw(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Xw(n){return bh(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XN(n){vo(new ws("platform-logger",e=>new cN(e),"PRIVATE")),vo(new ws("heartbeat",e=>new KN(e),"PRIVATE")),Qr(Cg,qw,n),Qr(Cg,qw,"esm2017"),Qr("fire-js","")}XN("");function N_(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function tC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const JN=tC,nC=new yc("auth","Firebase",tC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kh=new wf("@firebase/auth");function ZN(n,...e){kh.logLevel<=Ve.WARN&&kh.warn(`Auth (${Ao}): ${n}`,...e)}function fh(n,...e){kh.logLevel<=Ve.ERROR&&kh.error(`Auth (${Ao}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function or(n,...e){throw O_(n,...e)}function Ar(n,...e){return O_(n,...e)}function D_(n,e,t){const r=Object.assign(Object.assign({},JN()),{[e]:t});return new yc("auth","Firebase",r).create(e,{appName:n.name})}function bi(n){return D_(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function e1(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&or(n,"argument-error"),D_(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function O_(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return nC.create(n,...e)}function Se(n,e,...t){if(!n)throw O_(e,...t)}function wi(n){const e="INTERNAL ASSERTION FAILED: "+n;throw fh(e),new Error(e)}function Pi(n,e){n||wi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ag(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function t1(){return Jw()==="http:"||Jw()==="https:"}function Jw(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(t1()||xk()||"connection"in navigator)?navigator.onLine:!0}function r1(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e,t){this.shortDelay=e,this.longDelay=t,Pi(t>e,"Short delay should be less than long delay!"),this.isMobile=x_()||KS()}get(){return n1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L_(n,e){Pi(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;wi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;wi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;wi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s1=new vc(3e4,6e4);function Ns(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Ds(n,e,t,r,i={}){return iC(n,i,async()=>{let o={},l={};r&&(e==="GET"?l=r:o={body:JSON.stringify(r)});const c=rl(Object.assign({key:n.config.apiKey},l)).slice(1),d=await n._getAdditionalHeaders();d["Content-Type"]="application/json",n.languageCode&&(d["X-Firebase-Locale"]=n.languageCode);const p=Object.assign({method:e,headers:d},o);return Ak()||(p.referrerPolicy="no-referrer"),rC.fetch()(sC(n,n.config.apiHost,t,c),p)})}async function iC(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},i1),e);try{const i=new a1(n),o=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw eh(n,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const c=o.ok?l.errorMessage:l.error.message,[d,p]=c.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw eh(n,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw eh(n,"email-already-in-use",l);if(d==="USER_DISABLED")throw eh(n,"user-disabled",l);const _=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw D_(n,_,p);or(n,_)}}catch(i){if(i instanceof Li)throw i;or(n,"network-request-failed",{message:String(i)})}}async function Ec(n,e,t,r,i={}){const o=await Ds(n,e,t,r,i);return"mfaPendingCredential"in o&&or(n,"multi-factor-auth-required",{_serverResponse:o}),o}function sC(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?L_(n.config,i):`${n.config.apiScheme}://${i}`}function o1(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class a1{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Ar(this.auth,"network-request-failed")),s1.get())})}}function eh(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Ar(n,e,r);return i.customData._tokenResponse=t,i}function Zw(n){return n!==void 0&&n.enterprise!==void 0}class l1{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return o1(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function u1(n,e){return Ds(n,"GET","/v2/recaptchaConfig",Ns(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c1(n,e){return Ds(n,"POST","/v1/accounts:delete",e)}async function oC(n,e){return Ds(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ru(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function d1(n,e=!1){const t=xt(n),r=await t.getIdToken(e),i=M_(r);Se(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:Ru(Hm(i.auth_time)),issuedAtTime:Ru(Hm(i.iat)),expirationTime:Ru(Hm(i.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Hm(n){return Number(n)*1e3}function M_(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return fh("JWT malformed, contained fewer than 3 sections"),null;try{const i=Rh(t);return i?JSON.parse(i):(fh("Failed to decode base64 JWT payload"),null)}catch(i){return fh("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function eT(n){const e=M_(n);return Se(e,"internal-error"),Se(typeof e.exp<"u","internal-error"),Se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zu(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Li&&h1(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function h1({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ru(this.lastLoginAt),this.creationTime=Ru(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nh(n){var e;const t=n.auth,r=await n.getIdToken(),i=await zu(n,oC(t,{idToken:r}));Se(i==null?void 0:i.users.length,t,"internal-error");const o=i.users[0];n._notifyReloadListener(o);const l=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?aC(o.providerUserInfo):[],c=m1(n.providerData,l),d=n.isAnonymous,p=!(n.email&&o.passwordHash)&&!(c!=null&&c.length),_=d?p:!1,m={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new xg(o.createdAt,o.lastLoginAt),isAnonymous:_};Object.assign(n,m)}async function p1(n){const e=xt(n);await Nh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function m1(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function aC(n){return n.map(e=>{var{providerId:t}=e,r=N_(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g1(n,e){const t=await iC(n,{},async()=>{const r=rl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,l=sC(n,i,"/v1/token",`key=${o}`),c=await n._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",rC.fetch()(l,{method:"POST",headers:c,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function _1(n,e){return Ds(n,"POST","/v2/accounts:revokeToken",Ns(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Se(e.idToken,"internal-error"),Se(typeof e.idToken<"u","internal-error"),Se(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):eT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Se(e.length!==0,"internal-error");const t=eT(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:o}=await g1(e,t);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:o}=t,l=new ka;return r&&(Se(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),i&&(Se(typeof i=="string","internal-error",{appName:e}),l.accessToken=i),o&&(Se(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ka,this.toJSON())}_performRefresh(){return wi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function as(n,e){Se(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Ti{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=N_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new f1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new xg(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await zu(this,this.stsTokenManager.getToken(this.auth,e));return Se(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return d1(this,e)}reload(){return p1(this)}_assign(e){this!==e&&(Se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ti(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Nh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Sr(this.auth.app))return Promise.reject(bi(this.auth));const e=await this.getIdToken();return await zu(this,c1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,l,c,d,p,_;const m=(r=t.displayName)!==null&&r!==void 0?r:void 0,y=(i=t.email)!==null&&i!==void 0?i:void 0,w=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,S=(l=t.photoURL)!==null&&l!==void 0?l:void 0,b=(c=t.tenantId)!==null&&c!==void 0?c:void 0,C=(d=t._redirectEventId)!==null&&d!==void 0?d:void 0,k=(p=t.createdAt)!==null&&p!==void 0?p:void 0,N=(_=t.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:j,emailVerified:H,isAnonymous:Y,providerData:X,stsTokenManager:x}=t;Se(j&&x,e,"internal-error");const A=ka.fromJSON(this.name,x);Se(typeof j=="string",e,"internal-error"),as(m,e.name),as(y,e.name),Se(typeof H=="boolean",e,"internal-error"),Se(typeof Y=="boolean",e,"internal-error"),as(w,e.name),as(S,e.name),as(b,e.name),as(C,e.name),as(k,e.name),as(N,e.name);const P=new Ti({uid:j,auth:e,email:y,emailVerified:H,displayName:m,isAnonymous:Y,photoURL:S,phoneNumber:w,tenantId:b,stsTokenManager:A,createdAt:k,lastLoginAt:N});return X&&Array.isArray(X)&&(P.providerData=X.map(L=>Object.assign({},L))),C&&(P._redirectEventId=C),P}static async _fromIdTokenResponse(e,t,r=!1){const i=new ka;i.updateFromServerResponse(t);const o=new Ti({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Nh(o),o}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Se(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?aC(i.providerUserInfo):[],l=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),c=new ka;c.updateFromIdToken(r);const d=new Ti({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:l}),p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new xg(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(d,p),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tT=new Map;function Ii(n){Pi(n instanceof Function,"Expected a class definition");let e=tT.get(n);return e?(Pi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,tT.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}lC.type="NONE";const nT=lC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ph(n,e,t){return`firebase:${n}:${e}:${t}`}class Na{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=ph(this.userKey,i.apiKey,o),this.fullPersistenceKey=ph("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ti._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Na(Ii(nT),e,r);const i=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let o=i[0]||Ii(nT);const l=ph(r,e.config.apiKey,e.name);let c=null;for(const p of t)try{const _=await p._get(l);if(_){const m=Ti._fromJSON(e,_);p!==o&&(c=m),o=p;break}}catch{}const d=i.filter(p=>p._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new Na(o,e,r):(o=d[0],c&&await o._set(l,c.toJSON()),await Promise.all(t.map(async p=>{if(p!==o)try{await p._remove(l)}catch{}})),new Na(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rT(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(hC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(uC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(pC(e))return"Blackberry";if(mC(e))return"Webos";if(cC(e))return"Safari";if((e.includes("chrome/")||dC(e))&&!e.includes("edge/"))return"Chrome";if(fC(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function uC(n=fn()){return/firefox\//i.test(n)}function cC(n=fn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function dC(n=fn()){return/crios\//i.test(n)}function hC(n=fn()){return/iemobile/i.test(n)}function fC(n=fn()){return/android/i.test(n)}function pC(n=fn()){return/blackberry/i.test(n)}function mC(n=fn()){return/webos/i.test(n)}function V_(n=fn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function y1(n=fn()){var e;return V_(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function v1(){return Pk()&&document.documentMode===10}function gC(n=fn()){return V_(n)||fC(n)||mC(n)||pC(n)||/windows phone/i.test(n)||hC(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _C(n,e=[]){let t;switch(n){case"Browser":t=rT(fn());break;case"Worker":t=`${rT(fn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ao}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((l,c)=>{try{const d=e(o);l(d)}catch(d){c(d)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w1(n,e={}){return Ds(n,"GET","/v2/passwordPolicy",Ns(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T1=6;class I1{constructor(e){var t,r,i,o;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=l.minPasswordLength)!==null&&t!==void 0?t:T1,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,l,c;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(t=d.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),d.isValid&&(d.isValid=(r=d.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(i=d.containsLowercaseLetter)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(o=d.containsUppercaseLetter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(l=d.containsNumericCharacter)!==null&&l!==void 0?l:!0),d.isValid&&(d.isValid=(c=d.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),d}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new iT(this),this.idTokenSubscription=new iT(this),this.beforeStateQueue=new E1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=nC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ii(t)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Na.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await oC(this,{idToken:e}),r=await Ti._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Sr(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=i==null?void 0:i._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===c)&&(d!=null&&d.user)&&(i=d.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Nh(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=r1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Sr(this.app))return Promise.reject(bi(this));const t=e?xt(e):null;return t&&Se(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Sr(this.app)?Promise.reject(bi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Sr(this.app)?Promise.reject(bi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ii(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await w1(this),t=new I1(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new yc("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await _1(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ii(e)||this._popupRedirectResolver;Se(t,this,"argument-error"),this.redirectPersistenceManager=await Na.create(this,[Ii(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let l=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Se(c,this,"internal-error"),c.then(()=>{l||o(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,r,i);return()=>{l=!0,d()}}else{const d=e.addObserver(t);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_C(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&ZN(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Os(n){return xt(n)}class iT{constructor(e){this.auth=e,this.observer=null,this.addObserver=jk(t=>this.observer=t)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let If={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function C1(n){If=n}function yC(n){return If.loadJS(n)}function b1(){return If.recaptchaEnterpriseScript}function R1(){return If.gapiScript}function A1(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class x1{constructor(){this.enterprise=new P1}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class P1{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const k1="recaptcha-enterprise",vC="NO_RECAPTCHA";class N1{constructor(e){this.type=k1,this.auth=Os(e)}async verify(e="verify",t=!1){async function r(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,c)=>{u1(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const p=new l1(d);return o.tenantId==null?o._agentRecaptchaConfig=p:o._tenantRecaptchaConfigs[o.tenantId]=p,l(p.siteKey)}}).catch(d=>{c(d)})})}function i(o,l,c){const d=window.grecaptcha;Zw(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:e}).then(p=>{l(p)}).catch(()=>{l(vC)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new x1().execute("siteKey",{action:"verify"}):new Promise((o,l)=>{r(this.auth).then(c=>{if(!t&&Zw(window.grecaptcha))i(c,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let d=b1();d.length!==0&&(d+=c),yC(d).then(()=>{i(c,o,l)}).catch(p=>{l(p)})}}).catch(c=>{l(c)})})}}async function sT(n,e,t,r=!1,i=!1){const o=new N1(n);let l;if(i)l=vC;else try{l=await o.verify(t)}catch{l=await o.verify(t,!0)}const c=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const d=c.phoneEnrollmentInfo.phoneNumber,p=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:p,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const d=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:l}):Object.assign(c,{captchaResponse:l}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function Pg(n,e,t,r,i){var o;if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await sT(n,e,t,t==="getOobCode");return r(n,l)}else return r(n,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await sT(n,e,t,t==="getOobCode");return r(n,c)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D1(n,e){const t=Tf(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),o=t.getOptions();if(xh(o,e??{}))return i;or(i,"already-initialized")}return t.initialize({options:e})}function O1(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Ii);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function L1(n,e,t){const r=Os(n);Se(r._canInitEmulator,r,"emulator-config-failed"),Se(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,o=EC(e),{host:l,port:c}=M1(e),d=c===null?"":`:${c}`;r.config.emulator={url:`${o}//${l}${d}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:l,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),V1()}function EC(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function M1(n){const e=EC(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:oT(r.substr(o.length+1))}}else{const[o,l]=r.split(":");return{host:o,port:oT(l)}}}function oT(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function V1(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return wi("not implemented")}_getIdTokenResponse(e){return wi("not implemented")}_linkToIdToken(e,t){return wi("not implemented")}_getReauthenticationResolver(e){return wi("not implemented")}}async function F1(n,e){return Ds(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U1(n,e){return Ec(n,"POST","/v1/accounts:signInWithPassword",Ns(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B1(n,e){return Ec(n,"POST","/v1/accounts:signInWithEmailLink",Ns(n,e))}async function j1(n,e){return Ec(n,"POST","/v1/accounts:signInWithEmailLink",Ns(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u extends F_{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new $u(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new $u(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Pg(e,t,"signInWithPassword",U1);case"emailLink":return B1(e,{email:this._email,oobCode:this._password});default:or(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Pg(e,r,"signUpPassword",F1);case"emailLink":return j1(e,{idToken:t,email:this._email,oobCode:this._password});default:or(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Da(n,e){return Ec(n,"POST","/v1/accounts:signInWithIdp",Ns(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1="http://localhost";class Eo extends F_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Eo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):or("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,o=N_(t,["providerId","signInMethod"]);if(!r||!i)return null;const l=new Eo(r,i);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return Da(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Da(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Da(e,t)}buildRequest(){const e={requestUri:z1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=rl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $1(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function W1(n){const e=Eu(wu(n)).link,t=e?Eu(wu(e)).deep_link_id:null,r=Eu(wu(n)).deep_link_id;return(r?Eu(wu(r)).link:null)||r||t||e||n}class U_{constructor(e){var t,r,i,o,l,c;const d=Eu(wu(e)),p=(t=d.apiKey)!==null&&t!==void 0?t:null,_=(r=d.oobCode)!==null&&r!==void 0?r:null,m=$1((i=d.mode)!==null&&i!==void 0?i:null);Se(p&&_&&m,"argument-error"),this.apiKey=p,this.operation=m,this.code=_,this.continueUrl=(o=d.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(l=d.languageCode)!==null&&l!==void 0?l:null,this.tenantId=(c=d.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const t=W1(e);try{return new U_(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(){this.providerId=il.PROVIDER_ID}static credential(e,t){return $u._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=U_.parseLink(t);return Se(r,"argument-error"),$u._fromEmailAndCode(e,r.code,r.tenantId)}}il.PROVIDER_ID="password";il.EMAIL_PASSWORD_SIGN_IN_METHOD="password";il.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc extends B_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls extends wc{constructor(){super("facebook.com")}static credential(e){return Eo._fromParams({providerId:ls.PROVIDER_ID,signInMethod:ls.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ls.credentialFromTaggedObject(e)}static credentialFromError(e){return ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ls.credential(e.oauthAccessToken)}catch{return null}}}ls.FACEBOOK_SIGN_IN_METHOD="facebook.com";ls.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr extends wc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Eo._fromParams({providerId:Hr.PROVIDER_ID,signInMethod:Hr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Hr.credentialFromTaggedObject(e)}static credentialFromError(e){return Hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Hr.credential(t,r)}catch{return null}}}Hr.GOOGLE_SIGN_IN_METHOD="google.com";Hr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us extends wc{constructor(){super("github.com")}static credential(e){return Eo._fromParams({providerId:us.PROVIDER_ID,signInMethod:us.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return us.credentialFromTaggedObject(e)}static credentialFromError(e){return us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return us.credential(e.oauthAccessToken)}catch{return null}}}us.GITHUB_SIGN_IN_METHOD="github.com";us.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs extends wc{constructor(){super("twitter.com")}static credential(e,t){return Eo._fromParams({providerId:cs.PROVIDER_ID,signInMethod:cs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return cs.credentialFromTaggedObject(e)}static credentialFromError(e){return cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return cs.credential(t,r)}catch{return null}}}cs.TWITTER_SIGN_IN_METHOD="twitter.com";cs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H1(n,e){return Ec(n,"POST","/v1/accounts:signUp",Ns(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const o=await Ti._fromIdTokenResponse(e,r,i),l=aT(r);return new wo({user:o,providerId:l,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=aT(r);return new wo({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function aT(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh extends Li{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Dh.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new Dh(e,t,r,i)}}function wC(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Dh._fromErrorAndOperation(n,o,e,r):o})}async function G1(n,e,t=!1){const r=await zu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return wo._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q1(n,e,t=!1){const{auth:r}=n;if(Sr(r.app))return Promise.reject(bi(r));const i="reauthenticate";try{const o=await zu(n,wC(r,i,e,n),t);Se(o.idToken,r,"internal-error");const l=M_(o.idToken);Se(l,r,"internal-error");const{sub:c}=l;return Se(n.uid===c,r,"user-mismatch"),wo._forOperation(n,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&or(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TC(n,e,t=!1){if(Sr(n.app))return Promise.reject(bi(n));const r="signIn",i=await wC(n,r,e),o=await wo._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(o.user),o}async function K1(n,e){return TC(Os(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IC(n){const e=Os(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Q1(n,e,t){if(Sr(n.app))return Promise.reject(bi(n));const r=Os(n),l=await Pg(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",H1).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&IC(n),d}),c=await wo._fromIdTokenResponse(r,"signIn",l);return await r._updateCurrentUser(c.user),c}function Y1(n,e,t){return Sr(n.app)?Promise.reject(bi(n)):K1(xt(n),il.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&IC(n),r})}function X1(n,e,t,r){return xt(n).onIdTokenChanged(e,t,r)}function J1(n,e,t){return xt(n).beforeAuthStateChanged(e,t)}function SC(n,e,t,r){return xt(n).onAuthStateChanged(e,t,r)}function Z1(n){return xt(n).signOut()}const Oh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Oh,"1"),this.storage.removeItem(Oh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD=1e3,tD=10;class bC extends CC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=gC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,c,d)=>{this.notifyListeners(l,d)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const l=this.storage.getItem(r);!t&&this.localCache[r]===l||this.notifyListeners(r,l)},o=this.storage.getItem(r);v1()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,tD):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},eD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}bC.type="LOCAL";const nD=bC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC extends CC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}RC.type="SESSION";const AC=RC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rD(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new Sf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:o}=t.data,l=this.handlersMap[i];if(!(l!=null&&l.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const c=Array.from(l).map(async p=>p(t.origin,o)),d=await rD(c);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Sf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j_(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,l;return new Promise((c,d)=>{const p=j_("",20);i.port1.start();const _=setTimeout(()=>{d(new Error("unsupported_event"))},r);l={messageChannel:i,onMessage(m){const y=m;if(y.data.eventId===p)switch(y.data.status){case"ack":clearTimeout(_),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(y.data.response);break;default:clearTimeout(_),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(l),i.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[i.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yr(){return window}function sD(n){Yr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xC(){return typeof Yr().WorkerGlobalScope<"u"&&typeof Yr().importScripts=="function"}async function oD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function aD(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function lD(){return xC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PC="firebaseLocalStorageDb",uD=1,Lh="firebaseLocalStorage",kC="fbase_key";class Tc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Cf(n,e){return n.transaction([Lh],e?"readwrite":"readonly").objectStore(Lh)}function cD(){const n=indexedDB.deleteDatabase(PC);return new Tc(n).toPromise()}function kg(){const n=indexedDB.open(PC,uD);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Lh,{keyPath:kC})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Lh)?e(r):(r.close(),await cD(),e(await kg()))})})}async function lT(n,e,t){const r=Cf(n,!0).put({[kC]:e,value:t});return new Tc(r).toPromise()}async function dD(n,e){const t=Cf(n,!1).get(e),r=await new Tc(t).toPromise();return r===void 0?null:r.value}function uT(n,e){const t=Cf(n,!0).delete(e);return new Tc(t).toPromise()}const hD=800,fD=3;class NC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await kg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>fD)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return xC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Sf._getInstance(lD()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await oD(),!this.activeServiceWorker)return;this.sender=new iD(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||aD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await kg();return await lT(e,Oh,"1"),await uT(e,Oh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>lT(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>dD(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>uT(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=Cf(i,!1).getAll();return new Tc(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),hD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}NC.type="LOCAL";const pD=NC;new vc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DC(n,e){return e?Ii(e):(Se(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_ extends F_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Da(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Da(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Da(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function mD(n){return TC(n.auth,new z_(n),n.bypassAuthState)}function gD(n){const{auth:e,user:t}=n;return Se(t,e,"internal-error"),q1(t,new z_(n),n.bypassAuthState)}async function _D(n){const{auth:e,user:t}=n;return Se(t,e,"internal-error"),G1(t,new z_(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:l,type:c}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(d))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return mD;case"linkViaPopup":case"linkViaRedirect":return _D;case"reauthViaPopup":case"reauthViaRedirect":return gD;default:or(this.auth,"internal-error")}}resolve(e){Pi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Pi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yD=new vc(2e3,1e4);async function LC(n,e,t){if(Sr(n.app))return Promise.reject(Ar(n,"operation-not-supported-in-this-environment"));const r=Os(n);e1(n,e,B_);const i=DC(r,t);return new po(r,"signInViaPopup",e,i).executeNotNull()}class po extends OC{constructor(e,t,r,i,o){super(e,t,i,o),this.provider=r,this.authWindow=null,this.pollId=null,po.currentPopupAction&&po.currentPopupAction.cancel(),po.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Se(e,this.auth,"internal-error"),e}async onExecution(){Pi(this.filter.length===1,"Popup operations only handle one event");const e=j_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ar(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ar(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,po.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ar(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,yD.get())};e()}}po.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vD="pendingRedirect",mh=new Map;class ED extends OC{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=mh.get(this.auth._key());if(!e){try{const r=await wD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}mh.set(this.auth._key(),e)}return this.bypassAuthState||mh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function wD(n,e){const t=SD(e),r=ID(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function TD(n,e){mh.set(n._key(),e)}function ID(n){return Ii(n._redirectPersistence)}function SD(n){return ph(vD,n.config.apiKey,n.name)}async function CD(n,e,t=!1){if(Sr(n.app))return Promise.reject(bi(n));const r=Os(n),i=DC(r,e),l=await new ED(r,i,t).execute();return l&&!t&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bD=10*60*1e3;class RD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!AD(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!MC(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Ar(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=bD&&this.cachedEventUids.clear(),this.cachedEventUids.has(cT(e))}saveEventToCache(e){this.cachedEventUids.add(cT(e)),this.lastProcessedEventTime=Date.now()}}function cT(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function MC({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function AD(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return MC(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xD(n,e={}){return Ds(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,kD=/^https?/;async function ND(n){if(n.config.emulator)return;const{authorizedDomains:e}=await xD(n);for(const t of e)try{if(DD(t))return}catch{}or(n,"unauthorized-domain")}function DD(n){const e=Ag(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===r}if(!kD.test(t))return!1;if(PD.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OD=new vc(3e4,6e4);function dT(){const n=Yr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function LD(n){return new Promise((e,t)=>{var r,i,o;function l(){dT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{dT(),t(Ar(n,"network-request-failed"))},timeout:OD.get()})}if(!((i=(r=Yr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Yr().gapi)===null||o===void 0)&&o.load)l();else{const c=A1("iframefcb");return Yr()[c]=()=>{gapi.load?l():t(Ar(n,"network-request-failed"))},yC(`${R1()}?onload=${c}`).catch(d=>t(d))}}).catch(e=>{throw gh=null,e})}let gh=null;function MD(n){return gh=gh||LD(n),gh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VD=new vc(5e3,15e3),FD="__/auth/iframe",UD="emulator/auth/iframe",BD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},jD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function zD(n){const e=n.config;Se(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?L_(e,UD):`https://${n.config.authDomain}/${FD}`,r={apiKey:e.apiKey,appName:n.name,v:Ao},i=jD.get(n.config.apiHost);i&&(r.eid=i);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${rl(r).slice(1)}`}async function $D(n){const e=await MD(n),t=Yr().gapi;return Se(t,n,"internal-error"),e.open({where:document.body,url:zD(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:BD,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const l=Ar(n,"network-request-failed"),c=Yr().setTimeout(()=>{o(l)},VD.get());function d(){Yr().clearTimeout(c),i(r)}r.ping(d).then(d,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},HD=500,GD=600,qD="_blank",KD="http://localhost";class hT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function QD(n,e,t,r=HD,i=GD){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const d=Object.assign(Object.assign({},WD),{width:r.toString(),height:i.toString(),top:o,left:l}),p=fn().toLowerCase();t&&(c=dC(p)?qD:t),uC(p)&&(e=e||KD,d.scrollbars="yes");const _=Object.entries(d).reduce((y,[w,S])=>`${y}${w}=${S},`,"");if(y1(p)&&c!=="_self")return YD(e||"",c),new hT(null);const m=window.open(e||"",c,_);Se(m,n,"popup-blocked");try{m.focus()}catch{}return new hT(m)}function YD(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XD="__/auth/handler",JD="emulator/auth/handler",ZD=encodeURIComponent("fac");async function fT(n,e,t,r,i,o){Se(n.config.authDomain,n,"auth-domain-config-required"),Se(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Ao,eventId:i};if(e instanceof B_){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",Tg(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,m]of Object.entries({}))l[_]=m}if(e instanceof wc){const _=e.getScopes().filter(m=>m!=="");_.length>0&&(l.scopes=_.join(","))}n.tenantId&&(l.tid=n.tenantId);const c=l;for(const _ of Object.keys(c))c[_]===void 0&&delete c[_];const d=await n._getAppCheckToken(),p=d?`#${ZD}=${encodeURIComponent(d)}`:"";return`${eO(n)}?${rl(c).slice(1)}${p}`}function eO({config:n}){return n.emulator?L_(n,JD):`https://${n.authDomain}/${XD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gm="webStorageSupport";class tO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=AC,this._completeRedirectFn=CD,this._overrideRedirectResult=TD}async _openPopup(e,t,r,i){var o;Pi((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const l=await fT(e,t,r,Ag(),i);return QD(e,l,j_())}async _openRedirect(e,t,r,i){await this._originValidation(e);const o=await fT(e,t,r,Ag(),i);return sD(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(Pi(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await $D(e),r=new RD(e);return t.register("authEvent",i=>(Se(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Gm,{type:Gm},i=>{var o;const l=(o=i==null?void 0:i[0])===null||o===void 0?void 0:o[Gm];l!==void 0&&t(!!l),or(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=ND(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return gC()||cC()||V_()}}const nO=tO;var pT="@firebase/auth",mT="1.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iO(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function sO(n){vo(new ws("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:c}=r.options;Se(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const d={apiKey:l,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_C(n)},p=new S1(r,i,o,d);return O1(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),vo(new ws("auth-internal",e=>{const t=Os(e.getProvider("auth").getImmediate());return(r=>new rO(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Qr(pT,mT,iO(n)),Qr(pT,mT,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oO=5*60,aO=GS("authIdTokenMaxAge")||oO;let gT=null;const lO=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>aO)return;const i=t==null?void 0:t.token;gT!==i&&(gT=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function bf(n=k_()){const e=Tf(n,"auth");if(e.isInitialized())return e.getImmediate();const t=D1(n,{popupRedirectResolver:nO,persistence:[pD,nD,AC]}),r=GS("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const l=lO(o.toString());J1(t,l,()=>l(t.currentUser)),X1(t,c=>l(c))}}const i=$S("auth");return i&&L1(t,`http://${i}`),t}function uO(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}C1({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const o=Ar("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",uO().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});sO("Browser");function VC(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=VC(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function _o(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=VC(n))&&(r&&(r+=" "),r+=e);return r}function cO(n){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t),t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n))}cO(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var Ic=n=>typeof n=="number"&&!isNaN(n),To=n=>typeof n=="string",ki=n=>typeof n=="function",dO=n=>To(n)||Ic(n),Ng=n=>To(n)||ki(n)?n:null,hO=(n,e)=>n===!1||Ic(n)&&n>0?n:e,Dg=n=>M.isValidElement(n)||To(n)||ki(n)||Ic(n);function fO(n,e,t=300){let{scrollHeight:r,style:i}=n;requestAnimationFrame(()=>{i.minHeight="initial",i.height=r+"px",i.transition=`all ${t}ms`,requestAnimationFrame(()=>{i.height="0",i.padding="0",i.margin="0",setTimeout(e,t)})})}function pO({enter:n,exit:e,appendPosition:t=!1,collapse:r=!0,collapseDuration:i=300}){return function({children:o,position:l,preventExitTransition:c,done:d,nodeRef:p,isIn:_,playToast:m}){let y=t?`${n}--${l}`:n,w=t?`${e}--${l}`:e,S=M.useRef(0);return M.useLayoutEffect(()=>{let b=p.current,C=y.split(" "),k=N=>{N.target===p.current&&(m(),b.removeEventListener("animationend",k),b.removeEventListener("animationcancel",k),S.current===0&&N.type!=="animationcancel"&&b.classList.remove(...C))};b.classList.add(...C),b.addEventListener("animationend",k),b.addEventListener("animationcancel",k)},[]),M.useEffect(()=>{let b=p.current,C=()=>{b.removeEventListener("animationend",C),r?fO(b,d,i):d()};_||(c?C():(S.current=1,b.className+=` ${w}`,b.addEventListener("animationend",C)))},[_]),be.createElement(be.Fragment,null,o)}}function _T(n,e){return{content:FC(n.content,n.props),containerId:n.props.containerId,id:n.props.toastId,theme:n.props.theme,type:n.props.type,data:n.props.data||{},isLoading:n.props.isLoading,icon:n.props.icon,reason:n.removalReason,status:e}}function FC(n,e,t=!1){return M.isValidElement(n)&&!To(n.type)?M.cloneElement(n,{closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:t}):ki(n)?n({closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:t}):n}function mO({closeToast:n,theme:e,ariaLabel:t="close"}){return be.createElement("button",{className:`Toastify__close-button Toastify__close-button--${e}`,type:"button",onClick:r=>{r.stopPropagation(),n(!0)},"aria-label":t},be.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},be.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function gO({delay:n,isRunning:e,closeToast:t,type:r="default",hide:i,className:o,controlledProgress:l,progress:c,rtl:d,isIn:p,theme:_}){let m=i||l&&c===0,y={animationDuration:`${n}ms`,animationPlayState:e?"running":"paused"};l&&(y.transform=`scaleX(${c})`);let w=_o("Toastify__progress-bar",l?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${_}`,`Toastify__progress-bar--${r}`,{"Toastify__progress-bar--rtl":d}),S=ki(o)?o({rtl:d,type:r,defaultClassName:w}):_o(w,o),b={[l&&c>=1?"onTransitionEnd":"onAnimationEnd"]:l&&c<1?null:()=>{p&&t()}};return be.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":m},be.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${_} Toastify__progress-bar--${r}`}),be.createElement("div",{role:"progressbar","aria-hidden":m?"true":"false","aria-label":"notification timer",className:S,style:y,...b}))}var _O=1,UC=()=>`${_O++}`;function yO(n,e,t){let r=1,i=0,o=[],l=[],c=e,d=new Map,p=new Set,_=N=>(p.add(N),()=>p.delete(N)),m=()=>{l=Array.from(d.values()),p.forEach(N=>N())},y=({containerId:N,toastId:j,updateId:H})=>{let Y=N?N!==n:n!==1,X=d.has(j)&&H==null;return Y||X},w=(N,j)=>{d.forEach(H=>{var Y;(j==null||j===H.props.toastId)&&((Y=H.toggle)==null||Y.call(H,N))})},S=N=>{var j,H;(H=(j=N.props)==null?void 0:j.onClose)==null||H.call(j,N.removalReason),N.isActive=!1},b=N=>{if(N==null)d.forEach(S);else{let j=d.get(N);j&&S(j)}m()},C=()=>{i-=o.length,o=[]},k=N=>{var j,H;let{toastId:Y,updateId:X}=N.props,x=X==null;N.staleId&&d.delete(N.staleId),N.isActive=!0,d.set(Y,N),m(),t(_T(N,x?"added":"updated")),x&&((H=(j=N.props).onOpen)==null||H.call(j))};return{id:n,props:c,observe:_,toggle:w,removeToast:b,toasts:d,clearQueue:C,buildToast:(N,j)=>{if(y(j))return;let{toastId:H,updateId:Y,data:X,staleId:x,delay:A}=j,P=Y==null;P&&i++;let L={...c,style:c.toastStyle,key:r++,...Object.fromEntries(Object.entries(j).filter(([B,O])=>O!=null)),toastId:H,updateId:Y,data:X,isIn:!1,className:Ng(j.className||c.toastClassName),progressClassName:Ng(j.progressClassName||c.progressClassName),autoClose:j.isLoading?!1:hO(j.autoClose,c.autoClose),closeToast(B){d.get(H).removalReason=B,b(H)},deleteToast(){let B=d.get(H);if(B!=null){if(t(_T(B,"removed")),d.delete(H),i--,i<0&&(i=0),o.length>0){k(o.shift());return}m()}}};L.closeButton=c.closeButton,j.closeButton===!1||Dg(j.closeButton)?L.closeButton=j.closeButton:j.closeButton===!0&&(L.closeButton=Dg(c.closeButton)?c.closeButton:!0);let V={content:N,props:L,staleId:x};c.limit&&c.limit>0&&i>c.limit&&P?o.push(V):Ic(A)?setTimeout(()=>{k(V)},A):k(V)},setProps(N){c=N},setToggle:(N,j)=>{let H=d.get(N);H&&(H.toggle=j)},isToastActive:N=>{var j;return(j=d.get(N))==null?void 0:j.isActive},getSnapshot:()=>l}}var En=new Map,Wu=[],Og=new Set,vO=n=>Og.forEach(e=>e(n)),BC=()=>En.size>0;function EO(){Wu.forEach(n=>zC(n.content,n.options)),Wu=[]}var wO=(n,{containerId:e})=>{var t;return(t=En.get(e||1))==null?void 0:t.toasts.get(n)};function jC(n,e){var t;if(e)return!!((t=En.get(e))!=null&&t.isToastActive(n));let r=!1;return En.forEach(i=>{i.isToastActive(n)&&(r=!0)}),r}function TO(n){if(!BC()){Wu=Wu.filter(e=>n!=null&&e.options.toastId!==n);return}if(n==null||dO(n))En.forEach(e=>{e.removeToast(n)});else if(n&&("containerId"in n||"id"in n)){let e=En.get(n.containerId);e?e.removeToast(n.id):En.forEach(t=>{t.removeToast(n.id)})}}var IO=(n={})=>{En.forEach(e=>{e.props.limit&&(!n.containerId||e.id===n.containerId)&&e.clearQueue()})};function zC(n,e){Dg(n)&&(BC()||Wu.push({content:n,options:e}),En.forEach(t=>{t.buildToast(n,e)}))}function SO(n){var e;(e=En.get(n.containerId||1))==null||e.setToggle(n.id,n.fn)}function $C(n,e){En.forEach(t=>{(e==null||!(e!=null&&e.containerId)||(e==null?void 0:e.containerId)===t.id)&&t.toggle(n,e==null?void 0:e.id)})}function CO(n){let e=n.containerId||1;return{subscribe(t){let r=yO(e,n,vO);En.set(e,r);let i=r.observe(t);return EO(),()=>{i(),En.delete(e)}},setProps(t){var r;(r=En.get(e))==null||r.setProps(t)},getSnapshot(){var t;return(t=En.get(e))==null?void 0:t.getSnapshot()}}}function bO(n){return Og.add(n),()=>{Og.delete(n)}}function RO(n){return n&&(To(n.toastId)||Ic(n.toastId))?n.toastId:UC()}function Sc(n,e){return zC(n,e),e.toastId}function Rf(n,e){return{...e,type:e&&e.type||n,toastId:RO(e)}}function Af(n){return(e,t)=>Sc(e,Rf(n,t))}function Re(n,e){return Sc(n,Rf("default",e))}Re.loading=(n,e)=>Sc(n,Rf("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e}));function AO(n,{pending:e,error:t,success:r},i){let o;e&&(o=To(e)?Re.loading(e,i):Re.loading(e.render,{...i,...e}));let l={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},c=(p,_,m)=>{if(_==null){Re.dismiss(o);return}let y={type:p,...l,...i,data:m},w=To(_)?{render:_}:_;return o?Re.update(o,{...y,...w}):Re(w.render,{...y,...w}),m},d=ki(n)?n():n;return d.then(p=>c("success",r,p)).catch(p=>c("error",t,p)),d}Re.promise=AO;Re.success=Af("success");Re.info=Af("info");Re.error=Af("error");Re.warning=Af("warning");Re.warn=Re.warning;Re.dark=(n,e)=>Sc(n,Rf("default",{theme:"dark",...e}));function xO(n){TO(n)}Re.dismiss=xO;Re.clearWaitingQueue=IO;Re.isActive=jC;Re.update=(n,e={})=>{let t=wO(n,e);if(t){let{props:r,content:i}=t,o={delay:100,...r,...e,toastId:e.toastId||n,updateId:UC()};o.toastId!==n&&(o.staleId=n);let l=o.render||i;delete o.render,Sc(l,o)}};Re.done=n=>{Re.update(n,{progress:1})};Re.onChange=bO;Re.play=n=>$C(!0,n);Re.pause=n=>$C(!1,n);function PO(n){var e;let{subscribe:t,getSnapshot:r,setProps:i}=M.useRef(CO(n)).current;i(n);let o=(e=M.useSyncExternalStore(t,r,r))==null?void 0:e.slice();function l(c){if(!o)return[];let d=new Map;return n.newestOnTop&&o.reverse(),o.forEach(p=>{let{position:_}=p.props;d.has(_)||d.set(_,[]),d.get(_).push(p)}),Array.from(d,p=>c(p[0],p[1]))}return{getToastToRender:l,isToastActive:jC,count:o==null?void 0:o.length}}function kO(n){let[e,t]=M.useState(!1),[r,i]=M.useState(!1),o=M.useRef(null),l=M.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:c,pauseOnHover:d,closeToast:p,onClick:_,closeOnClick:m}=n;SO({id:n.toastId,containerId:n.containerId,fn:t}),M.useEffect(()=>{if(n.pauseOnFocusLoss)return y(),()=>{w()}},[n.pauseOnFocusLoss]);function y(){document.hasFocus()||k(),window.addEventListener("focus",C),window.addEventListener("blur",k)}function w(){window.removeEventListener("focus",C),window.removeEventListener("blur",k)}function S(x){if(n.draggable===!0||n.draggable===x.pointerType){N();let A=o.current;l.canCloseOnClick=!0,l.canDrag=!0,A.style.transition="none",n.draggableDirection==="x"?(l.start=x.clientX,l.removalDistance=A.offsetWidth*(n.draggablePercent/100)):(l.start=x.clientY,l.removalDistance=A.offsetHeight*(n.draggablePercent===80?n.draggablePercent*1.5:n.draggablePercent)/100)}}function b(x){let{top:A,bottom:P,left:L,right:V}=o.current.getBoundingClientRect();x.nativeEvent.type!=="touchend"&&n.pauseOnHover&&x.clientX>=L&&x.clientX<=V&&x.clientY>=A&&x.clientY<=P?k():C()}function C(){t(!0)}function k(){t(!1)}function N(){l.didMove=!1,document.addEventListener("pointermove",H),document.addEventListener("pointerup",Y)}function j(){document.removeEventListener("pointermove",H),document.removeEventListener("pointerup",Y)}function H(x){let A=o.current;if(l.canDrag&&A){l.didMove=!0,e&&k(),n.draggableDirection==="x"?l.delta=x.clientX-l.start:l.delta=x.clientY-l.start,l.start!==x.clientX&&(l.canCloseOnClick=!1);let P=n.draggableDirection==="x"?`${l.delta}px, var(--y)`:`0, calc(${l.delta}px + var(--y))`;A.style.transform=`translate3d(${P},0)`,A.style.opacity=`${1-Math.abs(l.delta/l.removalDistance)}`}}function Y(){j();let x=o.current;if(l.canDrag&&l.didMove&&x){if(l.canDrag=!1,Math.abs(l.delta)>l.removalDistance){i(!0),n.closeToast(!0),n.collapseAll();return}x.style.transition="transform 0.2s, opacity 0.2s",x.style.removeProperty("transform"),x.style.removeProperty("opacity")}}let X={onPointerDown:S,onPointerUp:b};return c&&d&&(X.onMouseEnter=k,n.stacked||(X.onMouseLeave=C)),m&&(X.onClick=x=>{_&&_(x),l.canCloseOnClick&&p(!0)}),{playToast:C,pauseToast:k,isRunning:e,preventExitTransition:r,toastRef:o,eventHandlers:X}}var NO=typeof window<"u"?M.useLayoutEffect:M.useEffect,xf=({theme:n,type:e,isLoading:t,...r})=>be.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:n==="colored"?"currentColor":`var(--toastify-icon-color-${e})`,...r});function DO(n){return be.createElement(xf,{...n},be.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function OO(n){return be.createElement(xf,{...n},be.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function LO(n){return be.createElement(xf,{...n},be.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function MO(n){return be.createElement(xf,{...n},be.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function VO(){return be.createElement("div",{className:"Toastify__spinner"})}var Lg={info:OO,warning:DO,success:LO,error:MO,spinner:VO},FO=n=>n in Lg;function UO({theme:n,type:e,isLoading:t,icon:r}){let i=null,o={theme:n,type:e};return r===!1||(ki(r)?i=r({...o,isLoading:t}):M.isValidElement(r)?i=M.cloneElement(r,o):t?i=Lg.spinner():FO(e)&&(i=Lg[e](o))),i}var BO=n=>{let{isRunning:e,preventExitTransition:t,toastRef:r,eventHandlers:i,playToast:o}=kO(n),{closeButton:l,children:c,autoClose:d,onClick:p,type:_,hideProgressBar:m,closeToast:y,transition:w,position:S,className:b,style:C,progressClassName:k,updateId:N,role:j,progress:H,rtl:Y,toastId:X,deleteToast:x,isIn:A,isLoading:P,closeOnClick:L,theme:V,ariaLabel:B}=n,O=_o("Toastify__toast",`Toastify__toast-theme--${V}`,`Toastify__toast--${_}`,{"Toastify__toast--rtl":Y},{"Toastify__toast--close-on-click":L}),rt=ki(b)?b({rtl:Y,position:S,type:_,defaultClassName:O}):_o(O,b),Je=UO(n),_t=!!H||!d,Ue={closeToast:y,type:_,theme:V},ie=null;return l===!1||(ki(l)?ie=l(Ue):M.isValidElement(l)?ie=M.cloneElement(l,Ue):ie=mO(Ue)),be.createElement(w,{isIn:A,done:x,position:S,preventExitTransition:t,nodeRef:r,playToast:o},be.createElement("div",{id:X,tabIndex:0,onClick:p,"data-in":A,className:rt,...i,style:C,ref:r,...A&&{role:j,"aria-label":B}},Je!=null&&be.createElement("div",{className:_o("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!P})},Je),FC(c,n,!e),ie,!n.customProgressBar&&be.createElement(gO,{...N&&!_t?{key:`p-${N}`}:{},rtl:Y,theme:V,delay:d,isRunning:e,isIn:A,closeToast:y,hide:m,type:_,className:k,controlledProgress:_t,progress:H||0})))},jO=(n,e=!1)=>({enter:`Toastify--animate Toastify__${n}-enter`,exit:`Toastify--animate Toastify__${n}-exit`,appendPosition:e}),zO=pO(jO("bounce",!0)),$O={position:"top-right",transition:zO,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:n=>n.altKey&&n.code==="KeyT"};function WO(n){let e={...$O,...n},t=n.stacked,[r,i]=M.useState(!0),o=M.useRef(null),{getToastToRender:l,isToastActive:c,count:d}=PO(e),{className:p,style:_,rtl:m,containerId:y,hotKeys:w}=e;function S(C){let k=_o("Toastify__toast-container",`Toastify__toast-container--${C}`,{"Toastify__toast-container--rtl":m});return ki(p)?p({position:C,rtl:m,defaultClassName:k}):_o(k,Ng(p))}function b(){t&&(i(!0),Re.play())}return NO(()=>{var C;if(t){let k=o.current.querySelectorAll('[data-in="true"]'),N=12,j=(C=e.position)==null?void 0:C.includes("top"),H=0,Y=0;Array.from(k).reverse().forEach((X,x)=>{let A=X;A.classList.add("Toastify__toast--stacked"),x>0&&(A.dataset.collapsed=`${r}`),A.dataset.pos||(A.dataset.pos=j?"top":"bot");let P=H*(r?.2:1)+(r?0:N*x);A.style.setProperty("--y",`${j?P:P*-1}px`),A.style.setProperty("--g",`${N}`),A.style.setProperty("--s",`${1-(r?Y:0)}`),H+=A.offsetHeight,Y+=.025})}},[r,d,t]),M.useEffect(()=>{function C(k){var N;let j=o.current;w(k)&&((N=j.querySelector('[tabIndex="0"]'))==null||N.focus(),i(!1),Re.pause()),k.key==="Escape"&&(document.activeElement===j||j!=null&&j.contains(document.activeElement))&&(i(!0),Re.play())}return document.addEventListener("keydown",C),()=>{document.removeEventListener("keydown",C)}},[w]),be.createElement("section",{ref:o,className:"Toastify",id:y,onMouseEnter:()=>{t&&(i(!1),Re.pause())},onMouseLeave:b,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":e["aria-label"]},l((C,k)=>{let N=k.length?{..._}:{..._,pointerEvents:"none"};return be.createElement("div",{tabIndex:-1,className:S(C),"data-stacked":t,style:N,key:`c-${C}`},k.map(({content:j,props:H})=>be.createElement(BO,{...H,stacked:t,collapseAll:b,isIn:c(H.toastId,H.containerId),key:`t-${H.key}`},j)))}))}var HO="firebase",GO="11.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qr(HO,GO,"app");var yT={};const vT="@firebase/database",ET="1.0.10";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let WC="";function qO(n){WC=n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KO{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Vt(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:Bu(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QO{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return ni(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HC=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new KO(e)}}catch{}return new QO},mo=HC("localStorage"),YO=HC("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oa=new wf("@firebase/database"),XO=function(){let n=1;return function(){return n++}}(),GC=function(n){const e=Wk(n),t=new Bk;t.update(e);const r=t.digest();return A_.encodeByteArray(r)},Cc=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Cc.apply(null,r):typeof r=="object"?e+=Vt(r):e+=r,e+=" "}return e};let Au=null,wT=!0;const JO=function(n,e){oe(!0,"Can't turn on custom loggers persistently."),Oa.logLevel=Ve.VERBOSE,Au=Oa.log.bind(Oa)},en=function(...n){if(wT===!0&&(wT=!1,Au===null&&YO.get("logging_enabled")===!0&&JO()),Au){const e=Cc.apply(null,n);Au(e)}},bc=function(n){return function(...e){en(n,...e)}},Mg=function(...n){const e="FIREBASE INTERNAL ERROR: "+Cc(...n);Oa.error(e)},Ni=function(...n){const e=`FIREBASE FATAL ERROR: ${Cc(...n)}`;throw Oa.error(e),new Error(e)},Tn=function(...n){const e="FIREBASE WARNING: "+Cc(...n);Oa.warn(e)},ZO=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Tn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},$_=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},eL=function(n){if(document.readyState==="complete")n();else{let e=!1;const t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},Fa="[MIN_NAME]",Io="[MAX_NAME]",xo=function(n,e){if(n===e)return 0;if(n===Fa||e===Io)return-1;if(e===Fa||n===Io)return 1;{const t=TT(n),r=TT(e);return t!==null?r!==null?t-r===0?n.length-e.length:t-r:-1:r!==null?1:n<e?-1:1}},tL=function(n,e){return n===e?0:n<e?-1:1},hu=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+Vt(e))},W_=function(n){if(typeof n!="object"||n===null)return Vt(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)r!==0&&(t+=","),t+=Vt(e[r]),t+=":",t+=W_(n[e[r]]);return t+="}",t},qC=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)i+e>t?r.push(n.substring(i,t)):r.push(n.substring(i,i+e));return r};function rn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const KC=function(n){oe(!$_(n),"Invalid JSON number");const e=11,t=52,r=(1<<e-1)-1;let i,o,l,c,d;n===0?(o=0,l=0,i=1/n===-1/0?1:0):(i=n<0,n=Math.abs(n),n>=Math.pow(2,1-r)?(c=Math.min(Math.floor(Math.log(n)/Math.LN2),r),o=c+r,l=Math.round(n*Math.pow(2,t-c)-Math.pow(2,t))):(o=0,l=Math.round(n/Math.pow(2,1-r-t))));const p=[];for(d=t;d;d-=1)p.push(l%2?1:0),l=Math.floor(l/2);for(d=e;d;d-=1)p.push(o%2?1:0),o=Math.floor(o/2);p.push(i?1:0),p.reverse();const _=p.join("");let m="";for(d=0;d<64;d+=8){let y=parseInt(_.substr(d,8),2).toString(16);y.length===1&&(y="0"+y),m=m+y}return m.toLowerCase()},nL=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},rL=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function iL(n,e){let t="Unknown Error";n==="too_big"?t="The data requested exceeds the maximum size that can be accessed with a single request.":n==="permission_denied"?t="Client doesn't have permission to access the desired data.":n==="unavailable"&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}const sL=new RegExp("^-?(0*)\\d{1,10}$"),oL=-2147483648,aL=2147483647,TT=function(n){if(sL.test(n)){const e=Number(n);if(e>=oL&&e<=aL)return e}return null},sl=function(n){try{n()}catch(e){setTimeout(()=>{const t=e.stack||"";throw Tn("Exception was thrown by user callback.",t),e},Math.floor(0))}},lL=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},xu=function(n,e){const t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t==null?void 0:t.getImmediate({optional:!0}),this.appCheck||t==null||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Tn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cL{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(en("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Tn(e)}}class _h{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}_h.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H_="5",QC="v",YC="s",XC="r",JC="f",ZC=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,e0="ls",t0="p",Vg="ac",n0="websocket",r0="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0{constructor(e,t,r,i,o=!1,l="",c=!1,d=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=l,this.includeNamespaceInQueryParams=c,this.isUsingEmulator=d,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=mo.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&mo.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function dL(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function s0(n,e,t){oe(typeof e=="string","typeof type must == string"),oe(typeof t=="object","typeof params must == object");let r;if(e===n0)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===r0)r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);dL(n)&&(t.ns=n.namespace);const i=[];return rn(t,(o,l)=>{i.push(o+"="+l)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hL{constructor(){this.counters_={}}incrementCounter(e,t=1){ni(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return wk(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qm={},Km={};function G_(n){const e=n.toString();return qm[e]||(qm[e]=new hL),qm[e]}function fL(n,e){const t=n.toString();return Km[t]||(Km[t]=e()),Km[t]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pL{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&sl(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IT="start",mL="close",gL="pLPCommand",_L="pRTLPCB",o0="id",a0="pw",l0="ser",yL="cb",vL="seg",EL="ts",wL="d",TL="dframe",u0=1870,c0=30,IL=u0-c0,SL=25e3,CL=3e4;class Pa{constructor(e,t,r,i,o,l,c){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=l,this.lastSessionId=c,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=bc(e),this.stats_=G_(t),this.urlFn=d=>(this.appCheckToken&&(d[Vg]=this.appCheckToken),s0(t,r0,d))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new pL(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(CL)),eL(()=>{if(this.isClosed_)return;this.scriptTagHolder=new q_((...o)=>{const[l,c,d,p,_]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,l===IT)this.id=c,this.password=d;else if(l===mL)c?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(c,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+l)},(...o)=>{const[l,c]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(l,c)},()=>{this.onClosed_()},this.urlFn);const r={};r[IT]="t",r[l0]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[yL]=this.scriptTagHolder.uniqueCallbackIdentifier),r[QC]=H_,this.transportSessionId&&(r[YC]=this.transportSessionId),this.lastSessionId&&(r[e0]=this.lastSessionId),this.applicationId&&(r[t0]=this.applicationId),this.appCheckToken&&(r[Vg]=this.appCheckToken),typeof location<"u"&&location.hostname&&ZC.test(location.hostname)&&(r[XC]=JC);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Pa.forceAllow_=!0}static forceDisallow(){Pa.forceDisallow_=!0}static isAvailable(){return Pa.forceAllow_?!0:!Pa.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!nL()&&!rL()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=Vt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=jS(t),i=qC(r,IL);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const r={};r[TL]="t",r[o0]=e,r[a0]=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=Vt(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class q_{constructor(e,t,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=XO(),window[gL+this.uniqueCallbackIdentifier]=e,window[_L+this.uniqueCallbackIdentifier]=t,this.myIFrame=q_.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(c){en("frame writing exception"),c.stack&&en(c.stack),en(c)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||en("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[o0]=this.myID,e[a0]=this.myPW,e[l0]=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+c0+r.length<=u0;){const l=this.pendingSegs.shift();r=r+"&"+vL+i+"="+l.seg+"&"+EL+i+"="+l.ts+"&"+wL+i+"="+l.d,i++}return t=t+r,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(SL)),o=()=>{clearTimeout(i),r()};this.addTag(e,o)}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{en("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bL=16384,RL=45e3;let Mh=null;typeof MozWebSocket<"u"?Mh=MozWebSocket:typeof WebSocket<"u"&&(Mh=WebSocket);class Gr{constructor(e,t,r,i,o,l,c){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=bc(this.connId),this.stats_=G_(t),this.connURL=Gr.connectionURL_(t,l,c,i,r),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,r,i,o){const l={};return l[QC]=H_,typeof location<"u"&&location.hostname&&ZC.test(location.hostname)&&(l[XC]=JC),t&&(l[YC]=t),r&&(l[e0]=r),i&&(l[Vg]=i),o&&(l[t0]=o),s0(e,n0,l)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,mo.set("previous_websocket_failure",!0);try{let r;kk(),this.mySock=new Mh(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){Gr.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(t);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Mh!==null&&!Gr.forceDisallow_}static previouslyFailed(){return mo.isInMemoryStorage||mo.get("previous_websocket_failure")===!0}markConnectionHealthy(){mo.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const t=this.frames.join("");this.frames=null;const r=Bu(t);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(oe(this.frames===null,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(t);else{const r=this.extractFrameCount_(t);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const t=Vt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=qC(t,bL);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(RL))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Gr.responsesRequiredToBeHealthy=2;Gr.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu{static get ALL_TRANSPORTS(){return[Pa,Gr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=Gr.isAvailable();let r=t&&!Gr.previouslyFailed();if(e.webSocketOnly&&(t||Tn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Gr];else{const i=this.transports_=[];for(const o of Hu.ALL_TRANSPORTS)o&&o.isAvailable()&&i.push(o);Hu.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Hu.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AL=6e4,xL=5e3,PL=10*1024,kL=100*1024,Qm="t",ST="d",NL="s",CT="r",DL="e",bT="o",RT="a",AT="n",xT="p",OL="h";class LL{constructor(e,t,r,i,o,l,c,d,p,_){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=l,this.onReady_=c,this.onDisconnect_=d,this.onKill_=p,this.lastSessionId=_,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=bc("c:"+this.id+":"),this.transportManager_=new Hu(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=xu(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>kL?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>PL?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Qm in e){const t=e[Qm];t===RT?this.upgradeIfSecondaryHealthy_():t===CT?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===bT&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=hu("t",e),r=hu("d",e);if(t==="c")this.onSecondaryControl_(r);else if(t==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:xT,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:RT,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:AT,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=hu("t",e),r=hu("d",e);t==="c"?this.onControl_(r):t==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=hu(Qm,e);if(ST in e){const r=e[ST];if(t===OL){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(t===AT){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===NL?this.onConnectionShutdown_(r):t===CT?this.onReset_(r):t===DL?Mg("Server Error: "+r):t===bT?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Mg("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),H_!==r&&Tn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),xu(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(AL))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):xu(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(xL))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:xT,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(mo.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0{constructor(e){this.allowedEvents_=e,this.listeners_={},oe(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let o=0;o<i.length;o++)if(i[o].callback===t&&(!r||r===i[o].context)){i.splice(o,1);return}}validateEventType_(e){oe(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh extends h0{static getInstance(){return new Vh}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!x_()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return oe(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PT=32,kT=768;class nt{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}}function Ye(){return new nt("")}function Le(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Ts(n){return n.pieces_.length-n.pieceNum_}function lt(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new nt(n.pieces_,e)}function K_(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function ML(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function Gu(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function f0(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new nt(e,0)}function wt(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof nt)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new nt(t,0)}function Fe(n){return n.pieceNum_>=n.pieces_.length}function wn(n,e){const t=Le(n),r=Le(e);if(t===null)return e;if(t===r)return wn(lt(n),lt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function VL(n,e){const t=Gu(n,0),r=Gu(e,0);for(let i=0;i<t.length&&i<r.length;i++){const o=xo(t[i],r[i]);if(o!==0)return o}return t.length===r.length?0:t.length<r.length?-1:1}function Q_(n,e){if(Ts(n)!==Ts(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function nr(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Ts(n)>Ts(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class FL{constructor(e,t){this.errorPrefix_=t,this.parts_=Gu(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Ef(this.parts_[r]);p0(this)}}function UL(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=Ef(e),p0(n)}function BL(n){const e=n.parts_.pop();n.byteLength_-=Ef(e),n.parts_.length>0&&(n.byteLength_-=1)}function p0(n){if(n.byteLength_>kT)throw new Error(n.errorPrefix_+"has a key path longer than "+kT+" bytes ("+n.byteLength_+").");if(n.parts_.length>PT)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+PT+") or object contains a cycle "+ho(n))}function ho(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_ extends h0{static getInstance(){return new Y_}constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return oe(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fu=1e3,jL=60*5*1e3,NT=30*1e3,zL=1.3,$L=3e4,WL="server_kill",DT=3;class Ri extends d0{constructor(e,t,r,i,o,l,c,d){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=o,this.authTokenProvider_=l,this.appCheckTokenProvider_=c,this.authOverride_=d,this.id=Ri.nextPersistentConnectionId_++,this.log_=bc("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=fu,this.maxReconnectDelay_=jL,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,d)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Y_.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Vh.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,r){const i=++this.requestNumber_,o={r:i,a:e,b:t};this.log_(Vt(o)),oe(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const t=new _c,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:l=>{const c=l.d;l.s==="ok"?t.resolve(c):t.reject(c)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),t.promise}listen(e,t,r,i){this.initConnection_();const o=e._queryIdentifier,l=e._path.toString();this.log_("Listen called for "+l+" "+o),this.listens.has(l)||this.listens.set(l,new Map),oe(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),oe(!this.listens.get(l).has(o),"listen() called twice for same path/queryId.");const c={onComplete:i,hashFn:t,query:e,tag:r};this.listens.get(l).set(o,c),this.connected_&&this.sendListen_(c)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(r)})}sendListen_(e){const t=e.query,r=t._path.toString(),i=t._queryIdentifier;this.log_("Listen on "+r+" for "+i);const o={p:r},l="q";e.tag&&(o.q=t._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest(l,o,c=>{const d=c.d,p=c.s;Ri.warnOnListenWarnings_(d,t),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",c),p!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(p,d))})}static warnOnListenWarnings_(e,t){if(e&&typeof e=="object"&&ni(e,"w")){const r=Va(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+t._queryParams.getIndex().toString()+'"',o=t._path.toString();Tn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||Uk(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=NT)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=Fk(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(t,r,i=>{const o=i.s,l=i.d||"error";this.authToken_===e&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,l))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,r=e.d||"error";t==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,r)})}unlisten(e,t){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),oe(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,t)}sendUnlisten_(e,t,r,i){this.log_("Unlisten on "+e+" for "+t);const o={p:e},l="n";i&&(o.q=r,o.t=i),this.sendRequest(l,o)}onDisconnectPut(e,t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:r})}onDisconnectMerge(e,t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:r})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,r,i){const o={p:t,d:r};this.log_("onDisconnect "+e,o),this.sendRequest(e,o,l=>{i&&setTimeout(()=>{i(l.s,l.d)},Math.floor(0))})}put(e,t,r,i){this.putInternal("p",e,t,r,i)}merge(e,t,r,i){this.putInternal("m",e,t,r,i)}putInternal(e,t,r,i,o){this.initConnection_();const l={p:t,d:r};o!==void 0&&(l.h=o),this.outstandingPuts_.push({action:e,request:l,onComplete:i}),this.outstandingPutCount_++;const c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,r,o=>{this.log_(t+" response",o),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(o.s,o.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,r=>{if(r.s!=="ok"){const o=r.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Vt(e));const t=e.r,r=this.requestCBHash_[t];r&&(delete this.requestCBHash_[t],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),e==="d"?this.onDataUpdate_(t.p,t.d,!1,t.t):e==="m"?this.onDataUpdate_(t.p,t.d,!0,t.t):e==="c"?this.onListenRevoked_(t.p,t.q):e==="ac"?this.onAuthRevoked_(t.s,t.d):e==="apc"?this.onAppCheckRevoked_(t.s,t.d):e==="sd"?this.onSecurityDebugPacket_(t):Mg("Unrecognized action received from server: "+Vt(e)+`
Are you using the latest client?`)}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){oe(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=fu,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=fu,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>$L&&(this.reconnectDelay_=fu),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*zL)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+Ri.nextConnectionId_++,o=this.lastSessionId;let l=!1,c=null;const d=function(){c?c.close():(l=!0,r())},p=function(m){oe(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(m)};this.realtime_={close:d,sendRequest:p};const _=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[m,y]=await Promise.all([this.authTokenProvider_.getToken(_),this.appCheckTokenProvider_.getToken(_)]);l?en("getToken() completed but was canceled"):(en("getToken() completed. Creating connection."),this.authToken_=m&&m.accessToken,this.appCheckToken_=y&&y.token,c=new LL(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,r,w=>{Tn(w+" ("+this.repoInfo_.toString()+")"),this.interrupt(WL)},o))}catch(m){this.log_("Failed to get token: "+m),l||(this.repoInfo_.nodeAdmin&&Tn(m),d())}}}interrupt(e){en("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){en("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Tg(this.interruptReasons_)&&(this.reconnectDelay_=fu,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let r;t?r=t.map(o=>W_(o)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,t){const r=new nt(e).toString();let i;if(this.listens.has(r)){const o=this.listens.get(r);i=o.get(t),o.delete(t),o.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,t){en("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=DT&&(this.reconnectDelay_=NT,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){en("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=DT&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";e["sdk."+t+"."+WC.replace(/\./g,"-")]=1,x_()?e["framework.cordova"]=1:KS()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Vh.getInstance().currentlyOnline();return Tg(this.interruptReasons_)&&e}}Ri.nextPersistentConnectionId_=0;Ri.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Me(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Me(Fa,e),i=new Me(Fa,t);return this.compare(r,i)!==0}minPost(){return Me.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let th;class m0 extends Pf{static get __EMPTY_NODE(){return th}static set __EMPTY_NODE(e){th=e}compare(e,t){return xo(e.name,t.name)}isDefinedOn(e){throw nl("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Me.MIN}maxPost(){return new Me(Io,th)}makePost(e,t){return oe(typeof e=="string","KeyIndex indexValue must always be a string."),new Me(e,th)}toString(){return".key"}}const La=new m0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nh=class{constructor(e,t,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(e=e,l=t?r(e.key,t):1,i&&(l*=-1),l<0)this.isReverse_?e=e.left:e=e.right;else if(l===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},Bn=class Tu{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??Tu.RED,this.left=i??qr.EMPTY_NODE,this.right=o??qr.EMPTY_NODE}copy(e,t,r,i,o){return new Tu(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const o=r(e,i.key);return o<0?i=i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i=i.copy(null,t,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return qr.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let r,i;if(r=this,t(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),t(e,r.key)===0){if(r.right.isEmpty())return qr.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Tu.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Tu.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}};Bn.RED=!0;Bn.BLACK=!1;class HL{copy(e,t,r,i,o){return this}insert(e,t,r){return new Bn(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}let qr=class yh{constructor(e,t=yh.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new yh(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Bn.BLACK,null,null))}remove(e){return new yh(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Bn.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),t===0)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();)if(t=this.comparator_(e,r.key),t===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else t<0?r=r.left:t>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new nh(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new nh(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new nh(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new nh(this.root_,null,this.comparator_,!0,e)}};qr.EMPTY_NODE=new HL;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GL(n,e){return xo(n.name,e.name)}function X_(n,e){return xo(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fg;function qL(n){Fg=n}const g0=function(n){return typeof n=="number"?"number:"+KC(n):"string:"+n},_0=function(n){if(n.isLeafNode()){const e=n.val();oe(typeof e=="string"||typeof e=="number"||typeof e=="object"&&ni(e,".sv"),"Priority must be a string or number.")}else oe(n===Fg||n.isEmpty(),"priority of unexpected type.");oe(n===Fg||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let OT;class Ht{static set __childrenNodeConstructor(e){OT=e}static get __childrenNodeConstructor(){return OT}constructor(e,t=Ht.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,oe(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),_0(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Ht(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Ht.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Fe(e)?this:Le(e)===".priority"?this.priorityNode_:Ht.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return e===".priority"?this.updatePriority(t):t.isEmpty()&&e!==".priority"?this:Ht.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const r=Le(e);return r===null?t:t.isEmpty()&&r!==".priority"?this:(oe(r!==".priority"||Ts(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Ht.__childrenNodeConstructor.EMPTY_NODE.updateChild(lt(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+g0(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",t==="number"?e+=KC(this.value_):e+=this.value_,this.lazyHash_=GC(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Ht.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Ht.__childrenNodeConstructor?-1:(oe(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,r=typeof this.value_,i=Ht.VALUE_TYPE_ORDER.indexOf(t),o=Ht.VALUE_TYPE_ORDER.indexOf(r);return oe(i>=0,"Unknown leaf type: "+t),oe(o>=0,"Unknown leaf type: "+r),i===o?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}else return!1}}Ht.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let y0,v0;function KL(n){y0=n}function QL(n){v0=n}class YL extends Pf{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),o=r.compareTo(i);return o===0?xo(e.name,t.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Me.MIN}maxPost(){return new Me(Io,new Ht("[PRIORITY-POST]",v0))}makePost(e,t){const r=y0(e);return new Me(t,new Ht("[PRIORITY-POST]",r))}toString(){return".priority"}}const Tt=new YL;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XL=Math.log(2);class JL{constructor(e){const t=o=>parseInt(Math.log(o)/XL,10),r=o=>parseInt(Array(o+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Fh=function(n,e,t,r){n.sort(e);const i=function(d,p){const _=p-d;let m,y;if(_===0)return null;if(_===1)return m=n[d],y=t?t(m):m,new Bn(y,m.node,Bn.BLACK,null,null);{const w=parseInt(_/2,10)+d,S=i(d,w),b=i(w+1,p);return m=n[w],y=t?t(m):m,new Bn(y,m.node,Bn.BLACK,S,b)}},o=function(d){let p=null,_=null,m=n.length;const y=function(S,b){const C=m-S,k=m;m-=S;const N=i(C+1,k),j=n[C],H=t?t(j):j;w(new Bn(H,j.node,b,null,N))},w=function(S){p?(p.left=S,p=S):(_=S,p=S)};for(let S=0;S<d.count;++S){const b=d.nextBitIsOne(),C=Math.pow(2,d.count-(S+1));b?y(C,Bn.BLACK):(y(C,Bn.BLACK),y(C,Bn.RED))}return _},l=new JL(n.length),c=o(l);return new qr(r||e,c)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ym;const pu={};class Si{static get Default(){return oe(Tt,"ChildrenNode.ts has not been loaded"),Ym=Ym||new Si({".priority":pu},{".priority":Tt}),Ym}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=Va(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof qr?t:null}hasIndex(e){return ni(this.indexSet_,e.toString())}addIndex(e,t){oe(e!==La,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const o=t.getIterator(Me.Wrap);let l=o.getNext();for(;l;)i=i||e.isDefinedOn(l.node),r.push(l),l=o.getNext();let c;i?c=Fh(r,e.getCompare()):c=pu;const d=e.toString(),p=Object.assign({},this.indexSet_);p[d]=e;const _=Object.assign({},this.indexes_);return _[d]=c,new Si(_,p)}addToIndexes(e,t){const r=Ah(this.indexes_,(i,o)=>{const l=Va(this.indexSet_,o);if(oe(l,"Missing index implementation for "+o),i===pu)if(l.isDefinedOn(e.node)){const c=[],d=t.getIterator(Me.Wrap);let p=d.getNext();for(;p;)p.name!==e.name&&c.push(p),p=d.getNext();return c.push(e),Fh(c,l.getCompare())}else return pu;else{const c=t.get(e.name);let d=i;return c&&(d=d.remove(new Me(e.name,c))),d.insert(e,e.node)}});return new Si(r,this.indexSet_)}removeFromIndexes(e,t){const r=Ah(this.indexes_,i=>{if(i===pu)return i;{const o=t.get(e.name);return o?i.remove(new Me(e.name,o)):i}});return new Si(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mu;class Ie{static get EMPTY_NODE(){return mu||(mu=new Ie(new qr(X_),null,Si.Default))}constructor(e,t,r){this.children_=e,this.priorityNode_=t,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&_0(this.priorityNode_),this.children_.isEmpty()&&oe(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||mu}updatePriority(e){return this.children_.isEmpty()?this:new Ie(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const t=this.children_.get(e);return t===null?mu:t}}getChild(e){const t=Le(e);return t===null?this:this.getImmediateChild(t).getChild(lt(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,t){if(oe(t,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(t);{const r=new Me(e,t);let i,o;t.isEmpty()?(i=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,t),o=this.indexMap_.addToIndexes(r,this.children_));const l=i.isEmpty()?mu:this.priorityNode_;return new Ie(i,l,o)}}updateChild(e,t){const r=Le(e);if(r===null)return t;{oe(Le(e)!==".priority"||Ts(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(lt(e),t);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let r=0,i=0,o=!0;if(this.forEachChild(Tt,(l,c)=>{t[l]=c.val(e),r++,o&&Ie.INTEGER_REGEXP_.test(l)?i=Math.max(i,Number(l)):o=!1}),!e&&o&&i<2*r){const l=[];for(const c in t)l[c]=t[c];return l}else return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+g0(this.getPriority().val())+":"),this.forEachChild(Tt,(t,r)=>{const i=r.hash();i!==""&&(e+=":"+t+":"+i)}),this.lazyHash_=e===""?"":GC(e)}return this.lazyHash_}getPredecessorChildName(e,t,r){const i=this.resolveIndex_(r);if(i){const o=i.getPredecessorKey(new Me(e,t));return o?o.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const r=t.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new Me(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const r=t.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new Me(t,this.children_.get(t)):null}forEachChild(e,t){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>t(i.name,i.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const r=this.resolveIndex_(t);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,Me.Wrap);let o=i.peek();for(;o!=null&&t.compare(o,e)<0;)i.getNext(),o=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const r=this.resolveIndex_(t);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,Me.Wrap);let o=i.peek();for(;o!=null&&t.compare(o,e)>0;)i.getNext(),o=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Rc?-1:0}withIndex(e){if(e===La||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new Ie(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===La||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority()))if(this.children_.count()===t.children_.count()){const r=this.getIterator(Tt),i=t.getIterator(Tt);let o=r.getNext(),l=i.getNext();for(;o&&l;){if(o.name!==l.name||!o.node.equals(l.node))return!1;o=r.getNext(),l=i.getNext()}return o===null&&l===null}else return!1;else return!1}}resolveIndex_(e){return e===La?null:this.indexMap_.get(e.toString())}}Ie.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class ZL extends Ie{constructor(){super(new qr(X_),Ie.EMPTY_NODE,Si.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ie.EMPTY_NODE}isEmpty(){return!1}}const Rc=new ZL;Object.defineProperties(Me,{MIN:{value:new Me(Fa,Ie.EMPTY_NODE)},MAX:{value:new Me(Io,Rc)}});m0.__EMPTY_NODE=Ie.EMPTY_NODE;Ht.__childrenNodeConstructor=Ie;qL(Rc);QL(Rc);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eM=!0;function Mt(n,e=null){if(n===null)return Ie.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),oe(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){const t=n;return new Ht(t,Mt(e))}if(!(n instanceof Array)&&eM){const t=[];let r=!1;if(rn(n,(l,c)=>{if(l.substring(0,1)!=="."){const d=Mt(c);d.isEmpty()||(r=r||!d.getPriority().isEmpty(),t.push(new Me(l,d)))}}),t.length===0)return Ie.EMPTY_NODE;const o=Fh(t,GL,l=>l.name,X_);if(r){const l=Fh(t,Tt.getCompare());return new Ie(o,Mt(e),new Si({".priority":l},{".priority":Tt}))}else return new Ie(o,Mt(e),Si.Default)}else{let t=Ie.EMPTY_NODE;return rn(n,(r,i)=>{if(ni(n,r)&&r.substring(0,1)!=="."){const o=Mt(i);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(r,o))}}),t.updatePriority(Mt(e))}}KL(Mt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tM extends Pf{constructor(e){super(),this.indexPath_=e,oe(!Fe(e)&&Le(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),o=r.compareTo(i);return o===0?xo(e.name,t.name):o}makePost(e,t){const r=Mt(e),i=Ie.EMPTY_NODE.updateChild(this.indexPath_,r);return new Me(t,i)}maxPost(){const e=Ie.EMPTY_NODE.updateChild(this.indexPath_,Rc);return new Me(Io,e)}toString(){return Gu(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nM extends Pf{compare(e,t){const r=e.node.compareTo(t.node);return r===0?xo(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Me.MIN}maxPost(){return Me.MAX}makePost(e,t){const r=Mt(e);return new Me(t,r)}toString(){return".value"}}const rM=new nM;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E0(n){return{type:"value",snapshotNode:n}}function Ua(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function qu(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Ku(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function iM(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{constructor(e){this.index_=e}updateChild(e,t,r,i,o,l){oe(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const c=e.getImmediateChild(t);return c.getChild(i).equals(r.getChild(i))&&c.isEmpty()===r.isEmpty()||(l!=null&&(r.isEmpty()?e.hasChild(t)?l.trackChildChange(qu(t,c)):oe(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):c.isEmpty()?l.trackChildChange(Ua(t,r)):l.trackChildChange(Ku(t,r,c))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return r!=null&&(e.isLeafNode()||e.forEachChild(Tt,(i,o)=>{t.hasChild(i)||r.trackChildChange(qu(i,o))}),t.isLeafNode()||t.forEachChild(Tt,(i,o)=>{if(e.hasChild(i)){const l=e.getImmediateChild(i);l.equals(o)||r.trackChildChange(Ku(i,o,l))}else r.trackChildChange(Ua(i,o))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Ie.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(e){this.indexedFilter_=new J_(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Qu.getStartPost_(e),this.endPost_=Qu.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,o,l){return this.matches(new Me(t,r))||(r=Ie.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,o,l)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Ie.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Ie.EMPTY_NODE);const o=this;return t.forEachChild(Tt,(l,c)=>{o.matches(new Me(l,c))||(i=i.updateImmediateChild(l,Ie.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{const r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Qu(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,o,l){return this.rangedFilter_.matches(new Me(t,r))||(r=Ie.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,o,l):this.fullLimitUpdateChild_(e,t,r,o,l)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Ie.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<t.numChildren()&&t.isIndexed(this.index_)){i=Ie.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;o.hasNext()&&l<this.limit_;){const c=o.getNext();if(this.withinDirectionalStart(c))if(this.withinDirectionalEnd(c))i=i.updateImmediateChild(c.name,c.node),l++;else break;else continue}}else{i=t.withIndex(this.index_),i=i.updatePriority(Ie.EMPTY_NODE);let o;this.reverse_?o=i.getReverseIterator(this.index_):o=i.getIterator(this.index_);let l=0;for(;o.hasNext();){const c=o.getNext();l<this.limit_&&this.withinDirectionalStart(c)&&this.withinDirectionalEnd(c)?l++:i=i.updateImmediateChild(c.name,Ie.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,o){let l;if(this.reverse_){const m=this.index_.getCompare();l=(y,w)=>m(w,y)}else l=this.index_.getCompare();const c=e;oe(c.numChildren()===this.limit_,"");const d=new Me(t,r),p=this.reverse_?c.getFirstChild(this.index_):c.getLastChild(this.index_),_=this.rangedFilter_.matches(d);if(c.hasChild(t)){const m=c.getImmediateChild(t);let y=i.getChildAfterChild(this.index_,p,this.reverse_);for(;y!=null&&(y.name===t||c.hasChild(y.name));)y=i.getChildAfterChild(this.index_,y,this.reverse_);const w=y==null?1:l(y,d);if(_&&!r.isEmpty()&&w>=0)return o!=null&&o.trackChildChange(Ku(t,r,m)),c.updateImmediateChild(t,r);{o!=null&&o.trackChildChange(qu(t,m));const b=c.updateImmediateChild(t,Ie.EMPTY_NODE);return y!=null&&this.rangedFilter_.matches(y)?(o!=null&&o.trackChildChange(Ua(y.name,y.node)),b.updateImmediateChild(y.name,y.node)):b}}else return r.isEmpty()?e:_&&l(p,d)>=0?(o!=null&&(o.trackChildChange(qu(p.name,p.node)),o.trackChildChange(Ua(t,r))),c.updateImmediateChild(t,r).updateImmediateChild(p.name,Ie.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Tt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return oe(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return oe(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Fa}hasEnd(){return this.endSet_}getIndexEndValue(){return oe(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return oe(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Io}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return oe(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Tt}copy(){const e=new Z_;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function oM(n){return n.loadsAllData()?new J_(n.getIndex()):n.hasLimit()?new sM(n):new Qu(n)}function LT(n){const e={};if(n.isDefault())return e;let t;if(n.index_===Tt?t="$priority":n.index_===rM?t="$value":n.index_===La?t="$key":(oe(n.index_ instanceof tM,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=Vt(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=Vt(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+Vt(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=Vt(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+Vt(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function MT(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==Tt&&(e.i=n.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh extends d0{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(oe(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=bc("p:rest:"),this.listens_={}}listen(e,t,r,i){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const l=Uh.getListenId_(e,r),c={};this.listens_[l]=c;const d=LT(e._queryParams);this.restRequest_(o+".json",d,(p,_)=>{let m=_;if(p===404&&(m=null,p=null),p===null&&this.onDataUpdate_(o,m,!1,r),Va(this.listens_,l)===c){let y;p?p===401?y="permission_denied":y="rest_error:"+p:y="ok",i(y,null)}})}unlisten(e,t){const r=Uh.getListenId_(e,t);delete this.listens_[r]}get(e){const t=LT(e._queryParams),r=e._path.toString(),i=new _c;return this.restRequest_(r+".json",t,(o,l)=>{let c=l;o===404&&(c=null,o=null),o===null?(this.onDataUpdate_(r,c,!1,null),i.resolve(c)):i.reject(new Error(c))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(t.auth=i.accessToken),o&&o.token&&(t.ac=o.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+rl(t);this.log_("Sending REST request for "+l);const c=new XMLHttpRequest;c.onreadystatechange=()=>{if(r&&c.readyState===4){this.log_("REST Response for "+l+" received. status:",c.status,"response:",c.responseText);let d=null;if(c.status>=200&&c.status<300){try{d=Bu(c.responseText)}catch{Tn("Failed to parse JSON response for "+l+": "+c.responseText)}r(null,d)}else c.status!==401&&c.status!==404&&Tn("Got unsuccessful REST response for "+l+" Status: "+c.status),r(c.status);r=null}},c.open("GET",l,!0),c.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aM{constructor(){this.rootNode_=Ie.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bh(){return{value:null,children:new Map}}function w0(n,e,t){if(Fe(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{const r=Le(e);n.children.has(r)||n.children.set(r,Bh());const i=n.children.get(r);e=lt(e),w0(i,e,t)}}function Ug(n,e,t){n.value!==null?t(e,n.value):lM(n,(r,i)=>{const o=new nt(e.toString()+"/"+r);Ug(i,o,t)})}function lM(n,e){n.children.forEach((t,r)=>{e(r,t)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uM{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&rn(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT=10*1e3,cM=30*1e3,dM=5*60*1e3;class hM{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new uM(e);const r=VT+(cM-VT)*Math.random();xu(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;rn(e,(i,o)=>{o>0&&ni(this.statsToReport_,i)&&(t[i]=o,r=!0)}),r&&this.server_.reportStats(t),xu(this.reportStats_.bind(this),Math.floor(Math.random()*2*dM))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Cr;(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Cr||(Cr={}));function ey(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function ty(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function ny(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Cr.ACK_USER_WRITE,this.source=ey()}operationForChild(e){if(Fe(this.path)){if(this.affectedTree.value!=null)return oe(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new nt(e));return new jh(Ye(),t,this.revert)}}else return oe(Le(this.path)===e,"operationForChild called for unrelated child."),new jh(lt(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(e,t){this.source=e,this.path=t,this.type=Cr.LISTEN_COMPLETE}operationForChild(e){return Fe(this.path)?new Yu(this.source,Ye()):new Yu(this.source,lt(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Cr.OVERWRITE}operationForChild(e){return Fe(this.path)?new So(this.source,Ye(),this.snap.getImmediateChild(e)):new So(this.source,lt(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Cr.MERGE}operationForChild(e){if(Fe(this.path)){const t=this.children.subtree(new nt(e));return t.isEmpty()?null:t.value?new So(this.source,Ye(),t.value):new Ba(this.source,Ye(),t)}else return oe(Le(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Ba(this.source,lt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Fe(e))return this.isFullyInitialized()&&!this.filtered_;const t=Le(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fM{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function pM(n,e,t,r){const i=[],o=[];return e.forEach(l=>{l.type==="child_changed"&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&o.push(iM(l.childName,l.snapshotNode))}),gu(n,i,"child_removed",e,r,t),gu(n,i,"child_added",e,r,t),gu(n,i,"child_moved",o,r,t),gu(n,i,"child_changed",e,r,t),gu(n,i,"value",e,r,t),i}function gu(n,e,t,r,i,o){const l=r.filter(c=>c.type===t);l.sort((c,d)=>gM(n,c,d)),l.forEach(c=>{const d=mM(n,c,o);i.forEach(p=>{p.respondsTo(c.type)&&e.push(p.createEvent(d,n.query_))})})}function mM(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function gM(n,e,t){if(e.childName==null||t.childName==null)throw nl("Should only compare child_ events.");const r=new Me(e.childName,e.snapshotNode),i=new Me(t.childName,t.snapshotNode);return n.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kf(n,e){return{eventCache:n,serverCache:e}}function Pu(n,e,t,r){return kf(new Is(e,t,r),n.serverCache)}function T0(n,e,t,r){return kf(n.eventCache,new Is(e,t,r))}function zh(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Co(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xm;const _M=()=>(Xm||(Xm=new qr(tL)),Xm);class at{static fromObject(e){let t=new at(null);return rn(e,(r,i)=>{t=t.set(new nt(r),i)}),t}constructor(e,t=_M()){this.value=e,this.children=t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:Ye(),value:this.value};if(Fe(e))return null;{const r=Le(e),i=this.children.get(r);if(i!==null){const o=i.findRootMostMatchingPathAndValue(lt(e),t);return o!=null?{path:wt(new nt(r),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Fe(e))return this;{const t=Le(e),r=this.children.get(t);return r!==null?r.subtree(lt(e)):new at(null)}}set(e,t){if(Fe(e))return new at(t,this.children);{const r=Le(e),o=(this.children.get(r)||new at(null)).set(lt(e),t),l=this.children.insert(r,o);return new at(this.value,l)}}remove(e){if(Fe(e))return this.children.isEmpty()?new at(null):new at(null,this.children);{const t=Le(e),r=this.children.get(t);if(r){const i=r.remove(lt(e));let o;return i.isEmpty()?o=this.children.remove(t):o=this.children.insert(t,i),this.value===null&&o.isEmpty()?new at(null):new at(this.value,o)}else return this}}get(e){if(Fe(e))return this.value;{const t=Le(e),r=this.children.get(t);return r?r.get(lt(e)):null}}setTree(e,t){if(Fe(e))return t;{const r=Le(e),o=(this.children.get(r)||new at(null)).setTree(lt(e),t);let l;return o.isEmpty()?l=this.children.remove(r):l=this.children.insert(r,o),new at(this.value,l)}}fold(e){return this.fold_(Ye(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(wt(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Ye(),t)}findOnPath_(e,t,r){const i=this.value?r(t,this.value):!1;if(i)return i;if(Fe(e))return null;{const o=Le(e),l=this.children.get(o);return l?l.findOnPath_(lt(e),wt(t,o),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Ye(),t)}foreachOnPath_(e,t,r){if(Fe(e))return this;{this.value&&r(t,this.value);const i=Le(e),o=this.children.get(i);return o?o.foreachOnPath_(lt(e),wt(t,i),r):new at(null)}}foreach(e){this.foreach_(Ye(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(wt(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(e){this.writeTree_=e}static empty(){return new xr(new at(null))}}function ku(n,e,t){if(Fe(e))return new xr(new at(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let o=r.value;const l=wn(i,e);return o=o.updateChild(l,t),new xr(n.writeTree_.set(i,o))}else{const i=new at(t),o=n.writeTree_.setTree(e,i);return new xr(o)}}}function Bg(n,e,t){let r=n;return rn(t,(i,o)=>{r=ku(r,wt(e,i),o)}),r}function FT(n,e){if(Fe(e))return xr.empty();{const t=n.writeTree_.setTree(e,new at(null));return new xr(t)}}function jg(n,e){return Po(n,e)!=null}function Po(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(wn(t.path,e)):null}function UT(n){const e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(Tt,(r,i)=>{e.push(new Me(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new Me(r,i.value))}),e}function ms(n,e){if(Fe(e))return n;{const t=Po(n,e);return t!=null?new xr(new at(t)):new xr(n.writeTree_.subtree(e))}}function zg(n){return n.writeTree_.isEmpty()}function ja(n,e){return I0(Ye(),n.writeTree_,e)}function I0(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,o)=>{i===".priority"?(oe(o.value!==null,"Priority writes must always be leaf nodes"),r=o.value):t=I0(wt(n,i),o,t)}),!t.getChild(n).isEmpty()&&r!==null&&(t=t.updateChild(wt(n,".priority"),r)),t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nf(n,e){return R0(e,n)}function yM(n,e,t,r,i){oe(r>n.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=ku(n.visibleWrites,e,t)),n.lastWriteId=r}function vM(n,e,t,r){oe(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=Bg(n.visibleWrites,e,t),n.lastWriteId=r}function EM(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}function wM(n,e){const t=n.allWrites.findIndex(c=>c.writeId===e);oe(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,o=!1,l=n.allWrites.length-1;for(;i&&l>=0;){const c=n.allWrites[l];c.visible&&(l>=t&&TM(c,r.path)?i=!1:nr(r.path,c.path)&&(o=!0)),l--}if(i){if(o)return IM(n),!0;if(r.snap)n.visibleWrites=FT(n.visibleWrites,r.path);else{const c=r.children;rn(c,d=>{n.visibleWrites=FT(n.visibleWrites,wt(r.path,d))})}return!0}else return!1}function TM(n,e){if(n.snap)return nr(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&nr(wt(n.path,t),e))return!0;return!1}function IM(n){n.visibleWrites=S0(n.allWrites,SM,Ye()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function SM(n){return n.visible}function S0(n,e,t){let r=xr.empty();for(let i=0;i<n.length;++i){const o=n[i];if(e(o)){const l=o.path;let c;if(o.snap)nr(t,l)?(c=wn(t,l),r=ku(r,c,o.snap)):nr(l,t)&&(c=wn(l,t),r=ku(r,Ye(),o.snap.getChild(c)));else if(o.children){if(nr(t,l))c=wn(t,l),r=Bg(r,c,o.children);else if(nr(l,t))if(c=wn(l,t),Fe(c))r=Bg(r,Ye(),o.children);else{const d=Va(o.children,Le(c));if(d){const p=d.getChild(lt(c));r=ku(r,Ye(),p)}}}else throw nl("WriteRecord should have .snap or .children")}}return r}function C0(n,e,t,r,i){if(!r&&!i){const o=Po(n.visibleWrites,e);if(o!=null)return o;{const l=ms(n.visibleWrites,e);if(zg(l))return t;if(t==null&&!jg(l,Ye()))return null;{const c=t||Ie.EMPTY_NODE;return ja(l,c)}}}else{const o=ms(n.visibleWrites,e);if(!i&&zg(o))return t;if(!i&&t==null&&!jg(o,Ye()))return null;{const l=function(p){return(p.visible||i)&&(!r||!~r.indexOf(p.writeId))&&(nr(p.path,e)||nr(e,p.path))},c=S0(n.allWrites,l,e),d=t||Ie.EMPTY_NODE;return ja(c,d)}}}function CM(n,e,t){let r=Ie.EMPTY_NODE;const i=Po(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Tt,(o,l)=>{r=r.updateImmediateChild(o,l)}),r;if(t){const o=ms(n.visibleWrites,e);return t.forEachChild(Tt,(l,c)=>{const d=ja(ms(o,new nt(l)),c);r=r.updateImmediateChild(l,d)}),UT(o).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}else{const o=ms(n.visibleWrites,e);return UT(o).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}}function bM(n,e,t,r,i){oe(r||i,"Either existingEventSnap or existingServerSnap must exist");const o=wt(e,t);if(jg(n.visibleWrites,o))return null;{const l=ms(n.visibleWrites,o);return zg(l)?i.getChild(t):ja(l,i.getChild(t))}}function RM(n,e,t,r){const i=wt(e,t),o=Po(n.visibleWrites,i);if(o!=null)return o;if(r.isCompleteForChild(t)){const l=ms(n.visibleWrites,i);return ja(l,r.getNode().getImmediateChild(t))}else return null}function AM(n,e){return Po(n.visibleWrites,e)}function xM(n,e,t,r,i,o,l){let c;const d=ms(n.visibleWrites,e),p=Po(d,Ye());if(p!=null)c=p;else if(t!=null)c=ja(d,t);else return[];if(c=c.withIndex(l),!c.isEmpty()&&!c.isLeafNode()){const _=[],m=l.getCompare(),y=o?c.getReverseIteratorFrom(r,l):c.getIteratorFrom(r,l);let w=y.getNext();for(;w&&_.length<i;)m(w,r)!==0&&_.push(w),w=y.getNext();return _}else return[]}function PM(){return{visibleWrites:xr.empty(),allWrites:[],lastWriteId:-1}}function $h(n,e,t,r){return C0(n.writeTree,n.treePath,e,t,r)}function ry(n,e){return CM(n.writeTree,n.treePath,e)}function BT(n,e,t,r){return bM(n.writeTree,n.treePath,e,t,r)}function Wh(n,e){return AM(n.writeTree,wt(n.treePath,e))}function kM(n,e,t,r,i,o){return xM(n.writeTree,n.treePath,e,t,r,i,o)}function iy(n,e,t){return RM(n.writeTree,n.treePath,e,t)}function b0(n,e){return R0(wt(n.treePath,e),n.writeTree)}function R0(n,e){return{treePath:n,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NM{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;oe(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),oe(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const o=i.type;if(t==="child_added"&&o==="child_removed")this.changeMap.set(r,Ku(r,e.snapshotNode,i.snapshotNode));else if(t==="child_removed"&&o==="child_added")this.changeMap.delete(r);else if(t==="child_removed"&&o==="child_changed")this.changeMap.set(r,qu(r,i.oldSnap));else if(t==="child_changed"&&o==="child_added")this.changeMap.set(r,Ua(r,e.snapshotNode));else if(t==="child_changed"&&o==="child_changed")this.changeMap.set(r,Ku(r,e.snapshotNode,i.oldSnap));else throw nl("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DM{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}}const A0=new DM;class sy{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new Is(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return iy(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Co(this.viewCache_),o=kM(this.writes_,i,t,1,r,e);return o.length===0?null:o[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OM(n){return{filter:n}}function LM(n,e){oe(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),oe(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function MM(n,e,t,r,i){const o=new NM;let l,c;if(t.type===Cr.OVERWRITE){const p=t;p.source.fromUser?l=$g(n,e,p.path,p.snap,r,i,o):(oe(p.source.fromServer,"Unknown source."),c=p.source.tagged||e.serverCache.isFiltered()&&!Fe(p.path),l=Hh(n,e,p.path,p.snap,r,i,c,o))}else if(t.type===Cr.MERGE){const p=t;p.source.fromUser?l=FM(n,e,p.path,p.children,r,i,o):(oe(p.source.fromServer,"Unknown source."),c=p.source.tagged||e.serverCache.isFiltered(),l=Wg(n,e,p.path,p.children,r,i,c,o))}else if(t.type===Cr.ACK_USER_WRITE){const p=t;p.revert?l=jM(n,e,p.path,r,i,o):l=UM(n,e,p.path,p.affectedTree,r,i,o)}else if(t.type===Cr.LISTEN_COMPLETE)l=BM(n,e,t.path,r,o);else throw nl("Unknown operation type: "+t.type);const d=o.getChanges();return VM(e,l,d),{viewCache:l,changes:d}}function VM(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=zh(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&t.push(E0(zh(e)))}}function x0(n,e,t,r,i,o){const l=e.eventCache;if(Wh(r,t)!=null)return e;{let c,d;if(Fe(t))if(oe(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const p=Co(e),_=p instanceof Ie?p:Ie.EMPTY_NODE,m=ry(r,_);c=n.filter.updateFullNode(e.eventCache.getNode(),m,o)}else{const p=$h(r,Co(e));c=n.filter.updateFullNode(e.eventCache.getNode(),p,o)}else{const p=Le(t);if(p===".priority"){oe(Ts(t)===1,"Can't have a priority with additional path components");const _=l.getNode();d=e.serverCache.getNode();const m=BT(r,t,_,d);m!=null?c=n.filter.updatePriority(_,m):c=l.getNode()}else{const _=lt(t);let m;if(l.isCompleteForChild(p)){d=e.serverCache.getNode();const y=BT(r,t,l.getNode(),d);y!=null?m=l.getNode().getImmediateChild(p).updateChild(_,y):m=l.getNode().getImmediateChild(p)}else m=iy(r,p,e.serverCache);m!=null?c=n.filter.updateChild(l.getNode(),p,m,_,i,o):c=l.getNode()}}return Pu(e,c,l.isFullyInitialized()||Fe(t),n.filter.filtersNodes())}}function Hh(n,e,t,r,i,o,l,c){const d=e.serverCache;let p;const _=l?n.filter:n.filter.getIndexedFilter();if(Fe(t))p=_.updateFullNode(d.getNode(),r,null);else if(_.filtersNodes()&&!d.isFiltered()){const w=d.getNode().updateChild(t,r);p=_.updateFullNode(d.getNode(),w,null)}else{const w=Le(t);if(!d.isCompleteForPath(t)&&Ts(t)>1)return e;const S=lt(t),C=d.getNode().getImmediateChild(w).updateChild(S,r);w===".priority"?p=_.updatePriority(d.getNode(),C):p=_.updateChild(d.getNode(),w,C,S,A0,null)}const m=T0(e,p,d.isFullyInitialized()||Fe(t),_.filtersNodes()),y=new sy(i,m,o);return x0(n,m,t,i,y,c)}function $g(n,e,t,r,i,o,l){const c=e.eventCache;let d,p;const _=new sy(i,e,o);if(Fe(t))p=n.filter.updateFullNode(e.eventCache.getNode(),r,l),d=Pu(e,p,!0,n.filter.filtersNodes());else{const m=Le(t);if(m===".priority")p=n.filter.updatePriority(e.eventCache.getNode(),r),d=Pu(e,p,c.isFullyInitialized(),c.isFiltered());else{const y=lt(t),w=c.getNode().getImmediateChild(m);let S;if(Fe(y))S=r;else{const b=_.getCompleteChild(m);b!=null?K_(y)===".priority"&&b.getChild(f0(y)).isEmpty()?S=b:S=b.updateChild(y,r):S=Ie.EMPTY_NODE}if(w.equals(S))d=e;else{const b=n.filter.updateChild(c.getNode(),m,S,y,_,l);d=Pu(e,b,c.isFullyInitialized(),n.filter.filtersNodes())}}}return d}function jT(n,e){return n.eventCache.isCompleteForChild(e)}function FM(n,e,t,r,i,o,l){let c=e;return r.foreach((d,p)=>{const _=wt(t,d);jT(e,Le(_))&&(c=$g(n,c,_,p,i,o,l))}),r.foreach((d,p)=>{const _=wt(t,d);jT(e,Le(_))||(c=$g(n,c,_,p,i,o,l))}),c}function zT(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Wg(n,e,t,r,i,o,l,c){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let d=e,p;Fe(t)?p=r:p=new at(null).setTree(t,r);const _=e.serverCache.getNode();return p.children.inorderTraversal((m,y)=>{if(_.hasChild(m)){const w=e.serverCache.getNode().getImmediateChild(m),S=zT(n,w,y);d=Hh(n,d,new nt(m),S,i,o,l,c)}}),p.children.inorderTraversal((m,y)=>{const w=!e.serverCache.isCompleteForChild(m)&&y.value===null;if(!_.hasChild(m)&&!w){const S=e.serverCache.getNode().getImmediateChild(m),b=zT(n,S,y);d=Hh(n,d,new nt(m),b,i,o,l,c)}}),d}function UM(n,e,t,r,i,o,l){if(Wh(i,t)!=null)return e;const c=e.serverCache.isFiltered(),d=e.serverCache;if(r.value!=null){if(Fe(t)&&d.isFullyInitialized()||d.isCompleteForPath(t))return Hh(n,e,t,d.getNode().getChild(t),i,o,c,l);if(Fe(t)){let p=new at(null);return d.getNode().forEachChild(La,(_,m)=>{p=p.set(new nt(_),m)}),Wg(n,e,t,p,i,o,c,l)}else return e}else{let p=new at(null);return r.foreach((_,m)=>{const y=wt(t,_);d.isCompleteForPath(y)&&(p=p.set(_,d.getNode().getChild(y)))}),Wg(n,e,t,p,i,o,c,l)}}function BM(n,e,t,r,i){const o=e.serverCache,l=T0(e,o.getNode(),o.isFullyInitialized()||Fe(t),o.isFiltered());return x0(n,l,t,r,A0,i)}function jM(n,e,t,r,i,o){let l;if(Wh(r,t)!=null)return e;{const c=new sy(r,e,i),d=e.eventCache.getNode();let p;if(Fe(t)||Le(t)===".priority"){let _;if(e.serverCache.isFullyInitialized())_=$h(r,Co(e));else{const m=e.serverCache.getNode();oe(m instanceof Ie,"serverChildren would be complete if leaf node"),_=ry(r,m)}_=_,p=n.filter.updateFullNode(d,_,o)}else{const _=Le(t);let m=iy(r,_,e.serverCache);m==null&&e.serverCache.isCompleteForChild(_)&&(m=d.getImmediateChild(_)),m!=null?p=n.filter.updateChild(d,_,m,lt(t),c,o):e.eventCache.getNode().hasChild(_)?p=n.filter.updateChild(d,_,Ie.EMPTY_NODE,lt(t),c,o):p=d,p.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=$h(r,Co(e)),l.isLeafNode()&&(p=n.filter.updateFullNode(p,l,o)))}return l=e.serverCache.isFullyInitialized()||Wh(r,Ye())!=null,Pu(e,p,l,n.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zM{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new J_(r.getIndex()),o=oM(r);this.processor_=OM(o);const l=t.serverCache,c=t.eventCache,d=i.updateFullNode(Ie.EMPTY_NODE,l.getNode(),null),p=o.updateFullNode(Ie.EMPTY_NODE,c.getNode(),null),_=new Is(d,l.isFullyInitialized(),i.filtersNodes()),m=new Is(p,c.isFullyInitialized(),o.filtersNodes());this.viewCache_=kf(m,_),this.eventGenerator_=new fM(this.query_)}get query(){return this.query_}}function $M(n){return n.viewCache_.serverCache.getNode()}function WM(n){return zh(n.viewCache_)}function HM(n,e){const t=Co(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Fe(e)&&!t.getImmediateChild(Le(e)).isEmpty())?t.getChild(e):null}function $T(n){return n.eventRegistrations_.length===0}function GM(n,e){n.eventRegistrations_.push(e)}function WT(n,e,t){const r=[];if(t){oe(e==null,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(o=>{const l=o.createCancelEvent(t,i);l&&r.push(l)})}if(e){let i=[];for(let o=0;o<n.eventRegistrations_.length;++o){const l=n.eventRegistrations_[o];if(!l.matches(e))i.push(l);else if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(o+1));break}}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function HT(n,e,t,r){e.type===Cr.MERGE&&e.source.queryId!==null&&(oe(Co(n.viewCache_),"We should always have a full cache before handling merges"),oe(zh(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,o=MM(n.processor_,i,e,t,r);return LM(n.processor_,o.viewCache),oe(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,P0(n,o.changes,o.viewCache.eventCache.getNode(),null)}function qM(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Tt,(o,l)=>{r.push(Ua(o,l))}),t.isFullyInitialized()&&r.push(E0(t.getNode())),P0(n,r,t.getNode(),e)}function P0(n,e,t,r){const i=r?[r]:n.eventRegistrations_;return pM(n.eventGenerator_,e,t,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gh;class k0{constructor(){this.views=new Map}}function KM(n){oe(!Gh,"__referenceConstructor has already been defined"),Gh=n}function QM(){return oe(Gh,"Reference.ts has not been loaded"),Gh}function YM(n){return n.views.size===0}function oy(n,e,t,r){const i=e.source.queryId;if(i!==null){const o=n.views.get(i);return oe(o!=null,"SyncTree gave us an op for an invalid query."),HT(o,e,t,r)}else{let o=[];for(const l of n.views.values())o=o.concat(HT(l,e,t,r));return o}}function N0(n,e,t,r,i){const o=e._queryIdentifier,l=n.views.get(o);if(!l){let c=$h(t,i?r:null),d=!1;c?d=!0:r instanceof Ie?(c=ry(t,r),d=!1):(c=Ie.EMPTY_NODE,d=!1);const p=kf(new Is(c,d,!1),new Is(r,i,!1));return new zM(e,p)}return l}function XM(n,e,t,r,i,o){const l=N0(n,e,r,i,o);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,l),GM(l,t),qM(l,t)}function JM(n,e,t,r){const i=e._queryIdentifier,o=[];let l=[];const c=Ss(n);if(i==="default")for(const[d,p]of n.views.entries())l=l.concat(WT(p,t,r)),$T(p)&&(n.views.delete(d),p.query._queryParams.loadsAllData()||o.push(p.query));else{const d=n.views.get(i);d&&(l=l.concat(WT(d,t,r)),$T(d)&&(n.views.delete(i),d.query._queryParams.loadsAllData()||o.push(d.query)))}return c&&!Ss(n)&&o.push(new(QM())(e._repo,e._path)),{removed:o,events:l}}function D0(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function gs(n,e){let t=null;for(const r of n.views.values())t=t||HM(r,e);return t}function O0(n,e){if(e._queryParams.loadsAllData())return Df(n);{const r=e._queryIdentifier;return n.views.get(r)}}function L0(n,e){return O0(n,e)!=null}function Ss(n){return Df(n)!=null}function Df(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qh;function ZM(n){oe(!qh,"__referenceConstructor has already been defined"),qh=n}function e2(){return oe(qh,"Reference.ts has not been loaded"),qh}let t2=1;class GT{constructor(e){this.listenProvider_=e,this.syncPointTree_=new at(null),this.pendingWriteTree_=PM(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function M0(n,e,t,r,i){return yM(n.pendingWriteTree_,e,t,r,i),i?ol(n,new So(ey(),e,t)):[]}function n2(n,e,t,r){vM(n.pendingWriteTree_,e,t,r);const i=at.fromObject(t);return ol(n,new Ba(ey(),e,i))}function ds(n,e,t=!1){const r=EM(n.pendingWriteTree_,e);if(wM(n.pendingWriteTree_,e)){let o=new at(null);return r.snap!=null?o=o.set(Ye(),!0):rn(r.children,l=>{o=o.set(new nt(l),!0)}),ol(n,new jh(r.path,o,t))}else return[]}function Ac(n,e,t){return ol(n,new So(ty(),e,t))}function r2(n,e,t){const r=at.fromObject(t);return ol(n,new Ba(ty(),e,r))}function i2(n,e){return ol(n,new Yu(ty(),e))}function s2(n,e,t){const r=ly(n,t);if(r){const i=uy(r),o=i.path,l=i.queryId,c=wn(o,e),d=new Yu(ny(l),c);return cy(n,o,d)}else return[]}function Kh(n,e,t,r,i=!1){const o=e._path,l=n.syncPointTree_.get(o);let c=[];if(l&&(e._queryIdentifier==="default"||L0(l,e))){const d=JM(l,e,t,r);YM(l)&&(n.syncPointTree_=n.syncPointTree_.remove(o));const p=d.removed;if(c=d.events,!i){const _=p.findIndex(y=>y._queryParams.loadsAllData())!==-1,m=n.syncPointTree_.findOnPath(o,(y,w)=>Ss(w));if(_&&!m){const y=n.syncPointTree_.subtree(o);if(!y.isEmpty()){const w=l2(y);for(let S=0;S<w.length;++S){const b=w[S],C=b.query,k=B0(n,b);n.listenProvider_.startListening(Nu(C),Xu(n,C),k.hashFn,k.onComplete)}}}!m&&p.length>0&&!r&&(_?n.listenProvider_.stopListening(Nu(e),null):p.forEach(y=>{const w=n.queryToTagMap.get(Of(y));n.listenProvider_.stopListening(Nu(y),w)}))}u2(n,p)}return c}function V0(n,e,t,r){const i=ly(n,r);if(i!=null){const o=uy(i),l=o.path,c=o.queryId,d=wn(l,e),p=new So(ny(c),d,t);return cy(n,l,p)}else return[]}function o2(n,e,t,r){const i=ly(n,r);if(i){const o=uy(i),l=o.path,c=o.queryId,d=wn(l,e),p=at.fromObject(t),_=new Ba(ny(c),d,p);return cy(n,l,_)}else return[]}function Hg(n,e,t,r=!1){const i=e._path;let o=null,l=!1;n.syncPointTree_.foreachOnPath(i,(y,w)=>{const S=wn(y,i);o=o||gs(w,S),l=l||Ss(w)});let c=n.syncPointTree_.get(i);c?(l=l||Ss(c),o=o||gs(c,Ye())):(c=new k0,n.syncPointTree_=n.syncPointTree_.set(i,c));let d;o!=null?d=!0:(d=!1,o=Ie.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((w,S)=>{const b=gs(S,Ye());b&&(o=o.updateImmediateChild(w,b))}));const p=L0(c,e);if(!p&&!e._queryParams.loadsAllData()){const y=Of(e);oe(!n.queryToTagMap.has(y),"View does not exist, but we have a tag");const w=c2();n.queryToTagMap.set(y,w),n.tagToQueryMap.set(w,y)}const _=Nf(n.pendingWriteTree_,i);let m=XM(c,e,t,_,o,d);if(!p&&!l&&!r){const y=O0(c,e);m=m.concat(d2(n,e,y))}return m}function ay(n,e,t){const i=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(e,(l,c)=>{const d=wn(l,e),p=gs(c,d);if(p)return p});return C0(i,e,o,t,!0)}function a2(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(p,_)=>{const m=wn(p,t);r=r||gs(_,m)});let i=n.syncPointTree_.get(t);i?r=r||gs(i,Ye()):(i=new k0,n.syncPointTree_=n.syncPointTree_.set(t,i));const o=r!=null,l=o?new Is(r,!0,!1):null,c=Nf(n.pendingWriteTree_,e._path),d=N0(i,e,c,o?l.getNode():Ie.EMPTY_NODE,o);return WM(d)}function ol(n,e){return F0(e,n.syncPointTree_,null,Nf(n.pendingWriteTree_,Ye()))}function F0(n,e,t,r){if(Fe(n.path))return U0(n,e,t,r);{const i=e.get(Ye());t==null&&i!=null&&(t=gs(i,Ye()));let o=[];const l=Le(n.path),c=n.operationForChild(l),d=e.children.get(l);if(d&&c){const p=t?t.getImmediateChild(l):null,_=b0(r,l);o=o.concat(F0(c,d,p,_))}return i&&(o=o.concat(oy(i,n,r,t))),o}}function U0(n,e,t,r){const i=e.get(Ye());t==null&&i!=null&&(t=gs(i,Ye()));let o=[];return e.children.inorderTraversal((l,c)=>{const d=t?t.getImmediateChild(l):null,p=b0(r,l),_=n.operationForChild(l);_&&(o=o.concat(U0(_,c,d,p)))}),i&&(o=o.concat(oy(i,n,r,t))),o}function B0(n,e){const t=e.query,r=Xu(n,t);return{hashFn:()=>($M(e)||Ie.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?s2(n,t._path,r):i2(n,t._path);{const o=iL(i,t);return Kh(n,t,null,o)}}}}function Xu(n,e){const t=Of(e);return n.queryToTagMap.get(t)}function Of(n){return n._path.toString()+"$"+n._queryIdentifier}function ly(n,e){return n.tagToQueryMap.get(e)}function uy(n){const e=n.indexOf("$");return oe(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new nt(n.substr(0,e))}}function cy(n,e,t){const r=n.syncPointTree_.get(e);oe(r,"Missing sync point for query tag that we're tracking");const i=Nf(n.pendingWriteTree_,e);return oy(r,t,i,null)}function l2(n){return n.fold((e,t,r)=>{if(t&&Ss(t))return[Df(t)];{let i=[];return t&&(i=D0(t)),rn(r,(o,l)=>{i=i.concat(l)}),i}})}function Nu(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(e2())(n._repo,n._path):n}function u2(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=Of(r),o=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(o)}}}function c2(){return t2++}function d2(n,e,t){const r=e._path,i=Xu(n,e),o=B0(n,t),l=n.listenProvider_.startListening(Nu(e),i,o.hashFn,o.onComplete),c=n.syncPointTree_.subtree(r);if(i)oe(!Ss(c.value),"If we're adding a query, it shouldn't be shadowed");else{const d=c.fold((p,_,m)=>{if(!Fe(p)&&_&&Ss(_))return[Df(_).query];{let y=[];return _&&(y=y.concat(D0(_).map(w=>w.query))),rn(m,(w,S)=>{y=y.concat(S)}),y}});for(let p=0;p<d.length;++p){const _=d[p];n.listenProvider_.stopListening(Nu(_),Xu(n,_))}}return l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new dy(t)}node(){return this.node_}}class hy{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=wt(this.path_,e);return new hy(this.syncTree_,t)}node(){return ay(this.syncTree_,this.path_)}}const h2=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},qT=function(n,e,t){if(!n||typeof n!="object")return n;if(oe(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return f2(n[".sv"],e,t);if(typeof n[".sv"]=="object")return p2(n[".sv"],e);oe(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},f2=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:oe(!1,"Unexpected server value: "+n)}},p2=function(n,e,t){n.hasOwnProperty("increment")||oe(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;typeof r!="number"&&oe(!1,"Unexpected increment value: "+r);const i=e.node();if(oe(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return typeof l!="number"?r:l+r},j0=function(n,e,t,r){return fy(e,new hy(t,n),r)},z0=function(n,e,t){return fy(n,new dy(e),t)};function fy(n,e,t){const r=n.getPriority().val(),i=qT(r,e.getImmediateChild(".priority"),t);let o;if(n.isLeafNode()){const l=n,c=qT(l.getValue(),e,t);return c!==l.getValue()||i!==l.getPriority().val()?new Ht(c,Mt(i)):n}else{const l=n;return o=l,i!==l.getPriority().val()&&(o=o.updatePriority(new Ht(i))),l.forEachChild(Tt,(c,d)=>{const p=fy(d,e.getImmediateChild(c),t);p!==d&&(o=o.updateImmediateChild(c,p))}),o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class py{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function my(n,e){let t=e instanceof nt?e:new nt(e),r=n,i=Le(t);for(;i!==null;){const o=Va(r.node.children,i)||{children:{},childCount:0};r=new py(i,r,o),t=lt(t),i=Le(t)}return r}function al(n){return n.node.value}function $0(n,e){n.node.value=e,Gg(n)}function W0(n){return n.node.childCount>0}function m2(n){return al(n)===void 0&&!W0(n)}function Lf(n,e){rn(n.node.children,(t,r)=>{e(new py(t,n,r))})}function H0(n,e,t,r){t&&e(n),Lf(n,i=>{H0(i,e,!0)})}function g2(n,e,t){let r=n.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function xc(n){return new nt(n.parent===null?n.name:xc(n.parent)+"/"+n.name)}function Gg(n){n.parent!==null&&_2(n.parent,n.name,n)}function _2(n,e,t){const r=m2(t),i=ni(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,Gg(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,Gg(n))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y2=/[\[\].#$\/\u0000-\u001F\u007F]/,v2=/[\[\].#$\u0000-\u001F\u007F]/,Jm=10*1024*1024,gy=function(n){return typeof n=="string"&&n.length!==0&&!y2.test(n)},G0=function(n){return typeof n=="string"&&n.length!==0&&!v2.test(n)},E2=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),G0(n)},w2=function(n){return n===null||typeof n=="string"||typeof n=="number"&&!$_(n)||n&&typeof n=="object"&&ni(n,".sv")},q0=function(n,e,t,r){r&&e===void 0||Mf(vf(n,"value"),e,t)},Mf=function(n,e,t){const r=t instanceof nt?new FL(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+ho(r));if(typeof e=="function")throw new Error(n+"contains a function "+ho(r)+" with contents = "+e.toString());if($_(e))throw new Error(n+"contains "+e.toString()+" "+ho(r));if(typeof e=="string"&&e.length>Jm/3&&Ef(e)>Jm)throw new Error(n+"contains a string greater than "+Jm+" utf8 bytes "+ho(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,o=!1;if(rn(e,(l,c)=>{if(l===".value")i=!0;else if(l!==".priority"&&l!==".sv"&&(o=!0,!gy(l)))throw new Error(n+" contains an invalid key ("+l+") "+ho(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);UL(r,l),Mf(n,c,r),BL(r)}),i&&o)throw new Error(n+' contains ".value" child '+ho(r)+" in addition to actual children.")}},T2=function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const o=Gu(r);for(let l=0;l<o.length;l++)if(!(o[l]===".priority"&&l===o.length-1)){if(!gy(o[l]))throw new Error(n+"contains an invalid key ("+o[l]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(VL);let i=null;for(t=0;t<e.length;t++){if(r=e[t],i!==null&&nr(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},I2=function(n,e,t,r){const i=vf(n,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const o=[];rn(e,(l,c)=>{const d=new nt(l);if(Mf(i,c,wt(t,d)),K_(d)===".priority"&&!w2(c))throw new Error(i+"contains an invalid value for '"+d.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(d)}),T2(i,o)},K0=function(n,e,t,r){if(!G0(t))throw new Error(vf(n,e)+'was an invalid path = "'+t+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},S2=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),K0(n,e,t)},_y=function(n,e){if(Le(e)===".info")throw new Error(n+" failed = Can't modify data under /.info/")},C2=function(n,e){const t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!gy(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!E2(t))throw new Error(vf(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Vf(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],o=i.getPath();t!==null&&!Q_(o,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:o}),t.events.push(i)}t&&n.eventLists_.push(t)}function Q0(n,e,t){Vf(n,t),Y0(n,r=>Q_(r,e))}function ar(n,e,t){Vf(n,t),Y0(n,r=>nr(r,e)||nr(e,r))}function Y0(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];if(i){const o=i.path;e(o)?(R2(n.eventLists_[r]),n.eventLists_[r]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function R2(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(t!==null){n.events[e]=null;const r=t.getEventRunner();Au&&en("event: "+t.toString()),sl(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A2="repo_interrupt",x2=25;class P2{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new b2,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Bh(),this.transactionQueueTree_=new py,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function k2(n,e,t){if(n.stats_=G_(n.repoInfo_),n.forceRestClient_||lL())n.server_=new Uh(n.repoInfo_,(r,i,o,l)=>{KT(n,r,i,o,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>QT(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Vt(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Ri(n.repoInfo_,e,(r,i,o,l)=>{KT(n,r,i,o,l)},r=>{QT(n,r)},r=>{N2(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=fL(n.repoInfo_,()=>new hM(n.stats_,n.server_)),n.infoData_=new aM,n.infoSyncTree_=new GT({startListening:(r,i,o,l)=>{let c=[];const d=n.infoData_.getNode(r._path);return d.isEmpty()||(c=Ac(n.infoSyncTree_,r._path,d),setTimeout(()=>{l("ok")},0)),c},stopListening:()=>{}}),yy(n,"connected",!1),n.serverSyncTree_=new GT({startListening:(r,i,o,l)=>(n.server_.listen(r,o,i,(c,d)=>{const p=l(c,d);ar(n.eventQueue_,r._path,p)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}function X0(n){const t=n.infoData_.getNode(new nt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function Ff(n){return h2({timestamp:X0(n)})}function KT(n,e,t,r,i){n.dataUpdateCount++;const o=new nt(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(i)if(r){const d=Ah(t,p=>Mt(p));l=o2(n.serverSyncTree_,o,d,i)}else{const d=Mt(t);l=V0(n.serverSyncTree_,o,d,i)}else if(r){const d=Ah(t,p=>Mt(p));l=r2(n.serverSyncTree_,o,d)}else{const d=Mt(t);l=Ac(n.serverSyncTree_,o,d)}let c=o;l.length>0&&(c=za(n,o)),ar(n.eventQueue_,c,l)}function QT(n,e){yy(n,"connected",e),e===!1&&M2(n)}function N2(n,e){rn(e,(t,r)=>{yy(n,t,r)})}function yy(n,e,t){const r=new nt("/.info/"+e),i=Mt(t);n.infoData_.updateSnapshot(r,i);const o=Ac(n.infoSyncTree_,r,i);ar(n.eventQueue_,r,o)}function vy(n){return n.nextWriteId_++}function D2(n,e,t){const r=a2(n.serverSyncTree_,e);return r!=null?Promise.resolve(r):n.server_.get(e).then(i=>{const o=Mt(i).withIndex(e._queryParams.getIndex());Hg(n.serverSyncTree_,e,t,!0);let l;if(e._queryParams.loadsAllData())l=Ac(n.serverSyncTree_,e._path,o);else{const c=Xu(n.serverSyncTree_,e);l=V0(n.serverSyncTree_,e._path,o,c)}return ar(n.eventQueue_,e._path,l),Kh(n.serverSyncTree_,e,t,null,!0),o},i=>(Pc(n,"get for query "+Vt(e)+" failed: "+i),Promise.reject(new Error(i))))}function O2(n,e,t,r,i){Pc(n,"set",{path:e.toString(),value:t,priority:r});const o=Ff(n),l=Mt(t,r),c=ay(n.serverSyncTree_,e),d=z0(l,c,o),p=vy(n),_=M0(n.serverSyncTree_,e,d,p,!0);Vf(n.eventQueue_,_),n.server_.put(e.toString(),l.val(!0),(y,w)=>{const S=y==="ok";S||Tn("set at "+e+" failed: "+y);const b=ds(n.serverSyncTree_,p,!S);ar(n.eventQueue_,e,b),qg(n,i,y,w)});const m=wy(n,e);za(n,m),ar(n.eventQueue_,m,[])}function L2(n,e,t,r){Pc(n,"update",{path:e.toString(),value:t});let i=!0;const o=Ff(n),l={};if(rn(t,(c,d)=>{i=!1,l[c]=j0(wt(e,c),Mt(d),n.serverSyncTree_,o)}),i)en("update() called with empty data.  Don't do anything."),qg(n,r,"ok",void 0);else{const c=vy(n),d=n2(n.serverSyncTree_,e,l,c);Vf(n.eventQueue_,d),n.server_.merge(e.toString(),t,(p,_)=>{const m=p==="ok";m||Tn("update at "+e+" failed: "+p);const y=ds(n.serverSyncTree_,c,!m),w=y.length>0?za(n,e):e;ar(n.eventQueue_,w,y),qg(n,r,p,_)}),rn(t,p=>{const _=wy(n,wt(e,p));za(n,_)}),ar(n.eventQueue_,e,[])}}function M2(n){Pc(n,"onDisconnectEvents");const e=Ff(n),t=Bh();Ug(n.onDisconnect_,Ye(),(i,o)=>{const l=j0(i,o,n.serverSyncTree_,e);w0(t,i,l)});let r=[];Ug(t,Ye(),(i,o)=>{r=r.concat(Ac(n.serverSyncTree_,i,o));const l=wy(n,i);za(n,l)}),n.onDisconnect_=Bh(),ar(n.eventQueue_,Ye(),r)}function V2(n,e,t){let r;Le(e._path)===".info"?r=Hg(n.infoSyncTree_,e,t):r=Hg(n.serverSyncTree_,e,t),Q0(n.eventQueue_,e._path,r)}function F2(n,e,t){let r;Le(e._path)===".info"?r=Kh(n.infoSyncTree_,e,t):r=Kh(n.serverSyncTree_,e,t),Q0(n.eventQueue_,e._path,r)}function U2(n){n.persistentConnection_&&n.persistentConnection_.interrupt(A2)}function Pc(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),en(t,...e)}function qg(n,e,t,r){e&&sl(()=>{if(t==="ok")e(null);else{const i=(t||"error").toUpperCase();let o=i;r&&(o+=": "+r);const l=new Error(o);l.code=i,e(l)}})}function J0(n,e,t){return ay(n.serverSyncTree_,e,t)||Ie.EMPTY_NODE}function Ey(n,e=n.transactionQueueTree_){if(e||Uf(n,e),al(e)){const t=eb(n,e);oe(t.length>0,"Sending zero length transaction queue"),t.every(i=>i.status===0)&&B2(n,xc(e),t)}else W0(e)&&Lf(e,t=>{Ey(n,t)})}function B2(n,e,t){const r=t.map(p=>p.currentWriteId),i=J0(n,e,r);let o=i;const l=i.hash();for(let p=0;p<t.length;p++){const _=t[p];oe(_.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),_.status=1,_.retryCount++;const m=wn(e,_.path);o=o.updateChild(m,_.currentOutputSnapshotRaw)}const c=o.val(!0),d=e;n.server_.put(d.toString(),c,p=>{Pc(n,"transaction put response",{path:d.toString(),status:p});let _=[];if(p==="ok"){const m=[];for(let y=0;y<t.length;y++)t[y].status=2,_=_.concat(ds(n.serverSyncTree_,t[y].currentWriteId)),t[y].onComplete&&m.push(()=>t[y].onComplete(null,!0,t[y].currentOutputSnapshotResolved)),t[y].unwatcher();Uf(n,my(n.transactionQueueTree_,e)),Ey(n,n.transactionQueueTree_),ar(n.eventQueue_,e,_);for(let y=0;y<m.length;y++)sl(m[y])}else{if(p==="datastale")for(let m=0;m<t.length;m++)t[m].status===3?t[m].status=4:t[m].status=0;else{Tn("transaction at "+d.toString()+" failed: "+p);for(let m=0;m<t.length;m++)t[m].status=4,t[m].abortReason=p}za(n,e)}},l)}function za(n,e){const t=Z0(n,e),r=xc(t),i=eb(n,t);return j2(n,i,r),r}function j2(n,e,t){if(e.length===0)return;const r=[];let i=[];const l=e.filter(c=>c.status===0).map(c=>c.currentWriteId);for(let c=0;c<e.length;c++){const d=e[c],p=wn(t,d.path);let _=!1,m;if(oe(p!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),d.status===4)_=!0,m=d.abortReason,i=i.concat(ds(n.serverSyncTree_,d.currentWriteId,!0));else if(d.status===0)if(d.retryCount>=x2)_=!0,m="maxretry",i=i.concat(ds(n.serverSyncTree_,d.currentWriteId,!0));else{const y=J0(n,d.path,l);d.currentInputSnapshot=y;const w=e[c].update(y.val());if(w!==void 0){Mf("transaction failed: Data returned ",w,d.path);let S=Mt(w);typeof w=="object"&&w!=null&&ni(w,".priority")||(S=S.updatePriority(y.getPriority()));const C=d.currentWriteId,k=Ff(n),N=z0(S,y,k);d.currentOutputSnapshotRaw=S,d.currentOutputSnapshotResolved=N,d.currentWriteId=vy(n),l.splice(l.indexOf(C),1),i=i.concat(M0(n.serverSyncTree_,d.path,N,d.currentWriteId,d.applyLocally)),i=i.concat(ds(n.serverSyncTree_,C,!0))}else _=!0,m="nodata",i=i.concat(ds(n.serverSyncTree_,d.currentWriteId,!0))}ar(n.eventQueue_,t,i),i=[],_&&(e[c].status=2,function(y){setTimeout(y,Math.floor(0))}(e[c].unwatcher),e[c].onComplete&&(m==="nodata"?r.push(()=>e[c].onComplete(null,!1,e[c].currentInputSnapshot)):r.push(()=>e[c].onComplete(new Error(m),!1,null))))}Uf(n,n.transactionQueueTree_);for(let c=0;c<r.length;c++)sl(r[c]);Ey(n,n.transactionQueueTree_)}function Z0(n,e){let t,r=n.transactionQueueTree_;for(t=Le(e);t!==null&&al(r)===void 0;)r=my(r,t),e=lt(e),t=Le(e);return r}function eb(n,e){const t=[];return tb(n,e,t),t.sort((r,i)=>r.order-i.order),t}function tb(n,e,t){const r=al(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);Lf(e,i=>{tb(n,i,t)})}function Uf(n,e){const t=al(e);if(t){let r=0;for(let i=0;i<t.length;i++)t[i].status!==2&&(t[r]=t[i],r++);t.length=r,$0(e,t.length>0?t:void 0)}Lf(e,r=>{Uf(n,r)})}function wy(n,e){const t=xc(Z0(n,e)),r=my(n.transactionQueueTree_,e);return g2(r,i=>{Zm(n,i)}),Zm(n,r),H0(r,i=>{Zm(n,i)}),t}function Zm(n,e){const t=al(e);if(t){const r=[];let i=[],o=-1;for(let l=0;l<t.length;l++)t[l].status===3||(t[l].status===1?(oe(o===l-1,"All SENT items should be at beginning of queue."),o=l,t[l].status=3,t[l].abortReason="set"):(oe(t[l].status===0,"Unexpected transaction status in abort"),t[l].unwatcher(),i=i.concat(ds(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));o===-1?$0(e,void 0):t.length=o+1,ar(n.eventQueue_,xc(e),i);for(let l=0;l<r.length;l++)sl(r[l])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z2(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function $2(n){const e={};n.charAt(0)==="?"&&(n=n.substring(1));for(const t of n.split("&")){if(t.length===0)continue;const r=t.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Tn(`Invalid query segment '${t}' in query '${n}'`)}return e}const YT=function(n,e){const t=W2(n),r=t.namespace;t.domain==="firebase.com"&&Ni(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&t.domain!=="localhost"&&Ni("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||ZO();const i=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new i0(t.host,t.secure,r,i,e,"",r!==t.subdomain),path:new nt(t.pathString)}},W2=function(n){let e="",t="",r="",i="",o="",l=!0,c="https",d=443;if(typeof n=="string"){let p=n.indexOf("//");p>=0&&(c=n.substring(0,p-1),n=n.substring(p+2));let _=n.indexOf("/");_===-1&&(_=n.length);let m=n.indexOf("?");m===-1&&(m=n.length),e=n.substring(0,Math.min(_,m)),_<m&&(i=z2(n.substring(_,m)));const y=$2(n.substring(Math.min(n.length,m)));p=e.indexOf(":"),p>=0?(l=c==="https"||c==="wss",d=parseInt(e.substring(p+1),10)):p=e.length;const w=e.slice(0,p);if(w.toLowerCase()==="localhost")t="localhost";else if(w.split(".").length<=2)t=w;else{const S=e.indexOf(".");r=e.substring(0,S).toLowerCase(),t=e.substring(S+1),o=r}"ns"in y&&(o=y.ns)}return{host:e,port:d,domain:t,subdomain:r,secure:l,scheme:c,pathString:i,namespace:o}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XT="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",H2=function(){let n=0;const e=[];return function(t){const r=t===n;n=t;let i;const o=new Array(8);for(i=7;i>=0;i--)o[i]=XT.charAt(t%64),t=Math.floor(t/64);oe(t===0,"Cannot push at time == 0");let l=o.join("");if(r){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)l+=XT.charAt(e[i]);return oe(l.length===20,"nextPushId: Length should be 20."),l}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Vt(this.snapshot.exportVal())}}class q2{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return oe(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ty{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Fe(this._path)?null:K_(this._path)}get ref(){return new Mi(this._repo,this._path)}get _queryIdentifier(){const e=MT(this._queryParams),t=W_(e);return t==="{}"?"default":t}get _queryObject(){return MT(this._queryParams)}isEqual(e){if(e=xt(e),!(e instanceof Ty))return!1;const t=this._repo===e._repo,r=Q_(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return t&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+ML(this._path)}}class Mi extends Ty{constructor(e,t){super(e,t,new Z_,!1)}get parent(){const e=f0(this._path);return e===null?null:new Mi(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Ju{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new nt(e),r=Zu(this.ref,e);return new Ju(this._node.getChild(t),r,Tt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new Ju(i,Zu(this.ref,r),Tt)))}hasChild(e){const t=new nt(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Ir(n,e){return n=xt(n),n._checkNotDeleted("ref"),e!==void 0?Zu(n._root,e):n._root}function Zu(n,e){return n=xt(n),Le(n._path)===null?S2("child","path",e):K0("child","path",e),new Mi(n._repo,wt(n._path,e))}function rb(n,e){n=xt(n),_y("push",n._path),q0("push",e,n._path,!0);const t=X0(n._repo),r=H2(t),i=Zu(n,r),o=Zu(n,r);let l;return e!=null?l=Bf(o,e).then(()=>o):l=Promise.resolve(o),i.then=l.then.bind(l),i.catch=l.then.bind(l,void 0),i}function ib(n){return _y("remove",n._path),Bf(n,null)}function Bf(n,e){n=xt(n),_y("set",n._path),q0("set",e,n._path,!1);const t=new _c;return O2(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function sb(n,e){I2("update",e,n._path);const t=new _c;return L2(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function K2(n){n=xt(n);const e=new nb(()=>{}),t=new jf(e);return D2(n._repo,n,t).then(r=>new Ju(r,new Mi(n._repo,n._path),n._queryParams.getIndex()))}class jf{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,t){const r=t._queryParams.getIndex();return new G2("value",this,new Ju(e.snapshotNode,new Mi(t._repo,t._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new q2(this,e,t):null}matches(e){return e instanceof jf?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function Q2(n,e,t,r,i){const o=new nb(t,void 0),l=new jf(o);return V2(n._repo,n,l),()=>F2(n._repo,n,l)}function Kg(n,e,t,r){return Q2(n,"value",e)}KM(Mi);ZM(Mi);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y2="FIREBASE_DATABASE_EMULATOR_HOST",Qg={};let X2=!1;function J2(n,e,t,r){n.repoInfo_=new i0(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}function Z2(n,e,t,r,i){let o=r||n.options.databaseURL;o===void 0&&(n.options.projectId||Ni("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),en("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let l=YT(o,i),c=l.repoInfo,d;typeof process<"u"&&yT&&(d=yT[Y2]),d?(o=`http://${d}?ns=${c.namespace}`,l=YT(o,i),c=l.repoInfo):l.repoInfo.secure;const p=new cL(n.name,n.options,e);C2("Invalid Firebase Database URL",l),Fe(l.path)||Ni("Database URL must point to the root of a Firebase Database (not including a child path).");const _=tV(c,n,p,new uL(n.name,t));return new nV(_,n)}function eV(n,e){const t=Qg[e];(!t||t[n.key]!==n)&&Ni(`Database ${e}(${n.repoInfo_}) has already been deleted.`),U2(n),delete t[n.key]}function tV(n,e,t,r){let i=Qg[e.name];i||(i={},Qg[e.name]=i);let o=i[n.toURLString()];return o&&Ni("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new P2(n,X2,t,r),i[n.toURLString()]=o,o}class nV{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(k2(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Mi(this._repo,Ye())),this._rootInternal}_delete(){return this._rootInternal!==null&&(eV(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Ni("Cannot call "+e+" on a deleted database.")}}function Kr(n=k_(),e){const t=Tf(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const r=WS("database");r&&rV(t,...r)}return t}function rV(n,e,t,r={}){n=xt(n),n._checkNotDeleted("useEmulator"),n._instanceStarted&&Ni("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Ni('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new _h(_h.OWNER);else if(r.mockUserToken){const l=typeof r.mockUserToken=="string"?r.mockUserToken:qS(r.mockUserToken,n.app.options.projectId);o=new _h(l)}J2(i,e,t,o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iV(n){qO(Ao),vo(new ws("database",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return Z2(r,i,o,t)},"PUBLIC").setMultipleInstances(!0)),Qr(vT,ET,n),Qr(vT,ET,"esm2017")}Ri.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};Ri.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};iV();var JT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var yo,ob;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,A){function P(){}P.prototype=A.prototype,x.D=A.prototype,x.prototype=new P,x.prototype.constructor=x,x.C=function(L,V,B){for(var O=Array(arguments.length-2),rt=2;rt<arguments.length;rt++)O[rt-2]=arguments[rt];return A.prototype[V].apply(L,O)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(x,A,P){P||(P=0);var L=Array(16);if(typeof A=="string")for(var V=0;16>V;++V)L[V]=A.charCodeAt(P++)|A.charCodeAt(P++)<<8|A.charCodeAt(P++)<<16|A.charCodeAt(P++)<<24;else for(V=0;16>V;++V)L[V]=A[P++]|A[P++]<<8|A[P++]<<16|A[P++]<<24;A=x.g[0],P=x.g[1],V=x.g[2];var B=x.g[3],O=A+(B^P&(V^B))+L[0]+3614090360&4294967295;A=P+(O<<7&4294967295|O>>>25),O=B+(V^A&(P^V))+L[1]+3905402710&4294967295,B=A+(O<<12&4294967295|O>>>20),O=V+(P^B&(A^P))+L[2]+606105819&4294967295,V=B+(O<<17&4294967295|O>>>15),O=P+(A^V&(B^A))+L[3]+3250441966&4294967295,P=V+(O<<22&4294967295|O>>>10),O=A+(B^P&(V^B))+L[4]+4118548399&4294967295,A=P+(O<<7&4294967295|O>>>25),O=B+(V^A&(P^V))+L[5]+1200080426&4294967295,B=A+(O<<12&4294967295|O>>>20),O=V+(P^B&(A^P))+L[6]+2821735955&4294967295,V=B+(O<<17&4294967295|O>>>15),O=P+(A^V&(B^A))+L[7]+4249261313&4294967295,P=V+(O<<22&4294967295|O>>>10),O=A+(B^P&(V^B))+L[8]+1770035416&4294967295,A=P+(O<<7&4294967295|O>>>25),O=B+(V^A&(P^V))+L[9]+2336552879&4294967295,B=A+(O<<12&4294967295|O>>>20),O=V+(P^B&(A^P))+L[10]+4294925233&4294967295,V=B+(O<<17&4294967295|O>>>15),O=P+(A^V&(B^A))+L[11]+2304563134&4294967295,P=V+(O<<22&4294967295|O>>>10),O=A+(B^P&(V^B))+L[12]+1804603682&4294967295,A=P+(O<<7&4294967295|O>>>25),O=B+(V^A&(P^V))+L[13]+4254626195&4294967295,B=A+(O<<12&4294967295|O>>>20),O=V+(P^B&(A^P))+L[14]+2792965006&4294967295,V=B+(O<<17&4294967295|O>>>15),O=P+(A^V&(B^A))+L[15]+1236535329&4294967295,P=V+(O<<22&4294967295|O>>>10),O=A+(V^B&(P^V))+L[1]+4129170786&4294967295,A=P+(O<<5&4294967295|O>>>27),O=B+(P^V&(A^P))+L[6]+3225465664&4294967295,B=A+(O<<9&4294967295|O>>>23),O=V+(A^P&(B^A))+L[11]+643717713&4294967295,V=B+(O<<14&4294967295|O>>>18),O=P+(B^A&(V^B))+L[0]+3921069994&4294967295,P=V+(O<<20&4294967295|O>>>12),O=A+(V^B&(P^V))+L[5]+3593408605&4294967295,A=P+(O<<5&4294967295|O>>>27),O=B+(P^V&(A^P))+L[10]+38016083&4294967295,B=A+(O<<9&4294967295|O>>>23),O=V+(A^P&(B^A))+L[15]+3634488961&4294967295,V=B+(O<<14&4294967295|O>>>18),O=P+(B^A&(V^B))+L[4]+3889429448&4294967295,P=V+(O<<20&4294967295|O>>>12),O=A+(V^B&(P^V))+L[9]+568446438&4294967295,A=P+(O<<5&4294967295|O>>>27),O=B+(P^V&(A^P))+L[14]+3275163606&4294967295,B=A+(O<<9&4294967295|O>>>23),O=V+(A^P&(B^A))+L[3]+4107603335&4294967295,V=B+(O<<14&4294967295|O>>>18),O=P+(B^A&(V^B))+L[8]+1163531501&4294967295,P=V+(O<<20&4294967295|O>>>12),O=A+(V^B&(P^V))+L[13]+2850285829&4294967295,A=P+(O<<5&4294967295|O>>>27),O=B+(P^V&(A^P))+L[2]+4243563512&4294967295,B=A+(O<<9&4294967295|O>>>23),O=V+(A^P&(B^A))+L[7]+1735328473&4294967295,V=B+(O<<14&4294967295|O>>>18),O=P+(B^A&(V^B))+L[12]+2368359562&4294967295,P=V+(O<<20&4294967295|O>>>12),O=A+(P^V^B)+L[5]+4294588738&4294967295,A=P+(O<<4&4294967295|O>>>28),O=B+(A^P^V)+L[8]+2272392833&4294967295,B=A+(O<<11&4294967295|O>>>21),O=V+(B^A^P)+L[11]+1839030562&4294967295,V=B+(O<<16&4294967295|O>>>16),O=P+(V^B^A)+L[14]+4259657740&4294967295,P=V+(O<<23&4294967295|O>>>9),O=A+(P^V^B)+L[1]+2763975236&4294967295,A=P+(O<<4&4294967295|O>>>28),O=B+(A^P^V)+L[4]+1272893353&4294967295,B=A+(O<<11&4294967295|O>>>21),O=V+(B^A^P)+L[7]+4139469664&4294967295,V=B+(O<<16&4294967295|O>>>16),O=P+(V^B^A)+L[10]+3200236656&4294967295,P=V+(O<<23&4294967295|O>>>9),O=A+(P^V^B)+L[13]+681279174&4294967295,A=P+(O<<4&4294967295|O>>>28),O=B+(A^P^V)+L[0]+3936430074&4294967295,B=A+(O<<11&4294967295|O>>>21),O=V+(B^A^P)+L[3]+3572445317&4294967295,V=B+(O<<16&4294967295|O>>>16),O=P+(V^B^A)+L[6]+76029189&4294967295,P=V+(O<<23&4294967295|O>>>9),O=A+(P^V^B)+L[9]+3654602809&4294967295,A=P+(O<<4&4294967295|O>>>28),O=B+(A^P^V)+L[12]+3873151461&4294967295,B=A+(O<<11&4294967295|O>>>21),O=V+(B^A^P)+L[15]+530742520&4294967295,V=B+(O<<16&4294967295|O>>>16),O=P+(V^B^A)+L[2]+3299628645&4294967295,P=V+(O<<23&4294967295|O>>>9),O=A+(V^(P|~B))+L[0]+4096336452&4294967295,A=P+(O<<6&4294967295|O>>>26),O=B+(P^(A|~V))+L[7]+1126891415&4294967295,B=A+(O<<10&4294967295|O>>>22),O=V+(A^(B|~P))+L[14]+2878612391&4294967295,V=B+(O<<15&4294967295|O>>>17),O=P+(B^(V|~A))+L[5]+4237533241&4294967295,P=V+(O<<21&4294967295|O>>>11),O=A+(V^(P|~B))+L[12]+1700485571&4294967295,A=P+(O<<6&4294967295|O>>>26),O=B+(P^(A|~V))+L[3]+2399980690&4294967295,B=A+(O<<10&4294967295|O>>>22),O=V+(A^(B|~P))+L[10]+4293915773&4294967295,V=B+(O<<15&4294967295|O>>>17),O=P+(B^(V|~A))+L[1]+2240044497&4294967295,P=V+(O<<21&4294967295|O>>>11),O=A+(V^(P|~B))+L[8]+1873313359&4294967295,A=P+(O<<6&4294967295|O>>>26),O=B+(P^(A|~V))+L[15]+4264355552&4294967295,B=A+(O<<10&4294967295|O>>>22),O=V+(A^(B|~P))+L[6]+2734768916&4294967295,V=B+(O<<15&4294967295|O>>>17),O=P+(B^(V|~A))+L[13]+1309151649&4294967295,P=V+(O<<21&4294967295|O>>>11),O=A+(V^(P|~B))+L[4]+4149444226&4294967295,A=P+(O<<6&4294967295|O>>>26),O=B+(P^(A|~V))+L[11]+3174756917&4294967295,B=A+(O<<10&4294967295|O>>>22),O=V+(A^(B|~P))+L[2]+718787259&4294967295,V=B+(O<<15&4294967295|O>>>17),O=P+(B^(V|~A))+L[9]+3951481745&4294967295,x.g[0]=x.g[0]+A&4294967295,x.g[1]=x.g[1]+(V+(O<<21&4294967295|O>>>11))&4294967295,x.g[2]=x.g[2]+V&4294967295,x.g[3]=x.g[3]+B&4294967295}r.prototype.u=function(x,A){A===void 0&&(A=x.length);for(var P=A-this.blockSize,L=this.B,V=this.h,B=0;B<A;){if(V==0)for(;B<=P;)i(this,x,B),B+=this.blockSize;if(typeof x=="string"){for(;B<A;)if(L[V++]=x.charCodeAt(B++),V==this.blockSize){i(this,L),V=0;break}}else for(;B<A;)if(L[V++]=x[B++],V==this.blockSize){i(this,L),V=0;break}}this.h=V,this.o+=A},r.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var A=1;A<x.length-8;++A)x[A]=0;var P=8*this.o;for(A=x.length-8;A<x.length;++A)x[A]=P&255,P/=256;for(this.u(x),x=Array(16),A=P=0;4>A;++A)for(var L=0;32>L;L+=8)x[P++]=this.g[A]>>>L&255;return x};function o(x,A){var P=c;return Object.prototype.hasOwnProperty.call(P,x)?P[x]:P[x]=A(x)}function l(x,A){this.h=A;for(var P=[],L=!0,V=x.length-1;0<=V;V--){var B=x[V]|0;L&&B==A||(P[V]=B,L=!1)}this.g=P}var c={};function d(x){return-128<=x&&128>x?o(x,function(A){return new l([A|0],0>A?-1:0)}):new l([x|0],0>x?-1:0)}function p(x){if(isNaN(x)||!isFinite(x))return m;if(0>x)return C(p(-x));for(var A=[],P=1,L=0;x>=P;L++)A[L]=x/P|0,P*=4294967296;return new l(A,0)}function _(x,A){if(x.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(x.charAt(0)=="-")return C(_(x.substring(1),A));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=p(Math.pow(A,8)),L=m,V=0;V<x.length;V+=8){var B=Math.min(8,x.length-V),O=parseInt(x.substring(V,V+B),A);8>B?(B=p(Math.pow(A,B)),L=L.j(B).add(p(O))):(L=L.j(P),L=L.add(p(O)))}return L}var m=d(0),y=d(1),w=d(16777216);n=l.prototype,n.m=function(){if(b(this))return-C(this).m();for(var x=0,A=1,P=0;P<this.g.length;P++){var L=this.i(P);x+=(0<=L?L:4294967296+L)*A,A*=4294967296}return x},n.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(S(this))return"0";if(b(this))return"-"+C(this).toString(x);for(var A=p(Math.pow(x,6)),P=this,L="";;){var V=H(P,A).g;P=k(P,V.j(A));var B=((0<P.g.length?P.g[0]:P.h)>>>0).toString(x);if(P=V,S(P))return B+L;for(;6>B.length;)B="0"+B;L=B+L}},n.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function S(x){if(x.h!=0)return!1;for(var A=0;A<x.g.length;A++)if(x.g[A]!=0)return!1;return!0}function b(x){return x.h==-1}n.l=function(x){return x=k(this,x),b(x)?-1:S(x)?0:1};function C(x){for(var A=x.g.length,P=[],L=0;L<A;L++)P[L]=~x.g[L];return new l(P,~x.h).add(y)}n.abs=function(){return b(this)?C(this):this},n.add=function(x){for(var A=Math.max(this.g.length,x.g.length),P=[],L=0,V=0;V<=A;V++){var B=L+(this.i(V)&65535)+(x.i(V)&65535),O=(B>>>16)+(this.i(V)>>>16)+(x.i(V)>>>16);L=O>>>16,B&=65535,O&=65535,P[V]=O<<16|B}return new l(P,P[P.length-1]&-2147483648?-1:0)};function k(x,A){return x.add(C(A))}n.j=function(x){if(S(this)||S(x))return m;if(b(this))return b(x)?C(this).j(C(x)):C(C(this).j(x));if(b(x))return C(this.j(C(x)));if(0>this.l(w)&&0>x.l(w))return p(this.m()*x.m());for(var A=this.g.length+x.g.length,P=[],L=0;L<2*A;L++)P[L]=0;for(L=0;L<this.g.length;L++)for(var V=0;V<x.g.length;V++){var B=this.i(L)>>>16,O=this.i(L)&65535,rt=x.i(V)>>>16,Je=x.i(V)&65535;P[2*L+2*V]+=O*Je,N(P,2*L+2*V),P[2*L+2*V+1]+=B*Je,N(P,2*L+2*V+1),P[2*L+2*V+1]+=O*rt,N(P,2*L+2*V+1),P[2*L+2*V+2]+=B*rt,N(P,2*L+2*V+2)}for(L=0;L<A;L++)P[L]=P[2*L+1]<<16|P[2*L];for(L=A;L<2*A;L++)P[L]=0;return new l(P,0)};function N(x,A){for(;(x[A]&65535)!=x[A];)x[A+1]+=x[A]>>>16,x[A]&=65535,A++}function j(x,A){this.g=x,this.h=A}function H(x,A){if(S(A))throw Error("division by zero");if(S(x))return new j(m,m);if(b(x))return A=H(C(x),A),new j(C(A.g),C(A.h));if(b(A))return A=H(x,C(A)),new j(C(A.g),A.h);if(30<x.g.length){if(b(x)||b(A))throw Error("slowDivide_ only works with positive integers.");for(var P=y,L=A;0>=L.l(x);)P=Y(P),L=Y(L);var V=X(P,1),B=X(L,1);for(L=X(L,2),P=X(P,2);!S(L);){var O=B.add(L);0>=O.l(x)&&(V=V.add(P),B=O),L=X(L,1),P=X(P,1)}return A=k(x,V.j(A)),new j(V,A)}for(V=m;0<=x.l(A);){for(P=Math.max(1,Math.floor(x.m()/A.m())),L=Math.ceil(Math.log(P)/Math.LN2),L=48>=L?1:Math.pow(2,L-48),B=p(P),O=B.j(A);b(O)||0<O.l(x);)P-=L,B=p(P),O=B.j(A);S(B)&&(B=y),V=V.add(B),x=k(x,O)}return new j(V,x)}n.A=function(x){return H(this,x).h},n.and=function(x){for(var A=Math.max(this.g.length,x.g.length),P=[],L=0;L<A;L++)P[L]=this.i(L)&x.i(L);return new l(P,this.h&x.h)},n.or=function(x){for(var A=Math.max(this.g.length,x.g.length),P=[],L=0;L<A;L++)P[L]=this.i(L)|x.i(L);return new l(P,this.h|x.h)},n.xor=function(x){for(var A=Math.max(this.g.length,x.g.length),P=[],L=0;L<A;L++)P[L]=this.i(L)^x.i(L);return new l(P,this.h^x.h)};function Y(x){for(var A=x.g.length+1,P=[],L=0;L<A;L++)P[L]=x.i(L)<<1|x.i(L-1)>>>31;return new l(P,x.h)}function X(x,A){var P=A>>5;A%=32;for(var L=x.g.length-P,V=[],B=0;B<L;B++)V[B]=0<A?x.i(B+P)>>>A|x.i(B+P+1)<<32-A:x.i(B+P);return new l(V,x.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,ob=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=p,l.fromString=_,yo=l}).apply(typeof JT<"u"?JT:typeof self<"u"?self:typeof window<"u"?window:{});var rh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ab,Iu,lb,vh,Yg,ub,cb,db;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,v,T){return h==Array.prototype||h==Object.prototype||(h[v]=T.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof rh=="object"&&rh];for(var v=0;v<h.length;++v){var T=h[v];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=t(this);function i(h,v){if(v)e:{var T=r;h=h.split(".");for(var R=0;R<h.length-1;R++){var $=h[R];if(!($ in T))break e;T=T[$]}h=h[h.length-1],R=T[h],v=v(R),v!=R&&v!=null&&e(T,h,{configurable:!0,writable:!0,value:v})}}function o(h,v){h instanceof String&&(h+="");var T=0,R=!1,$={next:function(){if(!R&&T<h.length){var Q=T++;return{value:v(Q,h[Q]),done:!1}}return R=!0,{done:!0,value:void 0}}};return $[Symbol.iterator]=function(){return $},$}i("Array.prototype.values",function(h){return h||function(){return o(this,function(v,T){return T})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function d(h){var v=typeof h;return v=v!="object"?v:h?Array.isArray(h)?"array":v:"null",v=="array"||v=="object"&&typeof h.length=="number"}function p(h){var v=typeof h;return v=="object"&&h!=null||v=="function"}function _(h,v,T){return h.call.apply(h.bind,arguments)}function m(h,v,T){if(!h)throw Error();if(2<arguments.length){var R=Array.prototype.slice.call(arguments,2);return function(){var $=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply($,R),h.apply(v,$)}}return function(){return h.apply(v,arguments)}}function y(h,v,T){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:m,y.apply(null,arguments)}function w(h,v){var T=Array.prototype.slice.call(arguments,1);return function(){var R=T.slice();return R.push.apply(R,arguments),h.apply(this,R)}}function S(h,v){function T(){}T.prototype=v.prototype,h.aa=v.prototype,h.prototype=new T,h.prototype.constructor=h,h.Qb=function(R,$,Q){for(var le=Array(arguments.length-2),tt=2;tt<arguments.length;tt++)le[tt-2]=arguments[tt];return v.prototype[$].apply(R,le)}}function b(h){const v=h.length;if(0<v){const T=Array(v);for(let R=0;R<v;R++)T[R]=h[R];return T}return[]}function C(h,v){for(let T=1;T<arguments.length;T++){const R=arguments[T];if(d(R)){const $=h.length||0,Q=R.length||0;h.length=$+Q;for(let le=0;le<Q;le++)h[$+le]=R[le]}else h.push(R)}}class k{constructor(v,T){this.i=v,this.j=T,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function N(h){return/^[\s\xa0]*$/.test(h)}function j(){var h=c.navigator;return h&&(h=h.userAgent)?h:""}function H(h){return H[" "](h),h}H[" "]=function(){};var Y=j().indexOf("Gecko")!=-1&&!(j().toLowerCase().indexOf("webkit")!=-1&&j().indexOf("Edge")==-1)&&!(j().indexOf("Trident")!=-1||j().indexOf("MSIE")!=-1)&&j().indexOf("Edge")==-1;function X(h,v,T){for(const R in h)v.call(T,h[R],R,h)}function x(h,v){for(const T in h)v.call(void 0,h[T],T,h)}function A(h){const v={};for(const T in h)v[T]=h[T];return v}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(h,v){let T,R;for(let $=1;$<arguments.length;$++){R=arguments[$];for(T in R)h[T]=R[T];for(let Q=0;Q<P.length;Q++)T=P[Q],Object.prototype.hasOwnProperty.call(R,T)&&(h[T]=R[T])}}function V(h){var v=1;h=h.split(":");const T=[];for(;0<v&&h.length;)T.push(h.shift()),v--;return h.length&&T.push(h.join(":")),T}function B(h){c.setTimeout(()=>{throw h},0)}function O(){var h=ye;let v=null;return h.g&&(v=h.g,h.g=h.g.next,h.g||(h.h=null),v.next=null),v}class rt{constructor(){this.h=this.g=null}add(v,T){const R=Je.get();R.set(v,T),this.h?this.h.next=R:this.g=R,this.h=R}}var Je=new k(()=>new _t,h=>h.reset());class _t{constructor(){this.next=this.g=this.h=null}set(v,T){this.h=v,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let Ue,ie=!1,ye=new rt,ue=()=>{const h=c.Promise.resolve(void 0);Ue=()=>{h.then(z)}};var z=()=>{for(var h;h=O();){try{h.h.call(h.g)}catch(T){B(T)}var v=Je;v.j(h),100>v.h&&(v.h++,h.next=v.g,v.g=h)}ie=!1};function J(){this.s=this.s,this.C=this.C}J.prototype.s=!1,J.prototype.ma=function(){this.s||(this.s=!0,this.N())},J.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function pe(h,v){this.type=h,this.g=this.target=v,this.defaultPrevented=!1}pe.prototype.h=function(){this.defaultPrevented=!0};var ke=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,v=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const T=()=>{};c.addEventListener("test",T,v),c.removeEventListener("test",T,v)}catch{}return h}();function Ne(h,v){if(pe.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var T=this.type=h.type,R=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=v,v=h.relatedTarget){if(Y){e:{try{H(v.nodeName);var $=!0;break e}catch{}$=!1}$||(v=null)}}else T=="mouseover"?v=h.fromElement:T=="mouseout"&&(v=h.toElement);this.relatedTarget=v,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:De[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Ne.aa.h.call(this)}}S(Ne,pe);var De={2:"touch",3:"pen",4:"mouse"};Ne.prototype.h=function(){Ne.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var $e="closure_listenable_"+(1e6*Math.random()|0),Ge=0;function Xe(h,v,T,R,$){this.listener=h,this.proxy=null,this.src=v,this.type=T,this.capture=!!R,this.ha=$,this.key=++Ge,this.da=this.fa=!1}function yt(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Dr(h){this.src=h,this.g={},this.h=0}Dr.prototype.add=function(h,v,T,R,$){var Q=h.toString();h=this.g[Q],h||(h=this.g[Q]=[],this.h++);var le=In(h,v,R,$);return-1<le?(v=h[le],T||(v.fa=!1)):(v=new Xe(v,this.src,Q,!!R,$),v.fa=T,h.push(v)),v};function Pt(h,v){var T=v.type;if(T in h.g){var R=h.g[T],$=Array.prototype.indexOf.call(R,v,void 0),Q;(Q=0<=$)&&Array.prototype.splice.call(R,$,1),Q&&(yt(v),h.g[T].length==0&&(delete h.g[T],h.h--))}}function In(h,v,T,R){for(var $=0;$<h.length;++$){var Q=h[$];if(!Q.da&&Q.listener==v&&Q.capture==!!T&&Q.ha==R)return $}return-1}var Ls="closure_lm_"+(1e6*Math.random()|0),Lo={};function ml(h,v,T,R,$){if(Array.isArray(v)){for(var Q=0;Q<v.length;Q++)ml(h,v[Q],T,R,$);return null}return T=yl(T),h&&h[$e]?h.K(v,T,p(R)?!!R.capture:!1,$):gl(h,v,T,!1,R,$)}function gl(h,v,T,R,$,Q){if(!v)throw Error("Invalid event type");var le=p($)?!!$.capture:!!$,tt=Vo(h);if(tt||(h[Ls]=tt=new Dr(h)),T=tt.add(v,T,R,le,Q),T.proxy)return T;if(R=Vc(),T.proxy=R,R.src=h,R.listener=T,h.addEventListener)ke||($=le),$===void 0&&($=!1),h.addEventListener(v.toString(),R,$);else if(h.attachEvent)h.attachEvent(ii(v.toString()),R);else if(h.addListener&&h.removeListener)h.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return T}function Vc(){function h(T){return v.call(h.src,h.listener,T)}const v=_l;return h}function Mo(h,v,T,R,$){if(Array.isArray(v))for(var Q=0;Q<v.length;Q++)Mo(h,v[Q],T,R,$);else R=p(R)?!!R.capture:!!R,T=yl(T),h&&h[$e]?(h=h.i,v=String(v).toString(),v in h.g&&(Q=h.g[v],T=In(Q,T,R,$),-1<T&&(yt(Q[T]),Array.prototype.splice.call(Q,T,1),Q.length==0&&(delete h.g[v],h.h--)))):h&&(h=Vo(h))&&(v=h.g[v.toString()],h=-1,v&&(h=In(v,T,R,$)),(T=-1<h?v[h]:null)&&ri(T))}function ri(h){if(typeof h!="number"&&h&&!h.da){var v=h.src;if(v&&v[$e])Pt(v.i,h);else{var T=h.type,R=h.proxy;v.removeEventListener?v.removeEventListener(T,R,h.capture):v.detachEvent?v.detachEvent(ii(T),R):v.addListener&&v.removeListener&&v.removeListener(R),(T=Vo(v))?(Pt(T,h),T.h==0&&(T.src=null,v[Ls]=null)):yt(h)}}}function ii(h){return h in Lo?Lo[h]:Lo[h]="on"+h}function _l(h,v){if(h.da)h=!0;else{v=new Ne(v,this);var T=h.listener,R=h.ha||h.src;h.fa&&ri(h),h=T.call(R,v)}return h}function Vo(h){return h=h[Ls],h instanceof Dr?h:null}var Fo="__closure_events_fn_"+(1e9*Math.random()>>>0);function yl(h){return typeof h=="function"?h:(h[Fo]||(h[Fo]=function(v){return h.handleEvent(v)}),h[Fo])}function kt(){J.call(this),this.i=new Dr(this),this.M=this,this.F=null}S(kt,J),kt.prototype[$e]=!0,kt.prototype.removeEventListener=function(h,v,T,R){Mo(this,h,v,T,R)};function Nt(h,v){var T,R=h.F;if(R)for(T=[];R;R=R.F)T.push(R);if(h=h.M,R=v.type||v,typeof v=="string")v=new pe(v,h);else if(v instanceof pe)v.target=v.target||h;else{var $=v;v=new pe(R,h),L(v,$)}if($=!0,T)for(var Q=T.length-1;0<=Q;Q--){var le=v.g=T[Q];$=si(le,R,!0,v)&&$}if(le=v.g=h,$=si(le,R,!0,v)&&$,$=si(le,R,!1,v)&&$,T)for(Q=0;Q<T.length;Q++)le=v.g=T[Q],$=si(le,R,!1,v)&&$}kt.prototype.N=function(){if(kt.aa.N.call(this),this.i){var h=this.i,v;for(v in h.g){for(var T=h.g[v],R=0;R<T.length;R++)yt(T[R]);delete h.g[v],h.h--}}this.F=null},kt.prototype.K=function(h,v,T,R){return this.i.add(String(h),v,!1,T,R)},kt.prototype.L=function(h,v,T,R){return this.i.add(String(h),v,!0,T,R)};function si(h,v,T,R){if(v=h.i.g[String(v)],!v)return!0;v=v.concat();for(var $=!0,Q=0;Q<v.length;++Q){var le=v[Q];if(le&&!le.da&&le.capture==T){var tt=le.listener,Dt=le.ha||le.src;le.fa&&Pt(h.i,le),$=tt.call(Dt,R)!==!1&&$}}return $&&!R.defaultPrevented}function vl(h,v,T){if(typeof h=="function")T&&(h=y(h,T));else if(h&&typeof h.handleEvent=="function")h=y(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:c.setTimeout(h,v||0)}function Vi(h){h.g=vl(()=>{h.g=null,h.i&&(h.i=!1,Vi(h))},h.l);const v=h.h;h.h=null,h.m.apply(null,v)}class Ms extends J{constructor(v,T){super(),this.m=v,this.l=T,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Vi(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Vs(h){J.call(this),this.h=h,this.g={}}S(Vs,J);var El=[];function wl(h){X(h.g,function(v,T){this.g.hasOwnProperty(T)&&ri(v)},h),h.g={}}Vs.prototype.N=function(){Vs.aa.N.call(this),wl(this)},Vs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Tl=c.JSON.stringify,Il=c.JSON.parse,Sl=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function Fs(){}Fs.prototype.h=null;function Uo(h){return h.h||(h.h=h.i())}function Bo(){}var Wn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Or(){pe.call(this,"d")}S(Or,pe);function jo(){pe.call(this,"c")}S(jo,pe);var Lr={},Cl=null;function Us(){return Cl=Cl||new kt}Lr.La="serverreachability";function bl(h){pe.call(this,Lr.La,h)}S(bl,pe);function oi(h){const v=Us();Nt(v,new bl(v))}Lr.STAT_EVENT="statevent";function Rl(h,v){pe.call(this,Lr.STAT_EVENT,h),this.stat=v}S(Rl,pe);function It(h){const v=Us();Nt(v,new Rl(v,h))}Lr.Ma="timingevent";function zo(h,v){pe.call(this,Lr.Ma,h),this.size=v}S(zo,pe);function lr(h,v){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},v)}function Bs(){this.g=!0}Bs.prototype.xa=function(){this.g=!1};function js(h,v,T,R,$,Q){h.info(function(){if(h.g)if(Q)for(var le="",tt=Q.split("&"),Dt=0;Dt<tt.length;Dt++){var We=tt[Dt].split("=");if(1<We.length){var jt=We[0];We=We[1];var bt=jt.split("_");le=2<=bt.length&&bt[1]=="type"?le+(jt+"="+We+"&"):le+(jt+"=redacted&")}}else le=null;else le=Q;return"XMLHTTP REQ ("+R+") [attempt "+$+"]: "+v+`
`+T+`
`+le})}function $o(h,v,T,R,$,Q,le){h.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+$+"]: "+v+`
`+T+`
`+Q+" "+le})}function ur(h,v,T,R){h.info(function(){return"XMLHTTP TEXT ("+v+"): "+ap(h,T)+(R?" "+R:"")})}function Al(h,v){h.info(function(){return"TIMEOUT: "+v})}Bs.prototype.info=function(){};function ap(h,v){if(!h.g)return v;if(!v)return null;try{var T=JSON.parse(v);if(T){for(h=0;h<T.length;h++)if(Array.isArray(T[h])){var R=T[h];if(!(2>R.length)){var $=R[1];if(Array.isArray($)&&!(1>$.length)){var Q=$[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(var le=1;le<$.length;le++)$[le]=""}}}}return Tl(T)}catch{return v}}var Wo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Fc={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},cr;function zs(){}S(zs,Fs),zs.prototype.g=function(){return new XMLHttpRequest},zs.prototype.i=function(){return{}},cr=new zs;function dr(h,v,T,R){this.j=h,this.i=v,this.l=T,this.R=R||1,this.U=new Vs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Uc}function Uc(){this.i=null,this.g="",this.h=!1}var xl={},Ho={};function Go(h,v,T){h.L=1,h.v=zi(On(v)),h.m=T,h.P=!0,Pl(h,null)}function Pl(h,v){h.F=Date.now(),st(h),h.A=On(h.v);var T=h.A,R=h.R;Array.isArray(R)||(R=[String(R)]),Wi(T.i,"t",R),h.C=0,T=h.j.J,h.h=new Uc,h.g=rd(h.j,T?v:null,!h.m),0<h.O&&(h.M=new Ms(y(h.Y,h,h.g),h.O)),v=h.U,T=h.g,R=h.ca;var $="readystatechange";Array.isArray($)||($&&(El[0]=$.toString()),$=El);for(var Q=0;Q<$.length;Q++){var le=ml(T,$[Q],R||v.handleEvent,!1,v.h||v);if(!le)break;v.g[le.key]=le}v=h.H?A(h.H):{},h.m?(h.u||(h.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,v)):(h.u="GET",h.g.ea(h.A,h.u,null,v)),oi(),js(h.i,h.u,h.A,h.l,h.R,h.m)}dr.prototype.ca=function(h){h=h.target;const v=this.M;v&&Cn(h)==3?v.j():this.Y(h)},dr.prototype.Y=function(h){try{if(h==this.g)e:{const bt=Cn(this.g);var v=this.g.Ba();const qn=this.g.Z();if(!(3>bt)&&(bt!=3||this.g&&(this.h.h||this.g.oa()||Ml(this.g)))){this.J||bt!=4||v==7||(v==8||0>=qn?oi(3):oi(2)),$s(this);var T=this.g.Z();this.X=T;t:if(Bc(this)){var R=Ml(this.g);h="";var $=R.length,Q=Cn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Hn(this),Fi(this);var le="";break t}this.h.i=new c.TextDecoder}for(v=0;v<$;v++)this.h.h=!0,h+=this.h.i.decode(R[v],{stream:!(Q&&v==$-1)});R.length=0,this.h.g+=h,this.C=0,le=this.h.g}else le=this.g.oa();if(this.o=T==200,$o(this.i,this.u,this.A,this.l,this.R,bt,T),this.o){if(this.T&&!this.K){t:{if(this.g){var tt,Dt=this.g;if((tt=Dt.g?Dt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(tt)){var We=tt;break t}}We=null}if(T=We)ur(this.i,this.l,T,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,kl(this,T);else{this.o=!1,this.s=3,It(12),Hn(this),Fi(this);break e}}if(this.P){T=!0;let Mn;for(;!this.J&&this.C<le.length;)if(Mn=lp(this,le),Mn==Ho){bt==4&&(this.s=4,It(14),T=!1),ur(this.i,this.l,null,"[Incomplete Response]");break}else if(Mn==xl){this.s=4,It(15),ur(this.i,this.l,le,"[Invalid Chunk]"),T=!1;break}else ur(this.i,this.l,Mn,null),kl(this,Mn);if(Bc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),bt!=4||le.length!=0||this.h.h||(this.s=1,It(16),T=!1),this.o=this.o&&T,!T)ur(this.i,this.l,le,"[Invalid Chunked Response]"),Hn(this),Fi(this);else if(0<le.length&&!this.W){this.W=!0;var jt=this.j;jt.g==this&&jt.ba&&!jt.M&&(jt.j.info("Great, no buffering proxy detected. Bytes received: "+le.length),Fl(jt),jt.M=!0,It(11))}}else ur(this.i,this.l,le,null),kl(this,le);bt==4&&Hn(this),this.o&&!this.J&&(bt==4?ra(this.j,this):(this.o=!1,st(this)))}else Jo(this.g),T==400&&0<le.indexOf("Unknown SID")?(this.s=3,It(12)):(this.s=0,It(13)),Hn(this),Fi(this)}}}catch{}finally{}};function Bc(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function lp(h,v){var T=h.C,R=v.indexOf(`
`,T);return R==-1?Ho:(T=Number(v.substring(T,R)),isNaN(T)?xl:(R+=1,R+T>v.length?Ho:(v=v.slice(R,R+T),h.C=R+T,v)))}dr.prototype.cancel=function(){this.J=!0,Hn(this)};function st(h){h.S=Date.now()+h.I,jc(h,h.I)}function jc(h,v){if(h.B!=null)throw Error("WatchDog timer not null");h.B=lr(y(h.ba,h),v)}function $s(h){h.B&&(c.clearTimeout(h.B),h.B=null)}dr.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Al(this.i,this.A),this.L!=2&&(oi(),It(17)),Hn(this),this.s=2,Fi(this)):jc(this,this.S-h)};function Fi(h){h.j.G==0||h.J||ra(h.j,h)}function Hn(h){$s(h);var v=h.M;v&&typeof v.ma=="function"&&v.ma(),h.M=null,wl(h.U),h.g&&(v=h.g,h.g=null,v.abort(),v.ma())}function kl(h,v){try{var T=h.j;if(T.G!=0&&(T.g==h||pn(T.h,h))){if(!h.K&&pn(T.h,h)&&T.G==3){try{var R=T.Da.g.parse(v)}catch{R=null}if(Array.isArray(R)&&R.length==3){var $=R;if($[0]==0){e:if(!T.u){if(T.g)if(T.g.F+3e3<h.F)na(T),gr(T);else break e;ta(T),It(18)}}else T.za=$[1],0<T.za-T.T&&37500>$[2]&&T.F&&T.v==0&&!T.C&&(T.C=lr(y(T.Za,T),6e3));if(1>=$c(T.h)&&T.ca){try{T.ca()}catch{}T.ca=void 0}}else di(T,11)}else if((h.K||T.g==h)&&na(T),!N(v))for($=T.Da.g.parse(v),v=0;v<$.length;v++){let We=$[v];if(T.T=We[0],We=We[1],T.G==2)if(We[0]=="c"){T.K=We[1],T.ia=We[2];const jt=We[3];jt!=null&&(T.la=jt,T.j.info("VER="+T.la));const bt=We[4];bt!=null&&(T.Aa=bt,T.j.info("SVER="+T.Aa));const qn=We[5];qn!=null&&typeof qn=="number"&&0<qn&&(R=1.5*qn,T.L=R,T.j.info("backChannelRequestTimeoutMs_="+R)),R=T;const Mn=h.g;if(Mn){const Ys=Mn.g?Mn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ys){var Q=R.h;Q.g||Ys.indexOf("spdy")==-1&&Ys.indexOf("quic")==-1&&Ys.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(Nl(Q,Q.h),Q.h=null))}if(R.D){const sa=Mn.g?Mn.g.getResponseHeader("X-HTTP-Session-Id"):null;sa&&(R.ya=sa,it(R.I,R.D,sa))}}T.G=3,T.l&&T.l.ua(),T.ba&&(T.R=Date.now()-h.F,T.j.info("Handshake RTT: "+T.R+"ms")),R=T;var le=h;if(R.qa=nd(R,R.J?R.ia:null,R.W),le.K){Wc(R.h,le);var tt=le,Dt=R.L;Dt&&(tt.I=Dt),tt.B&&($s(tt),st(tt)),R.g=le}else Qs(R);0<T.i.length&&Ur(T)}else We[0]!="stop"&&We[0]!="close"||di(T,7);else T.G==3&&(We[0]=="stop"||We[0]=="close"?We[0]=="stop"?di(T,7):Yt(T):We[0]!="noop"&&T.l&&T.l.ta(We),T.v=0)}}oi(4)}catch{}}var zc=class{constructor(h,v){this.g=h,this.map=v}};function Ws(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Dn(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function $c(h){return h.h?1:h.g?h.g.size:0}function pn(h,v){return h.h?h.h==v:h.g?h.g.has(v):!1}function Nl(h,v){h.g?h.g.add(v):h.h=v}function Wc(h,v){h.h&&h.h==v?h.h=null:h.g&&h.g.has(v)&&h.g.delete(v)}Ws.prototype.cancel=function(){if(this.i=Hc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Hc(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let v=h.i;for(const T of h.g.values())v=v.concat(T.D);return v}return b(h.i)}function qo(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(d(h)){for(var v=[],T=h.length,R=0;R<T;R++)v.push(h[R]);return v}v=[],T=0;for(R in h)v[T++]=h[R];return v}function Ko(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(d(h)||typeof h=="string"){var v=[];h=h.length;for(var T=0;T<h;T++)v.push(T);return v}v=[],T=0;for(const R in h)v[T++]=R;return v}}}function Ui(h,v){if(h.forEach&&typeof h.forEach=="function")h.forEach(v,void 0);else if(d(h)||typeof h=="string")Array.prototype.forEach.call(h,v,void 0);else for(var T=Ko(h),R=qo(h),$=R.length,Q=0;Q<$;Q++)v.call(void 0,R[Q],T&&T[Q],h)}var Hs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function up(h,v){if(h){h=h.split("&");for(var T=0;T<h.length;T++){var R=h[T].indexOf("="),$=null;if(0<=R){var Q=h[T].substring(0,R);$=h[T].substring(R+1)}else Q=h[T];v(Q,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function ai(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof ai){this.h=h.h,Gs(this,h.j),this.o=h.o,this.g=h.g,Bi(this,h.s),this.l=h.l;var v=h.i,T=new Mr;T.i=v.i,v.g&&(T.g=new Map(v.g),T.h=v.h),ji(this,T),this.m=h.m}else h&&(v=String(h).match(Hs))?(this.h=!1,Gs(this,v[1]||"",!0),this.o=je(v[2]||""),this.g=je(v[3]||"",!0),Bi(this,v[4]),this.l=je(v[5]||"",!0),ji(this,v[6]||"",!0),this.m=je(v[7]||"")):(this.h=!1,this.i=new Mr(null,this.h))}ai.prototype.toString=function(){var h=[],v=this.j;v&&h.push($i(v,Qo,!0),":");var T=this.g;return(T||v=="file")&&(h.push("//"),(v=this.o)&&h.push($i(v,Qo,!0),"@"),h.push(encodeURIComponent(String(T)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.s,T!=null&&h.push(":",String(T))),(T=this.l)&&(this.g&&T.charAt(0)!="/"&&h.push("/"),h.push($i(T,T.charAt(0)=="/"?Kc:qc,!0))),(T=this.i.toString())&&h.push("?",T),(T=this.m)&&h.push("#",$i(T,Dl)),h.join("")};function On(h){return new ai(h)}function Gs(h,v,T){h.j=T?je(v,!0):v,h.j&&(h.j=h.j.replace(/:$/,""))}function Bi(h,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);h.s=v}else h.s=null}function ji(h,v,T){v instanceof Mr?(h.i=v,Vr(h.i,h.h)):(T||(v=$i(v,Qc)),h.i=new Mr(v,h.h))}function it(h,v,T){h.i.set(v,T)}function zi(h){return it(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function je(h,v){return h?v?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function $i(h,v,T){return typeof h=="string"?(h=encodeURI(h).replace(v,Gc),T&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Gc(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Qo=/[#\/\?@]/g,qc=/[#\?:]/g,Kc=/[#\?]/g,Qc=/[#\?@]/g,Dl=/#/g;function Mr(h,v){this.h=this.g=null,this.i=h||null,this.j=!!v}function Qt(h){h.g||(h.g=new Map,h.h=0,h.i&&up(h.i,function(v,T){h.add(decodeURIComponent(v.replace(/\+/g," ")),T)}))}n=Mr.prototype,n.add=function(h,v){Qt(this),this.i=null,h=Gn(this,h);var T=this.g.get(h);return T||this.g.set(h,T=[]),T.push(v),this.h+=1,this};function hr(h,v){Qt(h),v=Gn(h,v),h.g.has(v)&&(h.i=null,h.h-=h.g.get(v).length,h.g.delete(v))}function fr(h,v){return Qt(h),v=Gn(h,v),h.g.has(v)}n.forEach=function(h,v){Qt(this),this.g.forEach(function(T,R){T.forEach(function($){h.call(v,$,R,this)},this)},this)},n.na=function(){Qt(this);const h=Array.from(this.g.values()),v=Array.from(this.g.keys()),T=[];for(let R=0;R<v.length;R++){const $=h[R];for(let Q=0;Q<$.length;Q++)T.push(v[R])}return T},n.V=function(h){Qt(this);let v=[];if(typeof h=="string")fr(this,h)&&(v=v.concat(this.g.get(Gn(this,h))));else{h=Array.from(this.g.values());for(let T=0;T<h.length;T++)v=v.concat(h[T])}return v},n.set=function(h,v){return Qt(this),this.i=null,h=Gn(this,h),fr(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[v]),this.h+=1,this},n.get=function(h,v){return h?(h=this.V(h),0<h.length?String(h[0]):v):v};function Wi(h,v,T){hr(h,v),0<T.length&&(h.i=null,h.g.set(Gn(h,v),b(T)),h.h+=T.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],v=Array.from(this.g.keys());for(var T=0;T<v.length;T++){var R=v[T];const Q=encodeURIComponent(String(R)),le=this.V(R);for(R=0;R<le.length;R++){var $=Q;le[R]!==""&&($+="="+encodeURIComponent(String(le[R]))),h.push($)}}return this.i=h.join("&")};function Gn(h,v){return v=String(v),h.j&&(v=v.toLowerCase()),v}function Vr(h,v){v&&!h.j&&(Qt(h),h.i=null,h.g.forEach(function(T,R){var $=R.toLowerCase();R!=$&&(hr(this,R),Wi(this,$,T))},h)),h.j=v}function cp(h,v){const T=new Bs;if(c.Image){const R=new Image;R.onload=w(Sn,T,"TestLoadImage: loaded",!0,v,R),R.onerror=w(Sn,T,"TestLoadImage: error",!1,v,R),R.onabort=w(Sn,T,"TestLoadImage: abort",!1,v,R),R.ontimeout=w(Sn,T,"TestLoadImage: timeout",!1,v,R),c.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=h}else v(!1)}function Yc(h,v){const T=new Bs,R=new AbortController,$=setTimeout(()=>{R.abort(),Sn(T,"TestPingServer: timeout",!1,v)},1e4);fetch(h,{signal:R.signal}).then(Q=>{clearTimeout($),Q.ok?Sn(T,"TestPingServer: ok",!0,v):Sn(T,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout($),Sn(T,"TestPingServer: error",!1,v)})}function Sn(h,v,T,R,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),R(T)}catch{}}function dp(){this.g=new Sl}function Xc(h,v,T){const R=T||"";try{Ui(h,function($,Q){let le=$;p($)&&(le=Tl($)),v.push(R+Q+"="+encodeURIComponent(le))})}catch($){throw v.push(R+"type="+encodeURIComponent("_badmap")),$}}function li(h){this.l=h.Ub||null,this.j=h.eb||!1}S(li,Fs),li.prototype.g=function(){return new qs(this.l,this.j)},li.prototype.i=function(h){return function(){return h}}({});function qs(h,v){kt.call(this),this.D=h,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(qs,kt),n=qs.prototype,n.open=function(h,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=v,this.readyState=1,mr(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(v.body=h),(this.D||c).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,pr(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,mr(this)),this.g&&(this.readyState=3,mr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Jc(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Jc(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var v=h.value?h.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!h.done}))&&(this.response=this.responseText+=v)}h.done?pr(this):mr(this),this.readyState==3&&Jc(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,pr(this))},n.Qa=function(h){this.g&&(this.response=h,pr(this))},n.ga=function(){this.g&&pr(this)};function pr(h){h.readyState=4,h.l=null,h.j=null,h.v=null,mr(h)}n.setRequestHeader=function(h,v){this.u.append(h,v)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],v=this.h.entries();for(var T=v.next();!T.done;)T=T.value,h.push(T[0]+": "+T[1]),T=v.next();return h.join(`\r
`)};function mr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(qs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function ui(h){let v="";return X(h,function(T,R){v+=R,v+=":",v+=T,v+=`\r
`}),v}function Hi(h,v,T){e:{for(R in T){var R=!1;break e}R=!0}R||(T=ui(T),typeof h=="string"?T!=null&&encodeURIComponent(String(T)):it(h,v,T))}function dt(h){kt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(dt,kt);var hp=/^https?$/i,Ol=["POST","PUT"];n=dt.prototype,n.Ha=function(h){this.J=h},n.ea=function(h,v,T,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);v=v?v.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():cr.g(),this.v=this.o?Uo(this.o):Uo(cr),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(v,String(h),!0),this.B=!1}catch(Q){Ks(this,Q);return}if(h=T||"",T=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var $ in R)T.set($,R[$]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const Q of R.keys())T.set(Q,R.get(Q));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(T.keys()).find(Q=>Q.toLowerCase()=="content-type"),$=c.FormData&&h instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Ol,v,void 0))||R||$||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,le]of T)this.g.setRequestHeader(Q,le);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Xo(this),this.u=!0,this.g.send(h),this.u=!1}catch(Q){Ks(this,Q)}};function Ks(h,v){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=v,h.m=5,Yo(h),Ln(h)}function Yo(h){h.A||(h.A=!0,Nt(h,"complete"),Nt(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Nt(this,"complete"),Nt(this,"abort"),Ln(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ln(this,!0)),dt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Ll(this):this.bb())},n.bb=function(){Ll(this)};function Ll(h){if(h.h&&typeof l<"u"&&(!h.v[1]||Cn(h)!=4||h.Z()!=2)){if(h.u&&Cn(h)==4)vl(h.Ea,0,h);else if(Nt(h,"readystatechange"),Cn(h)==4){h.h=!1;try{const le=h.Z();e:switch(le){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var T;if(!(T=v)){var R;if(R=le===0){var $=String(h.D).match(Hs)[1]||null;!$&&c.self&&c.self.location&&($=c.self.location.protocol.slice(0,-1)),R=!hp.test($?$.toLowerCase():"")}T=R}if(T)Nt(h,"complete"),Nt(h,"success");else{h.m=6;try{var Q=2<Cn(h)?h.g.statusText:""}catch{Q=""}h.l=Q+" ["+h.Z()+"]",Yo(h)}}finally{Ln(h)}}}}function Ln(h,v){if(h.g){Xo(h);const T=h.g,R=h.v[0]?()=>{}:null;h.g=null,h.v=null,v||Nt(h,"ready");try{T.onreadystatechange=R}catch{}}}function Xo(h){h.I&&(c.clearTimeout(h.I),h.I=null)}n.isActive=function(){return!!this.g};function Cn(h){return h.g?h.g.readyState:0}n.Z=function(){try{return 2<Cn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var v=this.g.responseText;return h&&v.indexOf(h)==0&&(v=v.substring(h.length)),Il(v)}};function Ml(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Jo(h){const v={};h=(h.g&&2<=Cn(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<h.length;R++){if(N(h[R]))continue;var T=V(h[R]);const $=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const Q=v[$]||[];v[$]=Q,Q.push(T)}x(v,function(R){return R.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Fr(h,v,T){return T&&T.internalChannelParams&&T.internalChannelParams[h]||v}function Vl(h){this.Aa=0,this.i=[],this.j=new Bs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Fr("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Fr("baseRetryDelayMs",5e3,h),this.cb=Fr("retryDelaySeedMs",1e4,h),this.Wa=Fr("forwardChannelMaxRetries",2,h),this.wa=Fr("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Ws(h&&h.concurrentRequestLimit),this.Da=new dp,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Vl.prototype,n.la=8,n.G=1,n.connect=function(h,v,T,R){It(0),this.W=h,this.H=v||{},T&&R!==void 0&&(this.H.OSID=T,this.H.OAID=R),this.F=this.X,this.I=nd(this,null,this.W),Ur(this)};function Yt(h){if(Zo(h),h.G==3){var v=h.U++,T=On(h.I);if(it(T,"SID",h.K),it(T,"RID",v),it(T,"TYPE","terminate"),ci(h,T),v=new dr(h,h.j,v),v.L=2,v.v=zi(On(T)),T=!1,c.navigator&&c.navigator.sendBeacon)try{T=c.navigator.sendBeacon(v.v.toString(),"")}catch{}!T&&c.Image&&(new Image().src=v.v,T=!0),T||(v.g=rd(v.j,null),v.g.ea(v.v)),v.F=Date.now(),st(v)}td(h)}function gr(h){h.g&&(Fl(h),h.g.cancel(),h.g=null)}function Zo(h){gr(h),h.u&&(c.clearTimeout(h.u),h.u=null),na(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&c.clearTimeout(h.s),h.s=null)}function Ur(h){if(!Dn(h.h)&&!h.s){h.s=!0;var v=h.Ga;Ue||ue(),ie||(Ue(),ie=!0),ye.add(v,h),h.B=0}}function fp(h,v){return $c(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=v.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=lr(y(h.Ga,h,v),ed(h,h.B)),h.B++,!0)}n.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const $=new dr(this,this.j,h);let Q=this.o;if(this.S&&(Q?(Q=A(Q),L(Q,this.S)):Q=this.S),this.m!==null||this.O||($.H=Q,Q=null),this.P)e:{for(var v=0,T=0;T<this.i.length;T++){t:{var R=this.i[T];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(v+=R,4096<v){v=T;break e}if(v===4096||T===this.i.length-1){v=T+1;break e}}v=1e3}else v=1e3;v=Gi(this,$,v),T=On(this.I),it(T,"RID",h),it(T,"CVER",22),this.D&&it(T,"X-HTTP-Session-Id",this.D),ci(this,T),Q&&(this.O?v="headers="+encodeURIComponent(String(ui(Q)))+"&"+v:this.m&&Hi(T,this.m,Q)),Nl(this.h,$),this.Ua&&it(T,"TYPE","init"),this.P?(it(T,"$req",v),it(T,"SID","null"),$.T=!0,Go($,T,null)):Go($,T,v),this.G=2}}else this.G==3&&(h?ea(this,h):this.i.length==0||Dn(this.h)||ea(this))};function ea(h,v){var T;v?T=v.l:T=h.U++;const R=On(h.I);it(R,"SID",h.K),it(R,"RID",T),it(R,"AID",h.T),ci(h,R),h.m&&h.o&&Hi(R,h.m,h.o),T=new dr(h,h.j,T,h.B+1),h.m===null&&(T.H=h.o),v&&(h.i=v.D.concat(h.i)),v=Gi(h,T,1e3),T.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Nl(h.h,T),Go(T,R,v)}function ci(h,v){h.H&&X(h.H,function(T,R){it(v,R,T)}),h.l&&Ui({},function(T,R){it(v,R,T)})}function Gi(h,v,T){T=Math.min(h.i.length,T);var R=h.l?y(h.l.Na,h.l,h):null;e:{var $=h.i;let Q=-1;for(;;){const le=["count="+T];Q==-1?0<T?(Q=$[0].g,le.push("ofs="+Q)):Q=0:le.push("ofs="+Q);let tt=!0;for(let Dt=0;Dt<T;Dt++){let We=$[Dt].g;const jt=$[Dt].map;if(We-=Q,0>We)Q=Math.max(0,$[Dt].g-100),tt=!1;else try{Xc(jt,le,"req"+We+"_")}catch{R&&R(jt)}}if(tt){R=le.join("&");break e}}}return h=h.i.splice(0,T),v.D=h,R}function Qs(h){if(!h.g&&!h.u){h.Y=1;var v=h.Fa;Ue||ue(),ie||(Ue(),ie=!0),ye.add(v,h),h.v=0}}function ta(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=lr(y(h.Fa,h),ed(h,h.v)),h.v++,!0)}n.Fa=function(){if(this.u=null,Zc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=lr(y(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,It(10),gr(this),Zc(this))};function Fl(h){h.A!=null&&(c.clearTimeout(h.A),h.A=null)}function Zc(h){h.g=new dr(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var v=On(h.qa);it(v,"RID","rpc"),it(v,"SID",h.K),it(v,"AID",h.T),it(v,"CI",h.F?"0":"1"),!h.F&&h.ja&&it(v,"TO",h.ja),it(v,"TYPE","xmlhttp"),ci(h,v),h.m&&h.o&&Hi(v,h.m,h.o),h.L&&(h.g.I=h.L);var T=h.g;h=h.ia,T.L=1,T.v=zi(On(v)),T.m=null,T.P=!0,Pl(T,h)}n.Za=function(){this.C!=null&&(this.C=null,gr(this),ta(this),It(19))};function na(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function ra(h,v){var T=null;if(h.g==v){na(h),Fl(h),h.g=null;var R=2}else if(pn(h.h,v))T=v.D,Wc(h.h,v),R=1;else return;if(h.G!=0){if(v.o)if(R==1){T=v.m?v.m.length:0,v=Date.now()-v.F;var $=h.B;R=Us(),Nt(R,new zo(R,T)),Ur(h)}else Qs(h);else if($=v.s,$==3||$==0&&0<v.X||!(R==1&&fp(h,v)||R==2&&ta(h)))switch(T&&0<T.length&&(v=h.h,v.i=v.i.concat(T)),$){case 1:di(h,5);break;case 4:di(h,10);break;case 3:di(h,6);break;default:di(h,2)}}}function ed(h,v){let T=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(T*=2),T*v}function di(h,v){if(h.j.info("Error code "+v),v==2){var T=y(h.fb,h),R=h.Xa;const $=!R;R=new ai(R||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Gs(R,"https"),zi(R),$?cp(R.toString(),T):Yc(R.toString(),T)}else It(2);h.G=0,h.l&&h.l.sa(v),td(h),Zo(h)}n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),It(2)):(this.j.info("Failed to ping google.com"),It(1))};function td(h){if(h.G=0,h.ka=[],h.l){const v=Hc(h.h);(v.length!=0||h.i.length!=0)&&(C(h.ka,v),C(h.ka,h.i),h.h.i.length=0,b(h.i),h.i.length=0),h.l.ra()}}function nd(h,v,T){var R=T instanceof ai?On(T):new ai(T);if(R.g!="")v&&(R.g=v+"."+R.g),Bi(R,R.s);else{var $=c.location;R=$.protocol,v=v?v+"."+$.hostname:$.hostname,$=+$.port;var Q=new ai(null);R&&Gs(Q,R),v&&(Q.g=v),$&&Bi(Q,$),T&&(Q.l=T),R=Q}return T=h.D,v=h.ya,T&&v&&it(R,T,v),it(R,"VER",h.la),ci(h,R),R}function rd(h,v,T){if(v&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=h.Ca&&!h.pa?new dt(new li({eb:T})):new dt(h.pa),v.Ha(h.J),v}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ul(){}n=Ul.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ia(){}ia.prototype.g=function(h,v){return new mn(h,v)};function mn(h,v){kt.call(this),this.g=new Vl(v),this.l=h,this.h=v&&v.messageUrlParams||null,h=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(h?h["X-WebChannel-Content-Type"]=v.messageContentType:h={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(h?h["X-WebChannel-Client-Profile"]=v.va:h={"X-WebChannel-Client-Profile":v.va}),this.g.S=h,(h=v&&v.Sb)&&!N(h)&&(this.g.m=h),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!N(v)&&(this.g.D=v,h=this.h,h!==null&&v in h&&(h=this.h,v in h&&delete h[v])),this.j=new Br(this)}S(mn,kt),mn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},mn.prototype.close=function(){Yt(this.g)},mn.prototype.o=function(h){var v=this.g;if(typeof h=="string"){var T={};T.__data__=h,h=T}else this.u&&(T={},T.__data__=Tl(h),h=T);v.i.push(new zc(v.Ya++,h)),v.G==3&&Ur(v)},mn.prototype.N=function(){this.g.l=null,delete this.j,Yt(this.g),delete this.g,mn.aa.N.call(this)};function id(h){Or.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var v=h.__sm__;if(v){e:{for(const T in v){h=T;break e}h=void 0}(this.i=h)&&(h=this.i,v=v!==null&&h in v?v[h]:void 0),this.data=v}else this.data=h}S(id,Or);function sd(){jo.call(this),this.status=1}S(sd,jo);function Br(h){this.g=h}S(Br,Ul),Br.prototype.ua=function(){Nt(this.g,"a")},Br.prototype.ta=function(h){Nt(this.g,new id(h))},Br.prototype.sa=function(h){Nt(this.g,new sd)},Br.prototype.ra=function(){Nt(this.g,"b")},ia.prototype.createWebChannel=ia.prototype.g,mn.prototype.send=mn.prototype.o,mn.prototype.open=mn.prototype.m,mn.prototype.close=mn.prototype.close,db=function(){return new ia},cb=function(){return Us()},ub=Lr,Yg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Wo.NO_ERROR=0,Wo.TIMEOUT=8,Wo.HTTP_ERROR=6,vh=Wo,Fc.COMPLETE="complete",lb=Fc,Bo.EventType=Wn,Wn.OPEN="a",Wn.CLOSE="b",Wn.ERROR="c",Wn.MESSAGE="d",kt.prototype.listen=kt.prototype.K,Iu=Bo,dt.prototype.listenOnce=dt.prototype.L,dt.prototype.getLastError=dt.prototype.Ka,dt.prototype.getLastErrorCode=dt.prototype.Ba,dt.prototype.getStatus=dt.prototype.Z,dt.prototype.getResponseJson=dt.prototype.Oa,dt.prototype.getResponseText=dt.prototype.oa,dt.prototype.send=dt.prototype.ea,dt.prototype.setWithCredentials=dt.prototype.Ha,ab=dt}).apply(typeof rh<"u"?rh:typeof self<"u"?self:typeof window<"u"?window:{});const ZT="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}dn.UNAUTHENTICATED=new dn(null),dn.GOOGLE_CREDENTIALS=new dn("google-credentials-uid"),dn.FIRST_PARTY=new dn("first-party-uid"),dn.MOCK_USER=new dn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ll="11.0.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bo=new wf("@firebase/firestore");function ba(){return bo.logLevel}function de(n,...e){if(bo.logLevel<=Ve.DEBUG){const t=e.map(Iy);bo.debug(`Firestore (${ll}): ${n}`,...t)}}function Di(n,...e){if(bo.logLevel<=Ve.ERROR){const t=e.map(Iy);bo.error(`Firestore (${ll}): ${n}`,...t)}}function $a(n,...e){if(bo.logLevel<=Ve.WARN){const t=e.map(Iy);bo.warn(`Firestore (${ll}): ${n}`,...t)}}function Iy(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(n="Unexpected state"){const e=`FIRESTORE (${ll}) INTERNAL ASSERTION FAILED: `+n;throw Di(e),new Error(e)}function et(n,e){n||Ae()}function Pe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class we extends Li{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class sV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(dn.UNAUTHENTICATED))}shutdown(){}}class oV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class aV{constructor(e){this.t=e,this.currentUser=dn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){et(this.o===void 0);let r=this.i;const i=d=>this.i!==r?(r=this.i,t(d)):Promise.resolve();let o=new _s;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new _s,e.enqueueRetryable(()=>i(this.currentUser))};const l=()=>{const d=o;e.enqueueRetryable(async()=>{await d.promise,await i(this.currentUser)})},c=d=>{de("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(d=>c(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?c(d):(de("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new _s)}},0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(de("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(et(typeof r.accessToken=="string"),new hb(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return et(e===null||typeof e=="string"),new dn(e)}}class lV{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=dn.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class uV{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new lV(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(dn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class cV{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class dV{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){et(this.o===void 0);const r=o=>{o.error!=null&&de("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.R;return this.R=o.token,de("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{de("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):de("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(et(typeof t.token=="string"),this.R=t.token,new cV(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hV(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=hV(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}}function ze(n,e){return n<e?-1:n>e?1:0}function Wa(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{static now(){return Ut.fromMillis(Date.now())}static fromDate(e){return Ut.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Ut(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new we(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new we(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new we(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new we(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ze(this.nanoseconds,e.nanoseconds):ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{static fromTimestamp(e){return new xe(e)}static min(){return new xe(new Ut(0,0))}static max(){return new xe(new Ut(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ae(),r===void 0?r=e.length-t:r>e.length-t&&Ae(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return ec.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ec?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const o=e.get(i),l=t.get(i);if(o<l)return-1;if(o>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Et extends ec{construct(e,t,r){return new Et(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new we(re.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Et(t)}static emptyPath(){return new Et([])}}const fV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class tn extends ec{construct(e,t,r){return new tn(e,t,r)}static isValidIdentifier(e){return fV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),tn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new tn(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const o=()=>{if(r.length===0)throw new we(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new we(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[i+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new we(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,i+=2}else c==="`"?(l=!l,i++):c!=="."||l?(r+=c,i++):(o(),i++)}if(o(),l)throw new we(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new tn(t)}static emptyPath(){return new tn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.path=e}static fromPath(e){return new Te(Et.fromString(e))}static fromName(e){return new Te(Et.fromString(e).popFirst(5))}static empty(){return new Te(Et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Et.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Te(new Et(e.slice()))}}function pV(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=xe.fromTimestamp(r===1e9?new Ut(t+1,0):new Ut(t,r));return new Cs(i,Te.empty(),e)}function mV(n){return new Cs(n.readTime,n.key,-1)}class Cs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Cs(xe.min(),Te.empty(),-1)}static max(){return new Cs(xe.max(),Te.empty(),-1)}}function gV(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Te.comparator(n.documentKey,e.documentKey),t!==0?t:ze(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _V="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class yV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ul(n){if(n.code!==re.FAILED_PRECONDITION||n.message!==_V)throw n;de("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ae(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Z((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Z?t:Z.resolve(t)}catch(t){return Z.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Z.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Z.reject(t)}static resolve(e){return new Z((t,r)=>{t(e)})}static reject(e){return new Z((t,r)=>{r(e)})}static waitFor(e){return new Z((t,r)=>{let i=0,o=0,l=!1;e.forEach(c=>{++i,c.next(()=>{++o,l&&o===i&&t()},d=>r(d))}),l=!0,o===i&&t()})}static or(e){let t=Z.resolve(!1);for(const r of e)t=t.next(i=>i?Z.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new Z((r,i)=>{const o=e.length,l=new Array(o);let c=0;for(let d=0;d<o;d++){const p=d;t(e[p]).next(_=>{l[p]=_,++c,c===o&&r(l)},_=>i(_))}})}static doWhile(e,t){return new Z((r,i)=>{const o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}}function vV(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function cl(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ie(r),this.se=r=>t.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}zf.oe=-1;function $f(n){return n==null}function Qh(n){return n===0&&1/n==-1/0}function EV(n){return typeof n=="number"&&Number.isInteger(n)&&!Qh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wV(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=eI(e)),e=TV(n.get(t),e);return eI(e)}function TV(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const o=n.charAt(i);switch(o){case"\0":t+="";break;case"":t+="";break;default:t+=o}}return t}function eI(n){return n+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tI(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ko(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function pb(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e,t){this.comparator=e,this.root=t||Zt.EMPTY}insert(e,t){return new gt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Zt.BLACK,null,null))}remove(e){return new gt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ih(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ih(this.root,e,this.comparator,!1)}getReverseIterator(){return new ih(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ih(this.root,e,this.comparator,!0)}}class ih{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Zt{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??Zt.RED,this.left=i??Zt.EMPTY,this.right=o??Zt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new Zt(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Zt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Zt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Zt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Zt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ae();const e=this.left.check();if(e!==this.right.check())throw Ae();return e+(this.isRed()?0:1)}}Zt.EMPTY=null,Zt.RED=!0,Zt.BLACK=!1;Zt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae()}get value(){throw Ae()}get color(){throw Ae()}get left(){throw Ae()}get right(){throw Ae()}copy(e,t,r,i,o){return this}insert(e,t,r){return new Zt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.comparator=e,this.data=new gt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new nI(this.data.getIterator())}getIteratorFrom(e){return new nI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Bt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Bt(this.comparator);return t.data=e,t}}class nI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e){this.fields=e,e.sort(tn.comparator)}static empty(){return new br([])}unionWith(e){let t=new Bt(tn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new br(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Wa(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new mb("Invalid base64 string: "+o):o}}(e);return new sn(t)}static fromUint8Array(e){const t=function(i){let o="";for(let l=0;l<i.length;++l)o+=String.fromCharCode(i[l]);return o}(e);return new sn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}sn.EMPTY_BYTE_STRING=new sn("");const IV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bs(n){if(et(!!n),typeof n=="string"){let e=0;const t=IV.exec(n);if(et(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ct(n.seconds),nanos:Ct(n.nanos)}}function Ct(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Rs(n){return typeof n=="string"?sn.fromBase64String(n):sn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sy(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Wf(n){const e=n.mapValue.fields.__previous_value__;return Sy(e)?Wf(e):e}function tc(n){const e=bs(n.mapValue.fields.__local_write_time__.timestampValue);return new Ut(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SV{constructor(e,t,r,i,o,l,c,d,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=c,this.longPollingOptions=d,this.useFetchStreams=p}}class nc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new nc("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof nc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function As(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Sy(n)?4:bV(n)?9007199254740991:CV(n)?10:11:Ae()}function Zr(n,e){if(n===e)return!0;const t=As(n);if(t!==As(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return tc(n).isEqual(tc(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const l=bs(i.timestampValue),c=bs(o.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return Rs(i.bytesValue).isEqual(Rs(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return Ct(i.geoPointValue.latitude)===Ct(o.geoPointValue.latitude)&&Ct(i.geoPointValue.longitude)===Ct(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Ct(i.integerValue)===Ct(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const l=Ct(i.doubleValue),c=Ct(o.doubleValue);return l===c?Qh(l)===Qh(c):isNaN(l)&&isNaN(c)}return!1}(n,e);case 9:return Wa(n.arrayValue.values||[],e.arrayValue.values||[],Zr);case 10:case 11:return function(i,o){const l=i.mapValue.fields||{},c=o.mapValue.fields||{};if(tI(l)!==tI(c))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(c[d]===void 0||!Zr(l[d],c[d])))return!1;return!0}(n,e);default:return Ae()}}function rc(n,e){return(n.values||[]).find(t=>Zr(t,e))!==void 0}function Ha(n,e){if(n===e)return 0;const t=As(n),r=As(e);if(t!==r)return ze(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ze(n.booleanValue,e.booleanValue);case 2:return function(o,l){const c=Ct(o.integerValue||o.doubleValue),d=Ct(l.integerValue||l.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1}(n,e);case 3:return rI(n.timestampValue,e.timestampValue);case 4:return rI(tc(n),tc(e));case 5:return ze(n.stringValue,e.stringValue);case 6:return function(o,l){const c=Rs(o),d=Rs(l);return c.compareTo(d)}(n.bytesValue,e.bytesValue);case 7:return function(o,l){const c=o.split("/"),d=l.split("/");for(let p=0;p<c.length&&p<d.length;p++){const _=ze(c[p],d[p]);if(_!==0)return _}return ze(c.length,d.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,l){const c=ze(Ct(o.latitude),Ct(l.latitude));return c!==0?c:ze(Ct(o.longitude),Ct(l.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return iI(n.arrayValue,e.arrayValue);case 10:return function(o,l){var c,d,p,_;const m=o.fields||{},y=l.fields||{},w=(c=m.value)===null||c===void 0?void 0:c.arrayValue,S=(d=y.value)===null||d===void 0?void 0:d.arrayValue,b=ze(((p=w==null?void 0:w.values)===null||p===void 0?void 0:p.length)||0,((_=S==null?void 0:S.values)===null||_===void 0?void 0:_.length)||0);return b!==0?b:iI(w,S)}(n.mapValue,e.mapValue);case 11:return function(o,l){if(o===sh.mapValue&&l===sh.mapValue)return 0;if(o===sh.mapValue)return 1;if(l===sh.mapValue)return-1;const c=o.fields||{},d=Object.keys(c),p=l.fields||{},_=Object.keys(p);d.sort(),_.sort();for(let m=0;m<d.length&&m<_.length;++m){const y=ze(d[m],_[m]);if(y!==0)return y;const w=Ha(c[d[m]],p[_[m]]);if(w!==0)return w}return ze(d.length,_.length)}(n.mapValue,e.mapValue);default:throw Ae()}}function rI(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ze(n,e);const t=bs(n),r=bs(e),i=ze(t.seconds,r.seconds);return i!==0?i:ze(t.nanos,r.nanos)}function iI(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const o=Ha(t[i],r[i]);if(o)return o}return ze(t.length,r.length)}function Ga(n){return Xg(n)}function Xg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=bs(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Rs(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Te.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const o of t.values||[])i?i=!1:r+=",",r+=Xg(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",o=!0;for(const l of r)o?o=!1:i+=",",i+=`${l}:${Xg(t.fields[l])}`;return i+"}"}(n.mapValue):Ae()}function Eh(n){switch(As(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Wf(n);return e?16+Eh(e):16;case 5:return 2*n.stringValue.length;case 6:return Rs(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+Eh(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return ko(r.fields,(o,l)=>{i+=o.length+Eh(l)}),i}(n.mapValue);default:throw Ae()}}function Jg(n){return!!n&&"integerValue"in n}function Cy(n){return!!n&&"arrayValue"in n}function sI(n){return!!n&&"nullValue"in n}function oI(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function wh(n){return!!n&&"mapValue"in n}function CV(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Du(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return ko(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Du(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Du(n.arrayValue.values[t]);return e}return Object.assign({},n)}function bV(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(e){this.value=e}static empty(){return new tr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!wh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Du(t)}setAll(e){let t=tn.emptyPath(),r={},i=[];e.forEach((l,c)=>{if(!t.isImmediateParentOf(c)){const d=this.getFieldsMap(t);this.applyChanges(d,r,i),r={},i=[],t=c.popLast()}l?r[c.lastSegment()]=Du(l):i.push(c.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){const t=this.field(e.popLast());wh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Zr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];wh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ko(t,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new tr(Du(this.value))}}function gb(n){const e=[];return ko(n.fields,(t,r)=>{const i=new tn([t]);if(wh(r)){const o=gb(r.mapValue).fields;if(o.length===0)e.push(i);else for(const l of o)e.push(i.child(l))}else e.push(i)}),new br(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e,t,r,i,o,l,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=l,this.documentState=c}static newInvalidDocument(e){return new hn(e,0,xe.min(),xe.min(),xe.min(),tr.empty(),0)}static newFoundDocument(e,t,r,i){return new hn(e,1,t,xe.min(),r,i,0)}static newNoDocument(e,t){return new hn(e,2,t,xe.min(),xe.min(),tr.empty(),0)}static newUnknownDocument(e,t){return new hn(e,3,t,xe.min(),xe.min(),tr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=tr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=tr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof hn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new hn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e,t){this.position=e,this.inclusive=t}}function aI(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const o=e[i],l=n.position[i];if(o.field.isKeyField()?r=Te.comparator(Te.fromName(l.referenceValue),t.key):r=Ha(l,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function lI(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Zr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(e,t="asc"){this.field=e,this.dir=t}}function RV(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{}class Ft extends _b{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new xV(e,t,r):t==="array-contains"?new NV(e,r):t==="in"?new DV(e,r):t==="not-in"?new OV(e,r):t==="array-contains-any"?new LV(e,r):new Ft(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new PV(e,r):new kV(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Ha(t,this.value)):t!==null&&As(this.value)===As(t)&&this.matchesComparison(Ha(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ei extends _b{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new ei(e,t)}matches(e){return yb(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function yb(n){return n.op==="and"}function vb(n){return AV(n)&&yb(n)}function AV(n){for(const e of n.filters)if(e instanceof ei)return!1;return!0}function Zg(n){if(n instanceof Ft)return n.field.canonicalString()+n.op.toString()+Ga(n.value);if(vb(n))return n.filters.map(e=>Zg(e)).join(",");{const e=n.filters.map(t=>Zg(t)).join(",");return`${n.op}(${e})`}}function Eb(n,e){return n instanceof Ft?function(r,i){return i instanceof Ft&&r.op===i.op&&r.field.isEqual(i.field)&&Zr(r.value,i.value)}(n,e):n instanceof ei?function(r,i){return i instanceof ei&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,l,c)=>o&&Eb(l,i.filters[c]),!0):!1}(n,e):void Ae()}function wb(n){return n instanceof Ft?function(t){return`${t.field.canonicalString()} ${t.op} ${Ga(t.value)}`}(n):n instanceof ei?function(t){return t.op.toString()+" {"+t.getFilters().map(wb).join(" ,")+"}"}(n):"Filter"}class xV extends Ft{constructor(e,t,r){super(e,t,r),this.key=Te.fromName(r.referenceValue)}matches(e){const t=Te.comparator(e.key,this.key);return this.matchesComparison(t)}}class PV extends Ft{constructor(e,t){super(e,"in",t),this.keys=Tb("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class kV extends Ft{constructor(e,t){super(e,"not-in",t),this.keys=Tb("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Tb(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Te.fromName(r.referenceValue))}class NV extends Ft{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Cy(t)&&rc(t.arrayValue,this.value)}}class DV extends Ft{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&rc(this.value.arrayValue,t)}}class OV extends Ft{constructor(e,t){super(e,"not-in",t)}matches(e){if(rc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!rc(this.value.arrayValue,t)}}class LV extends Ft{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Cy(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>rc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MV{constructor(e,t=null,r=[],i=[],o=null,l=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=l,this.endAt=c,this.ue=null}}function uI(n,e=null,t=[],r=[],i=null,o=null,l=null){return new MV(n,e,t,r,i,o,l)}function by(n){const e=Pe(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Zg(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),$f(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ga(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ga(r)).join(",")),e.ue=t}return e.ue}function Ry(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!RV(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Eb(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!lI(n.startAt,e.startAt)&&lI(n.endAt,e.endAt)}function e_(n){return Te.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(e,t=null,r=[],i=[],o=null,l="F",c=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=l,this.startAt=c,this.endAt=d,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function VV(n,e,t,r,i,o,l,c){return new Hf(n,e,t,r,i,o,l,c)}function Ay(n){return new Hf(n)}function cI(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function FV(n){return n.collectionGroup!==null}function Ou(n){const e=Pe(n);if(e.ce===null){e.ce=[];const t=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let c=new Bt(tn.comparator);return l.filters.forEach(d=>{d.getFlattenedFilters().forEach(p=>{p.isInequality()&&(c=c.add(p.field))})}),c})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Xh(o,r))}),t.has(tn.keyField().canonicalString())||e.ce.push(new Xh(tn.keyField(),r))}return e.ce}function Xr(n){const e=Pe(n);return e.le||(e.le=UV(e,Ou(n))),e.le}function UV(n,e){if(n.limitType==="F")return uI(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new Xh(i.field,o)});const t=n.endAt?new Yh(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Yh(n.startAt.position,n.startAt.inclusive):null;return uI(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function t_(n,e,t){return new Hf(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Gf(n,e){return Ry(Xr(n),Xr(e))&&n.limitType===e.limitType}function Ib(n){return`${by(Xr(n))}|lt:${n.limitType}`}function Ra(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>wb(i)).join(", ")}]`),$f(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Ga(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Ga(i)).join(",")),`Target(${r})`}(Xr(n))}; limitType=${n.limitType})`}function qf(n,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Te.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(const o of Ou(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(l,c,d){const p=aI(l,c,d);return l.inclusive?p<=0:p<0}(r.startAt,Ou(r),i)||r.endAt&&!function(l,c,d){const p=aI(l,c,d);return l.inclusive?p>=0:p>0}(r.endAt,Ou(r),i))}(n,e)}function BV(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Sb(n){return(e,t)=>{let r=!1;for(const i of Ou(n)){const o=jV(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function jV(n,e,t){const r=n.field.isKeyField()?Te.comparator(e.key,t.key):function(o,l,c){const d=l.data.field(o),p=c.data.field(o);return d!==null&&p!==null?Ha(d,p):Ae()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ae()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ko(this.inner,(t,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return pb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zV=new gt(Te.comparator);function Oi(){return zV}const Cb=new gt(Te.comparator);function Su(...n){let e=Cb;for(const t of n)e=e.insert(t.key,t);return e}function bb(n){let e=Cb;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function go(){return Lu()}function Rb(){return Lu()}function Lu(){return new No(n=>n.toString(),(n,e)=>n.isEqual(e))}const $V=new gt(Te.comparator),WV=new Bt(Te.comparator);function Be(...n){let e=WV;for(const t of n)e=e.add(t);return e}const HV=new Bt(ze);function GV(){return HV}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xy(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Qh(e)?"-0":e}}function Ab(n){return{integerValue:""+n}}function qV(n,e){return EV(e)?Ab(e):xy(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(){this._=void 0}}function KV(n,e,t){return n instanceof Jh?function(i,o){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Sy(o)&&(o=Wf(o)),o&&(l.fields.__previous_value__=o),{mapValue:l}}(t,e):n instanceof ic?Pb(n,e):n instanceof sc?kb(n,e):function(i,o){const l=xb(i,o),c=dI(l)+dI(i.Pe);return Jg(l)&&Jg(i.Pe)?Ab(c):xy(i.serializer,c)}(n,e)}function QV(n,e,t){return n instanceof ic?Pb(n,e):n instanceof sc?kb(n,e):t}function xb(n,e){return n instanceof Zh?function(r){return Jg(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class Jh extends Kf{}class ic extends Kf{constructor(e){super(),this.elements=e}}function Pb(n,e){const t=Nb(e);for(const r of n.elements)t.some(i=>Zr(i,r))||t.push(r);return{arrayValue:{values:t}}}class sc extends Kf{constructor(e){super(),this.elements=e}}function kb(n,e){let t=Nb(e);for(const r of n.elements)t=t.filter(i=>!Zr(i,r));return{arrayValue:{values:t}}}class Zh extends Kf{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function dI(n){return Ct(n.integerValue||n.doubleValue)}function Nb(n){return Cy(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function YV(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof ic&&i instanceof ic||r instanceof sc&&i instanceof sc?Wa(r.elements,i.elements,Zr):r instanceof Zh&&i instanceof Zh?Zr(r.Pe,i.Pe):r instanceof Jh&&i instanceof Jh}(n.transform,e.transform)}class XV{constructor(e,t){this.version=e,this.transformResults=t}}class Ai{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ai}static exists(e){return new Ai(void 0,e)}static updateTime(e){return new Ai(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Th(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Qf{}function Db(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Lb(n.key,Ai.none()):new kc(n.key,n.data,Ai.none());{const t=n.data,r=tr.empty();let i=new Bt(tn.comparator);for(let o of e.fields)if(!i.has(o)){let l=t.field(o);l===null&&o.length>1&&(o=o.popLast(),l=t.field(o)),l===null?r.delete(o):r.set(o,l),i=i.add(o)}return new Do(n.key,r,new br(i.toArray()),Ai.none())}}function JV(n,e,t){n instanceof kc?function(i,o,l){const c=i.value.clone(),d=fI(i.fieldTransforms,o,l.transformResults);c.setAll(d),o.convertToFoundDocument(l.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Do?function(i,o,l){if(!Th(i.precondition,o))return void o.convertToUnknownDocument(l.version);const c=fI(i.fieldTransforms,o,l.transformResults),d=o.data;d.setAll(Ob(i)),d.setAll(c),o.convertToFoundDocument(l.version,d).setHasCommittedMutations()}(n,e,t):function(i,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,t)}function Mu(n,e,t,r){return n instanceof kc?function(o,l,c,d){if(!Th(o.precondition,l))return c;const p=o.value.clone(),_=pI(o.fieldTransforms,d,l);return p.setAll(_),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),null}(n,e,t,r):n instanceof Do?function(o,l,c,d){if(!Th(o.precondition,l))return c;const p=pI(o.fieldTransforms,d,l),_=l.data;return _.setAll(Ob(o)),_.setAll(p),l.convertToFoundDocument(l.version,_).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(m=>m.field))}(n,e,t,r):function(o,l,c){return Th(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c}(n,e,t)}function ZV(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),o=xb(r.transform,i||null);o!=null&&(t===null&&(t=tr.empty()),t.set(r.field,o))}return t||null}function hI(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Wa(r,i,(o,l)=>YV(o,l))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class kc extends Qf{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Do extends Qf{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function Ob(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function fI(n,e,t){const r=new Map;et(n.length===t.length);for(let i=0;i<t.length;i++){const o=n[i],l=o.transform,c=e.data.field(o.field);r.set(o.field,QV(l,c,t[i]))}return r}function pI(n,e,t){const r=new Map;for(const i of n){const o=i.transform,l=t.data.field(i.field);r.set(i.field,KV(o,l,e))}return r}class Lb extends Qf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class eF extends Qf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tF{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&JV(o,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Mu(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Mu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Rb();return this.mutations.forEach(i=>{const o=e.get(i.key),l=o.overlayedDocument;let c=this.applyToLocalView(l,o.mutatedFields);c=t.has(i.key)?null:c;const d=Db(l,c);d!==null&&r.set(i.key,d),l.isValidDocument()||l.convertToNoDocument(xe.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Be())}isEqual(e){return this.batchId===e.batchId&&Wa(this.mutations,e.mutations,(t,r)=>hI(t,r))&&Wa(this.baseMutations,e.baseMutations,(t,r)=>hI(t,r))}}class Py{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){et(e.mutations.length===r.length);let i=function(){return $V}();const o=e.mutations;for(let l=0;l<o.length;l++)i=i.insert(o[l].key,r[l].version);return new Py(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nF{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rF{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var At,He;function iF(n){switch(n){default:return Ae();case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0}}function Mb(n){if(n===void 0)return Di("GRPC error has no .code"),re.UNKNOWN;switch(n){case At.OK:return re.OK;case At.CANCELLED:return re.CANCELLED;case At.UNKNOWN:return re.UNKNOWN;case At.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case At.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case At.INTERNAL:return re.INTERNAL;case At.UNAVAILABLE:return re.UNAVAILABLE;case At.UNAUTHENTICATED:return re.UNAUTHENTICATED;case At.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case At.NOT_FOUND:return re.NOT_FOUND;case At.ALREADY_EXISTS:return re.ALREADY_EXISTS;case At.PERMISSION_DENIED:return re.PERMISSION_DENIED;case At.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case At.ABORTED:return re.ABORTED;case At.OUT_OF_RANGE:return re.OUT_OF_RANGE;case At.UNIMPLEMENTED:return re.UNIMPLEMENTED;case At.DATA_LOSS:return re.DATA_LOSS;default:return Ae()}}(He=At||(At={}))[He.OK=0]="OK",He[He.CANCELLED=1]="CANCELLED",He[He.UNKNOWN=2]="UNKNOWN",He[He.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",He[He.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",He[He.NOT_FOUND=5]="NOT_FOUND",He[He.ALREADY_EXISTS=6]="ALREADY_EXISTS",He[He.PERMISSION_DENIED=7]="PERMISSION_DENIED",He[He.UNAUTHENTICATED=16]="UNAUTHENTICATED",He[He.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",He[He.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",He[He.ABORTED=10]="ABORTED",He[He.OUT_OF_RANGE=11]="OUT_OF_RANGE",He[He.UNIMPLEMENTED=12]="UNIMPLEMENTED",He[He.INTERNAL=13]="INTERNAL",He[He.UNAVAILABLE=14]="UNAVAILABLE",He[He.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sF(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oF=new yo([4294967295,4294967295],0);function mI(n){const e=sF().encode(n),t=new ob;return t.update(e),new Uint8Array(t.digest())}function gI(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new yo([t,r],0),new yo([i,o],0)]}class ky{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Cu(`Invalid padding: ${t}`);if(r<0)throw new Cu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Cu(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Cu(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ie=yo.fromNumber(this.Te)}Ee(e,t,r){let i=e.add(t.multiply(yo.fromNumber(r)));return i.compare(oF)===1&&(i=new yo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ie).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const t=mI(e),[r,i]=gI(t);for(let o=0;o<this.hashCount;o++){const l=this.Ee(r,i,o);if(!this.de(l))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new ky(o,i,t);return r.forEach(c=>l.insert(c)),l}insert(e){if(this.Te===0)return;const t=mI(e),[r,i]=gI(t);for(let o=0;o<this.hashCount;o++){const l=this.Ee(r,i,o);this.Ae(l)}}Ae(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Cu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Nc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Yf(xe.min(),i,new gt(ze),Oi(),Be())}}class Nc{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Nc(r,t,Be(),Be(),Be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class Vb{constructor(e,t){this.targetId=e,this.me=t}}class Fb{constructor(e,t,r=sn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class _I{constructor(){this.fe=0,this.ge=yI(),this.pe=sn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Be(),t=Be(),r=Be();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Ae()}}),new Nc(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=yI()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,et(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class aF{constructor(e){this.Le=e,this.Be=new Map,this.ke=Oi(),this.qe=oh(),this.Qe=oh(),this.Ke=new gt(ze)}$e(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(t,e.Ve):this.We(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.We(t,e.key,e.Ve)}Ge(e){this.forEachTarget(e,t=>{const r=this.ze(t);switch(e.state){case 0:this.je(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.je(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),r.De(e.resumeToken));break;default:Ae()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.je(i)&&t(i)})}Je(e){const t=e.targetId,r=e.me.count,i=this.Ye(t);if(i){const o=i.target;if(e_(o))if(r===0){const l=new Te(o.path);this.We(t,l,hn.newNoDocument(l,xe.min()))}else et(r===1);else{const l=this.Ze(t);if(l!==r){const c=this.Xe(e),d=c?this.et(c,e,l):1;if(d!==0){this.He(t);const p=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,p)}}}}}Xe(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t;let l,c;try{l=Rs(r).toUint8Array()}catch(d){if(d instanceof mb)return $a("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{c=new ky(l,i,o)}catch(d){return $a(d instanceof Cu?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return c.Te===0?null:c}et(e,t,r){return t.me.count===r-this.rt(e,t.targetId)?0:2}rt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(o=>{const l=this.Le.nt(),c=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.We(t,o,null),i++)}),i}it(e){const t=new Map;this.Be.forEach((o,l)=>{const c=this.Ye(l);if(c){if(o.current&&e_(c.target)){const d=new Te(c.target.path);this.st(d).has(l)||this.ot(l,d)||this.We(l,d,hn.newNoDocument(d,e))}o.be&&(t.set(l,o.ve()),o.Ce())}});let r=Be();this.Qe.forEach((o,l)=>{let c=!0;l.forEachWhile(d=>{const p=this.Ye(d);return!p||p.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(o))}),this.ke.forEach((o,l)=>l.setReadTime(e));const i=new Yf(e,t,this.Ke,this.ke,r);return this.ke=Oi(),this.qe=oh(),this.Qe=oh(),this.Ke=new gt(ze),i}Ue(e,t){if(!this.je(e))return;const r=this.ot(e,t.key)?2:0;this.ze(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e)),this.Qe=this.Qe.insert(t.key,this._t(t.key).add(e))}We(e,t,r){if(!this.je(e))return;const i=this.ze(e);this.ot(e,t)?i.Fe(t,1):i.Me(t),this.Qe=this.Qe.insert(t,this._t(t).delete(e)),this.Qe=this.Qe.insert(t,this._t(t).add(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let t=this.Be.get(e);return t||(t=new _I,this.Be.set(e,t)),t}_t(e){let t=this.Qe.get(e);return t||(t=new Bt(ze),this.Qe=this.Qe.insert(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Bt(ze),this.qe=this.qe.insert(e,t)),t}je(e){const t=this.Ye(e)!==null;return t||de("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ut(e)}He(e){this.Be.set(e,new _I),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}ot(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function oh(){return new gt(Te.comparator)}function yI(){return new gt(Te.comparator)}const lF={asc:"ASCENDING",desc:"DESCENDING"},uF={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},cF={and:"AND",or:"OR"};class dF{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function n_(n,e){return n.useProto3Json||$f(e)?e:{value:e}}function ef(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ub(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function hF(n,e){return ef(n,e.toTimestamp())}function Jr(n){return et(!!n),xe.fromTimestamp(function(t){const r=bs(t);return new Ut(r.seconds,r.nanos)}(n))}function Ny(n,e){return r_(n,e).canonicalString()}function r_(n,e){const t=function(i){return new Et(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function Bb(n){const e=Et.fromString(n);return et(Hb(e)),e}function i_(n,e){return Ny(n.databaseId,e.path)}function eg(n,e){const t=Bb(e);if(t.get(1)!==n.databaseId.projectId)throw new we(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new we(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Te(zb(t))}function jb(n,e){return Ny(n.databaseId,e)}function fF(n){const e=Bb(n);return e.length===4?Et.emptyPath():zb(e)}function s_(n){return new Et(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function zb(n){return et(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function vI(n,e,t){return{name:i_(n,e),fields:t.value.mapValue.fields}}function pF(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Ae()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(p,_){return p.useProto3Json?(et(_===void 0||typeof _=="string"),sn.fromBase64String(_||"")):(et(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array),sn.fromUint8Array(_||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,c=l&&function(p){const _=p.code===void 0?re.UNKNOWN:Mb(p.code);return new we(_,p.message||"")}(l);t=new Fb(r,i,o,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=eg(n,r.document.name),o=Jr(r.document.updateTime),l=r.document.createTime?Jr(r.document.createTime):xe.min(),c=new tr({mapValue:{fields:r.document.fields}}),d=hn.newFoundDocument(i,o,l,c),p=r.targetIds||[],_=r.removedTargetIds||[];t=new Ih(p,_,d.key,d)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=eg(n,r.document),o=r.readTime?Jr(r.readTime):xe.min(),l=hn.newNoDocument(i,o),c=r.removedTargetIds||[];t=new Ih([],c,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=eg(n,r.document),o=r.removedTargetIds||[];t=new Ih([],o,i,null)}else{if(!("filter"in e))return Ae();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,l=new rF(i,o),c=r.targetId;t=new Vb(c,l)}}return t}function mF(n,e){let t;if(e instanceof kc)t={update:vI(n,e.key,e.value)};else if(e instanceof Lb)t={delete:i_(n,e.key)};else if(e instanceof Do)t={update:vI(n,e.key,e.data),updateMask:SF(e.fieldMask)};else{if(!(e instanceof eF))return Ae();t={verify:i_(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,l){const c=l.transform;if(c instanceof Jh)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof ic)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof sc)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Zh)return{fieldPath:l.field.canonicalString(),increment:c.Pe};throw Ae()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:hF(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ae()}(n,e.precondition)),t}function gF(n,e){return n&&n.length>0?(et(e!==void 0),n.map(t=>function(i,o){let l=i.updateTime?Jr(i.updateTime):Jr(o);return l.isEqual(xe.min())&&(l=Jr(o)),new XV(l,i.transformResults||[])}(t,e))):[]}function _F(n,e){return{documents:[jb(n,e.path)]}}function yF(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=jb(n,i);const o=function(p){if(p.length!==0)return Wb(ei.create(p,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const l=function(p){if(p.length!==0)return p.map(_=>function(y){return{field:Aa(y.field),direction:wF(y.dir)}}(_))}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const c=n_(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{ct:t,parent:i}}function vF(n){let e=fF(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){et(r===1);const _=t.from[0];_.allDescendants?i=_.collectionId:e=e.child(_.collectionId)}let o=[];t.where&&(o=function(m){const y=$b(m);return y instanceof ei&&vb(y)?y.getFilters():[y]}(t.where));let l=[];t.orderBy&&(l=function(m){return m.map(y=>function(S){return new Xh(xa(S.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(y))}(t.orderBy));let c=null;t.limit&&(c=function(m){let y;return y=typeof m=="object"?m.value:m,$f(y)?null:y}(t.limit));let d=null;t.startAt&&(d=function(m){const y=!!m.before,w=m.values||[];return new Yh(w,y)}(t.startAt));let p=null;return t.endAt&&(p=function(m){const y=!m.before,w=m.values||[];return new Yh(w,y)}(t.endAt)),VV(e,i,l,o,c,"F",d,p)}function EF(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function $b(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=xa(t.unaryFilter.field);return Ft.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=xa(t.unaryFilter.field);return Ft.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=xa(t.unaryFilter.field);return Ft.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=xa(t.unaryFilter.field);return Ft.create(l,"!=",{nullValue:"NULL_VALUE"});default:return Ae()}}(n):n.fieldFilter!==void 0?function(t){return Ft.create(xa(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ae()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return ei.create(t.compositeFilter.filters.map(r=>$b(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ae()}}(t.compositeFilter.op))}(n):Ae()}function wF(n){return lF[n]}function TF(n){return uF[n]}function IF(n){return cF[n]}function Aa(n){return{fieldPath:n.canonicalString()}}function xa(n){return tn.fromServerFormat(n.fieldPath)}function Wb(n){return n instanceof Ft?function(t){if(t.op==="=="){if(oI(t.value))return{unaryFilter:{field:Aa(t.field),op:"IS_NAN"}};if(sI(t.value))return{unaryFilter:{field:Aa(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(oI(t.value))return{unaryFilter:{field:Aa(t.field),op:"IS_NOT_NAN"}};if(sI(t.value))return{unaryFilter:{field:Aa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Aa(t.field),op:TF(t.op),value:t.value}}}(n):n instanceof ei?function(t){const r=t.getFilters().map(i=>Wb(i));return r.length===1?r[0]:{compositeFilter:{op:IF(t.op),filters:r}}}(n):Ae()}function SF(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Hb(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e,t,r,i,o=xe.min(),l=xe.min(),c=sn.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=c,this.expectedCount=d}withSequenceNumber(e){return new hs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new hs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new hs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new hs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CF{constructor(e){this.ht=e}}function bF(n){const e=vF({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?t_(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RF{constructor(){this.ln=new AF}addToCollectionParentIndex(e,t){return this.ln.add(t),Z.resolve()}getCollectionParents(e,t){return Z.resolve(this.ln.getEntries(t))}addFieldIndex(e,t){return Z.resolve()}deleteFieldIndex(e,t){return Z.resolve()}deleteAllFieldIndexes(e){return Z.resolve()}createTargetIndexes(e,t){return Z.resolve()}getDocumentsMatchingTarget(e,t){return Z.resolve(null)}getIndexType(e,t){return Z.resolve(0)}getFieldIndexes(e,t){return Z.resolve([])}getNextCollectionGroupToUpdate(e){return Z.resolve(null)}getMinOffset(e,t){return Z.resolve(Cs.min())}getMinOffsetFromCollectionGroup(e,t){return Z.resolve(Cs.min())}updateCollectionGroup(e,t,r){return Z.resolve()}updateIndexEntries(e,t){return Z.resolve()}}class AF{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Bt(Et.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Bt(Et.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EI={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Nn{static withCacheSize(e){return new Nn(e,Nn.DEFAULT_COLLECTION_PERCENTILE,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nn.DEFAULT_COLLECTION_PERCENTILE=10,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Nn.DEFAULT=new Nn(41943040,Nn.DEFAULT_COLLECTION_PERCENTILE,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Nn.DISABLED=new Nn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new qa(0)}static Qn(){return new qa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wI([n,e],[t,r]){const i=ze(n,t);return i===0?ze(e,r):i}class xF{constructor(e){this.Gn=e,this.buffer=new Bt(wI),this.zn=0}jn(){return++this.zn}Hn(e){const t=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();wI(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class PF{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){de("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){cl(t)?de("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await ul(t)}await this.Yn(3e5)})}}class kF{constructor(e,t){this.Zn=e,this.params=t}calculateTargetCount(e,t){return this.Zn.Xn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return Z.resolve(zf.oe);const r=new xF(t);return this.Zn.forEachTarget(e,i=>r.Hn(i.sequenceNumber)).next(()=>this.Zn.er(e,i=>r.Hn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Zn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Zn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(de("LruGarbageCollector","Garbage collection skipped; disabled"),Z.resolve(EI)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(de("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),EI):this.tr(e,t))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,t){let r,i,o,l,c,d,p;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(de("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,l=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(r=m,c=Date.now(),this.removeTargets(e,r,t))).next(m=>(o=m,d=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(p=Date.now(),ba()<=Ve.DEBUG&&de("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-_}ms
	Determined least recently used ${i} in `+(c-l)+`ms
	Removed ${o} targets in `+(d-c)+`ms
	Removed ${m} documents in `+(p-d)+`ms
Total Duration: ${p-_}ms`),Z.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:m})))}}function NF(n,e){return new kF(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DF{constructor(){this.changes=new No(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,hn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?Z.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OF{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LF{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Mu(r.mutation,i,br.empty(),Ut.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Be()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Be()){const i=go();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let l=Su();return o.forEach((c,d)=>{l=l.insert(c,d.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=go();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Be()))}populateOverlays(e,t,r){const i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((l,c)=>{t.set(l,c)})})}computeViews(e,t,r,i){let o=Oi();const l=Lu(),c=function(){return Lu()}();return t.forEach((d,p)=>{const _=r.get(p.key);i.has(p.key)&&(_===void 0||_.mutation instanceof Do)?o=o.insert(p.key,p):_!==void 0?(l.set(p.key,_.mutation.getFieldMask()),Mu(_.mutation,p,_.mutation.getFieldMask(),Ut.now())):l.set(p.key,br.empty())}),this.recalculateAndSaveOverlays(e,o).next(d=>(d.forEach((p,_)=>l.set(p,_)),t.forEach((p,_)=>{var m;return c.set(p,new OF(_,(m=l.get(p))!==null&&m!==void 0?m:null))}),c))}recalculateAndSaveOverlays(e,t){const r=Lu();let i=new gt((l,c)=>l-c),o=Be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const c of l)c.keys().forEach(d=>{const p=t.get(d);if(p===null)return;let _=r.get(d)||br.empty();_=c.applyToLocalView(p,_),r.set(d,_);const m=(i.get(c.batchId)||Be()).add(d);i=i.insert(c.batchId,m)})}).next(()=>{const l=[],c=i.getReverseIterator();for(;c.hasNext();){const d=c.getNext(),p=d.key,_=d.value,m=Rb();_.forEach(y=>{if(!o.has(y)){const w=Db(t.get(y),r.get(y));w!==null&&m.set(y,w),o=o.add(y)}}),l.push(this.documentOverlayCache.saveOverlays(e,p,m))}return Z.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(l){return Te.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):FV(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{const l=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):Z.resolve(go());let c=-1,d=o;return l.next(p=>Z.forEach(p,(_,m)=>(c<m.largestBatchId&&(c=m.largestBatchId),o.get(_)?Z.resolve():this.remoteDocumentCache.getEntry(e,_).next(y=>{d=d.insert(_,y)}))).next(()=>this.populateOverlays(e,p,o)).next(()=>this.computeViews(e,d,p,Be())).next(_=>({batchId:c,changes:bb(_)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Te(t)).next(r=>{let i=Su();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const o=t.collectionGroup;let l=Su();return this.indexManager.getCollectionParents(e,o).next(c=>Z.forEach(c,d=>{const p=function(m,y){return new Hf(y,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(t,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,p,r,i).next(_=>{_.forEach((m,y)=>{l=l.insert(m,y)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(l=>{o.forEach((d,p)=>{const _=p.getKey();l.get(_)===null&&(l=l.insert(_,hn.newInvalidDocument(_)))});let c=Su();return l.forEach((d,p)=>{const _=o.get(d);_!==void 0&&Mu(_.mutation,p,br.empty(),Ut.now()),qf(t,p)&&(c=c.insert(d,p))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MF{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,t){return Z.resolve(this.Tr.get(t))}saveBundleMetadata(e,t){return this.Tr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Jr(i.createTime)}}(t)),Z.resolve()}getNamedQuery(e,t){return Z.resolve(this.Ir.get(t))}saveNamedQuery(e,t){return this.Ir.set(t.name,function(i){return{name:i.name,query:bF(i.bundledQuery),readTime:Jr(i.readTime)}}(t)),Z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VF{constructor(){this.overlays=new gt(Te.comparator),this.Er=new Map}getOverlay(e,t){return Z.resolve(this.overlays.get(t))}getOverlays(e,t){const r=go();return Z.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.Tt(e,t,o)}),Z.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Er.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Er.delete(r)),Z.resolve()}getOverlaysForCollection(e,t,r){const i=go(),o=t.length+1,l=new Te(t.child("")),c=this.overlays.getIteratorFrom(l);for(;c.hasNext();){const d=c.getNext().value,p=d.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===o&&d.largestBatchId>r&&i.set(d.getKey(),d)}return Z.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new gt((p,_)=>p-_);const l=this.overlays.getIterator();for(;l.hasNext();){const p=l.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>r){let _=o.get(p.largestBatchId);_===null&&(_=go(),o=o.insert(p.largestBatchId,_)),_.set(p.getKey(),p)}}const c=go(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((p,_)=>c.set(p,_)),!(c.size()>=i)););return Z.resolve(c)}Tt(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const l=this.Er.get(i.largestBatchId).delete(r.key);this.Er.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new nF(t,r));let o=this.Er.get(t);o===void 0&&(o=Be(),this.Er.set(t,o)),this.Er.set(t,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FF{constructor(){this.sessionToken=sn.EMPTY_BYTE_STRING}getSessionToken(e){return Z.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy{constructor(){this.dr=new Bt(Gt.Ar),this.Rr=new Bt(Gt.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(e,t){const r=new Gt(e,t);this.dr=this.dr.add(r),this.Rr=this.Rr.add(r)}mr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.gr(new Gt(e,t))}pr(e,t){e.forEach(r=>this.removeReference(r,t))}yr(e){const t=new Te(new Et([])),r=new Gt(t,e),i=new Gt(t,e+1),o=[];return this.Rr.forEachInRange([r,i],l=>{this.gr(l),o.push(l.key)}),o}wr(){this.dr.forEach(e=>this.gr(e))}gr(e){this.dr=this.dr.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const t=new Te(new Et([])),r=new Gt(t,e),i=new Gt(t,e+1);let o=Be();return this.Rr.forEachInRange([r,i],l=>{o=o.add(l.key)}),o}containsKey(e){const t=new Gt(e,0),r=this.dr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Gt{constructor(e,t){this.key=e,this.br=t}static Ar(e,t){return Te.comparator(e.key,t.key)||ze(e.br,t.br)}static Vr(e,t){return ze(e.br,t.br)||Te.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UF{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Dr=1,this.vr=new Bt(Gt.Ar)}checkEmpty(e){return Z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const o=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new tF(o,t,r,i);this.mutationQueue.push(l);for(const c of i)this.vr=this.vr.add(new Gt(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return Z.resolve(l)}lookupMutationBatch(e,t){return Z.resolve(this.Cr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.Fr(r),o=i<0?0:i;return Z.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Gt(t,0),i=new Gt(t,Number.POSITIVE_INFINITY),o=[];return this.vr.forEachInRange([r,i],l=>{const c=this.Cr(l.br);o.push(c)}),Z.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Bt(ze);return t.forEach(i=>{const o=new Gt(i,0),l=new Gt(i,Number.POSITIVE_INFINITY);this.vr.forEachInRange([o,l],c=>{r=r.add(c.br)})}),Z.resolve(this.Mr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let o=r;Te.isDocumentKey(o)||(o=o.child(""));const l=new Gt(new Te(o),0);let c=new Bt(ze);return this.vr.forEachWhile(d=>{const p=d.key.path;return!!r.isPrefixOf(p)&&(p.length===i&&(c=c.add(d.br)),!0)},l),Z.resolve(this.Mr(c))}Mr(e){const t=[];return e.forEach(r=>{const i=this.Cr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){et(this.Or(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.vr;return Z.forEach(t.mutations,i=>{const o=new Gt(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.vr=r})}Ln(e){}containsKey(e,t){const r=new Gt(t,0),i=this.vr.firstAfterOrEqual(r);return Z.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Z.resolve()}Or(e,t){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const t=this.Fr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BF{constructor(e){this.Nr=e,this.docs=function(){return new gt(Te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),o=i?i.size:0,l=this.Nr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Z.resolve(r?r.document.mutableCopy():hn.newInvalidDocument(t))}getEntries(e,t){let r=Oi();return t.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():hn.newInvalidDocument(i))}),Z.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Oi();const l=t.path,c=new Te(l.child("")),d=this.docs.getIteratorFrom(c);for(;d.hasNext();){const{key:p,value:{document:_}}=d.getNext();if(!l.isPrefixOf(p.path))break;p.path.length>l.length+1||gV(mV(_),r)<=0||(i.has(_.key)||qf(t,_))&&(o=o.insert(_.key,_.mutableCopy()))}return Z.resolve(o)}getAllFromCollectionGroup(e,t,r,i){Ae()}Lr(e,t){return Z.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new jF(this)}getSize(e){return Z.resolve(this.size)}}class jF extends DF{constructor(e){super(),this.hr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.hr.addEntry(e,i)):this.hr.removeEntry(r)}),Z.waitFor(t)}getFromCache(e,t){return this.hr.getEntry(e,t)}getAllFromCache(e,t){return this.hr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zF{constructor(e){this.persistence=e,this.Br=new No(t=>by(t),Ry),this.lastRemoteSnapshotVersion=xe.min(),this.highestTargetId=0,this.kr=0,this.qr=new Dy,this.targetCount=0,this.Qr=qa.qn()}forEachTarget(e,t){return this.Br.forEach((r,i)=>t(i)),Z.resolve()}getLastRemoteSnapshotVersion(e){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Z.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.kr&&(this.kr=t),Z.resolve()}Un(e){this.Br.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Qr=new qa(t),this.highestTargetId=t),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,t){return this.Un(t),this.targetCount+=1,Z.resolve()}updateTargetData(e,t){return this.Un(t),Z.resolve()}removeTargetData(e,t){return this.Br.delete(t.target),this.qr.yr(t.targetId),this.targetCount-=1,Z.resolve()}removeTargets(e,t,r){let i=0;const o=[];return this.Br.forEach((l,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.Br.delete(l),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),Z.waitFor(o).next(()=>i)}getTargetCount(e){return Z.resolve(this.targetCount)}getTargetData(e,t){const r=this.Br.get(t)||null;return Z.resolve(r)}addMatchingKeys(e,t,r){return this.qr.mr(t,r),Z.resolve()}removeMatchingKeys(e,t,r){this.qr.pr(t,r);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(l=>{o.push(i.markPotentiallyOrphaned(e,l))}),Z.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.qr.yr(t),Z.resolve()}getMatchingKeysForTargetId(e,t){const r=this.qr.Sr(t);return Z.resolve(r)}containsKey(e,t){return Z.resolve(this.qr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(e,t){this.Kr={},this.overlays={},this.$r=new zf(0),this.Ur=!1,this.Ur=!0,this.Wr=new FF,this.referenceDelegate=e(this),this.Gr=new zF(this),this.indexManager=new RF,this.remoteDocumentCache=function(i){return new BF(i)}(r=>this.referenceDelegate.zr(r)),this.serializer=new CF(t),this.jr=new MF(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new VF,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Kr[e.toKey()];return r||(r=new UF(t,this.referenceDelegate),this.Kr[e.toKey()]=r),r}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,t,r){de("MemoryPersistence","Starting transaction:",e);const i=new $F(this.$r.next());return this.referenceDelegate.Hr(),r(i).next(o=>this.referenceDelegate.Jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Yr(e,t){return Z.or(Object.values(this.Kr).map(r=>()=>r.containsKey(e,t)))}}class $F extends yV{constructor(e){super(),this.currentSequenceNumber=e}}class Oy{constructor(e){this.persistence=e,this.Zr=new Dy,this.Xr=null}static ei(e){return new Oy(e)}get ti(){if(this.Xr)return this.Xr;throw Ae()}addReference(e,t,r){return this.Zr.addReference(r,t),this.ti.delete(r.toString()),Z.resolve()}removeReference(e,t,r){return this.Zr.removeReference(r,t),this.ti.add(r.toString()),Z.resolve()}markPotentiallyOrphaned(e,t){return this.ti.add(t.toString()),Z.resolve()}removeTarget(e,t){this.Zr.yr(t.targetId).forEach(i=>this.ti.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.ti.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Hr(){this.Xr=new Set}Jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.ti,r=>{const i=Te.fromPath(r);return this.ni(e,i).next(o=>{o||t.removeEntry(i,xe.min())})}).next(()=>(this.Xr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ni(e,t).next(r=>{r?this.ti.delete(t.toString()):this.ti.add(t.toString())})}zr(e){return 0}ni(e,t){return Z.or([()=>Z.resolve(this.Zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Yr(e,t)])}}class tf{constructor(e,t){this.persistence=e,this.ri=new No(r=>wV(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=NF(this,t)}static ei(e,t){return new tf(e,t)}Hr(){}Jr(e){return Z.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}Xn(e){const t=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}nr(e){let t=0;return this.er(e,r=>{t++}).next(()=>t)}er(e,t){return Z.forEach(this.ri,(r,i)=>this.ir(e,r,i).next(o=>o?Z.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.Lr(e,l=>this.ir(e,l,t).next(c=>{c||(r++,o.removeEntry(l,xe.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.ri.set(t,e.currentSequenceNumber),Z.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.ri.set(r,e.currentSequenceNumber),Z.resolve()}removeReference(e,t,r){return this.ri.set(r,e.currentSequenceNumber),Z.resolve()}updateLimboDocument(e,t){return this.ri.set(t,e.currentSequenceNumber),Z.resolve()}zr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Eh(e.data.value)),t}ir(e,t,r){return Z.or([()=>this.persistence.Yr(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.ri.get(t);return Z.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ly{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Wi=r,this.Gi=i}static zi(e,t){let r=Be(),i=Be();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new Ly(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WF{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HF{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return Nk()?8:vV(fn())>0?6:4}()}initialize(e,t){this.Zi=e,this.indexManager=t,this.ji=!0}getDocumentsMatchingQuery(e,t,r,i){const o={result:null};return this.Xi(e,t).next(l=>{o.result=l}).next(()=>{if(!o.result)return this.es(e,t,i,r).next(l=>{o.result=l})}).next(()=>{if(o.result)return;const l=new WF;return this.ts(e,t,l).next(c=>{if(o.result=c,this.Hi)return this.ns(e,t,l,c.size)})}).next(()=>o.result)}ns(e,t,r,i){return r.documentReadCount<this.Ji?(ba()<=Ve.DEBUG&&de("QueryEngine","SDK will not create cache indexes for query:",Ra(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),Z.resolve()):(ba()<=Ve.DEBUG&&de("QueryEngine","Query:",Ra(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Yi*i?(ba()<=Ve.DEBUG&&de("QueryEngine","The SDK decides to create cache indexes for query:",Ra(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Xr(t))):Z.resolve())}Xi(e,t){if(cI(t))return Z.resolve(null);let r=Xr(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=t_(t,null,"F"),r=Xr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const l=Be(...o);return this.Zi.getDocuments(e,l).next(c=>this.indexManager.getMinOffset(e,r).next(d=>{const p=this.rs(t,c);return this.ss(t,p,l,d.readTime)?this.Xi(e,t_(t,null,"F")):this.os(e,p,t,d)}))})))}es(e,t,r,i){return cI(t)||i.isEqual(xe.min())?Z.resolve(null):this.Zi.getDocuments(e,r).next(o=>{const l=this.rs(t,o);return this.ss(t,l,r,i)?Z.resolve(null):(ba()<=Ve.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ra(t)),this.os(e,l,t,pV(i,-1)).next(c=>c))})}rs(e,t){let r=new Bt(Sb(e));return t.forEach((i,o)=>{qf(e,o)&&(r=r.add(o))}),r}ss(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ts(e,t,r){return ba()<=Ve.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",Ra(t)),this.Zi.getDocumentsMatchingQuery(e,t,Cs.min(),r)}os(e,t,r,i){return this.Zi.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(l=>{o=o.insert(l.key,l)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GF{constructor(e,t,r,i){this.persistence=e,this._s=t,this.serializer=i,this.us=new gt(ze),this.cs=new No(o=>by(o),Ry),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(r)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new LF(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.us))}}function qF(n,e,t,r){return new GF(n,e,t,r)}async function qb(n,e){const t=Pe(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Ps(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{const l=[],c=[];let d=Be();for(const p of i){l.push(p.batchId);for(const _ of p.mutations)d=d.add(_.key)}for(const p of o){c.push(p.batchId);for(const _ of p.mutations)d=d.add(_.key)}return t.localDocuments.getDocuments(r,d).next(p=>({Ts:p,removedBatchIds:l,addedBatchIds:c}))})})}function KF(n,e){const t=Pe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=t.hs.newChangeBuffer({trackRemovals:!0});return function(c,d,p,_){const m=p.batch,y=m.keys();let w=Z.resolve();return y.forEach(S=>{w=w.next(()=>_.getEntry(d,S)).next(b=>{const C=p.docVersions.get(S);et(C!==null),b.version.compareTo(C)<0&&(m.applyToRemoteDocument(b,p),b.isValidDocument()&&(b.setReadTime(p.commitVersion),_.addEntry(b)))})}),w.next(()=>c.mutationQueue.removeMutationBatch(d,m))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let d=Be();for(let p=0;p<c.mutationResults.length;++p)c.mutationResults[p].transformResults.length>0&&(d=d.add(c.batch.mutations[p].key));return d}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function Kb(n){const e=Pe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Gr.getLastRemoteSnapshotVersion(t))}function QF(n,e){const t=Pe(n),r=e.snapshotVersion;let i=t.us;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=t.hs.newChangeBuffer({trackRemovals:!0});i=t.us;const c=[];e.targetChanges.forEach((_,m)=>{const y=i.get(m);if(!y)return;c.push(t.Gr.removeMatchingKeys(o,_.removedDocuments,m).next(()=>t.Gr.addMatchingKeys(o,_.addedDocuments,m)));let w=y.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(m)!==null?w=w.withResumeToken(sn.EMPTY_BYTE_STRING,xe.min()).withLastLimboFreeSnapshotVersion(xe.min()):_.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(_.resumeToken,r)),i=i.insert(m,w),function(b,C,k){return b.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=3e8?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(y,w,_)&&c.push(t.Gr.updateTargetData(o,w))});let d=Oi(),p=Be();if(e.documentUpdates.forEach(_=>{e.resolvedLimboDocuments.has(_)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(o,_))}),c.push(YF(o,l,e.documentUpdates).next(_=>{d=_.Is,p=_.Es})),!r.isEqual(xe.min())){const _=t.Gr.getLastRemoteSnapshotVersion(o).next(m=>t.Gr.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(_)}return Z.waitFor(c).next(()=>l.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,d,p)).next(()=>d)}).then(o=>(t.us=i,o))}function YF(n,e,t){let r=Be(),i=Be();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let l=Oi();return t.forEach((c,d)=>{const p=o.get(c);d.isFoundDocument()!==p.isFoundDocument()&&(i=i.add(c)),d.isNoDocument()&&d.version.isEqual(xe.min())?(e.removeEntry(c,d.readTime),l=l.insert(c,d)):!p.isValidDocument()||d.version.compareTo(p.version)>0||d.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(d),l=l.insert(c,d)):de("LocalStore","Ignoring outdated watch update for ",c,". Current version:",p.version," Watch version:",d.version)}),{Is:l,Es:i}})}function XF(n,e){const t=Pe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function JF(n,e){const t=Pe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Gr.getTargetData(r,e).next(o=>o?(i=o,Z.resolve(i)):t.Gr.allocateTargetId(r).next(l=>(i=new hs(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Gr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.us.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.us=t.us.insert(r.targetId,r),t.cs.set(e,r.targetId)),r})}async function o_(n,e,t){const r=Pe(n),i=r.us.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,l=>r.persistence.referenceDelegate.removeTarget(l,i))}catch(l){if(!cl(l))throw l;de("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.us=r.us.remove(e),r.cs.delete(i.target)}function TI(n,e,t){const r=Pe(n);let i=xe.min(),o=Be();return r.persistence.runTransaction("Execute query","readwrite",l=>function(d,p,_){const m=Pe(d),y=m.cs.get(_);return y!==void 0?Z.resolve(m.us.get(y)):m.Gr.getTargetData(p,_)}(r,l,Xr(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Gr.getMatchingKeysForTargetId(l,c.targetId).next(d=>{o=d})}).next(()=>r._s.getDocumentsMatchingQuery(l,e,t?i:xe.min(),t?o:Be())).next(c=>(ZF(r,BV(e),c),{documents:c,ds:o})))}function ZF(n,e,t){let r=n.ls.get(e)||xe.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.ls.set(e,r)}class II{constructor(){this.activeTargetIds=GV()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class e4{constructor(){this._o=new II,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,t,r){this.ao[e]=t}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new II,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){de("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){de("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ah=null;function tg(){return ah===null?ah=function(){return 268435456+Math.round(2147483648*Math.random())}():ah++,"0x"+ah.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cn="WebChannelConnection";class i4 extends class{get Co(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Fo=r+"://"+t.host,this.Mo=`projects/${i}/databases/${o}`,this.xo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Oo(t,r,i,o,l){const c=tg(),d=this.No(t,r.toUriEncodedString());de("RestConnection",`Sending RPC '${t}' ${c}:`,d,i);const p={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(p,o,l),this.Bo(t,d,p,i).then(_=>(de("RestConnection",`Received RPC '${t}' ${c}: `,_),_),_=>{throw $a("RestConnection",`RPC '${t}' ${c} failed with error: `,_,"url: ",d,"request:",i),_})}ko(t,r,i,o,l,c){return this.Oo(t,r,i,o,l)}Lo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ll}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,l)=>t[l]=o),i&&i.headers.forEach((o,l)=>t[l]=o)}No(t,r){const i=n4[t];return`${this.Fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Bo(e,t,r,i){const o=tg();return new Promise((l,c)=>{const d=new ab;d.setWithCredentials(!0),d.listenOnce(lb.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case vh.NO_ERROR:const _=d.getResponseJson();de(cn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(_)),l(_);break;case vh.TIMEOUT:de(cn,`RPC '${e}' ${o} timed out`),c(new we(re.DEADLINE_EXCEEDED,"Request time out"));break;case vh.HTTP_ERROR:const m=d.getStatus();if(de(cn,`RPC '${e}' ${o} failed with status:`,m,"response text:",d.getResponseText()),m>0){let y=d.getResponseJson();Array.isArray(y)&&(y=y[0]);const w=y==null?void 0:y.error;if(w&&w.status&&w.message){const S=function(C){const k=C.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(k)>=0?k:re.UNKNOWN}(w.status);c(new we(S,w.message))}else c(new we(re.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new we(re.UNAVAILABLE,"Connection failed."));break;default:Ae()}}finally{de(cn,`RPC '${e}' ${o} completed.`)}});const p=JSON.stringify(i);de(cn,`RPC '${e}' ${o} sending request:`,i),d.send(t,"POST",p,r,15)})}qo(e,t,r){const i=tg(),o=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=db(),c=cb(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(d.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Lo(d.initMessageHeaders,t,r),d.encodeInitMessageHeaders=!0;const _=o.join("");de(cn,`Creating RPC '${e}' stream ${i}: ${_}`,d);const m=l.createWebChannel(_,d);let y=!1,w=!1;const S=new r4({Eo:C=>{w?de(cn,`Not sending because RPC '${e}' stream ${i} is closed:`,C):(y||(de(cn,`Opening RPC '${e}' stream ${i} transport.`),m.open(),y=!0),de(cn,`RPC '${e}' stream ${i} sending:`,C),m.send(C))},Ao:()=>m.close()}),b=(C,k,N)=>{C.listen(k,j=>{try{N(j)}catch(H){setTimeout(()=>{throw H},0)}})};return b(m,Iu.EventType.OPEN,()=>{w||(de(cn,`RPC '${e}' stream ${i} transport opened.`),S.So())}),b(m,Iu.EventType.CLOSE,()=>{w||(w=!0,de(cn,`RPC '${e}' stream ${i} transport closed`),S.Do())}),b(m,Iu.EventType.ERROR,C=>{w||(w=!0,$a(cn,`RPC '${e}' stream ${i} transport errored:`,C),S.Do(new we(re.UNAVAILABLE,"The operation could not be completed")))}),b(m,Iu.EventType.MESSAGE,C=>{var k;if(!w){const N=C.data[0];et(!!N);const j=N,H=(j==null?void 0:j.error)||((k=j[0])===null||k===void 0?void 0:k.error);if(H){de(cn,`RPC '${e}' stream ${i} received error:`,H);const Y=H.status;let X=function(P){const L=At[P];if(L!==void 0)return Mb(L)}(Y),x=H.message;X===void 0&&(X=re.INTERNAL,x="Unknown error status: "+Y+" with message "+H.message),w=!0,S.Do(new we(X,x)),m.close()}else de(cn,`RPC '${e}' stream ${i} received:`,N),S.vo(N)}}),b(c,ub.STAT_EVENT,C=>{C.stat===Yg.PROXY?de(cn,`RPC '${e}' stream ${i} detected buffering proxy`):C.stat===Yg.NOPROXY&&de(cn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.bo()},0),S}}function ng(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xf(n){return new dF(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(e,t,r=1e3,i=1.5,o=6e4){this.li=e,this.timerId=t,this.Qo=r,this.Ko=i,this.$o=o,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const t=Math.floor(this.Uo+this.Ho()),r=Math.max(0,Date.now()-this.Go),i=Math.max(0,t-r);i>0&&de("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Uo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,i,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{constructor(e,t,r,i,o,l,c,d){this.li=e,this.Yo=r,this.Zo=i,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=c,this.listener=d,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new Qb(e,t)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,t){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():t&&t.code===re.RESOURCE_EXHAUSTED?(Di(t.toString()),Di("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):t&&t.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(t)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),t=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Xo===t&&this.I_(r,i)},r=>{e(()=>{const i=new we(re.UNKNOWN,"Fetching auth token failed: "+r.message);return this.E_(i)})})}I_(e,t){const r=this.T_(this.Xo);this.stream=this.d_(e,t),this.stream.Ro(()=>{r(()=>this.listener.Ro())}),this.stream.mo(()=>{r(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(i=>{r(()=>this.E_(i))}),this.stream.onMessage(i=>{r(()=>++this.n_==1?this.A_(i):this.onNext(i))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}E_(e){return de("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return t=>{this.li.enqueueAndForget(()=>this.Xo===e?t():(de("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class s4 extends Yb{constructor(e,t,r,i,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.serializer=o}d_(e,t){return this.connection.qo("Listen",e,t)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const t=pF(this.serializer,e),r=function(o){if(!("targetChange"in o))return xe.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?xe.min():l.readTime?Jr(l.readTime):xe.min()}(e);return this.listener.R_(t,r)}V_(e){const t={};t.database=s_(this.serializer),t.addTarget=function(o,l){let c;const d=l.target;if(c=e_(d)?{documents:_F(o,d)}:{query:yF(o,d).ct},c.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){c.resumeToken=Ub(o,l.resumeToken);const p=n_(o,l.expectedCount);p!==null&&(c.expectedCount=p)}else if(l.snapshotVersion.compareTo(xe.min())>0){c.readTime=ef(o,l.snapshotVersion.toTimestamp());const p=n_(o,l.expectedCount);p!==null&&(c.expectedCount=p)}return c}(this.serializer,e);const r=EF(this.serializer,e);r&&(t.labels=r),this.c_(t)}m_(e){const t={};t.database=s_(this.serializer),t.removeTarget=e,this.c_(t)}}class o4 extends Yb{constructor(e,t,r,i,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.serializer=o}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}d_(e,t){return this.connection.qo("Write",e,t)}A_(e){return et(!!e.streamToken),this.lastStreamToken=e.streamToken,et(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){et(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const t=gF(e.writeResults,e.commitTime),r=Jr(e.commitTime);return this.listener.y_(r,t)}w_(){const e={};e.database=s_(this.serializer),this.c_(e)}g_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>mF(this.serializer,r))};this.c_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a4 extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.S_=!1}b_(){if(this.S_)throw new we(re.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,t,r,i){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Oo(e,r_(t,r),i,o,l)).catch(o=>{throw o.name==="FirebaseError"?(o.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new we(re.UNKNOWN,o.toString())})}ko(e,t,r,i,o){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.ko(e,r_(t,r),i,l,c,o)).catch(l=>{throw l.name==="FirebaseError"?(l.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new we(re.UNKNOWN,l.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class l4{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(Di(t),this.C_=!1):de("OnlineStateTracker",t)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u4{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=o,this.Q_.uo(l=>{r.enqueueAndForget(async()=>{Oo(this)&&(de("RemoteStore","Restarting streams for network reachability change."),await async function(d){const p=Pe(d);p.k_.add(4),await Dc(p),p.K_.set("Unknown"),p.k_.delete(4),await Jf(p)}(this))})}),this.K_=new l4(r,i)}}async function Jf(n){if(Oo(n))for(const e of n.q_)await e(!0)}async function Dc(n){for(const e of n.q_)await e(!1)}function Xb(n,e){const t=Pe(n);t.B_.has(e.targetId)||(t.B_.set(e.targetId,e),Uy(t)?Fy(t):dl(t).s_()&&Vy(t,e))}function My(n,e){const t=Pe(n),r=dl(t);t.B_.delete(e),r.s_()&&Jb(t,e),t.B_.size===0&&(r.s_()?r.a_():Oo(t)&&t.K_.set("Unknown"))}function Vy(n,e){if(n.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(xe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}dl(n).V_(e)}function Jb(n,e){n.U_.xe(e),dl(n).m_(e)}function Fy(n){n.U_=new aF({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>n.B_.get(e)||null,nt:()=>n.datastore.serializer.databaseId}),dl(n).start(),n.K_.F_()}function Uy(n){return Oo(n)&&!dl(n).i_()&&n.B_.size>0}function Oo(n){return Pe(n).k_.size===0}function Zb(n){n.U_=void 0}async function c4(n){n.K_.set("Online")}async function d4(n){n.B_.forEach((e,t)=>{Vy(n,e)})}async function h4(n,e){Zb(n),Uy(n)?(n.K_.O_(e),Fy(n)):n.K_.set("Unknown")}async function f4(n,e,t){if(n.K_.set("Online"),e instanceof Fb&&e.state===2&&e.cause)try{await async function(i,o){const l=o.cause;for(const c of o.targetIds)i.B_.has(c)&&(await i.remoteSyncer.rejectListen(c,l),i.B_.delete(c),i.U_.removeTarget(c))}(n,e)}catch(r){de("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await nf(n,r)}else if(e instanceof Ih?n.U_.$e(e):e instanceof Vb?n.U_.Je(e):n.U_.Ge(e),!t.isEqual(xe.min()))try{const r=await Kb(n.localStore);t.compareTo(r)>=0&&await function(o,l){const c=o.U_.it(l);return c.targetChanges.forEach((d,p)=>{if(d.resumeToken.approximateByteSize()>0){const _=o.B_.get(p);_&&o.B_.set(p,_.withResumeToken(d.resumeToken,l))}}),c.targetMismatches.forEach((d,p)=>{const _=o.B_.get(d);if(!_)return;o.B_.set(d,_.withResumeToken(sn.EMPTY_BYTE_STRING,_.snapshotVersion)),Jb(o,d);const m=new hs(_.target,d,p,_.sequenceNumber);Vy(o,m)}),o.remoteSyncer.applyRemoteEvent(c)}(n,t)}catch(r){de("RemoteStore","Failed to raise snapshot:",r),await nf(n,r)}}async function nf(n,e,t){if(!cl(e))throw e;n.k_.add(1),await Dc(n),n.K_.set("Offline"),t||(t=()=>Kb(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{de("RemoteStore","Retrying IndexedDB access"),await t(),n.k_.delete(1),await Jf(n)})}function eR(n,e){return e().catch(t=>nf(n,t,e))}async function Zf(n){const e=Pe(n),t=xs(e);let r=e.L_.length>0?e.L_[e.L_.length-1].batchId:-1;for(;p4(e);)try{const i=await XF(e.localStore,r);if(i===null){e.L_.length===0&&t.a_();break}r=i.batchId,m4(e,i)}catch(i){await nf(e,i)}tR(e)&&nR(e)}function p4(n){return Oo(n)&&n.L_.length<10}function m4(n,e){n.L_.push(e);const t=xs(n);t.s_()&&t.f_&&t.g_(e.mutations)}function tR(n){return Oo(n)&&!xs(n).i_()&&n.L_.length>0}function nR(n){xs(n).start()}async function g4(n){xs(n).w_()}async function _4(n){const e=xs(n);for(const t of n.L_)e.g_(t.mutations)}async function y4(n,e,t){const r=n.L_.shift(),i=Py.from(r,e,t);await eR(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await Zf(n)}async function v4(n,e){e&&xs(n).f_&&await async function(r,i){if(function(l){return iF(l)&&l!==re.ABORTED}(i.code)){const o=r.L_.shift();xs(r).__(),await eR(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await Zf(r)}}(n,e),tR(n)&&nR(n)}async function CI(n,e){const t=Pe(n);t.asyncQueue.verifyOperationInProgress(),de("RemoteStore","RemoteStore received new credentials");const r=Oo(t);t.k_.add(3),await Dc(t),r&&t.K_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.k_.delete(3),await Jf(t)}async function E4(n,e){const t=Pe(n);e?(t.k_.delete(2),await Jf(t)):e||(t.k_.add(2),await Dc(t),t.K_.set("Unknown"))}function dl(n){return n.W_||(n.W_=function(t,r,i){const o=Pe(t);return o.b_(),new s4(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Ro:c4.bind(null,n),mo:d4.bind(null,n),po:h4.bind(null,n),R_:f4.bind(null,n)}),n.q_.push(async e=>{e?(n.W_.__(),Uy(n)?Fy(n):n.K_.set("Unknown")):(await n.W_.stop(),Zb(n))})),n.W_}function xs(n){return n.G_||(n.G_=function(t,r,i){const o=Pe(t);return o.b_(),new o4(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Ro:()=>Promise.resolve(),mo:g4.bind(null,n),po:v4.bind(null,n),p_:_4.bind(null,n),y_:y4.bind(null,n)}),n.q_.push(async e=>{e?(n.G_.__(),await Zf(n)):(await n.G_.stop(),n.L_.length>0&&(de("RemoteStore",`Stopping write stream with ${n.L_.length} pending writes`),n.L_=[]))})),n.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class By{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new _s,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){const l=Date.now()+r,c=new By(e,t,l,i,o);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new we(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function jy(n,e){if(Di("AsyncQueue",`${e}: ${n}`),cl(n))return new we(re.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{static emptySet(e){return new Ma(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Te.comparator(t.key,r.key):(t,r)=>Te.comparator(t.key,r.key),this.keyedMap=Su(),this.sortedSet=new gt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ma)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Ma;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(){this.z_=new gt(Te.comparator)}track(e){const t=e.doc.key,r=this.z_.get(t);r?e.type!==0&&r.type===3?this.z_=this.z_.insert(t,e):e.type===3&&r.type!==1?this.z_=this.z_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.z_=this.z_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.z_=this.z_.remove(t):e.type===1&&r.type===2?this.z_=this.z_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):Ae():this.z_=this.z_.insert(t,e)}j_(){const e=[];return this.z_.inorderTraversal((t,r)=>{e.push(r)}),e}}class Ka{constructor(e,t,r,i,o,l,c,d,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=c,this.excludesMetadataChanges=d,this.hasCachedResults=p}static fromInitialDocuments(e,t,r,i,o){const l=[];return t.forEach(c=>{l.push({type:0,doc:c})}),new Ka(e,t,Ma.emptySet(t),l,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Gf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w4{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class T4{constructor(){this.queries=RI(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(t,r){const i=Pe(t),o=i.queries;i.queries=RI(),o.forEach((l,c)=>{for(const d of c.J_)d.onError(r)})})(this,new we(re.ABORTED,"Firestore shutting down"))}}function RI(){return new No(n=>Ib(n),Gf)}async function I4(n,e){const t=Pe(n);let r=3;const i=e.query;let o=t.queries.get(i);o?!o.Y_()&&e.Z_()&&(r=2):(o=new w4,r=e.Z_()?0:1);try{switch(r){case 0:o.H_=await t.onListen(i,!0);break;case 1:o.H_=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(l){const c=jy(l,`Initialization of query '${Ra(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,o),o.J_.push(e),e.ea(t.onlineState),o.H_&&e.ta(o.H_)&&zy(t)}async function S4(n,e){const t=Pe(n),r=e.query;let i=3;const o=t.queries.get(r);if(o){const l=o.J_.indexOf(e);l>=0&&(o.J_.splice(l,1),o.J_.length===0?i=e.Z_()?0:1:!o.Y_()&&e.Z_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function C4(n,e){const t=Pe(n);let r=!1;for(const i of e){const o=i.query,l=t.queries.get(o);if(l){for(const c of l.J_)c.ta(i)&&(r=!0);l.H_=i}}r&&zy(t)}function b4(n,e,t){const r=Pe(n),i=r.queries.get(e);if(i)for(const o of i.J_)o.onError(t);r.queries.delete(e)}function zy(n){n.X_.forEach(e=>{e.next()})}var a_,AI;(AI=a_||(a_={})).na="default",AI.Cache="cache";class R4{constructor(e,t,r){this.query=e,this.ra=t,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=r||{}}ta(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Ka(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ia?this.oa(e)&&(this.ra.next(e),t=!0):this._a(e,this.onlineState)&&(this.aa(e),t=!0),this.sa=e,t}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let t=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),t=!0),t}_a(e,t){if(!e.fromCache||!this.Z_())return!0;const r=t!=="Offline";return(!this.options.ua||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const t=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}aa(e){e=Ka.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==a_.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(e){this.key=e}}class iR{constructor(e){this.key=e}}class A4{constructor(e,t){this.query=e,this.da=t,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=Be(),this.mutatedKeys=Be(),this.Va=Sb(e),this.ma=new Ma(this.Va)}get fa(){return this.da}ga(e,t){const r=t?t.pa:new bI,i=t?t.ma:this.ma;let o=t?t.mutatedKeys:this.mutatedKeys,l=i,c=!1;const d=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,p=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((_,m)=>{const y=i.get(_),w=qf(this.query,m)?m:null,S=!!y&&this.mutatedKeys.has(y.key),b=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let C=!1;y&&w?y.data.isEqual(w.data)?S!==b&&(r.track({type:3,doc:w}),C=!0):this.ya(y,w)||(r.track({type:2,doc:w}),C=!0,(d&&this.Va(w,d)>0||p&&this.Va(w,p)<0)&&(c=!0)):!y&&w?(r.track({type:0,doc:w}),C=!0):y&&!w&&(r.track({type:1,doc:y}),C=!0,(d||p)&&(c=!0)),C&&(w?(l=l.add(w),o=b?o.add(_):o.delete(_)):(l=l.delete(_),o=o.delete(_)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const _=this.query.limitType==="F"?l.last():l.first();l=l.delete(_.key),o=o.delete(_.key),r.track({type:1,doc:_})}return{ma:l,pa:r,ss:c,mutatedKeys:o}}ya(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const o=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const l=e.pa.j_();l.sort((_,m)=>function(w,S){const b=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae()}};return b(w)-b(S)}(_.type,m.type)||this.Va(_.doc,m.doc)),this.wa(r),i=i!=null&&i;const c=t&&!i?this.Sa():[],d=this.Ra.size===0&&this.current&&!i?1:0,p=d!==this.Aa;return this.Aa=d,l.length!==0||p?{snapshot:new Ka(this.query,e.ma,o,l,e.mutatedKeys,d===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),ba:c}:{ba:c}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new bI,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.da.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(t=>this.da=this.da.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.da=this.da.delete(t)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=Be(),this.ma.forEach(r=>{this.Da(r.key)&&(this.Ra=this.Ra.add(r.key))});const t=[];return e.forEach(r=>{this.Ra.has(r)||t.push(new iR(r))}),this.Ra.forEach(r=>{e.has(r)||t.push(new rR(r))}),t}va(e){this.da=e.ds,this.Ra=Be();const t=this.ga(e.documents);return this.applyChanges(t,!0)}Ca(){return Ka.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class x4{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class P4{constructor(e){this.key=e,this.Fa=!1}}class k4{constructor(e,t,r,i,o,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Ma={},this.xa=new No(c=>Ib(c),Gf),this.Oa=new Map,this.Na=new Set,this.La=new gt(Te.comparator),this.Ba=new Map,this.ka=new Dy,this.qa={},this.Qa=new Map,this.Ka=qa.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function N4(n,e,t=!0){const r=cR(n);let i;const o=r.xa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Ca()):i=await sR(r,e,t,!0),i}async function D4(n,e){const t=cR(n);await sR(t,e,!0,!1)}async function sR(n,e,t,r){const i=await JF(n.localStore,Xr(e)),o=i.targetId,l=n.sharedClientState.addLocalQueryTarget(o,t);let c;return r&&(c=await O4(n,e,o,l==="current",i.resumeToken)),n.isPrimaryClient&&t&&Xb(n.remoteStore,i),c}async function O4(n,e,t,r,i){n.Ua=(m,y,w)=>async function(b,C,k,N){let j=C.view.ga(k);j.ss&&(j=await TI(b.localStore,C.query,!1).then(({documents:x})=>C.view.ga(x,j)));const H=N&&N.targetChanges.get(C.targetId),Y=N&&N.targetMismatches.get(C.targetId)!=null,X=C.view.applyChanges(j,b.isPrimaryClient,H,Y);return PI(b,C.targetId,X.ba),X.snapshot}(n,m,y,w);const o=await TI(n.localStore,e,!0),l=new A4(e,o.ds),c=l.ga(o.documents),d=Nc.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),p=l.applyChanges(c,n.isPrimaryClient,d);PI(n,t,p.ba);const _=new x4(e,t,l);return n.xa.set(e,_),n.Oa.has(t)?n.Oa.get(t).push(e):n.Oa.set(t,[e]),p.snapshot}async function L4(n,e,t){const r=Pe(n),i=r.xa.get(e),o=r.Oa.get(i.targetId);if(o.length>1)return r.Oa.set(i.targetId,o.filter(l=>!Gf(l,e))),void r.xa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await o_(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&My(r.remoteStore,i.targetId),l_(r,i.targetId)}).catch(ul)):(l_(r,i.targetId),await o_(r.localStore,i.targetId,!0))}async function M4(n,e){const t=Pe(n),r=t.xa.get(e),i=t.Oa.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),My(t.remoteStore,r.targetId))}async function V4(n,e,t){const r=W4(n);try{const i=await function(l,c){const d=Pe(l),p=Ut.now(),_=c.reduce((w,S)=>w.add(S.key),Be());let m,y;return d.persistence.runTransaction("Locally write mutations","readwrite",w=>{let S=Oi(),b=Be();return d.hs.getEntries(w,_).next(C=>{S=C,S.forEach((k,N)=>{N.isValidDocument()||(b=b.add(k))})}).next(()=>d.localDocuments.getOverlayedDocuments(w,S)).next(C=>{m=C;const k=[];for(const N of c){const j=ZV(N,m.get(N.key).overlayedDocument);j!=null&&k.push(new Do(N.key,j,gb(j.value.mapValue),Ai.exists(!0)))}return d.mutationQueue.addMutationBatch(w,p,k,c)}).next(C=>{y=C;const k=C.applyToLocalDocumentSet(m,b);return d.documentOverlayCache.saveOverlays(w,C.batchId,k)})}).then(()=>({batchId:y.batchId,changes:bb(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(l,c,d){let p=l.qa[l.currentUser.toKey()];p||(p=new gt(ze)),p=p.insert(c,d),l.qa[l.currentUser.toKey()]=p}(r,i.batchId,t),await Oc(r,i.changes),await Zf(r.remoteStore)}catch(i){const o=jy(i,"Failed to persist write");t.reject(o)}}async function oR(n,e){const t=Pe(n);try{const r=await QF(t.localStore,e);e.targetChanges.forEach((i,o)=>{const l=t.Ba.get(o);l&&(et(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.Fa=!0:i.modifiedDocuments.size>0?et(l.Fa):i.removedDocuments.size>0&&(et(l.Fa),l.Fa=!1))}),await Oc(t,r,e)}catch(r){await ul(r)}}function xI(n,e,t){const r=Pe(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.xa.forEach((o,l)=>{const c=l.view.ea(e);c.snapshot&&i.push(c.snapshot)}),function(l,c){const d=Pe(l);d.onlineState=c;let p=!1;d.queries.forEach((_,m)=>{for(const y of m.J_)y.ea(c)&&(p=!0)}),p&&zy(d)}(r.eventManager,e),i.length&&r.Ma.R_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function F4(n,e,t){const r=Pe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Ba.get(e),o=i&&i.key;if(o){let l=new gt(Te.comparator);l=l.insert(o,hn.newNoDocument(o,xe.min()));const c=Be().add(o),d=new Yf(xe.min(),new Map,new gt(ze),l,c);await oR(r,d),r.La=r.La.remove(o),r.Ba.delete(e),$y(r)}else await o_(r.localStore,e,!1).then(()=>l_(r,e,t)).catch(ul)}async function U4(n,e){const t=Pe(n),r=e.batch.batchId;try{const i=await KF(t.localStore,e);lR(t,r,null),aR(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Oc(t,i)}catch(i){await ul(i)}}async function B4(n,e,t){const r=Pe(n);try{const i=await function(l,c){const d=Pe(l);return d.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let _;return d.mutationQueue.lookupMutationBatch(p,c).next(m=>(et(m!==null),_=m.keys(),d.mutationQueue.removeMutationBatch(p,m))).next(()=>d.mutationQueue.performConsistencyCheck(p)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(p,_,c)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,_)).next(()=>d.localDocuments.getDocuments(p,_))})}(r.localStore,e);lR(r,e,t),aR(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Oc(r,i)}catch(i){await ul(i)}}function aR(n,e){(n.Qa.get(e)||[]).forEach(t=>{t.resolve()}),n.Qa.delete(e)}function lR(n,e,t){const r=Pe(n);let i=r.qa[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.qa[r.currentUser.toKey()]=i}}function l_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Oa.get(e))n.xa.delete(r),t&&n.Ma.Wa(r,t);n.Oa.delete(e),n.isPrimaryClient&&n.ka.yr(e).forEach(r=>{n.ka.containsKey(r)||uR(n,r)})}function uR(n,e){n.Na.delete(e.path.canonicalString());const t=n.La.get(e);t!==null&&(My(n.remoteStore,t),n.La=n.La.remove(e),n.Ba.delete(t),$y(n))}function PI(n,e,t){for(const r of t)r instanceof rR?(n.ka.addReference(r.key,e),j4(n,r)):r instanceof iR?(de("SyncEngine","Document no longer in limbo: "+r.key),n.ka.removeReference(r.key,e),n.ka.containsKey(r.key)||uR(n,r.key)):Ae()}function j4(n,e){const t=e.key,r=t.path.canonicalString();n.La.get(t)||n.Na.has(r)||(de("SyncEngine","New document in limbo: "+t),n.Na.add(r),$y(n))}function $y(n){for(;n.Na.size>0&&n.La.size<n.maxConcurrentLimboResolutions;){const e=n.Na.values().next().value;n.Na.delete(e);const t=new Te(Et.fromString(e)),r=n.Ka.next();n.Ba.set(r,new P4(t)),n.La=n.La.insert(t,r),Xb(n.remoteStore,new hs(Xr(Ay(t.path)),r,"TargetPurposeLimboResolution",zf.oe))}}async function Oc(n,e,t){const r=Pe(n),i=[],o=[],l=[];r.xa.isEmpty()||(r.xa.forEach((c,d)=>{l.push(r.Ua(d,e,t).then(p=>{var _;if((p||t)&&r.isPrimaryClient){const m=p?!p.fromCache:(_=t==null?void 0:t.targetChanges.get(d.targetId))===null||_===void 0?void 0:_.current;r.sharedClientState.updateQueryState(d.targetId,m?"current":"not-current")}if(p){i.push(p);const m=Ly.zi(d.targetId,p);o.push(m)}}))}),await Promise.all(l),r.Ma.R_(i),await async function(d,p){const _=Pe(d);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>Z.forEach(p,y=>Z.forEach(y.Wi,w=>_.persistence.referenceDelegate.addReference(m,y.targetId,w)).next(()=>Z.forEach(y.Gi,w=>_.persistence.referenceDelegate.removeReference(m,y.targetId,w)))))}catch(m){if(!cl(m))throw m;de("LocalStore","Failed to update sequence numbers: "+m)}for(const m of p){const y=m.targetId;if(!m.fromCache){const w=_.us.get(y),S=w.snapshotVersion,b=w.withLastLimboFreeSnapshotVersion(S);_.us=_.us.insert(y,b)}}}(r.localStore,o))}async function z4(n,e){const t=Pe(n);if(!t.currentUser.isEqual(e)){de("SyncEngine","User change. New user:",e.toKey());const r=await qb(t.localStore,e);t.currentUser=e,function(o,l){o.Qa.forEach(c=>{c.forEach(d=>{d.reject(new we(re.CANCELLED,l))})}),o.Qa.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Oc(t,r.Ts)}}function $4(n,e){const t=Pe(n),r=t.Ba.get(e);if(r&&r.Fa)return Be().add(r.key);{let i=Be();const o=t.Oa.get(e);if(!o)return i;for(const l of o){const c=t.xa.get(l);i=i.unionWith(c.view.fa)}return i}}function cR(n){const e=Pe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=oR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=F4.bind(null,e),e.Ma.R_=C4.bind(null,e.eventManager),e.Ma.Wa=b4.bind(null,e.eventManager),e}function W4(n){const e=Pe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=U4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=B4.bind(null,e),e}class rf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Xf(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,t){return null}Ya(e,t){return null}Ha(e){return qF(this.persistence,new HF,e.initialUser,this.serializer)}ja(e){return new Gb(Oy.ei,this.serializer)}za(e){return new e4}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}rf.provider={build:()=>new rf};class H4 extends rf{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,t){et(this.persistence.referenceDelegate instanceof tf);const r=this.persistence.referenceDelegate.garbageCollector;return new PF(r,e.asyncQueue,t)}ja(e){const t=this.cacheSizeBytes!==void 0?Nn.withCacheSize(this.cacheSizeBytes):Nn.DEFAULT;return new Gb(r=>tf.ei(r,t),this.serializer)}}class u_{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>xI(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=z4.bind(null,this.syncEngine),await E4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new T4}()}createDatastore(e){const t=Xf(e.databaseInfo.databaseId),r=function(o){return new i4(o)}(e.databaseInfo);return function(o,l,c,d){return new a4(o,l,c,d)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,o,l,c){return new u4(r,i,o,l,c)}(this.localStore,this.datastore,e.asyncQueue,t=>xI(this.syncEngine,t,0),function(){return SI.p()?new SI:new t4}())}createSyncEngine(e,t){return function(i,o,l,c,d,p,_){const m=new k4(i,o,l,c,d,p);return _&&(m.$a=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const o=Pe(i);de("RemoteStore","RemoteStore shutting down."),o.k_.add(5),await Dc(o),o.Q_.shutdown(),o.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}u_.provider={build:()=>new u_};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G4{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):Di("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q4{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=dn.UNAUTHENTICATED,this.clientId=fb.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async l=>{de("FirestoreClient","Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(r,l=>(de("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new _s;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=jy(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function rg(n,e){n.asyncQueue.verifyOperationInProgress(),de("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await qb(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function kI(n,e){n.asyncQueue.verifyOperationInProgress();const t=await K4(n);de("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>CI(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>CI(e.remoteStore,i)),n._onlineComponents=e}async function K4(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){de("FirestoreClient","Using user provided OfflineComponentProvider");try{await rg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===re.FAILED_PRECONDITION||i.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;$a("Error using user provided cache. Falling back to memory cache: "+t),await rg(n,new rf)}}else de("FirestoreClient","Using default OfflineComponentProvider"),await rg(n,new H4(void 0));return n._offlineComponents}async function dR(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(de("FirestoreClient","Using user provided OnlineComponentProvider"),await kI(n,n._uninitializedComponentsProvider._online)):(de("FirestoreClient","Using default OnlineComponentProvider"),await kI(n,new u_))),n._onlineComponents}function Q4(n){return dR(n).then(e=>e.syncEngine)}async function Y4(n){const e=await dR(n),t=e.eventManager;return t.onListen=N4.bind(null,e.syncEngine),t.onUnlisten=L4.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=D4.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=M4.bind(null,e.syncEngine),t}function X4(n,e,t={}){const r=new _s;return n.asyncQueue.enqueueAndForget(async()=>function(o,l,c,d,p){const _=new G4({next:y=>{_.eu(),l.enqueueAndForget(()=>S4(o,m));const w=y.docs.has(c);!w&&y.fromCache?p.reject(new we(re.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&y.fromCache&&d&&d.source==="server"?p.reject(new we(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(y)},error:y=>p.reject(y)}),m=new R4(Ay(c.path),_,{includeMetadataChanges:!0,ua:!0});return I4(o,m)}(await Y4(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hR(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NI=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J4(n,e,t){if(!t)throw new we(re.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Z4(n,e,t,r){if(e===!0&&r===!0)throw new we(re.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function DI(n){if(!Te.isDocumentKey(n))throw new we(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Wy(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ae()}function oc(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new we(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Wy(n);throw new we(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new we(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new we(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Z4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=hR((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new we(re.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new we(re.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new we(re.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Hy{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new OI({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new we(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new we(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new OI(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new sV;switch(r.type){case"firstParty":return new uV(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new we(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=NI.get(t);r&&(de("ComponentProvider","Removing Datastore"),NI.delete(t),r.terminate())}(this),Promise.resolve()}}function eU(n,e,t,r={}){var i;const o=(n=oc(n,Hy))._getSettings(),l=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==l&&$a("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:l,ssl:!1})),r.mockUserToken){let c,d;if(typeof r.mockUserToken=="string")c=r.mockUserToken,d=dn.MOCK_USER;else{c=qS(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new we(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new dn(p)}n._authCredentials=new oV(new hb(c,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Gy(this.firestore,e,this._query)}}class ir{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ac(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ir(this.firestore,e,this._key)}}class ac extends Gy{constructor(e,t,r){super(e,t,Ay(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ir(this.firestore,null,new Te(e))}withConverter(e){return new ac(this.firestore,e,this._path)}}function c_(n,e,...t){if(n=xt(n),arguments.length===1&&(e=fb.newId()),J4("doc","path",e),n instanceof Hy){const r=Et.fromString(e,...t);return DI(r),new ir(n,null,new Te(r))}{if(!(n instanceof ir||n instanceof ac))throw new we(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Et.fromString(e,...t));return DI(r),new ir(n.firestore,n instanceof ac?n.converter:null,new Te(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(e=Promise.resolve()){this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new Qb(this,"async_queue_retry"),this.fu=()=>{const r=ng();r&&de("AsyncQueue","Visibility state changed to "+r.visibilityState),this.r_.Jo()},this.gu=e;const t=ng();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.Eu){this.Eu=!0,this.Vu=e||!1;const t=ng();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.Eu)return new Promise(()=>{});const t=new _s;return this.yu(()=>this.Eu&&this.Vu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!cl(e))throw e;de("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const t=this.gu.then(()=>(this.Ru=!0,e().catch(r=>{this.Au=r,this.Ru=!1;const i=function(l){let c=l.message||"";return l.stack&&(c=l.stack.includes(l.message)?l.stack:l.message+`
`+l.stack),c}(r);throw Di("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Ru=!1,r))));return this.gu=t,t}enqueueAfterDelay(e,t,r){this.pu(),this.mu.indexOf(e)>-1&&(t=0);const i=By.createAndSchedule(this,e,t,r,o=>this.Su(o));return this.du.push(i),i}pu(){this.Au&&Ae()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const t of this.du)if(t.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.du.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.du)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const t=this.du.indexOf(e);this.du.splice(t,1)}}class qy extends Hy{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new LI,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new LI(e),this._firestoreClient=void 0,await e}}}function tU(n,e){const t=typeof n=="object"?n:k_(),r=typeof n=="string"?n:"(default)",i=Tf(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=WS("firestore");o&&eU(i,...o)}return i}function fR(n){if(n._terminated)throw new we(re.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||nU(n),n._firestoreClient}function nU(n){var e,t,r;const i=n._freezeSettings(),o=function(c,d,p,_){return new SV(c,d,p,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,hR(_.experimentalLongPollingOptions),_.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new q4(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(c){const d=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(d),_online:d}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Qa(sn.fromBase64String(e))}catch(t){throw new we(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Qa(sn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ky{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new we(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qy{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new we(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new we(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ze(this._lat,e._lat)||ze(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yy{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rU=/^__.*__$/;class iU{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Do(e,this.data,this.fieldMask,t,this.fieldTransforms):new kc(e,this.data,t,this.fieldTransforms)}}function mR(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae()}}class Xy{constructor(e,t,r,i,o,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Fu(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new Xy(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.xu({path:r,Nu:!1});return i.Lu(e),i}Bu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.xu({path:r,Nu:!1});return i.Fu(),i}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return sf(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Lu(this.path.get(e))}Lu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(mR(this.Mu)&&rU.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class sU{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Xf(e)}$u(e,t,r,i=!1){return new Xy({Mu:e,methodName:t,Ku:r,path:tn.emptyPath(),Nu:!1,Qu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function oU(n){const e=n._freezeSettings(),t=Xf(n._databaseId);return new sU(n._databaseId,!!e.ignoreUndefinedProperties,t)}function aU(n,e,t,r,i,o={}){const l=n.$u(o.merge||o.mergeFields?2:0,e,t,i);vR("Data must be an object, but it was:",l,r);const c=_R(r,l);let d,p;if(o.merge)d=new br(l.fieldMask),p=l.fieldTransforms;else if(o.mergeFields){const _=[];for(const m of o.mergeFields){const y=lU(e,m,t);if(!l.contains(y))throw new we(re.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);cU(_,y)||_.push(y)}d=new br(_),p=l.fieldTransforms.filter(m=>d.covers(m.field))}else d=null,p=l.fieldTransforms;return new iU(new tr(c),d,p)}function gR(n,e){if(yR(n=xt(n)))return vR("Unsupported field value:",e,n),_R(n,e);if(n instanceof pR)return function(r,i){if(!mR(i.Mu))throw i.qu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.qu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(r,i){const o=[];let l=0;for(const c of r){let d=gR(c,i.ku(l));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),l++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=xt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return qV(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=Ut.fromDate(r);return{timestampValue:ef(i.serializer,o)}}if(r instanceof Ut){const o=new Ut(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ef(i.serializer,o)}}if(r instanceof Qy)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Qa)return{bytesValue:Ub(i.serializer,r._byteString)};if(r instanceof ir){const o=i.databaseId,l=r.firestore._databaseId;if(!l.isEqual(o))throw i.qu(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Ny(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Yy)return function(l,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:l.toArray().map(d=>{if(typeof d!="number")throw c.qu("VectorValues must only contain numeric values.");return xy(c.serializer,d)})}}}}}}(r,i);throw i.qu(`Unsupported field value: ${Wy(r)}`)}(n,e)}function _R(n,e){const t={};return pb(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ko(n,(r,i)=>{const o=gR(i,e.Ou(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function yR(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ut||n instanceof Qy||n instanceof Qa||n instanceof ir||n instanceof pR||n instanceof Yy)}function vR(n,e,t){if(!yR(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const r=Wy(t);throw r==="an object"?e.qu(n+" a custom object"):e.qu(n+" "+r)}}function lU(n,e,t){if((e=xt(e))instanceof Ky)return e._internalPath;if(typeof e=="string")return ER(n,e);throw sf("Field path arguments must be of type string or ",n,!1,void 0,t)}const uU=new RegExp("[~\\*/\\[\\]]");function ER(n,e,t){if(e.search(uU)>=0)throw sf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ky(...e.split("."))._internalPath}catch{throw sf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function sf(n,e,t,r,i){const o=r&&!r.isEmpty(),l=i!==void 0;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let d="";return(o||l)&&(d+=" (found",o&&(d+=` in field ${r}`),l&&(d+=` in document ${i}`),d+=")"),new we(re.INVALID_ARGUMENT,c+n+d)}function cU(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new ir(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new dU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(TR("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class dU extends wR{data(){return super.data()}}function TR(n,e){return typeof e=="string"?ER(n,e):e instanceof Ky?e._internalPath:e._delegate._internalPath}class hU{convertValue(e,t="none"){switch(As(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ct(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Rs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ae()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return ko(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;const o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(l=>Ct(l.doubleValue));return new Yy(o)}convertGeoPoint(e){return new Qy(Ct(e.latitude),Ct(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Wf(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(tc(e));default:return null}}convertTimestamp(e){const t=bs(e);return new Ut(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Et.fromString(e);et(Hb(r));const i=new nc(r.get(1),r.get(3)),o=new Te(r.popFirst(5));return i.isEqual(t)||Di(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fU(n,e,t){let r;return r=n?n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pU{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class IR extends wR{constructor(e,t,r,i,o,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new mU(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(TR("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class mU extends IR{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gU(n){n=oc(n,ir);const e=oc(n.firestore,qy);return X4(fR(e),n._key).then(t=>vU(e,n,t))}class _U extends hU{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ir(this.firestore,null,t)}}function MI(n,e,t){n=oc(n,ir);const r=oc(n.firestore,qy),i=fU(n.converter,e);return yU(r,[aU(oU(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Ai.none())])}function yU(n,e){return function(r,i){const o=new _s;return r.asyncQueue.enqueueAndForget(async()=>V4(await Q4(r),i,o)),o.promise}(fR(n),e)}function vU(n,e,t){const r=t.docs.get(e._key),i=new _U(n);return new IR(n,i,e._key,r,new pU(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){ll=i})(Ao),vo(new ws("firestore",(r,{instanceIdentifier:i,options:o})=>{const l=r.getProvider("app").getImmediate(),c=new qy(new aV(r.getProvider("auth-internal")),new dV(r.getProvider("app-check-internal")),function(p,_){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new we(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new nc(p.options.projectId,_)}(l,i),l);return o=Object.assign({useFetchStreams:t},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),Qr(ZT,"4.7.5",e),Qr(ZT,"4.7.5","esm2017")})();const EU={apiKey:"AIzaSyDf6mWjzzgsmhOqUE4CYjGwjLktbNa7KEA",authDomain:"kanban-board-fc705.firebaseapp.com",databaseURL:"https://kanban-board-fc705-default-rtdb.firebaseio.com",projectId:"kanban-board-fc705",storageBucket:"kanban-board-fc705.appspot.com",messagingSenderId:"851738181435",appId:"1:851738181435:web:478cef19906f600b7c811e"},Jy=JS(EU),ig=bf(Jy);Kr(Jy);const SR=tU(Jy),wU=()=>{const n=ks(),[e,t]=M.useState(!1),[r,i]=M.useState(""),[o,l]=M.useState(""),[c,d]=M.useState("");M.useEffect(()=>{const m=SC(ig,y=>{y&&n("/home")});return()=>m()},[n]);const p=async()=>{t(!0),LC(ig,new Hr).then(()=>{n("/home")}).catch(m=>{Re.error(m),t(!1)})},_=async()=>{t(!0),d(""),Y1(ig,r,o).then(()=>{n("/home")}).catch(m=>{Re.error(m),d(m.message),t(!1)})};return q.jsxs("div",{className:"w-full h-screen flex",children:[q.jsx("div",{className:"w-1/2 h-full flex flex-col bg-[#282c34] items-center justify-center"}),q.jsxs("div",{className:"w-1/2 h-full bg-[#1a1a1a] flex flex-col p-20 justify-center",children:[q.jsxs("div",{className:"w-full flex flex-col max-w-[450px] mx-auto",children:[q.jsxs("div",{className:"w-full flex flex-col mb-10 text-white",children:[q.jsx("h3",{className:"text-4xl font-bold mb-2",children:"Login"}),q.jsx("p",{className:"text-lg mb-4",children:"Welcome Back! Please enter your details."})]}),q.jsxs("div",{className:"w-full flex flex-col mb-6",children:[q.jsx("input",{type:"email",placeholder:"Email",className:"w-full text-white py-2 mb-4 bg-transparent border-b border-gray-500 focus:outline-none focus:border-white",value:r,onChange:m=>i(m.target.value)}),q.jsx("input",{type:"password",placeholder:"Password",className:"w-full text-white py-2 mb-4 bg-transparent border-b border-gray-500 focus:outline-none focus:border-white",value:o,onChange:m=>l(m.target.value)})]}),q.jsx("div",{className:"w-full flex flex-col mb-4",children:q.jsx("button",{className:"w-full bg-transparent border border-white text-white my-2 font-semibold rounded-md p-4 text-center flex items-center justify-center cursor-pointer",onClick:_,disabled:e,children:"Log In With Email and Password"})}),c&&q.jsx("div",{className:"text-red-500 mb-4",children:c}),q.jsxs("div",{className:"w-full flex items-center justify-center relative py-4",children:[q.jsx("div",{className:"w-full h-[1px] bg-gray-500"}),q.jsx("p",{className:"text-lg absolute text-gray-500 bg-[#1a1a1a] px-2",children:"OR"})]}),q.jsx("button",{className:"w-full bg-white text-black font-semibold rounded-md p-4 text-center flex items-center justify-center cursor-pointer mt-7",onClick:p,disabled:e,children:"Log In With Google"})]}),q.jsx("div",{className:"w-full flex items-center justify-center mt-10",children:q.jsxs("p",{className:"text-sm font-normal text-gray-400",children:["Don't have an account? ",q.jsx("span",{className:"font-semibold text-white cursor-pointer underline",children:q.jsx("a",{href:"/signup",children:"Sign Up"})})]})})]})]})},TU=()=>{const n=bf(),e=SR,t=ks(),[r,i]=M.useState(!1),[o,l]=M.useState(""),[c,d]=M.useState(""),[p,_]=M.useState(""),[m,y]=M.useState(""),[w,S]=M.useState(""),b=async()=>{i(!0),LC(n,new Hr).then(async k=>{const N=k.user,j={uid:N.uid,name:N.displayName||c,email:N.email,role:"contributor",createdAt:new Date};await MI(c_(e,"users",N.uid),j).then(()=>{t("/home")}).catch(()=>{S("Failed to store user data.")})}).catch(k=>{Re.error(k),i(!1)})},C=async()=>{if(p!==m){S("Passwords do not match");return}i(!0),S(""),Q1(n,o,p).then(async k=>{const N=k.user,j={uid:N.uid,name:c,email:N.email,role:"contributor",createdAt:new Date};await MI(c_(e,"users",N.uid),j).then(()=>{t("/home")}).catch(H=>{Re.error("Error storing user data in Firestore:",H),S("Failed to store user data.")})}).catch(k=>{Re.error(k),S(k.message),i(!1)})};return q.jsxs("div",{className:"w-full h-screen flex flex-col md:flex-row",children:[q.jsx("div",{className:"w-full md:w-1/2 h-full bg-[#282c34] flex items-center justify-center"}),q.jsxs("div",{className:"w-full md:w-1/2 h-full bg-[#1a1a1a] flex flex-col p-5 justify-center",children:[q.jsxs("div",{className:"w-full flex flex-col max-w-[450px] mx-auto",children:[q.jsxs("div",{className:"w-full flex flex-col mb-10 text-white text-center md:text-left",children:[q.jsx("h3",{className:"text-3xl md:text-4xl font-bold mb-2",children:"Sign Up"}),q.jsx("p",{className:"text-lg mb-1",children:"Welcome! Please enter your information below to begin."})]}),q.jsxs("div",{className:"w-full flex flex-col mb-3",children:[q.jsx("input",{type:"text",placeholder:"User Name",className:"w-full text-white py-2 mb-2 bg-transparent border-b border-gray-500 focus:outline-none focus:border-white",value:c,onChange:k=>d(k.target.value)}),q.jsx("input",{type:"email",placeholder:"Email",className:"w-full text-white py-2 mb-2 bg-transparent border-b border-gray-500 focus:outline-none focus:border-white",value:o,onChange:k=>l(k.target.value)}),q.jsx("input",{type:"password",placeholder:"Password",className:"w-full text-white py-2 mb-2 bg-transparent border-b border-gray-500 focus:outline-none focus:border-white",value:p,onChange:k=>_(k.target.value)}),q.jsx("input",{type:"password",placeholder:"Re-Enter Password",className:"w-full text-white py-2 mb-2 bg-transparent border-b border-gray-500 focus:outline-none focus:border-white",value:m,onChange:k=>y(k.target.value)})]}),w&&q.jsx("div",{className:"text-red-500 mb-4",children:w}),q.jsx("div",{className:"w-full flex flex-col mb-1",children:q.jsx("button",{onClick:C,disabled:r,className:"w-full bg-transparent border border-white text-white my-2 font-semibold rounded-md p-4 text-center flex items-center justify-center cursor-pointer",children:"Sign Up With Email and Password"})}),q.jsxs("div",{className:"w-full flex items-center justify-center relative py-4",children:[q.jsx("div",{className:"w-full h-[1px] bg-gray-500"}),q.jsx("p",{className:"text-lg absolute text-gray-500 bg-[#1a1a1a] px-2",children:"OR"})]}),q.jsx("button",{onClick:b,disabled:r,className:"w-full bg-white text-black font-semibold rounded-md p-4 text-center flex items-center justify-center cursor-pointer mt-1",children:"Sign Up With Google"})]}),q.jsx("div",{className:"w-full flex items-center justify-center mt-2",children:q.jsxs("p",{className:"text-sm font-normal text-gray-400",children:["Already have an account?"," ",q.jsx("span",{className:"font-semibold text-white cursor-pointer underline",children:q.jsx("a",{href:"/login",children:"Log In"})})]})})]})]})};function vn(n){return`Minified Redux error #${n}; visit https://redux.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}var IU=typeof Symbol=="function"&&Symbol.observable||"@@observable",VI=IU,sg=()=>Math.random().toString(36).substring(7).split("").join("."),SU={INIT:`@@redux/INIT${sg()}`,REPLACE:`@@redux/REPLACE${sg()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${sg()}`},FI=SU;function CU(n){if(typeof n!="object"||n===null)return!1;let e=n;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e||Object.getPrototypeOf(n)===null}function CR(n,e,t){if(typeof n!="function")throw new Error(vn(2));if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(vn(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(vn(1));return t(CR)(n,e)}let r=n,i=e,o=new Map,l=o,c=0,d=!1;function p(){l===o&&(l=new Map,o.forEach((C,k)=>{l.set(k,C)}))}function _(){if(d)throw new Error(vn(3));return i}function m(C){if(typeof C!="function")throw new Error(vn(4));if(d)throw new Error(vn(5));let k=!0;p();const N=c++;return l.set(N,C),function(){if(k){if(d)throw new Error(vn(6));k=!1,p(),l.delete(N),o=null}}}function y(C){if(!CU(C))throw new Error(vn(7));if(typeof C.type>"u")throw new Error(vn(8));if(typeof C.type!="string")throw new Error(vn(17));if(d)throw new Error(vn(9));try{d=!0,i=r(i,C)}finally{d=!1}return(o=l).forEach(N=>{N()}),C}function w(C){if(typeof C!="function")throw new Error(vn(10));r=C,y({type:FI.REPLACE})}function S(){const C=m;return{subscribe(k){if(typeof k!="object"||k===null)throw new Error(vn(11));function N(){const H=k;H.next&&H.next(_())}return N(),{unsubscribe:C(N)}},[VI](){return this}}}return y({type:FI.INIT}),{dispatch:y,subscribe:m,getState:_,replaceReducer:w,[VI]:S}}function UI(n,e){return function(...t){return e(n.apply(this,t))}}function BI(n,e){if(typeof n=="function")return UI(n,e);if(typeof n!="object"||n===null)throw new Error(vn(16));const t={};for(const r in n){const i=n[r];typeof i=="function"&&(t[r]=UI(i,e))}return t}function bR(...n){return n.length===0?e=>e:n.length===1?n[0]:n.reduce((e,t)=>(...r)=>e(t(...r)))}function bU(...n){return e=>(t,r)=>{const i=e(t,r);let o=()=>{throw new Error(vn(15))};const l={getState:i.getState,dispatch:(d,...p)=>o(d,...p)},c=n.map(d=>d(l));return o=bR(...c)(i.dispatch),{...i,dispatch:o}}}var og={exports:{}},ag={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jI;function RU(){if(jI)return ag;jI=1;var n=mf();function e(d,p){return d===p&&(d!==0||1/d===1/p)||d!==d&&p!==p}var t=typeof Object.is=="function"?Object.is:e,r=n.useSyncExternalStore,i=n.useRef,o=n.useEffect,l=n.useMemo,c=n.useDebugValue;return ag.useSyncExternalStoreWithSelector=function(d,p,_,m,y){var w=i(null);if(w.current===null){var S={hasValue:!1,value:null};w.current=S}else S=w.current;w=l(function(){function C(Y){if(!k){if(k=!0,N=Y,Y=m(Y),y!==void 0&&S.hasValue){var X=S.value;if(y(X,Y))return j=X}return j=Y}if(X=j,t(N,Y))return X;var x=m(Y);return y!==void 0&&y(X,x)?(N=Y,X):(N=Y,j=x)}var k=!1,N,j,H=_===void 0?null:_;return[function(){return C(p())},H===null?void 0:function(){return C(H())}]},[p,_,m,y]);var b=r(d,w[0],w[1]);return o(function(){S.hasValue=!0,S.value=b},[b]),c(b),b},ag}var zI;function AU(){return zI||(zI=1,og.exports=RU()),og.exports}AU();var xU=M.version.startsWith("19"),PU=Symbol.for(xU?"react.transitional.element":"react.element"),kU=Symbol.for("react.portal"),NU=Symbol.for("react.fragment"),DU=Symbol.for("react.strict_mode"),OU=Symbol.for("react.profiler"),LU=Symbol.for("react.consumer"),MU=Symbol.for("react.context"),RR=Symbol.for("react.forward_ref"),VU=Symbol.for("react.suspense"),FU=Symbol.for("react.suspense_list"),Zy=Symbol.for("react.memo"),UU=Symbol.for("react.lazy"),BU=RR,jU=Zy;function zU(n){if(typeof n=="object"&&n!==null){const{$$typeof:e}=n;switch(e){case PU:switch(n=n.type,n){case NU:case OU:case DU:case VU:case FU:return n;default:switch(n=n&&n.$$typeof,n){case MU:case RR:case UU:case Zy:return n;case LU:return n;default:return e}}case kU:return e}}}function $U(n){return zU(n)===Zy}function WU(n,e,t,r,{areStatesEqual:i,areOwnPropsEqual:o,areStatePropsEqual:l}){let c=!1,d,p,_,m,y;function w(N,j){return d=N,p=j,_=n(d,p),m=e(r,p),y=t(_,m,p),c=!0,y}function S(){return _=n(d,p),e.dependsOnOwnProps&&(m=e(r,p)),y=t(_,m,p),y}function b(){return n.dependsOnOwnProps&&(_=n(d,p)),e.dependsOnOwnProps&&(m=e(r,p)),y=t(_,m,p),y}function C(){const N=n(d,p),j=!l(N,_);return _=N,j&&(y=t(_,m,p)),y}function k(N,j){const H=!o(j,p),Y=!i(N,d,j,p);return d=N,p=j,H&&Y?S():H?b():Y?C():y}return function(j,H){return c?k(j,H):w(j,H)}}function HU(n,{initMapStateToProps:e,initMapDispatchToProps:t,initMergeProps:r,...i}){const o=e(n,i),l=t(n,i),c=r(n,i);return WU(o,l,c,n,i)}function GU(n,e){const t={};for(const r in n){const i=n[r];typeof i=="function"&&(t[r]=(...o)=>e(i(...o)))}return t}function d_(n){return function(t){const r=n(t);function i(){return r}return i.dependsOnOwnProps=!1,i}}function $I(n){return n.dependsOnOwnProps?!!n.dependsOnOwnProps:n.length!==1}function AR(n,e){return function(r,{displayName:i}){const o=function(c,d){return o.dependsOnOwnProps?o.mapToProps(c,d):o.mapToProps(c,void 0)};return o.dependsOnOwnProps=!0,o.mapToProps=function(c,d){o.mapToProps=n,o.dependsOnOwnProps=$I(n);let p=o(c,d);return typeof p=="function"&&(o.mapToProps=p,o.dependsOnOwnProps=$I(p),p=o(c,d)),p},o}}function ev(n,e){return(t,r)=>{throw new Error(`Invalid value of type ${typeof n} for ${e} argument when connecting component ${r.wrappedComponentName}.`)}}function qU(n){return n&&typeof n=="object"?d_(e=>GU(n,e)):n?typeof n=="function"?AR(n):ev(n,"mapDispatchToProps"):d_(e=>({dispatch:e}))}function KU(n){return n?typeof n=="function"?AR(n):ev(n,"mapStateToProps"):d_(()=>({}))}function QU(n,e,t){return{...t,...n,...e}}function YU(n){return function(t,{displayName:r,areMergedPropsEqual:i}){let o=!1,l;return function(d,p,_){const m=n(d,p,_);return o?i(m,l)||(l=m):(o=!0,l=m),l}}}function XU(n){return n?typeof n=="function"?YU(n):ev(n,"mergeProps"):()=>QU}function JU(n){n()}function ZU(){let n=null,e=null;return{clear(){n=null,e=null},notify(){JU(()=>{let t=n;for(;t;)t.callback(),t=t.next})},get(){const t=[];let r=n;for(;r;)t.push(r),r=r.next;return t},subscribe(t){let r=!0;const i=e={callback:t,next:null,prev:e};return i.prev?i.prev.next=i:n=i,function(){!r||n===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:n=i.next)}}}}var WI={notify(){},get:()=>[]};function xR(n,e){let t,r=WI,i=0,o=!1;function l(b){_();const C=r.subscribe(b);let k=!1;return()=>{k||(k=!0,C(),m())}}function c(){r.notify()}function d(){S.onStateChange&&S.onStateChange()}function p(){return o}function _(){i++,t||(t=e?e.addNestedSub(d):n.subscribe(d),r=ZU())}function m(){i--,t&&i===0&&(t(),t=void 0,r.clear(),r=WI)}function y(){o||(o=!0,_())}function w(){o&&(o=!1,m())}const S={addNestedSub:l,notifyNestedSubs:c,handleChangeWrapper:d,isSubscribed:p,trySubscribe:y,tryUnsubscribe:w,getListeners:()=>r};return S}var eB=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",tB=eB(),nB=()=>typeof navigator<"u"&&navigator.product==="ReactNative",rB=nB(),iB=()=>tB||rB?M.useLayoutEffect:M.useEffect,of=iB();function HI(n,e){return n===e?n!==0||e!==0||1/n===1/e:n!==n&&e!==e}function lg(n,e){if(HI(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;const t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(!Object.prototype.hasOwnProperty.call(e,t[i])||!HI(n[t[i]],e[t[i]]))return!1;return!0}var sB={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},oB={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},aB={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},PR={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},lB={[BU]:aB,[jU]:PR};function GI(n){return $U(n)?PR:lB[n.$$typeof]||sB}var uB=Object.defineProperty,cB=Object.getOwnPropertyNames,qI=Object.getOwnPropertySymbols,dB=Object.getOwnPropertyDescriptor,hB=Object.getPrototypeOf,KI=Object.prototype;function h_(n,e){if(typeof e!="string"){if(KI){const o=hB(e);o&&o!==KI&&h_(n,o)}let t=cB(e);qI&&(t=t.concat(qI(e)));const r=GI(n),i=GI(e);for(let o=0;o<t.length;++o){const l=t[o];if(!oB[l]&&!(i&&i[l])&&!(r&&r[l])){const c=dB(e,l);try{uB(n,l,c)}catch{}}}}return n}var ug=Symbol.for("react-redux-context"),cg=typeof globalThis<"u"?globalThis:{};function fB(){if(!M.createContext)return{};const n=cg[ug]??(cg[ug]=new Map);let e=n.get(M.createContext);return e||(e=M.createContext(null),n.set(M.createContext,e)),e}var kR=fB(),pB=[null,null];function mB(n,e,t){of(()=>n(...e),t)}function gB(n,e,t,r,i,o){n.current=r,t.current=!1,i.current&&(i.current=null,o())}function _B(n,e,t,r,i,o,l,c,d,p,_){if(!n)return()=>{};let m=!1,y=null;const w=()=>{if(m||!c.current)return;const b=e.getState();let C,k;try{C=r(b,i.current)}catch(N){k=N,y=N}k||(y=null),C===o.current?l.current||p():(o.current=C,d.current=C,l.current=!0,_())};return t.onStateChange=w,t.trySubscribe(),w(),()=>{if(m=!0,t.tryUnsubscribe(),t.onStateChange=null,y)throw y}}function yB(n,e){return n===e}function vB(n,e,t,{pure:r,areStatesEqual:i=yB,areOwnPropsEqual:o=lg,areStatePropsEqual:l=lg,areMergedPropsEqual:c=lg,forwardRef:d=!1,context:p=kR}={}){const _=p,m=KU(n),y=qU(e),w=XU(t),S=!!n;return C=>{const k=C.displayName||C.name||"Component",N=`Connect(${k})`,j={shouldHandleStateChanges:S,displayName:N,wrappedComponentName:k,WrappedComponent:C,initMapStateToProps:m,initMapDispatchToProps:y,initMergeProps:w,areStatesEqual:i,areStatePropsEqual:l,areOwnPropsEqual:o,areMergedPropsEqual:c};function H(x){const[A,P,L]=M.useMemo(()=>{const{reactReduxForwardedRef:Pt,...In}=x;return[x.context,Pt,In]},[x]),V=M.useMemo(()=>{let Pt=_;return A!=null&&A.Consumer,Pt},[A,_]),B=M.useContext(V),O=!!x.store&&!!x.store.getState&&!!x.store.dispatch,rt=!!B&&!!B.store,Je=O?x.store:B.store,_t=rt?B.getServerState:Je.getState,Ue=M.useMemo(()=>HU(Je.dispatch,j),[Je]),[ie,ye]=M.useMemo(()=>{if(!S)return pB;const Pt=xR(Je,O?void 0:B.subscription),In=Pt.notifyNestedSubs.bind(Pt);return[Pt,In]},[Je,O,B]),ue=M.useMemo(()=>O?B:{...B,subscription:ie},[O,B,ie]),z=M.useRef(void 0),J=M.useRef(L),pe=M.useRef(void 0),ke=M.useRef(!1),Ne=M.useRef(!1),De=M.useRef(void 0);of(()=>(Ne.current=!0,()=>{Ne.current=!1}),[]);const $e=M.useMemo(()=>()=>pe.current&&L===J.current?pe.current:Ue(Je.getState(),L),[Je,L]),Ge=M.useMemo(()=>In=>ie?_B(S,Je,ie,Ue,J,z,ke,Ne,pe,ye,In):()=>{},[ie]);mB(gB,[J,z,ke,L,pe,ye]);let Xe;try{Xe=M.useSyncExternalStore(Ge,$e,_t?()=>Ue(_t(),L):$e)}catch(Pt){throw De.current&&(Pt.message+=`
The error may be correlated with this previous error:
${De.current.stack}

`),Pt}of(()=>{De.current=void 0,pe.current=void 0,z.current=Xe});const yt=M.useMemo(()=>M.createElement(C,{...Xe,ref:P}),[P,C,Xe]);return M.useMemo(()=>S?M.createElement(V.Provider,{value:ue},yt):yt,[V,yt,ue])}const X=M.memo(H);if(X.WrappedComponent=C,X.displayName=H.displayName=N,d){const A=M.forwardRef(function(L,V){return M.createElement(X,{...L,reactReduxForwardedRef:V})});return A.displayName=N,A.WrappedComponent=C,h_(A,C)}return h_(X,C)}}var NR=vB;function EB(n){const{children:e,context:t,serverState:r,store:i}=n,o=M.useMemo(()=>{const d=xR(i);return{store:i,subscription:d,getServerState:r?()=>r:void 0}},[i,r]),l=M.useMemo(()=>i.getState(),[i]);of(()=>{const{subscription:d}=o;return d.onStateChange=d.notifyNestedSubs,d.trySubscribe(),l!==i.getState()&&d.notifyNestedSubs(),()=>{d.tryUnsubscribe(),d.onStateChange=void 0}},[o,l]);const c=t||kR;return M.createElement(c.Provider,{value:o},e)}var wB=EB;function TB(n,e){if(n.length!==e.length)return!1;for(var t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function DR(n,e){var t=M.useState(function(){return{inputs:e,result:n()}})[0],r=M.useRef(!0),i=M.useRef(t),o=r.current||!!(e&&i.current.inputs&&TB(e,i.current.inputs)),l=o?i.current:{inputs:e,result:n()};return M.useEffect(function(){r.current=!1,i.current=l},[l]),l.result}function IB(n,e){return DR(function(){return n},e)}var Ke=DR,_e=IB,SB="Invariant failed";function CB(n,e){throw new Error(SB)}var Rr=function(e){var t=e.top,r=e.right,i=e.bottom,o=e.left,l=r-o,c=i-t,d={top:t,right:r,bottom:i,left:o,width:l,height:c,x:o,y:t,center:{x:(r+o)/2,y:(i+t)/2}};return d},tv=function(e,t){return{top:e.top-t.top,left:e.left-t.left,bottom:e.bottom+t.bottom,right:e.right+t.right}},QI=function(e,t){return{top:e.top+t.top,left:e.left+t.left,bottom:e.bottom-t.bottom,right:e.right-t.right}},bB=function(e,t){return{top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}},dg={top:0,right:0,bottom:0,left:0},nv=function(e){var t=e.borderBox,r=e.margin,i=r===void 0?dg:r,o=e.border,l=o===void 0?dg:o,c=e.padding,d=c===void 0?dg:c,p=Rr(tv(t,i)),_=Rr(QI(t,l)),m=Rr(QI(_,d));return{marginBox:p,borderBox:Rr(t),paddingBox:_,contentBox:m,margin:i,border:l,padding:d}},er=function(e){var t=e.slice(0,-2),r=e.slice(-2);if(r!=="px")return 0;var i=Number(t);return isNaN(i)&&CB(),i},RB=function(){return{x:window.pageXOffset,y:window.pageYOffset}},af=function(e,t){var r=e.borderBox,i=e.border,o=e.margin,l=e.padding,c=bB(r,t);return nv({borderBox:c,border:i,margin:o,padding:l})},lf=function(e,t){return t===void 0&&(t=RB()),af(e,t)},OR=function(e,t){var r={top:er(t.marginTop),right:er(t.marginRight),bottom:er(t.marginBottom),left:er(t.marginLeft)},i={top:er(t.paddingTop),right:er(t.paddingRight),bottom:er(t.paddingBottom),left:er(t.paddingLeft)},o={top:er(t.borderTopWidth),right:er(t.borderRightWidth),bottom:er(t.borderBottomWidth),left:er(t.borderLeftWidth)};return nv({borderBox:e,margin:r,padding:i,border:o})},LR=function(e){var t=e.getBoundingClientRect(),r=window.getComputedStyle(e);return OR(t,r)},YI=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function AB(n,e){return!!(n===e||YI(n)&&YI(e))}function xB(n,e){if(n.length!==e.length)return!1;for(var t=0;t<n.length;t++)if(!AB(n[t],e[t]))return!1;return!0}function qt(n,e){e===void 0&&(e=xB);var t=null;function r(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];if(t&&t.lastThis===this&&e(i,t.lastArgs))return t.lastResult;var l=n.apply(this,i);return t={lastResult:l,lastArgs:i,lastThis:this},l}return r.clear=function(){t=null},r}var lc=function(e){var t=[],r=null,i=function(){for(var l=arguments.length,c=new Array(l),d=0;d<l;d++)c[d]=arguments[d];t=c,!r&&(r=requestAnimationFrame(function(){r=null,e.apply(void 0,t)}))};return i.cancel=function(){r&&(cancelAnimationFrame(r),r=null)},i};function uf(){return uf=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},uf.apply(null,arguments)}function MR(n,e){}MR.bind(null,"warn");MR.bind(null,"error");function ys(){}function PB(n,e){return{...n,...e}}function rr(n,e,t){const r=e.map(i=>{const o=PB(t,i.options);return n.addEventListener(i.eventName,i.fn,o),function(){n.removeEventListener(i.eventName,i.fn,o)}});return function(){r.forEach(o=>{o()})}}const kB="Invariant failed";class cf extends Error{}cf.prototype.toString=function(){return this.message};function ae(n,e){throw new cf(kB)}class NB extends be.Component{constructor(...e){super(...e),this.callbacks=null,this.unbind=ys,this.onWindowError=t=>{const r=this.getCallbacks();r.isDragging()&&r.tryAbort(),t.error instanceof cf&&t.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=t=>{this.callbacks=t}}componentDidMount(){this.unbind=rr(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(e){if(e instanceof cf){this.setState({});return}throw e}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const DB=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,df=n=>n+1,OB=n=>`
  You have lifted an item in position ${df(n.source.index)}
`,VR=(n,e)=>{const t=n.droppableId===e.droppableId,r=df(n.index),i=df(e.index);return t?`
      You have moved the item from position ${r}
      to position ${i}
    `:`
    You have moved the item from position ${r}
    in list ${n.droppableId}
    to list ${e.droppableId}
    in position ${i}
  `},FR=(n,e,t)=>e.droppableId===t.droppableId?`
      The item ${n}
      has been combined with ${t.draggableId}`:`
      The item ${n}
      in list ${e.droppableId}
      has been combined with ${t.draggableId}
      in list ${t.droppableId}
    `,LB=n=>{const e=n.destination;if(e)return VR(n.source,e);const t=n.combine;return t?FR(n.draggableId,n.source,t):"You are over an area that cannot be dropped on"},XI=n=>`
  The item has returned to its starting position
  of ${df(n.index)}
`,MB=n=>{if(n.reason==="CANCEL")return`
      Movement cancelled.
      ${XI(n.source)}
    `;const e=n.destination,t=n.combine;return e?`
      You have dropped the item.
      ${VR(n.source,e)}
    `:t?`
      You have dropped the item.
      ${FR(n.draggableId,n.source,t)}
    `:`
    The item has been dropped while not over a drop area.
    ${XI(n.source)}
  `},Sh={dragHandleUsageInstructions:DB,onDragStart:OB,onDragUpdate:LB,onDragEnd:MB},Kt={x:0,y:0},nn=(n,e)=>({x:n.x+e.x,y:n.y+e.y}),jn=(n,e)=>({x:n.x-e.x,y:n.y-e.y}),vs=(n,e)=>n.x===e.x&&n.y===e.y,hl=n=>({x:n.x!==0?-n.x:0,y:n.y!==0?-n.y:0}),Ro=(n,e,t=0)=>n==="x"?{x:e,y:t}:{x:t,y:e},uc=(n,e)=>Math.sqrt((e.x-n.x)**2+(e.y-n.y)**2),JI=(n,e)=>Math.min(...e.map(t=>uc(n,t))),UR=n=>e=>({x:n(e.x),y:n(e.y)});var VB=(n,e)=>{const t=Rr({top:Math.max(e.top,n.top),right:Math.min(e.right,n.right),bottom:Math.min(e.bottom,n.bottom),left:Math.max(e.left,n.left)});return t.width<=0||t.height<=0?null:t};const Lc=(n,e)=>({top:n.top+e.y,left:n.left+e.x,bottom:n.bottom+e.y,right:n.right+e.x}),ZI=n=>[{x:n.left,y:n.top},{x:n.right,y:n.top},{x:n.left,y:n.bottom},{x:n.right,y:n.bottom}],FB={top:0,right:0,bottom:0,left:0},UB=(n,e)=>e?Lc(n,e.scroll.diff.displacement):n,BB=(n,e,t)=>t&&t.increasedBy?{...n,[e.end]:n[e.end]+t.increasedBy[e.line]}:n,jB=(n,e)=>e&&e.shouldClipSubject?VB(e.pageMarginBox,n):Rr(n);var Ya=({page:n,withPlaceholder:e,axis:t,frame:r})=>{const i=UB(n.marginBox,r),o=BB(i,t,e),l=jB(o,r);return{page:n,withPlaceholder:e,active:l}},rv=(n,e)=>{n.frame||ae();const t=n.frame,r=jn(e,t.scroll.initial),i=hl(r),o={...t,scroll:{initial:t.scroll.initial,current:e,diff:{value:r,displacement:i},max:t.scroll.max}},l=Ya({page:n.subject.page,withPlaceholder:n.subject.withPlaceholder,axis:n.axis,frame:o});return{...n,frame:o,subject:l}};const BR=qt(n=>n.reduce((e,t)=>(e[t.descriptor.id]=t,e),{})),jR=qt(n=>n.reduce((e,t)=>(e[t.descriptor.id]=t,e),{})),ep=qt(n=>Object.values(n)),zB=qt(n=>Object.values(n));var fl=qt((n,e)=>zB(e).filter(r=>n===r.descriptor.droppableId).sort((r,i)=>r.descriptor.index-i.descriptor.index));function iv(n){return n.at&&n.at.type==="REORDER"?n.at.destination:null}function tp(n){return n.at&&n.at.type==="COMBINE"?n.at.combine:null}var np=qt((n,e)=>e.filter(t=>t.descriptor.id!==n.descriptor.id)),$B=({isMovingForward:n,draggable:e,destination:t,insideDestination:r,previousImpact:i})=>{if(!t.isCombineEnabled||!iv(i))return null;function l(w){const S={type:"COMBINE",combine:{draggableId:w,droppableId:t.descriptor.id}};return{...i,at:S}}const c=i.displaced.all,d=c.length?c[0]:null;if(n)return d?l(d):null;const p=np(e,r);if(!d){if(!p.length)return null;const w=p[p.length-1];return l(w.descriptor.id)}const _=p.findIndex(w=>w.descriptor.id===d);_===-1&&ae();const m=_-1;if(m<0)return null;const y=p[m];return l(y.descriptor.id)},pl=(n,e)=>n.descriptor.droppableId===e.descriptor.id;const zR={point:Kt,value:0},cc={invisible:{},visible:{},all:[]},WB={displaced:cc,displacedBy:zR,at:null};var sr=(n,e)=>t=>n<=t&&t<=e,$R=n=>{const e=sr(n.top,n.bottom),t=sr(n.left,n.right);return r=>{if(e(r.top)&&e(r.bottom)&&t(r.left)&&t(r.right))return!0;const o=e(r.top)||e(r.bottom),l=t(r.left)||t(r.right);if(o&&l)return!0;const d=r.top<n.top&&r.bottom>n.bottom,p=r.left<n.left&&r.right>n.right;return d&&p?!0:d&&l||p&&o}},HB=n=>{const e=sr(n.top,n.bottom),t=sr(n.left,n.right);return r=>e(r.top)&&e(r.bottom)&&t(r.left)&&t(r.right)};const sv={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},WR={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var GB=n=>e=>{const t=sr(e.top,e.bottom),r=sr(e.left,e.right);return i=>n===sv?t(i.top)&&t(i.bottom):r(i.left)&&r(i.right)};const qB=(n,e)=>{const t=e.frame?e.frame.scroll.diff.displacement:Kt;return Lc(n,t)},KB=(n,e,t)=>e.subject.active?t(e.subject.active)(n):!1,QB=(n,e,t)=>t(e)(n),ov=({target:n,destination:e,viewport:t,withDroppableDisplacement:r,isVisibleThroughFrameFn:i})=>{const o=r?qB(n,e):n;return KB(o,e,i)&&QB(o,t,i)},YB=n=>ov({...n,isVisibleThroughFrameFn:$R}),HR=n=>ov({...n,isVisibleThroughFrameFn:HB}),XB=n=>ov({...n,isVisibleThroughFrameFn:GB(n.destination.axis)}),JB=(n,e,t)=>{if(typeof t=="boolean")return t;if(!e)return!0;const{invisible:r,visible:i}=e;if(r[n])return!1;const o=i[n];return o?o.shouldAnimate:!0};function ZB(n,e){const t=n.page.marginBox,r={top:e.point.y,right:0,bottom:0,left:e.point.x};return Rr(tv(t,r))}function dc({afterDragging:n,destination:e,displacedBy:t,viewport:r,forceShouldAnimate:i,last:o}){return n.reduce(function(c,d){const p=ZB(d,t),_=d.descriptor.id;if(c.all.push(_),!YB({target:p,destination:e,viewport:r,withDroppableDisplacement:!0}))return c.invisible[d.descriptor.id]=!0,c;const y=JB(_,o,i),w={draggableId:_,shouldAnimate:y};return c.visible[_]=w,c},{all:[],visible:{},invisible:{}})}function e3(n,e){if(!n.length)return 0;const t=n[n.length-1].descriptor.index;return e.inHomeList?t:t+1}function eS({insideDestination:n,inHomeList:e,displacedBy:t,destination:r}){const i=e3(n,{inHomeList:e});return{displaced:cc,displacedBy:t,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:i}}}}function hf({draggable:n,insideDestination:e,destination:t,viewport:r,displacedBy:i,last:o,index:l,forceShouldAnimate:c}){const d=pl(n,t);if(l==null)return eS({insideDestination:e,inHomeList:d,displacedBy:i,destination:t});const p=e.find(S=>S.descriptor.index===l);if(!p)return eS({insideDestination:e,inHomeList:d,displacedBy:i,destination:t});const _=np(n,e),m=e.indexOf(p),y=_.slice(m);return{displaced:dc({afterDragging:y,destination:t,displacedBy:i,last:o,viewport:r.frame,forceShouldAnimate:c}),displacedBy:i,at:{type:"REORDER",destination:{droppableId:t.descriptor.id,index:l}}}}function Ps(n,e){return!!e.effected[n]}var t3=({isMovingForward:n,destination:e,draggables:t,combine:r,afterCritical:i})=>{if(!e.isCombineEnabled)return null;const o=r.draggableId,c=t[o].descriptor.index;return Ps(o,i)?n?c:c-1:n?c+1:c},n3=({isMovingForward:n,isInHomeList:e,insideDestination:t,location:r})=>{if(!t.length)return null;const i=r.index,o=n?i+1:i-1,l=t[0].descriptor.index,c=t[t.length-1].descriptor.index,d=e?c:c+1;return o<l||o>d?null:o},r3=({isMovingForward:n,isInHomeList:e,draggable:t,draggables:r,destination:i,insideDestination:o,previousImpact:l,viewport:c,afterCritical:d})=>{const p=l.at;if(p||ae(),p.type==="REORDER"){const m=n3({isMovingForward:n,isInHomeList:e,location:p.destination,insideDestination:o});return m==null?null:hf({draggable:t,insideDestination:o,destination:i,viewport:c,last:l.displaced,displacedBy:l.displacedBy,index:m})}const _=t3({isMovingForward:n,destination:i,displaced:l.displaced,draggables:r,combine:p.combine,afterCritical:d});return _==null?null:hf({draggable:t,insideDestination:o,destination:i,viewport:c,last:l.displaced,displacedBy:l.displacedBy,index:_})},i3=({displaced:n,afterCritical:e,combineWith:t,displacedBy:r})=>{const i=!!(n.visible[t]||n.invisible[t]);return Ps(t,e)?i?Kt:hl(r.point):i?r.point:Kt},s3=({afterCritical:n,impact:e,draggables:t})=>{const r=tp(e);r||ae();const i=r.draggableId,o=t[i].page.borderBox.center,l=i3({displaced:e.displaced,afterCritical:n,combineWith:i,displacedBy:e.displacedBy});return nn(o,l)};const GR=(n,e)=>e.margin[n.start]+e.borderBox[n.size]/2,o3=(n,e)=>e.margin[n.end]+e.borderBox[n.size]/2,av=(n,e,t)=>e[n.crossAxisStart]+t.margin[n.crossAxisStart]+t.borderBox[n.crossAxisSize]/2,tS=({axis:n,moveRelativeTo:e,isMoving:t})=>Ro(n.line,e.marginBox[n.end]+GR(n,t),av(n,e.marginBox,t)),nS=({axis:n,moveRelativeTo:e,isMoving:t})=>Ro(n.line,e.marginBox[n.start]-o3(n,t),av(n,e.marginBox,t)),a3=({axis:n,moveInto:e,isMoving:t})=>Ro(n.line,e.contentBox[n.start]+GR(n,t),av(n,e.contentBox,t));var l3=({impact:n,draggable:e,draggables:t,droppable:r,afterCritical:i})=>{const o=fl(r.descriptor.id,t),l=e.page,c=r.axis;if(!o.length)return a3({axis:c,moveInto:r.page,isMoving:l});const{displaced:d,displacedBy:p}=n,_=d.all[0];if(_){const y=t[_];if(Ps(_,i))return nS({axis:c,moveRelativeTo:y.page,isMoving:l});const w=af(y.page,p.point);return nS({axis:c,moveRelativeTo:w,isMoving:l})}const m=o[o.length-1];if(m.descriptor.id===e.descriptor.id)return l.borderBox.center;if(Ps(m.descriptor.id,i)){const y=af(m.page,hl(i.displacedBy.point));return tS({axis:c,moveRelativeTo:y,isMoving:l})}return tS({axis:c,moveRelativeTo:m.page,isMoving:l})},f_=(n,e)=>{const t=n.frame;return t?nn(e,t.scroll.diff.displacement):e};const u3=({impact:n,draggable:e,droppable:t,draggables:r,afterCritical:i})=>{const o=e.page.borderBox.center,l=n.at;return!t||!l?o:l.type==="REORDER"?l3({impact:n,draggable:e,draggables:r,droppable:t,afterCritical:i}):s3({impact:n,draggables:r,afterCritical:i})};var rp=n=>{const e=u3(n),t=n.droppable;return t?f_(t,e):e},qR=(n,e)=>{const t=jn(e,n.scroll.initial),r=hl(t);return{frame:Rr({top:e.y,bottom:e.y+n.frame.height,left:e.x,right:e.x+n.frame.width}),scroll:{initial:n.scroll.initial,max:n.scroll.max,current:e,diff:{value:t,displacement:r}}}};function rS(n,e){return n.map(t=>e[t])}function c3(n,e){for(let t=0;t<e.length;t++){const r=e[t].visible[n];if(r)return r}return null}var d3=({impact:n,viewport:e,destination:t,draggables:r,maxScrollChange:i})=>{const o=qR(e,nn(e.scroll.current,i)),l=t.frame?rv(t,nn(t.frame.scroll.current,i)):t,c=n.displaced,d=dc({afterDragging:rS(c.all,r),destination:t,displacedBy:n.displacedBy,viewport:o.frame,last:c,forceShouldAnimate:!1}),p=dc({afterDragging:rS(c.all,r),destination:l,displacedBy:n.displacedBy,viewport:e.frame,last:c,forceShouldAnimate:!1}),_={},m={},y=[c,d,p];return c.all.forEach(S=>{const b=c3(S,y);if(b){m[S]=b;return}_[S]=!0}),{...n,displaced:{all:c.all,invisible:_,visible:m}}},h3=(n,e)=>nn(n.scroll.diff.displacement,e),lv=({pageBorderBoxCenter:n,draggable:e,viewport:t})=>{const r=h3(t,n),i=jn(r,e.page.borderBox.center);return nn(e.client.borderBox.center,i)},KR=({draggable:n,destination:e,newPageBorderBoxCenter:t,viewport:r,withDroppableDisplacement:i,onlyOnMainAxis:o=!1})=>{const l=jn(t,n.page.borderBox.center),d={target:Lc(n.page.borderBox,l),destination:e,withDroppableDisplacement:i,viewport:r};return o?XB(d):HR(d)},f3=({isMovingForward:n,draggable:e,destination:t,draggables:r,previousImpact:i,viewport:o,previousPageBorderBoxCenter:l,previousClientSelection:c,afterCritical:d})=>{if(!t.isEnabled)return null;const p=fl(t.descriptor.id,r),_=pl(e,t),m=$B({isMovingForward:n,draggable:e,destination:t,insideDestination:p,previousImpact:i})||r3({isMovingForward:n,isInHomeList:_,draggable:e,draggables:r,destination:t,insideDestination:p,previousImpact:i,viewport:o,afterCritical:d});if(!m)return null;const y=rp({impact:m,draggable:e,droppable:t,draggables:r,afterCritical:d});if(KR({draggable:e,destination:t,newPageBorderBoxCenter:y,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:lv({pageBorderBoxCenter:y,draggable:e,viewport:o}),impact:m,scrollJumpRequest:null};const S=jn(y,l),b=d3({impact:m,viewport:o,destination:t,draggables:r,maxScrollChange:S});return{clientSelection:c,impact:b,scrollJumpRequest:S}};const yn=n=>{const e=n.subject.active;return e||ae(),e};var p3=({isMovingForward:n,pageBorderBoxCenter:e,source:t,droppables:r,viewport:i})=>{const o=t.subject.active;if(!o)return null;const l=t.axis,c=sr(o[l.start],o[l.end]),d=ep(r).filter(_=>_!==t).filter(_=>_.isEnabled).filter(_=>!!_.subject.active).filter(_=>$R(i.frame)(yn(_))).filter(_=>{const m=yn(_);return n?o[l.crossAxisEnd]<m[l.crossAxisEnd]:m[l.crossAxisStart]<o[l.crossAxisStart]}).filter(_=>{const m=yn(_),y=sr(m[l.start],m[l.end]);return c(m[l.start])||c(m[l.end])||y(o[l.start])||y(o[l.end])}).sort((_,m)=>{const y=yn(_)[l.crossAxisStart],w=yn(m)[l.crossAxisStart];return n?y-w:w-y}).filter((_,m,y)=>yn(_)[l.crossAxisStart]===yn(y[0])[l.crossAxisStart]);if(!d.length)return null;if(d.length===1)return d[0];const p=d.filter(_=>sr(yn(_)[l.start],yn(_)[l.end])(e[l.line]));return p.length===1?p[0]:p.length>1?p.sort((_,m)=>yn(_)[l.start]-yn(m)[l.start])[0]:d.sort((_,m)=>{const y=JI(e,ZI(yn(_))),w=JI(e,ZI(yn(m)));return y!==w?y-w:yn(_)[l.start]-yn(m)[l.start]})[0]};const iS=(n,e)=>{const t=n.page.borderBox.center;return Ps(n.descriptor.id,e)?jn(t,e.displacedBy.point):t},m3=(n,e)=>{const t=n.page.borderBox;return Ps(n.descriptor.id,e)?Lc(t,hl(e.displacedBy.point)):t};var g3=({pageBorderBoxCenter:n,viewport:e,destination:t,insideDestination:r,afterCritical:i})=>r.filter(l=>HR({target:m3(l,i),destination:t,viewport:e.frame,withDroppableDisplacement:!0})).sort((l,c)=>{const d=uc(n,f_(t,iS(l,i))),p=uc(n,f_(t,iS(c,i)));return d<p?-1:p<d?1:l.descriptor.index-c.descriptor.index})[0]||null,Mc=qt(function(e,t){const r=t[e.line];return{value:r,point:Ro(e.line,r)}});const _3=(n,e,t)=>{const r=n.axis;if(n.descriptor.mode==="virtual")return Ro(r.line,e[r.line]);const i=n.subject.page.contentBox[r.size],d=fl(n.descriptor.id,t).reduce((p,_)=>p+_.client.marginBox[r.size],0)+e[r.line]-i;return d<=0?null:Ro(r.line,d)},QR=(n,e)=>({...n,scroll:{...n.scroll,max:e}}),YR=(n,e,t)=>{const r=n.frame;pl(e,n)&&ae(),n.subject.withPlaceholder&&ae();const i=Mc(n.axis,e.displaceBy).point,o=_3(n,i,t),l={placeholderSize:i,increasedBy:o,oldFrameMaxScroll:n.frame?n.frame.scroll.max:null};if(!r){const _=Ya({page:n.subject.page,withPlaceholder:l,axis:n.axis,frame:n.frame});return{...n,subject:_}}const c=o?nn(r.scroll.max,o):r.scroll.max,d=QR(r,c),p=Ya({page:n.subject.page,withPlaceholder:l,axis:n.axis,frame:d});return{...n,subject:p,frame:d}},y3=n=>{const e=n.subject.withPlaceholder;e||ae();const t=n.frame;if(!t){const l=Ya({page:n.subject.page,axis:n.axis,frame:null,withPlaceholder:null});return{...n,subject:l}}const r=e.oldFrameMaxScroll;r||ae();const i=QR(t,r),o=Ya({page:n.subject.page,axis:n.axis,frame:i,withPlaceholder:null});return{...n,subject:o,frame:i}};var v3=({previousPageBorderBoxCenter:n,moveRelativeTo:e,insideDestination:t,draggable:r,draggables:i,destination:o,viewport:l,afterCritical:c})=>{if(!e){if(t.length)return null;const m={displaced:cc,displacedBy:zR,at:{type:"REORDER",destination:{droppableId:o.descriptor.id,index:0}}},y=rp({impact:m,draggable:r,droppable:o,draggables:i,afterCritical:c}),w=pl(r,o)?o:YR(o,r,i);return KR({draggable:r,destination:w,newPageBorderBoxCenter:y,viewport:l.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?m:null}const d=n[o.axis.line]<=e.page.borderBox.center[o.axis.line],p=(()=>{const m=e.descriptor.index;return e.descriptor.id===r.descriptor.id||d?m:m+1})(),_=Mc(o.axis,r.displaceBy);return hf({draggable:r,insideDestination:t,destination:o,viewport:l,displacedBy:_,last:cc,index:p})},E3=({isMovingForward:n,previousPageBorderBoxCenter:e,draggable:t,isOver:r,draggables:i,droppables:o,viewport:l,afterCritical:c})=>{const d=p3({isMovingForward:n,pageBorderBoxCenter:e,source:r,droppables:o,viewport:l});if(!d)return null;const p=fl(d.descriptor.id,i),_=g3({pageBorderBoxCenter:e,viewport:l,destination:d,insideDestination:p,afterCritical:c}),m=v3({previousPageBorderBoxCenter:e,destination:d,draggable:t,draggables:i,moveRelativeTo:_,insideDestination:p,viewport:l,afterCritical:c});if(!m)return null;const y=rp({impact:m,draggable:t,droppable:d,draggables:i,afterCritical:c});return{clientSelection:lv({pageBorderBoxCenter:y,draggable:t,viewport:l}),impact:m,scrollJumpRequest:null}},zn=n=>{const e=n.at;return e?e.type==="REORDER"?e.destination.droppableId:e.combine.droppableId:null};const w3=(n,e)=>{const t=zn(n);return t?e[t]:null};var T3=({state:n,type:e})=>{const t=w3(n.impact,n.dimensions.droppables),r=!!t,i=n.dimensions.droppables[n.critical.droppable.id],o=t||i,l=o.axis.direction,c=l==="vertical"&&(e==="MOVE_UP"||e==="MOVE_DOWN")||l==="horizontal"&&(e==="MOVE_LEFT"||e==="MOVE_RIGHT");if(c&&!r)return null;const d=e==="MOVE_DOWN"||e==="MOVE_RIGHT",p=n.dimensions.draggables[n.critical.draggable.id],_=n.current.page.borderBoxCenter,{draggables:m,droppables:y}=n.dimensions;return c?f3({isMovingForward:d,previousPageBorderBoxCenter:_,draggable:p,destination:o,draggables:m,viewport:n.viewport,previousClientSelection:n.current.client.selection,previousImpact:n.impact,afterCritical:n.afterCritical}):E3({isMovingForward:d,previousPageBorderBoxCenter:_,draggable:p,isOver:o,draggables:m,droppables:y,viewport:n.viewport,afterCritical:n.afterCritical})};function fo(n){return n.phase==="DRAGGING"||n.phase==="COLLECTING"}function XR(n){const e=sr(n.top,n.bottom),t=sr(n.left,n.right);return function(i){return e(i.y)&&t(i.x)}}function I3(n,e){return n.left<e.right&&n.right>e.left&&n.top<e.bottom&&n.bottom>e.top}function S3({pageBorderBox:n,draggable:e,candidates:t}){const r=e.page.borderBox.center,i=t.map(o=>{const l=o.axis,c=Ro(o.axis.line,n.center[l.line],o.page.borderBox.center[l.crossAxisLine]);return{id:o.descriptor.id,distance:uc(r,c)}}).sort((o,l)=>l.distance-o.distance);return i[0]?i[0].id:null}function C3({pageBorderBox:n,draggable:e,droppables:t}){const r=ep(t).filter(i=>{if(!i.isEnabled)return!1;const o=i.subject.active;if(!o||!I3(n,o))return!1;if(XR(o)(n.center))return!0;const l=i.axis,c=o.center[l.crossAxisLine],d=n[l.crossAxisStart],p=n[l.crossAxisEnd],_=sr(o[l.crossAxisStart],o[l.crossAxisEnd]),m=_(d),y=_(p);return!m&&!y?!0:m?d<c:p>c});return r.length?r.length===1?r[0].descriptor.id:S3({pageBorderBox:n,draggable:e,candidates:r}):null}const JR=(n,e)=>Rr(Lc(n,e));var b3=(n,e)=>{const t=n.frame;return t?JR(e,t.scroll.diff.value):e};function ZR({displaced:n,id:e}){return!!(n.visible[e]||n.invisible[e])}function R3({draggable:n,closest:e,inHomeList:t}){return e?t&&e.descriptor.index>n.descriptor.index?e.descriptor.index-1:e.descriptor.index:null}var A3=({pageBorderBoxWithDroppableScroll:n,draggable:e,destination:t,insideDestination:r,last:i,viewport:o,afterCritical:l})=>{const c=t.axis,d=Mc(t.axis,e.displaceBy),p=d.value,_=n[c.start],m=n[c.end],w=np(e,r).find(b=>{const C=b.descriptor.id,k=b.page.borderBox.center[c.line],N=Ps(C,l),j=ZR({displaced:i,id:C});return N?j?m<=k:_<k-p:j?m<=k+p:_<k})||null,S=R3({draggable:e,closest:w,inHomeList:pl(e,t)});return hf({draggable:e,insideDestination:r,destination:t,viewport:o,last:i,displacedBy:d,index:S})};const x3=4;var P3=({draggable:n,pageBorderBoxWithDroppableScroll:e,previousImpact:t,destination:r,insideDestination:i,afterCritical:o})=>{if(!r.isCombineEnabled)return null;const l=r.axis,c=Mc(r.axis,n.displaceBy),d=c.value,p=e[l.start],_=e[l.end],y=np(n,i).find(S=>{const b=S.descriptor.id,C=S.page.borderBox,N=C[l.size]/x3,j=Ps(b,o),H=ZR({displaced:t.displaced,id:b});return j?H?_>C[l.start]+N&&_<C[l.end]-N:p>C[l.start]-d+N&&p<C[l.end]-d-N:H?_>C[l.start]+d+N&&_<C[l.end]+d-N:p>C[l.start]+N&&p<C[l.end]-N});return y?{displacedBy:c,displaced:t.displaced,at:{type:"COMBINE",combine:{draggableId:y.descriptor.id,droppableId:r.descriptor.id}}}:null},eA=({pageOffset:n,draggable:e,draggables:t,droppables:r,previousImpact:i,viewport:o,afterCritical:l})=>{const c=JR(e.page.borderBox,n),d=C3({pageBorderBox:c,draggable:e,droppables:r});if(!d)return WB;const p=r[d],_=fl(p.descriptor.id,t),m=b3(p,c);return P3({pageBorderBoxWithDroppableScroll:m,draggable:e,previousImpact:i,destination:p,insideDestination:_,afterCritical:l})||A3({pageBorderBoxWithDroppableScroll:m,draggable:e,destination:p,insideDestination:_,last:i.displaced,viewport:o,afterCritical:l})},uv=(n,e)=>({...n,[e.descriptor.id]:e});const k3=({previousImpact:n,impact:e,droppables:t})=>{const r=zn(n),i=zn(e);if(!r||r===i)return t;const o=t[r];if(!o.subject.withPlaceholder)return t;const l=y3(o);return uv(t,l)};var N3=({draggable:n,draggables:e,droppables:t,previousImpact:r,impact:i})=>{const o=k3({previousImpact:r,impact:i,droppables:t}),l=zn(i);if(!l)return o;const c=t[l];if(pl(n,c)||c.subject.withPlaceholder)return o;const d=YR(c,n,e);return uv(o,d)},Vu=({state:n,clientSelection:e,dimensions:t,viewport:r,impact:i,scrollJumpRequest:o})=>{const l=r||n.viewport,c=t||n.dimensions,d=e||n.current.client.selection,p=jn(d,n.initial.client.selection),_={offset:p,selection:d,borderBoxCenter:nn(n.initial.client.borderBoxCenter,p)},m={selection:nn(_.selection,l.scroll.current),borderBoxCenter:nn(_.borderBoxCenter,l.scroll.current),offset:nn(_.offset,l.scroll.diff.value)},y={client:_,page:m};if(n.phase==="COLLECTING")return{...n,dimensions:c,viewport:l,current:y};const w=c.draggables[n.critical.draggable.id],S=i||eA({pageOffset:m.offset,draggable:w,draggables:c.draggables,droppables:c.droppables,previousImpact:n.impact,viewport:l,afterCritical:n.afterCritical}),b=N3({draggable:w,impact:S,previousImpact:n.impact,draggables:c.draggables,droppables:c.droppables});return{...n,current:y,dimensions:{draggables:c.draggables,droppables:b},impact:S,viewport:l,scrollJumpRequest:o||null,forceShouldAnimate:o?!1:null}};function D3(n,e){return n.map(t=>e[t])}var tA=({impact:n,viewport:e,draggables:t,destination:r,forceShouldAnimate:i})=>{const o=n.displaced,l=D3(o.all,t),c=dc({afterDragging:l,destination:r,displacedBy:n.displacedBy,viewport:e.frame,forceShouldAnimate:i,last:o});return{...n,displaced:c}},nA=({impact:n,draggable:e,droppable:t,draggables:r,viewport:i,afterCritical:o})=>{const l=rp({impact:n,draggable:e,draggables:r,droppable:t,afterCritical:o});return lv({pageBorderBoxCenter:l,draggable:e,viewport:i})},rA=({state:n,dimensions:e,viewport:t})=>{n.movementMode!=="SNAP"&&ae();const r=n.impact,i=t||n.viewport,o=e||n.dimensions,{draggables:l,droppables:c}=o,d=l[n.critical.draggable.id],p=zn(r);p||ae();const _=c[p],m=tA({impact:r,viewport:i,destination:_,draggables:l}),y=nA({impact:m,draggable:d,droppable:_,draggables:l,viewport:i,afterCritical:n.afterCritical});return Vu({impact:m,clientSelection:y,state:n,dimensions:o,viewport:i})},O3=n=>({index:n.index,droppableId:n.droppableId}),iA=({draggable:n,home:e,draggables:t,viewport:r})=>{const i=Mc(e.axis,n.displaceBy),o=fl(e.descriptor.id,t),l=o.indexOf(n);l===-1&&ae();const c=o.slice(l+1),d=c.reduce((y,w)=>(y[w.descriptor.id]=!0,y),{}),p={inVirtualList:e.descriptor.mode==="virtual",displacedBy:i,effected:d};return{impact:{displaced:dc({afterDragging:c,destination:e,displacedBy:i,last:null,viewport:r.frame,forceShouldAnimate:!1}),displacedBy:i,at:{type:"REORDER",destination:O3(n.descriptor)}},afterCritical:p}},L3=(n,e)=>({draggables:n.draggables,droppables:uv(n.droppables,e)}),M3=({draggable:n,offset:e,initialWindowScroll:t})=>{const r=af(n.client,e),i=lf(r,t);return{...n,placeholder:{...n.placeholder,client:r},client:r,page:i}},V3=n=>{const e=n.frame;return e||ae(),e},F3=({additions:n,updatedDroppables:e,viewport:t})=>{const r=t.scroll.diff.value;return n.map(i=>{const o=i.descriptor.droppableId,l=e[o],d=V3(l).scroll.diff.value,p=nn(r,d);return M3({draggable:i,offset:p,initialWindowScroll:t.scroll.initial})})},U3=({state:n,published:e})=>{const t=e.modified.map(k=>{const N=n.dimensions.droppables[k.droppableId];return rv(N,k.scroll)}),r={...n.dimensions.droppables,...BR(t)},i=jR(F3({additions:e.additions,updatedDroppables:r,viewport:n.viewport})),o={...n.dimensions.draggables,...i};e.removals.forEach(k=>{delete o[k]});const l={droppables:r,draggables:o},c=zn(n.impact),d=c?l.droppables[c]:null,p=l.draggables[n.critical.draggable.id],_=l.droppables[n.critical.droppable.id],{impact:m,afterCritical:y}=iA({draggable:p,home:_,draggables:o,viewport:n.viewport}),w=d&&d.isCombineEnabled?n.impact:m,S=eA({pageOffset:n.current.page.offset,draggable:l.draggables[n.critical.draggable.id],draggables:l.draggables,droppables:l.droppables,previousImpact:w,viewport:n.viewport,afterCritical:y}),b={...n,phase:"DRAGGING",impact:S,onLiftImpact:m,dimensions:l,afterCritical:y,forceShouldAnimate:!1};return n.phase==="COLLECTING"?b:{...b,phase:"DROP_PENDING",reason:n.reason,isWaiting:!1}};const p_=n=>n.movementMode==="SNAP",hg=(n,e,t)=>{const r=L3(n.dimensions,e);return!p_(n)||t?Vu({state:n,dimensions:r}):rA({state:n,dimensions:r})};function fg(n){return n.isDragging&&n.movementMode==="SNAP"?{...n,scrollJumpRequest:null}:n}const sS={phase:"IDLE",completed:null,shouldFlush:!1};var B3=(n=sS,e)=>{if(e.type==="FLUSH")return{...sS,shouldFlush:!0};if(e.type==="INITIAL_PUBLISH"){n.phase!=="IDLE"&&ae();const{critical:t,clientSelection:r,viewport:i,dimensions:o,movementMode:l}=e.payload,c=o.draggables[t.draggable.id],d=o.droppables[t.droppable.id],p={selection:r,borderBoxCenter:c.client.borderBox.center,offset:Kt},_={client:p,page:{selection:nn(p.selection,i.scroll.initial),borderBoxCenter:nn(p.selection,i.scroll.initial),offset:nn(p.selection,i.scroll.diff.value)}},m=ep(o.droppables).every(b=>!b.isFixedOnPage),{impact:y,afterCritical:w}=iA({draggable:c,home:d,draggables:o.draggables,viewport:i});return{phase:"DRAGGING",isDragging:!0,critical:t,movementMode:l,dimensions:o,initial:_,current:_,isWindowScrollAllowed:m,impact:y,afterCritical:w,onLiftImpact:y,viewport:i,scrollJumpRequest:null,forceShouldAnimate:null}}if(e.type==="COLLECTION_STARTING")return n.phase==="COLLECTING"||n.phase==="DROP_PENDING"?n:(n.phase!=="DRAGGING"&&ae(),{...n,phase:"COLLECTING"});if(e.type==="PUBLISH_WHILE_DRAGGING")return n.phase==="COLLECTING"||n.phase==="DROP_PENDING"||ae(),U3({state:n,published:e.payload});if(e.type==="MOVE"){if(n.phase==="DROP_PENDING")return n;fo(n)||ae();const{client:t}=e.payload;return vs(t,n.current.client.selection)?n:Vu({state:n,clientSelection:t,impact:p_(n)?n.impact:null})}if(e.type==="UPDATE_DROPPABLE_SCROLL"){if(n.phase==="DROP_PENDING"||n.phase==="COLLECTING")return fg(n);fo(n)||ae();const{id:t,newScroll:r}=e.payload,i=n.dimensions.droppables[t];if(!i)return n;const o=rv(i,r);return hg(n,o,!1)}if(e.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(n.phase==="DROP_PENDING")return n;fo(n)||ae();const{id:t,isEnabled:r}=e.payload,i=n.dimensions.droppables[t];i||ae(),i.isEnabled===r&&ae();const o={...i,isEnabled:r};return hg(n,o,!0)}if(e.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(n.phase==="DROP_PENDING")return n;fo(n)||ae();const{id:t,isCombineEnabled:r}=e.payload,i=n.dimensions.droppables[t];i||ae(),i.isCombineEnabled===r&&ae();const o={...i,isCombineEnabled:r};return hg(n,o,!0)}if(e.type==="MOVE_BY_WINDOW_SCROLL"){if(n.phase==="DROP_PENDING"||n.phase==="DROP_ANIMATING")return n;fo(n)||ae(),n.isWindowScrollAllowed||ae();const t=e.payload.newScroll;if(vs(n.viewport.scroll.current,t))return fg(n);const r=qR(n.viewport,t);return p_(n)?rA({state:n,viewport:r}):Vu({state:n,viewport:r})}if(e.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!fo(n))return n;const t=e.payload.maxScroll;if(vs(t,n.viewport.scroll.max))return n;const r={...n.viewport,scroll:{...n.viewport.scroll,max:t}};return{...n,viewport:r}}if(e.type==="MOVE_UP"||e.type==="MOVE_DOWN"||e.type==="MOVE_LEFT"||e.type==="MOVE_RIGHT"){if(n.phase==="COLLECTING"||n.phase==="DROP_PENDING")return n;n.phase!=="DRAGGING"&&ae();const t=T3({state:n,type:e.type});return t?Vu({state:n,impact:t.impact,clientSelection:t.clientSelection,scrollJumpRequest:t.scrollJumpRequest}):n}if(e.type==="DROP_PENDING"){const t=e.payload.reason;return n.phase!=="COLLECTING"&&ae(),{...n,phase:"DROP_PENDING",isWaiting:!0,reason:t}}if(e.type==="DROP_ANIMATE"){const{completed:t,dropDuration:r,newHomeClientOffset:i}=e.payload;return n.phase==="DRAGGING"||n.phase==="DROP_PENDING"||ae(),{phase:"DROP_ANIMATING",completed:t,dropDuration:r,newHomeClientOffset:i,dimensions:n.dimensions}}if(e.type==="DROP_COMPLETE"){const{completed:t}=e.payload;return{phase:"IDLE",completed:t,shouldFlush:!1}}return n};function Ze(n,e){return n instanceof Object&&"type"in n&&n.type===e}const j3=n=>({type:"BEFORE_INITIAL_CAPTURE",payload:n}),z3=n=>({type:"LIFT",payload:n}),$3=n=>({type:"INITIAL_PUBLISH",payload:n}),W3=n=>({type:"PUBLISH_WHILE_DRAGGING",payload:n}),H3=()=>({type:"COLLECTION_STARTING",payload:null}),G3=n=>({type:"UPDATE_DROPPABLE_SCROLL",payload:n}),q3=n=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:n}),K3=n=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:n}),sA=n=>({type:"MOVE",payload:n}),Q3=n=>({type:"MOVE_BY_WINDOW_SCROLL",payload:n}),Y3=n=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:n}),X3=()=>({type:"MOVE_UP",payload:null}),J3=()=>({type:"MOVE_DOWN",payload:null}),Z3=()=>({type:"MOVE_RIGHT",payload:null}),ej=()=>({type:"MOVE_LEFT",payload:null}),cv=()=>({type:"FLUSH",payload:null}),tj=n=>({type:"DROP_ANIMATE",payload:n}),dv=n=>({type:"DROP_COMPLETE",payload:n}),oA=n=>({type:"DROP",payload:n}),nj=n=>({type:"DROP_PENDING",payload:n}),aA=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var rj=n=>({getState:e,dispatch:t})=>r=>i=>{if(!Ze(i,"LIFT")){r(i);return}const{id:o,clientSelection:l,movementMode:c}=i.payload,d=e();d.phase==="DROP_ANIMATING"&&t(dv({completed:d.completed})),e().phase!=="IDLE"&&ae(),t(cv()),t(j3({draggableId:o,movementMode:c}));const _={draggableId:o,scrollOptions:{shouldPublishImmediately:c==="SNAP"}},{critical:m,dimensions:y,viewport:w}=n.startPublishing(_);t($3({critical:m,dimensions:y,clientSelection:l,movementMode:c,viewport:w}))},ij=n=>()=>e=>t=>{Ze(t,"INITIAL_PUBLISH")&&n.dragging(),Ze(t,"DROP_ANIMATE")&&n.dropping(t.payload.completed.result.reason),(Ze(t,"FLUSH")||Ze(t,"DROP_COMPLETE"))&&n.resting(),e(t)};const hv={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},hc={opacity:{drop:0,combining:.7},scale:{drop:.75}},lA={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},uo=`${lA.outOfTheWay}s ${hv.outOfTheWay}`,Fu={fluid:`opacity ${uo}`,snap:`transform ${uo}, opacity ${uo}`,drop:n=>{const e=`${n}s ${hv.drop}`;return`transform ${e}, opacity ${e}`},outOfTheWay:`transform ${uo}`,placeholder:`height ${uo}, width ${uo}, margin ${uo}`},oS=n=>vs(n,Kt)?void 0:`translate(${n.x}px, ${n.y}px)`,m_={moveTo:oS,drop:(n,e)=>{const t=oS(n);if(t)return e?`${t} scale(${hc.scale.drop})`:t}},{minDropTime:g_,maxDropTime:uA}=lA,sj=uA-g_,aS=1500,oj=.6;var aj=({current:n,destination:e,reason:t})=>{const r=uc(n,e);if(r<=0)return g_;if(r>=aS)return uA;const i=r/aS,o=g_+sj*i,l=t==="CANCEL"?o*oj:o;return Number(l.toFixed(2))},lj=({impact:n,draggable:e,dimensions:t,viewport:r,afterCritical:i})=>{const{draggables:o,droppables:l}=t,c=zn(n),d=c?l[c]:null,p=l[e.descriptor.droppableId],_=nA({impact:n,draggable:e,draggables:o,afterCritical:i,droppable:d||p,viewport:r});return jn(_,e.client.borderBox.center)},uj=({draggables:n,reason:e,lastImpact:t,home:r,viewport:i,onLiftImpact:o})=>!t.at||e!=="DROP"?{impact:tA({draggables:n,impact:o,destination:r,viewport:i,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:t.at.type==="REORDER"?{impact:t,didDropInsideDroppable:!0}:{impact:{...t,displaced:cc},didDropInsideDroppable:!0};const cj=({getState:n,dispatch:e})=>t=>r=>{if(!Ze(r,"DROP")){t(r);return}const i=n(),o=r.payload.reason;if(i.phase==="COLLECTING"){e(nj({reason:o}));return}if(i.phase==="IDLE")return;i.phase==="DROP_PENDING"&&i.isWaiting&&ae(),i.phase==="DRAGGING"||i.phase==="DROP_PENDING"||ae();const c=i.critical,d=i.dimensions,p=d.draggables[i.critical.draggable.id],{impact:_,didDropInsideDroppable:m}=uj({reason:o,lastImpact:i.impact,afterCritical:i.afterCritical,onLiftImpact:i.onLiftImpact,home:i.dimensions.droppables[i.critical.droppable.id],viewport:i.viewport,draggables:i.dimensions.draggables}),y=m?iv(_):null,w=m?tp(_):null,S={index:c.draggable.index,droppableId:c.droppable.id},b={draggableId:p.descriptor.id,type:p.descriptor.type,source:S,reason:o,mode:i.movementMode,destination:y,combine:w},C=lj({impact:_,draggable:p,dimensions:d,viewport:i.viewport,afterCritical:i.afterCritical}),k={critical:i.critical,afterCritical:i.afterCritical,result:b,impact:_};if(!(!vs(i.current.client.offset,C)||!!b.combine)){e(dv({completed:k}));return}const j=aj({current:i.current.client.offset,destination:C,reason:o});e(tj({newHomeClientOffset:C,dropDuration:j,completed:k}))};var cA=()=>({x:window.pageXOffset,y:window.pageYOffset});function dj(n){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:e=>{e.target!==window&&e.target!==window.document||n()}}}function hj({onWindowScroll:n}){function e(){n(cA())}const t=lc(e),r=dj(t);let i=ys;function o(){return i!==ys}function l(){o()&&ae(),i=rr(window,[r])}function c(){o()||ae(),t.cancel(),i(),i=ys}return{start:l,stop:c,isActive:o}}const fj=n=>Ze(n,"DROP_COMPLETE")||Ze(n,"DROP_ANIMATE")||Ze(n,"FLUSH"),pj=n=>{const e=hj({onWindowScroll:t=>{n.dispatch(Q3({newScroll:t}))}});return t=>r=>{!e.isActive()&&Ze(r,"INITIAL_PUBLISH")&&e.start(),e.isActive()&&fj(r)&&e.stop(),t(r)}};var mj=n=>{let e=!1,t=!1;const r=setTimeout(()=>{t=!0}),i=o=>{e||t||(e=!0,n(o),clearTimeout(r))};return i.wasCalled=()=>e,i},gj=()=>{const n=[],e=i=>{const o=n.findIndex(c=>c.timerId===i);o===-1&&ae();const[l]=n.splice(o,1);l.callback()};return{add:i=>{const o=setTimeout(()=>e(o)),l={timerId:o,callback:i};n.push(l)},flush:()=>{if(!n.length)return;const i=[...n];n.length=0,i.forEach(o=>{clearTimeout(o.timerId),o.callback()})}}};const _j=(n,e)=>n==null&&e==null?!0:n==null||e==null?!1:n.droppableId===e.droppableId&&n.index===e.index,yj=(n,e)=>n==null&&e==null?!0:n==null||e==null?!1:n.draggableId===e.draggableId&&n.droppableId===e.droppableId,vj=(n,e)=>{if(n===e)return!0;const t=n.draggable.id===e.draggable.id&&n.draggable.droppableId===e.draggable.droppableId&&n.draggable.type===e.draggable.type&&n.draggable.index===e.draggable.index,r=n.droppable.id===e.droppable.id&&n.droppable.type===e.droppable.type;return t&&r},_u=(n,e)=>{e()},lh=(n,e)=>({draggableId:n.draggable.id,type:n.droppable.type,source:{droppableId:n.droppable.id,index:n.draggable.index},mode:e});function pg(n,e,t,r){if(!n){t(r(e));return}const i=mj(t);n(e,{announce:i}),i.wasCalled()||t(r(e))}var Ej=(n,e)=>{const t=gj();let r=null;const i=(m,y)=>{r&&ae(),_u("onBeforeCapture",()=>{const w=n().onBeforeCapture;w&&w({draggableId:m,mode:y})})},o=(m,y)=>{r&&ae(),_u("onBeforeDragStart",()=>{const w=n().onBeforeDragStart;w&&w(lh(m,y))})},l=(m,y)=>{r&&ae();const w=lh(m,y);r={mode:y,lastCritical:m,lastLocation:w.source,lastCombine:null},t.add(()=>{_u("onDragStart",()=>pg(n().onDragStart,w,e,Sh.onDragStart))})},c=(m,y)=>{const w=iv(y),S=tp(y);r||ae();const b=!vj(m,r.lastCritical);b&&(r.lastCritical=m);const C=!_j(r.lastLocation,w);C&&(r.lastLocation=w);const k=!yj(r.lastCombine,S);if(k&&(r.lastCombine=S),!b&&!C&&!k)return;const N={...lh(m,r.mode),combine:S,destination:w};t.add(()=>{_u("onDragUpdate",()=>pg(n().onDragUpdate,N,e,Sh.onDragUpdate))})},d=()=>{r||ae(),t.flush()},p=m=>{r||ae(),r=null,_u("onDragEnd",()=>pg(n().onDragEnd,m,e,Sh.onDragEnd))};return{beforeCapture:i,beforeStart:o,start:l,update:c,flush:d,drop:p,abort:()=>{if(!r)return;const m={...lh(r.lastCritical,r.mode),combine:null,destination:null,reason:"CANCEL"};p(m)}}},wj=(n,e)=>{const t=Ej(n,e);return r=>i=>o=>{if(Ze(o,"BEFORE_INITIAL_CAPTURE")){t.beforeCapture(o.payload.draggableId,o.payload.movementMode);return}if(Ze(o,"INITIAL_PUBLISH")){const c=o.payload.critical;t.beforeStart(c,o.payload.movementMode),i(o),t.start(c,o.payload.movementMode);return}if(Ze(o,"DROP_COMPLETE")){const c=o.payload.completed.result;t.flush(),i(o),t.drop(c);return}if(i(o),Ze(o,"FLUSH")){t.abort();return}const l=r.getState();l.phase==="DRAGGING"&&t.update(l.critical,l.impact)}};const Tj=n=>e=>t=>{if(!Ze(t,"DROP_ANIMATION_FINISHED")){e(t);return}const r=n.getState();r.phase!=="DROP_ANIMATING"&&ae(),n.dispatch(dv({completed:r.completed}))},Ij=n=>{let e=null,t=null;function r(){t&&(cancelAnimationFrame(t),t=null),e&&(e(),e=null)}return i=>o=>{if((Ze(o,"FLUSH")||Ze(o,"DROP_COMPLETE")||Ze(o,"DROP_ANIMATION_FINISHED"))&&r(),i(o),!Ze(o,"DROP_ANIMATE"))return;const l={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){n.getState().phase==="DROP_ANIMATING"&&n.dispatch(aA())}};t=requestAnimationFrame(()=>{t=null,e=rr(window,[l])})}};var Sj=n=>()=>e=>t=>{(Ze(t,"DROP_COMPLETE")||Ze(t,"FLUSH")||Ze(t,"DROP_ANIMATE"))&&n.stopPublishing(),e(t)},Cj=n=>{let e=!1;return()=>t=>r=>{if(Ze(r,"INITIAL_PUBLISH")){e=!0,n.tryRecordFocus(r.payload.critical.draggable.id),t(r),n.tryRestoreFocusRecorded();return}if(t(r),!!e){if(Ze(r,"FLUSH")){e=!1,n.tryRestoreFocusRecorded();return}if(Ze(r,"DROP_COMPLETE")){e=!1;const i=r.payload.completed.result;i.combine&&n.tryShiftRecord(i.draggableId,i.combine.draggableId),n.tryRestoreFocusRecorded()}}}};const bj=n=>Ze(n,"DROP_COMPLETE")||Ze(n,"DROP_ANIMATE")||Ze(n,"FLUSH");var Rj=n=>e=>t=>r=>{if(bj(r)){n.stop(),t(r);return}if(Ze(r,"INITIAL_PUBLISH")){t(r);const i=e.getState();i.phase!=="DRAGGING"&&ae(),n.start(i);return}t(r),n.scroll(e.getState())};const Aj=n=>e=>t=>{if(e(t),!Ze(t,"PUBLISH_WHILE_DRAGGING"))return;const r=n.getState();r.phase==="DROP_PENDING"&&(r.isWaiting||n.dispatch(oA({reason:r.reason})))},xj=bR;var Pj=({dimensionMarshal:n,focusMarshal:e,styleMarshal:t,getResponders:r,announce:i,autoScroller:o})=>CR(B3,xj(bU(ij(t),Sj(n),rj(n),cj,Tj,Ij,Aj,Rj(o),pj,Cj(e),wj(r,i))));const mg=()=>({additions:{},removals:{},modified:{}});function kj({registry:n,callbacks:e}){let t=mg(),r=null;const i=()=>{r||(e.collectionStarting(),r=requestAnimationFrame(()=>{r=null;const{additions:d,removals:p,modified:_}=t,m=Object.keys(d).map(S=>n.draggable.getById(S).getDimension(Kt)).sort((S,b)=>S.descriptor.index-b.descriptor.index),y=Object.keys(_).map(S=>{const C=n.droppable.getById(S).callbacks.getScrollWhileDragging();return{droppableId:S,scroll:C}}),w={additions:m,removals:Object.keys(p),modified:y};t=mg(),e.publish(w)}))};return{add:d=>{const p=d.descriptor.id;t.additions[p]=d,t.modified[d.descriptor.droppableId]=!0,t.removals[p]&&delete t.removals[p],i()},remove:d=>{const p=d.descriptor;t.removals[p.id]=!0,t.modified[p.droppableId]=!0,t.additions[p.id]&&delete t.additions[p.id],i()},stop:()=>{r&&(cancelAnimationFrame(r),r=null,t=mg())}}}var dA=({scrollHeight:n,scrollWidth:e,height:t,width:r})=>{const i=jn({x:e,y:n},{x:r,y:t});return{x:Math.max(0,i.x),y:Math.max(0,i.y)}},hA=()=>{const n=document.documentElement;return n||ae(),n},fA=()=>{const n=hA();return dA({scrollHeight:n.scrollHeight,scrollWidth:n.scrollWidth,width:n.clientWidth,height:n.clientHeight})},Nj=()=>{const n=cA(),e=fA(),t=n.y,r=n.x,i=hA(),o=i.clientWidth,l=i.clientHeight,c=r+o,d=t+l;return{frame:Rr({top:t,left:r,right:c,bottom:d}),scroll:{initial:n,current:n,max:e,diff:{value:Kt,displacement:Kt}}}},Dj=({critical:n,scrollOptions:e,registry:t})=>{const r=Nj(),i=r.scroll.current,o=n.droppable,l=t.droppable.getAllByType(o.type).map(_=>_.callbacks.getDimensionAndWatchScroll(i,e)),c=t.draggable.getAllByType(n.draggable.type).map(_=>_.getDimension(i));return{dimensions:{draggables:jR(c),droppables:BR(l)},critical:n,viewport:r}};function lS(n,e,t){return!(t.descriptor.id===e.id||t.descriptor.type!==e.type||n.droppable.getById(t.descriptor.droppableId).descriptor.mode!=="virtual")}var Oj=(n,e)=>{let t=null;const r=kj({callbacks:{publish:e.publishWhileDragging,collectionStarting:e.collectionStarting},registry:n}),i=(y,w)=>{n.droppable.exists(y)||ae(),t&&e.updateDroppableIsEnabled({id:y,isEnabled:w})},o=(y,w)=>{t&&(n.droppable.exists(y)||ae(),e.updateDroppableIsCombineEnabled({id:y,isCombineEnabled:w}))},l=(y,w)=>{t&&(n.droppable.exists(y)||ae(),e.updateDroppableScroll({id:y,newScroll:w}))},c=(y,w)=>{t&&n.droppable.getById(y).callbacks.scroll(w)},d=()=>{if(!t)return;r.stop();const y=t.critical.droppable;n.droppable.getAllByType(y.type).forEach(w=>w.callbacks.dragStopped()),t.unsubscribe(),t=null},p=y=>{t||ae();const w=t.critical.draggable;y.type==="ADDITION"&&lS(n,w,y.value)&&r.add(y.value),y.type==="REMOVAL"&&lS(n,w,y.value)&&r.remove(y.value)};return{updateDroppableIsEnabled:i,updateDroppableIsCombineEnabled:o,scrollDroppable:c,updateDroppableScroll:l,startPublishing:y=>{t&&ae();const w=n.draggable.getById(y.draggableId),S=n.droppable.getById(w.descriptor.droppableId),b={draggable:w.descriptor,droppable:S.descriptor},C=n.subscribe(p);return t={critical:b,unsubscribe:C},Dj({critical:b,registry:n,scrollOptions:y.scrollOptions})},stopPublishing:d}},pA=(n,e)=>n.phase==="IDLE"?!0:n.phase!=="DROP_ANIMATING"||n.completed.result.draggableId===e?!1:n.completed.result.reason==="DROP",Lj=n=>{window.scrollBy(n.x,n.y)};const Mj=qt(n=>ep(n).filter(e=>!(!e.isEnabled||!e.frame))),Vj=(n,e)=>Mj(e).find(r=>(r.frame||ae(),XR(r.frame.pageMarginBox)(n)))||null;var Fj=({center:n,destination:e,droppables:t})=>{if(e){const i=t[e];return i.frame?i:null}return Vj(n,t)};const fc={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:n=>n**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var Uj=(n,e,t=()=>fc)=>{const r=t(),i=n[e.size]*r.startFromPercentage,o=n[e.size]*r.maxScrollAtPercentage;return{startScrollingFrom:i,maxScrollValueAt:o}},mA=({startOfRange:n,endOfRange:e,current:t})=>{const r=e-n;return r===0?0:(t-n)/r},fv=1,Bj=(n,e,t=()=>fc)=>{const r=t();if(n>e.startScrollingFrom)return 0;if(n<=e.maxScrollValueAt)return r.maxPixelScroll;if(n===e.startScrollingFrom)return fv;const o=1-mA({startOfRange:e.maxScrollValueAt,endOfRange:e.startScrollingFrom,current:n}),l=r.maxPixelScroll*r.ease(o);return Math.ceil(l)},jj=(n,e,t)=>{const r=t(),i=r.durationDampening.accelerateAt,o=r.durationDampening.stopDampeningAt,l=e,c=o,p=Date.now()-l;if(p>=o)return n;if(p<i)return fv;const _=mA({startOfRange:i,endOfRange:c,current:p}),m=n*r.ease(_);return Math.ceil(m)},uS=({distanceToEdge:n,thresholds:e,dragStartTime:t,shouldUseTimeDampening:r,getAutoScrollerOptions:i})=>{const o=Bj(n,e,i);return o===0?0:r?Math.max(jj(o,t,i),fv):o},cS=({container:n,distanceToEdges:e,dragStartTime:t,axis:r,shouldUseTimeDampening:i,getAutoScrollerOptions:o})=>{const l=Uj(n,r,o);return e[r.end]<e[r.start]?uS({distanceToEdge:e[r.end],thresholds:l,dragStartTime:t,shouldUseTimeDampening:i,getAutoScrollerOptions:o}):-1*uS({distanceToEdge:e[r.start],thresholds:l,dragStartTime:t,shouldUseTimeDampening:i,getAutoScrollerOptions:o})},zj=({container:n,subject:e,proposedScroll:t})=>{const r=e.height>n.height,i=e.width>n.width;return!i&&!r?t:i&&r?null:{x:i?0:t.x,y:r?0:t.y}};const $j=UR(n=>n===0?0:n);var gA=({dragStartTime:n,container:e,subject:t,center:r,shouldUseTimeDampening:i,getAutoScrollerOptions:o})=>{const l={top:r.y-e.top,right:e.right-r.x,bottom:e.bottom-r.y,left:r.x-e.left},c=cS({container:e,distanceToEdges:l,dragStartTime:n,axis:sv,shouldUseTimeDampening:i,getAutoScrollerOptions:o}),d=cS({container:e,distanceToEdges:l,dragStartTime:n,axis:WR,shouldUseTimeDampening:i,getAutoScrollerOptions:o}),p=$j({x:d,y:c});if(vs(p,Kt))return null;const _=zj({container:e,subject:t,proposedScroll:p});return _?vs(_,Kt)?null:_:null};const Wj=UR(n=>n===0?0:n>0?1:-1),pv=(()=>{const n=(e,t)=>e<0?e:e>t?e-t:0;return({current:e,max:t,change:r})=>{const i=nn(e,r),o={x:n(i.x,t.x),y:n(i.y,t.y)};return vs(o,Kt)?null:o}})(),_A=({max:n,current:e,change:t})=>{const r={x:Math.max(e.x,n.x),y:Math.max(e.y,n.y)},i=Wj(t),o=pv({max:r,current:e,change:i});return!o||i.x!==0&&o.x===0||i.y!==0&&o.y===0},mv=(n,e)=>_A({current:n.scroll.current,max:n.scroll.max,change:e}),Hj=(n,e)=>{if(!mv(n,e))return null;const t=n.scroll.max,r=n.scroll.current;return pv({current:r,max:t,change:e})},gv=(n,e)=>{const t=n.frame;return t?_A({current:t.scroll.current,max:t.scroll.max,change:e}):!1},Gj=(n,e)=>{const t=n.frame;return!t||!gv(n,e)?null:pv({current:t.scroll.current,max:t.scroll.max,change:e})};var qj=({viewport:n,subject:e,center:t,dragStartTime:r,shouldUseTimeDampening:i,getAutoScrollerOptions:o})=>{const l=gA({dragStartTime:r,container:n.frame,subject:e,center:t,shouldUseTimeDampening:i,getAutoScrollerOptions:o});return l&&mv(n,l)?l:null},Kj=({droppable:n,subject:e,center:t,dragStartTime:r,shouldUseTimeDampening:i,getAutoScrollerOptions:o})=>{const l=n.frame;if(!l)return null;const c=gA({dragStartTime:r,container:l.pageMarginBox,subject:e,center:t,shouldUseTimeDampening:i,getAutoScrollerOptions:o});return c&&gv(n,c)?c:null},dS=({state:n,dragStartTime:e,shouldUseTimeDampening:t,scrollWindow:r,scrollDroppable:i,getAutoScrollerOptions:o})=>{const l=n.current.page.borderBoxCenter,d=n.dimensions.draggables[n.critical.draggable.id].page.marginBox;if(n.isWindowScrollAllowed){const m=n.viewport,y=qj({dragStartTime:e,viewport:m,subject:d,center:l,shouldUseTimeDampening:t,getAutoScrollerOptions:o});if(y){r(y);return}}const p=Fj({center:l,destination:zn(n.impact),droppables:n.dimensions.droppables});if(!p)return;const _=Kj({dragStartTime:e,droppable:p,subject:d,center:l,shouldUseTimeDampening:t,getAutoScrollerOptions:o});_&&i(p.descriptor.id,_)},Qj=({scrollWindow:n,scrollDroppable:e,getAutoScrollerOptions:t=()=>fc})=>{const r=lc(n),i=lc(e);let o=null;const l=p=>{o||ae();const{shouldUseTimeDampening:_,dragStartTime:m}=o;dS({state:p,scrollWindow:r,scrollDroppable:i,dragStartTime:m,shouldUseTimeDampening:_,getAutoScrollerOptions:t})};return{start:p=>{o&&ae();const _=Date.now();let m=!1;const y=()=>{m=!0};dS({state:p,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:y,scrollDroppable:y,getAutoScrollerOptions:t}),o={dragStartTime:_,shouldUseTimeDampening:m},m&&l(p)},stop:()=>{o&&(r.cancel(),i.cancel(),o=null)},scroll:l}},Yj=({move:n,scrollDroppable:e,scrollWindow:t})=>{const r=(c,d)=>{const p=nn(c.current.client.selection,d);n({client:p})},i=(c,d)=>{if(!gv(c,d))return d;const p=Gj(c,d);if(!p)return e(c.descriptor.id,d),null;const _=jn(d,p);return e(c.descriptor.id,_),jn(d,_)},o=(c,d,p)=>{if(!c||!mv(d,p))return p;const _=Hj(d,p);if(!_)return t(p),null;const m=jn(p,_);return t(m),jn(p,m)};return c=>{const d=c.scrollJumpRequest;if(!d)return;const p=zn(c.impact);p||ae();const _=i(c.dimensions.droppables[p],d);if(!_)return;const m=c.viewport,y=o(c.isWindowScrollAllowed,m,_);y&&r(c,y)}},Xj=({scrollDroppable:n,scrollWindow:e,move:t,getAutoScrollerOptions:r})=>{const i=Qj({scrollWindow:e,scrollDroppable:n,getAutoScrollerOptions:r}),o=Yj({move:t,scrollWindow:e,scrollDroppable:n});return{scroll:d=>{if(!(r().disabled||d.phase!=="DRAGGING")){if(d.movementMode==="FLUID"){i.scroll(d);return}d.scrollJumpRequest&&o(d)}},start:i.start,stop:i.stop}};const Xa="data-rfd",Ja=(()=>{const n=`${Xa}-drag-handle`;return{base:n,draggableId:`${n}-draggable-id`,contextId:`${n}-context-id`}})(),__=(()=>{const n=`${Xa}-draggable`;return{base:n,contextId:`${n}-context-id`,id:`${n}-id`}})(),Jj=(()=>{const n=`${Xa}-droppable`;return{base:n,contextId:`${n}-context-id`,id:`${n}-id`}})(),hS={contextId:`${Xa}-scroll-container-context-id`},Zj=n=>e=>`[${e}="${n}"]`,yu=(n,e)=>n.map(t=>{const r=t.styles[e];return r?`${t.selector} { ${r} }`:""}).join(" "),e9="pointer-events: none;";var t9=n=>{const e=Zj(n),t=(()=>{const c=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:e(Ja.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:c,dragging:e9,dropAnimating:c}}})(),r=(()=>{const c=`
      transition: ${Fu.outOfTheWay};
    `;return{selector:e(__.contextId),styles:{dragging:c,dropAnimating:c,userCancel:c}}})(),i={selector:e(Jj.contextId),styles:{always:"overflow-anchor: none;"}},l=[r,t,i,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:yu(l,"always"),resting:yu(l,"resting"),dragging:yu(l,"dragging"),dropAnimating:yu(l,"dropAnimating"),userCancel:yu(l,"userCancel")}};const $n=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?M.useLayoutEffect:M.useEffect,gg=()=>{const n=document.querySelector("head");return n||ae(),n},fS=n=>{const e=document.createElement("style");return n&&e.setAttribute("nonce",n),e.type="text/css",e};function n9(n,e){const t=Ke(()=>t9(n),[n]),r=M.useRef(null),i=M.useRef(null),o=_e(qt(m=>{const y=i.current;y||ae(),y.textContent=m}),[]),l=_e(m=>{const y=r.current;y||ae(),y.textContent=m},[]);$n(()=>{!r.current&&!i.current||ae();const m=fS(e),y=fS(e);return r.current=m,i.current=y,m.setAttribute(`${Xa}-always`,n),y.setAttribute(`${Xa}-dynamic`,n),gg().appendChild(m),gg().appendChild(y),l(t.always),o(t.resting),()=>{const w=S=>{const b=S.current;b||ae(),gg().removeChild(b),S.current=null};w(r),w(i)}},[e,l,o,t.always,t.resting,n]);const c=_e(()=>o(t.dragging),[o,t.dragging]),d=_e(m=>{if(m==="DROP"){o(t.dropAnimating);return}o(t.userCancel)},[o,t.dropAnimating,t.userCancel]),p=_e(()=>{i.current&&o(t.resting)},[o,t.resting]);return Ke(()=>({dragging:c,dropping:d,resting:p}),[c,d,p])}function yA(n,e){return Array.from(n.querySelectorAll(e))}var vA=n=>n&&n.ownerDocument&&n.ownerDocument.defaultView?n.ownerDocument.defaultView:window;function ip(n){return n instanceof vA(n).HTMLElement}function r9(n,e){const t=`[${Ja.contextId}="${n}"]`,r=yA(document,t);if(!r.length)return null;const i=r.find(o=>o.getAttribute(Ja.draggableId)===e);return!i||!ip(i)?null:i}function i9(n){const e=M.useRef({}),t=M.useRef(null),r=M.useRef(null),i=M.useRef(!1),o=_e(function(y,w){const S={id:y,focus:w};return e.current[y]=S,function(){const C=e.current;C[y]!==S&&delete C[y]}},[]),l=_e(function(y){const w=r9(n,y);w&&w!==document.activeElement&&w.focus()},[n]),c=_e(function(y,w){t.current===y&&(t.current=w)},[]),d=_e(function(){r.current||i.current&&(r.current=requestAnimationFrame(()=>{r.current=null;const y=t.current;y&&l(y)}))},[l]),p=_e(function(y){t.current=null;const w=document.activeElement;w&&w.getAttribute(Ja.draggableId)===y&&(t.current=y)},[]);return $n(()=>(i.current=!0,function(){i.current=!1;const y=r.current;y&&cancelAnimationFrame(y)}),[]),Ke(()=>({register:o,tryRecordFocus:p,tryRestoreFocusRecorded:d,tryShiftRecord:c}),[o,p,d,c])}function s9(){const n={draggables:{},droppables:{}},e=[];function t(m){return e.push(m),function(){const w=e.indexOf(m);w!==-1&&e.splice(w,1)}}function r(m){e.length&&e.forEach(y=>y(m))}function i(m){return n.draggables[m]||null}function o(m){const y=i(m);return y||ae(),y}const l={register:m=>{n.draggables[m.descriptor.id]=m,r({type:"ADDITION",value:m})},update:(m,y)=>{const w=n.draggables[y.descriptor.id];w&&w.uniqueId===m.uniqueId&&(delete n.draggables[y.descriptor.id],n.draggables[m.descriptor.id]=m)},unregister:m=>{const y=m.descriptor.id,w=i(y);w&&m.uniqueId===w.uniqueId&&(delete n.draggables[y],n.droppables[m.descriptor.droppableId]&&r({type:"REMOVAL",value:m}))},getById:o,findById:i,exists:m=>!!i(m),getAllByType:m=>Object.values(n.draggables).filter(y=>y.descriptor.type===m)};function c(m){return n.droppables[m]||null}function d(m){const y=c(m);return y||ae(),y}const p={register:m=>{n.droppables[m.descriptor.id]=m},unregister:m=>{const y=c(m.descriptor.id);y&&m.uniqueId===y.uniqueId&&delete n.droppables[m.descriptor.id]},getById:d,findById:c,exists:m=>!!c(m),getAllByType:m=>Object.values(n.droppables).filter(y=>y.descriptor.type===m)};function _(){n.draggables={},n.droppables={},e.length=0}return{draggable:l,droppable:p,subscribe:t,clean:_}}function o9(){const n=Ke(s9,[]);return M.useEffect(()=>function(){n.clean()},[n]),n}var _v=be.createContext(null),ff=()=>{const n=document.body;return n||ae(),n};const a9={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},l9=n=>`rfd-announcement-${n}`;function u9(n){const e=Ke(()=>l9(n),[n]),t=M.useRef(null);return M.useEffect(function(){const o=document.createElement("div");return t.current=o,o.id=e,o.setAttribute("aria-live","assertive"),o.setAttribute("aria-atomic","true"),uf(o.style,a9),ff().appendChild(o),function(){setTimeout(function(){const d=ff();d.contains(o)&&d.removeChild(o),o===t.current&&(t.current=null)})}},[e]),_e(i=>{const o=t.current;if(o){o.textContent=i;return}},[])}const c9={separator:"::"};function yv(n,e=c9){const t=be.useId();return Ke(()=>`${n}${e.separator}${t}`,[e.separator,n,t])}function d9({contextId:n,uniqueId:e}){return`rfd-hidden-text-${n}-${e}`}function h9({contextId:n,text:e}){const t=yv("hidden-text",{separator:"-"}),r=Ke(()=>d9({contextId:n,uniqueId:t}),[t,n]);return M.useEffect(function(){const o=document.createElement("div");return o.id=r,o.textContent=e,o.style.display="none",ff().appendChild(o),function(){const c=ff();c.contains(o)&&c.removeChild(o)}},[r,e]),r}var sp=be.createContext(null);function EA(n){const e=M.useRef(n);return M.useEffect(()=>{e.current=n}),e}function f9(){let n=null;function e(){return!!n}function t(l){return l===n}function r(l){n&&ae();const c={abandon:l};return n=c,c}function i(){n||ae(),n=null}function o(){n&&(n.abandon(),i())}return{isClaimed:e,isActive:t,claim:r,release:i,tryAbandon:o}}function pc(n){return n.phase==="IDLE"||n.phase==="DROP_ANIMATING"?!1:n.isDragging}const p9=9,m9=13,vv=27,wA=32,g9=33,_9=34,y9=35,v9=36,E9=37,w9=38,T9=39,I9=40,S9={[m9]:!0,[p9]:!0};var TA=n=>{S9[n.keyCode]&&n.preventDefault()};const op=(()=>{const n="visibilitychange";return typeof document>"u"?n:[n,`ms${n}`,`webkit${n}`,`moz${n}`,`o${n}`].find(r=>`on${r}`in document)||n})(),IA=0,pS=5;function C9(n,e){return Math.abs(e.x-n.x)>=pS||Math.abs(e.y-n.y)>=pS}const mS={type:"IDLE"};function b9({cancel:n,completed:e,getPhase:t,setPhase:r}){return[{eventName:"mousemove",fn:i=>{const{button:o,clientX:l,clientY:c}=i;if(o!==IA)return;const d={x:l,y:c},p=t();if(p.type==="DRAGGING"){i.preventDefault(),p.actions.move(d);return}p.type!=="PENDING"&&ae();const _=p.point;if(!C9(_,d))return;i.preventDefault();const m=p.actions.fluidLift(d);r({type:"DRAGGING",actions:m})}},{eventName:"mouseup",fn:i=>{const o=t();if(o.type!=="DRAGGING"){n();return}i.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),e()}},{eventName:"mousedown",fn:i=>{t().type==="DRAGGING"&&i.preventDefault(),n()}},{eventName:"keydown",fn:i=>{if(t().type==="PENDING"){n();return}if(i.keyCode===vv){i.preventDefault(),n();return}TA(i)}},{eventName:"resize",fn:n},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{t().type==="PENDING"&&n()}},{eventName:"webkitmouseforcedown",fn:i=>{const o=t();if(o.type==="IDLE"&&ae(),o.actions.shouldRespectForcePress()){n();return}i.preventDefault()}},{eventName:op,fn:n}]}function R9(n){const e=M.useRef(mS),t=M.useRef(ys),r=Ke(()=>({eventName:"mousedown",fn:function(m){if(m.defaultPrevented||m.button!==IA||m.ctrlKey||m.metaKey||m.shiftKey||m.altKey)return;const y=n.findClosestDraggableId(m);if(!y)return;const w=n.tryGetLock(y,l,{sourceEvent:m});if(!w)return;m.preventDefault();const S={x:m.clientX,y:m.clientY};t.current(),p(w,S)}}),[n]),i=Ke(()=>({eventName:"webkitmouseforcewillbegin",fn:_=>{if(_.defaultPrevented)return;const m=n.findClosestDraggableId(_);if(!m)return;const y=n.findOptionsForDraggable(m);y&&(y.shouldRespectForcePress||n.canGetLock(m)&&_.preventDefault())}}),[n]),o=_e(function(){const m={passive:!1,capture:!0};t.current=rr(window,[i,r],m)},[i,r]),l=_e(()=>{e.current.type!=="IDLE"&&(e.current=mS,t.current(),o())},[o]),c=_e(()=>{const _=e.current;l(),_.type==="DRAGGING"&&_.actions.cancel({shouldBlockNextClick:!0}),_.type==="PENDING"&&_.actions.abort()},[l]),d=_e(function(){const m={capture:!0,passive:!1},y=b9({cancel:c,completed:l,getPhase:()=>e.current,setPhase:w=>{e.current=w}});t.current=rr(window,y,m)},[c,l]),p=_e(function(m,y){e.current.type!=="IDLE"&&ae(),e.current={type:"PENDING",point:y,actions:m},d()},[d]);$n(function(){return o(),function(){t.current()}},[o])}function A9(){}const x9={[_9]:!0,[g9]:!0,[v9]:!0,[y9]:!0};function P9(n,e){function t(){e(),n.cancel()}function r(){e(),n.drop()}return[{eventName:"keydown",fn:i=>{if(i.keyCode===vv){i.preventDefault(),t();return}if(i.keyCode===wA){i.preventDefault(),r();return}if(i.keyCode===I9){i.preventDefault(),n.moveDown();return}if(i.keyCode===w9){i.preventDefault(),n.moveUp();return}if(i.keyCode===T9){i.preventDefault(),n.moveRight();return}if(i.keyCode===E9){i.preventDefault(),n.moveLeft();return}if(x9[i.keyCode]){i.preventDefault();return}TA(i)}},{eventName:"mousedown",fn:t},{eventName:"mouseup",fn:t},{eventName:"click",fn:t},{eventName:"touchstart",fn:t},{eventName:"resize",fn:t},{eventName:"wheel",fn:t,options:{passive:!0}},{eventName:op,fn:t}]}function k9(n){const e=M.useRef(A9),t=Ke(()=>({eventName:"keydown",fn:function(o){if(o.defaultPrevented||o.keyCode!==wA)return;const l=n.findClosestDraggableId(o);if(!l)return;const c=n.tryGetLock(l,_,{sourceEvent:o});if(!c)return;o.preventDefault();let d=!0;const p=c.snapLift();e.current();function _(){d||ae(),d=!1,e.current(),r()}e.current=rr(window,P9(p,_),{capture:!0,passive:!1})}}),[n]),r=_e(function(){const o={passive:!1,capture:!0};e.current=rr(window,[t],o)},[t]);$n(function(){return r(),function(){e.current()}},[r])}const _g={type:"IDLE"},N9=120,D9=.15;function O9({cancel:n,getPhase:e}){return[{eventName:"orientationchange",fn:n},{eventName:"resize",fn:n},{eventName:"contextmenu",fn:t=>{t.preventDefault()}},{eventName:"keydown",fn:t=>{if(e().type!=="DRAGGING"){n();return}t.keyCode===vv&&t.preventDefault(),n()}},{eventName:op,fn:n}]}function L9({cancel:n,completed:e,getPhase:t}){return[{eventName:"touchmove",options:{capture:!1},fn:r=>{const i=t();if(i.type!=="DRAGGING"){n();return}i.hasMoved=!0;const{clientX:o,clientY:l}=r.touches[0],c={x:o,y:l};r.preventDefault(),i.actions.move(c)}},{eventName:"touchend",fn:r=>{const i=t();if(i.type!=="DRAGGING"){n();return}r.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),e()}},{eventName:"touchcancel",fn:r=>{if(t().type!=="DRAGGING"){n();return}r.preventDefault(),n()}},{eventName:"touchforcechange",fn:r=>{const i=t();i.type==="IDLE"&&ae();const o=r.touches[0];if(!o||!(o.force>=D9))return;const c=i.actions.shouldRespectForcePress();if(i.type==="PENDING"){c&&n();return}if(c){if(i.hasMoved){r.preventDefault();return}n();return}r.preventDefault()}},{eventName:op,fn:n}]}function M9(n){const e=M.useRef(_g),t=M.useRef(ys),r=_e(function(){return e.current},[]),i=_e(function(w){e.current=w},[]),o=Ke(()=>({eventName:"touchstart",fn:function(w){if(w.defaultPrevented)return;const S=n.findClosestDraggableId(w);if(!S)return;const b=n.tryGetLock(S,c,{sourceEvent:w});if(!b)return;const C=w.touches[0],{clientX:k,clientY:N}=C,j={x:k,y:N};t.current(),m(b,j)}}),[n]),l=_e(function(){const w={capture:!0,passive:!1};t.current=rr(window,[o],w)},[o]),c=_e(()=>{const y=e.current;y.type!=="IDLE"&&(y.type==="PENDING"&&clearTimeout(y.longPressTimerId),i(_g),t.current(),l())},[l,i]),d=_e(()=>{const y=e.current;c(),y.type==="DRAGGING"&&y.actions.cancel({shouldBlockNextClick:!0}),y.type==="PENDING"&&y.actions.abort()},[c]),p=_e(function(){const w={capture:!0,passive:!1},S={cancel:d,completed:c,getPhase:r},b=rr(window,L9(S),w),C=rr(window,O9(S),w);t.current=function(){b(),C()}},[d,r,c]),_=_e(function(){const w=r();w.type!=="PENDING"&&ae();const S=w.actions.fluidLift(w.point);i({type:"DRAGGING",actions:S,hasMoved:!1})},[r,i]),m=_e(function(w,S){r().type!=="IDLE"&&ae();const b=setTimeout(_,N9);i({type:"PENDING",point:S,actions:w,longPressTimerId:b}),p()},[p,r,i,_]);$n(function(){return l(),function(){t.current();const S=r();S.type==="PENDING"&&(clearTimeout(S.longPressTimerId),i(_g))}},[r,l,i]),$n(function(){return rr(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const V9=["input","button","textarea","select","option","optgroup","video","audio"];function SA(n,e){if(e==null)return!1;if(V9.includes(e.tagName.toLowerCase()))return!0;const r=e.getAttribute("contenteditable");return r==="true"||r===""?!0:e===n?!1:SA(n,e.parentElement)}function F9(n,e){const t=e.target;return ip(t)?SA(n,t):!1}var U9=n=>Rr(n.getBoundingClientRect()).center;function B9(n){return n instanceof vA(n).Element}const j9=(()=>{const n="matches";return typeof document>"u"?n:[n,"msMatchesSelector","webkitMatchesSelector"].find(r=>r in Element.prototype)||n})();function CA(n,e){return n==null?null:n[j9](e)?n:CA(n.parentElement,e)}function z9(n,e){return n.closest?n.closest(e):CA(n,e)}function $9(n){return`[${Ja.contextId}="${n}"]`}function W9(n,e){const t=e.target;if(!B9(t))return null;const r=$9(n),i=z9(t,r);return!i||!ip(i)?null:i}function H9(n,e){const t=W9(n,e);return t?t.getAttribute(Ja.draggableId):null}function G9(n,e){const t=`[${__.contextId}="${n}"]`,i=yA(document,t).find(o=>o.getAttribute(__.id)===e);return!i||!ip(i)?null:i}function q9(n){n.preventDefault()}function uh({expected:n,phase:e,isLockActive:t,shouldWarn:r}){return!(!t()||n!==e)}function bA({lockAPI:n,store:e,registry:t,draggableId:r}){if(n.isClaimed())return!1;const i=t.draggable.findById(r);return!(!i||!i.options.isEnabled||!pA(e.getState(),r))}function K9({lockAPI:n,contextId:e,store:t,registry:r,draggableId:i,forceSensorStop:o,sourceEvent:l}){if(!bA({lockAPI:n,store:t,registry:r,draggableId:i}))return null;const d=r.draggable.getById(i),p=G9(e,d.descriptor.id);if(!p||l&&!d.options.canDragInteractiveElements&&F9(p,l))return null;const _=n.claim(o||ys);let m="PRE_DRAG";function y(){return d.options.shouldRespectForcePress}function w(){return n.isActive(_)}function S(Y,X){uh({expected:Y,phase:m,isLockActive:w,shouldWarn:!0})&&t.dispatch(X())}const b=S.bind(null,"DRAGGING");function C(Y){function X(){n.release(),m="COMPLETED"}m!=="PRE_DRAG"&&(X(),ae()),t.dispatch(z3(Y.liftActionArgs)),m="DRAGGING";function x(A,P={shouldBlockNextClick:!1}){if(Y.cleanup(),P.shouldBlockNextClick){const L=rr(window,[{eventName:"click",fn:q9,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(L)}X(),t.dispatch(oA({reason:A}))}return{isActive:()=>uh({expected:"DRAGGING",phase:m,isLockActive:w,shouldWarn:!1}),shouldRespectForcePress:y,drop:A=>x("DROP",A),cancel:A=>x("CANCEL",A),...Y.actions}}function k(Y){const X=lc(A=>{b(()=>sA({client:A}))});return{...C({liftActionArgs:{id:i,clientSelection:Y,movementMode:"FLUID"},cleanup:()=>X.cancel(),actions:{move:X}}),move:X}}function N(){const Y={moveUp:()=>b(X3),moveRight:()=>b(Z3),moveDown:()=>b(J3),moveLeft:()=>b(ej)};return C({liftActionArgs:{id:i,clientSelection:U9(p),movementMode:"SNAP"},cleanup:ys,actions:Y})}function j(){uh({expected:"PRE_DRAG",phase:m,isLockActive:w,shouldWarn:!0})&&n.release()}return{isActive:()=>uh({expected:"PRE_DRAG",phase:m,isLockActive:w,shouldWarn:!1}),shouldRespectForcePress:y,fluidLift:k,snapLift:N,abort:j}}const Q9=[R9,k9,M9];function Y9({contextId:n,store:e,registry:t,customSensors:r,enableDefaultSensors:i}){const o=[...i?Q9:[],...r||[]],l=M.useState(()=>f9())[0],c=_e(function(C,k){pc(C)&&!pc(k)&&l.tryAbandon()},[l]);$n(function(){let C=e.getState();return e.subscribe(()=>{const N=e.getState();c(C,N),C=N})},[l,e,c]),$n(()=>l.tryAbandon,[l.tryAbandon]);const d=_e(b=>bA({lockAPI:l,registry:t,store:e,draggableId:b}),[l,t,e]),p=_e((b,C,k)=>K9({lockAPI:l,registry:t,contextId:n,store:e,draggableId:b,forceSensorStop:C||null,sourceEvent:k&&k.sourceEvent?k.sourceEvent:null}),[n,l,t,e]),_=_e(b=>H9(n,b),[n]),m=_e(b=>{const C=t.draggable.findById(b);return C?C.options:null},[t.draggable]),y=_e(function(){l.isClaimed()&&(l.tryAbandon(),e.getState().phase!=="IDLE"&&e.dispatch(cv()))},[l,e]),w=_e(()=>l.isClaimed(),[l]),S=Ke(()=>({canGetLock:d,tryGetLock:p,findClosestDraggableId:_,findOptionsForDraggable:m,tryReleaseLock:y,isLockClaimed:w}),[d,p,_,m,y,w]);for(let b=0;b<o.length;b++)o[b](S)}const X9=n=>({onBeforeCapture:e=>{const t=()=>{n.onBeforeCapture&&n.onBeforeCapture(e)};R_.flushSync(t)},onBeforeDragStart:n.onBeforeDragStart,onDragStart:n.onDragStart,onDragEnd:n.onDragEnd,onDragUpdate:n.onDragUpdate}),J9=n=>({...fc,...n.autoScrollerOptions,durationDampening:{...fc.durationDampening,...n.autoScrollerOptions}});function vu(n){return n.current||ae(),n.current}function Z9(n){const{contextId:e,setCallbacks:t,sensors:r,nonce:i,dragHandleUsageInstructions:o}=n,l=M.useRef(null),c=EA(n),d=_e(()=>X9(c.current),[c]),p=_e(()=>J9(c.current),[c]),_=u9(e),m=h9({contextId:e,text:o}),y=n9(e,i),w=_e(L=>{vu(l).dispatch(L)},[]),S=Ke(()=>BI({publishWhileDragging:W3,updateDroppableScroll:G3,updateDroppableIsEnabled:q3,updateDroppableIsCombineEnabled:K3,collectionStarting:H3},w),[w]),b=o9(),C=Ke(()=>Oj(b,S),[b,S]),k=Ke(()=>Xj({scrollWindow:Lj,scrollDroppable:C.scrollDroppable,getAutoScrollerOptions:p,...BI({move:sA},w)}),[C.scrollDroppable,w,p]),N=i9(e),j=Ke(()=>Pj({announce:_,autoScroller:k,dimensionMarshal:C,focusMarshal:N,getResponders:d,styleMarshal:y}),[_,k,C,N,d,y]);l.current=j;const H=_e(()=>{const L=vu(l);L.getState().phase!=="IDLE"&&L.dispatch(cv())},[]),Y=_e(()=>{const L=vu(l).getState();return L.phase==="DROP_ANIMATING"?!0:L.phase==="IDLE"?!1:L.isDragging},[]),X=Ke(()=>({isDragging:Y,tryAbort:H}),[Y,H]);t(X);const x=_e(L=>pA(vu(l).getState(),L),[]),A=_e(()=>fo(vu(l).getState()),[]),P=Ke(()=>({marshal:C,focus:N,contextId:e,canLift:x,isMovementAllowed:A,dragHandleUsageInstructionsId:m,registry:b}),[e,C,m,N,x,A,b]);return Y9({contextId:e,store:j,registry:b,customSensors:r||null,enableDefaultSensors:n.enableDefaultSensors!==!1}),M.useEffect(()=>H,[H]),be.createElement(sp.Provider,{value:P},be.createElement(wB,{context:_v,store:j},n.children))}function e5(){return be.useId()}function t5(n){const e=e5(),t=n.dragHandleUsageInstructions||Sh.dragHandleUsageInstructions;return be.createElement(NB,null,r=>be.createElement(Z9,{nonce:n.nonce,contextId:e,setCallbacks:r,dragHandleUsageInstructions:t,enableDefaultSensors:n.enableDefaultSensors,sensors:n.sensors,onBeforeCapture:n.onBeforeCapture,onBeforeDragStart:n.onBeforeDragStart,onDragStart:n.onDragStart,onDragUpdate:n.onDragUpdate,onDragEnd:n.onDragEnd,autoScrollerOptions:n.autoScrollerOptions},n.children))}const gS={dragging:5e3,dropAnimating:4500},n5=(n,e)=>e?Fu.drop(e.duration):n?Fu.snap:Fu.fluid,r5=(n,e)=>{if(n)return e?hc.opacity.drop:hc.opacity.combining},i5=n=>n.forceShouldAnimate!=null?n.forceShouldAnimate:n.mode==="SNAP";function s5(n){const t=n.dimension.client,{offset:r,combineWith:i,dropping:o}=n,l=!!i,c=i5(n),d=!!o,p=d?m_.drop(r,l):m_.moveTo(r);return{position:"fixed",top:t.marginBox.top,left:t.marginBox.left,boxSizing:"border-box",width:t.borderBox.width,height:t.borderBox.height,transition:n5(c,o),transform:p,opacity:r5(l,d),zIndex:d?gS.dropAnimating:gS.dragging,pointerEvents:"none"}}function o5(n){return{transform:m_.moveTo(n.offset),transition:n.shouldAnimateDisplacement?void 0:"none"}}function a5(n){return n.type==="DRAGGING"?s5(n):o5(n)}function l5(n,e,t=Kt){const r=window.getComputedStyle(e),i=e.getBoundingClientRect(),o=OR(i,r),l=lf(o,t),c={client:o,tagName:e.tagName.toLowerCase(),display:r.display},d={x:o.marginBox.width,y:o.marginBox.height};return{descriptor:n,placeholder:c,displaceBy:d,client:o,page:l}}function u5(n){const e=yv("draggable"),{descriptor:t,registry:r,getDraggableRef:i,canDragInteractiveElements:o,shouldRespectForcePress:l,isEnabled:c}=n,d=Ke(()=>({canDragInteractiveElements:o,shouldRespectForcePress:l,isEnabled:c}),[o,c,l]),p=_e(w=>{const S=i();return S||ae(),l5(t,S,w)},[t,i]),_=Ke(()=>({uniqueId:e,descriptor:t,options:d,getDimension:p}),[t,p,d,e]),m=M.useRef(_),y=M.useRef(!0);$n(()=>(r.draggable.register(m.current),()=>r.draggable.unregister(m.current)),[r.draggable]),$n(()=>{if(y.current){y.current=!1;return}const w=m.current;m.current=_,r.draggable.update(_,w)},[_,r.draggable])}var Ev=be.createContext(null);function pf(n){const e=M.useContext(n);return e||ae(),e}function c5(n){n.preventDefault()}const d5=n=>{const e=M.useRef(null),t=_e((X=null)=>{e.current=X},[]),r=_e(()=>e.current,[]),{contextId:i,dragHandleUsageInstructionsId:o,registry:l}=pf(sp),{type:c,droppableId:d}=pf(Ev),p=Ke(()=>({id:n.draggableId,index:n.index,type:c,droppableId:d}),[n.draggableId,n.index,c,d]),{children:_,draggableId:m,isEnabled:y,shouldRespectForcePress:w,canDragInteractiveElements:S,isClone:b,mapped:C,dropAnimationFinished:k}=n;if(!b){const X=Ke(()=>({descriptor:p,registry:l,getDraggableRef:r,canDragInteractiveElements:S,shouldRespectForcePress:w,isEnabled:y}),[p,l,r,S,w,y]);u5(X)}const N=Ke(()=>y?{tabIndex:0,role:"button","aria-describedby":o,"data-rfd-drag-handle-draggable-id":m,"data-rfd-drag-handle-context-id":i,draggable:!1,onDragStart:c5}:null,[i,o,m,y]),j=_e(X=>{C.type==="DRAGGING"&&C.dropping&&X.propertyName==="transform"&&R_.flushSync(k)},[k,C]),H=Ke(()=>{const X=a5(C),x=C.type==="DRAGGING"&&C.dropping?j:void 0;return{innerRef:t,draggableProps:{"data-rfd-draggable-context-id":i,"data-rfd-draggable-id":m,style:X,onTransitionEnd:x},dragHandleProps:N}},[i,N,m,C,j,t]),Y=Ke(()=>({draggableId:p.id,type:p.type,source:{index:p.index,droppableId:p.droppableId}}),[p.droppableId,p.id,p.index,p.type]);return be.createElement(be.Fragment,null,_(H,C.snapshot,Y))};var RA=(n,e)=>n===e,AA=n=>{const{combine:e,destination:t}=n;return t?t.droppableId:e?e.droppableId:null};const h5=n=>n.combine?n.combine.draggableId:null,f5=n=>n.at&&n.at.type==="COMBINE"?n.at.combine.draggableId:null;function p5(){const n=qt((i,o)=>({x:i,y:o})),e=qt((i,o,l=null,c=null,d=null)=>({isDragging:!0,isClone:o,isDropAnimating:!!d,dropAnimation:d,mode:i,draggingOver:l,combineWith:c,combineTargetFor:null})),t=qt((i,o,l,c,d=null,p=null,_=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:d,combineWith:p,mode:o,offset:i,dimension:l,forceShouldAnimate:_,snapshot:e(o,c,d,p,null)}}));return(i,o)=>{if(pc(i)){if(i.critical.draggable.id!==o.draggableId)return null;const l=i.current.client.offset,c=i.dimensions.draggables[o.draggableId],d=zn(i.impact),p=f5(i.impact),_=i.forceShouldAnimate;return t(n(l.x,l.y),i.movementMode,c,o.isClone,d,p,_)}if(i.phase==="DROP_ANIMATING"){const l=i.completed;if(l.result.draggableId!==o.draggableId)return null;const c=o.isClone,d=i.dimensions.draggables[o.draggableId],p=l.result,_=p.mode,m=AA(p),y=h5(p),S={duration:i.dropDuration,curve:hv.drop,moveTo:i.newHomeClientOffset,opacity:y?hc.opacity.drop:null,scale:y?hc.scale.drop:null};return{mapped:{type:"DRAGGING",offset:i.newHomeClientOffset,dimension:d,dropping:S,draggingOver:m,combineWith:y,mode:_,forceShouldAnimate:null,snapshot:e(_,c,m,y,S)}}}return null}}function xA(n=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:n,combineWith:null}}const m5={mapped:{type:"SECONDARY",offset:Kt,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:xA(null)}};function g5(){const n=qt((l,c)=>({x:l,y:c})),e=qt(xA),t=qt((l,c=null,d)=>({mapped:{type:"SECONDARY",offset:l,combineTargetFor:c,shouldAnimateDisplacement:d,snapshot:e(c)}})),r=l=>l?t(Kt,l,!0):null,i=(l,c,d,p)=>{const _=d.displaced.visible[l],m=!!(p.inVirtualList&&p.effected[l]),y=tp(d),w=y&&y.draggableId===l?c:null;if(!_){if(!m)return r(w);if(d.displaced.invisible[l])return null;const C=hl(p.displacedBy.point),k=n(C.x,C.y);return t(k,w,!0)}if(m)return r(w);const S=d.displacedBy.point,b=n(S.x,S.y);return t(b,w,_.shouldAnimate)};return(l,c)=>{if(pc(l))return l.critical.draggable.id===c.draggableId?null:i(c.draggableId,l.critical.draggable.id,l.impact,l.afterCritical);if(l.phase==="DROP_ANIMATING"){const d=l.completed;return d.result.draggableId===c.draggableId?null:i(c.draggableId,d.result.draggableId,d.impact,d.afterCritical)}return null}}const _5=()=>{const n=p5(),e=g5();return(r,i)=>n(r,i)||e(r,i)||m5},y5={dropAnimationFinished:aA},v5=NR(_5,y5,null,{context:_v,areStatePropsEqual:RA})(d5);function PA(n){return pf(Ev).isUsingCloneFor===n.draggableId&&!n.isClone?null:be.createElement(v5,n)}function E5(n){const e=typeof n.isDragDisabled=="boolean"?!n.isDragDisabled:!0,t=!!n.disableInteractiveElementBlocking,r=!!n.shouldRespectForcePress;return be.createElement(PA,uf({},n,{isClone:!1,isEnabled:e,canDragInteractiveElements:t,shouldRespectForcePress:r}))}const kA=n=>e=>n===e,w5=kA("scroll"),T5=kA("auto"),_S=(n,e)=>e(n.overflowX)||e(n.overflowY),I5=n=>{const e=window.getComputedStyle(n),t={overflowX:e.overflowX,overflowY:e.overflowY};return _S(t,w5)||_S(t,T5)},S5=()=>!1,NA=n=>n==null?null:n===document.body?S5()?n:null:n===document.documentElement?null:I5(n)?n:NA(n.parentElement);var y_=n=>({x:n.scrollLeft,y:n.scrollTop});const DA=n=>n?window.getComputedStyle(n).position==="fixed"?!0:DA(n.parentElement):!1;var C5=n=>{const e=NA(n),t=DA(n);return{closestScrollable:e,isFixedOnPage:t}},b5=({descriptor:n,isEnabled:e,isCombineEnabled:t,isFixedOnPage:r,direction:i,client:o,page:l,closest:c})=>{const d=(()=>{if(!c)return null;const{scrollSize:y,client:w}=c,S=dA({scrollHeight:y.scrollHeight,scrollWidth:y.scrollWidth,height:w.paddingBox.height,width:w.paddingBox.width});return{pageMarginBox:c.page.marginBox,frameClient:w,scrollSize:y,shouldClipSubject:c.shouldClipSubject,scroll:{initial:c.scroll,current:c.scroll,max:S,diff:{value:Kt,displacement:Kt}}}})(),p=i==="vertical"?sv:WR,_=Ya({page:l,withPlaceholder:null,axis:p,frame:d});return{descriptor:n,isCombineEnabled:t,isFixedOnPage:r,axis:p,isEnabled:e,client:o,page:l,frame:d,subject:_}};const R5=(n,e)=>{const t=LR(n);if(!e||n!==e)return t;const r=t.paddingBox.top-e.scrollTop,i=t.paddingBox.left-e.scrollLeft,o=r+e.scrollHeight,l=i+e.scrollWidth,d=tv({top:r,right:l,bottom:o,left:i},t.border);return nv({borderBox:d,margin:t.margin,border:t.border,padding:t.padding})};var A5=({ref:n,descriptor:e,env:t,windowScroll:r,direction:i,isDropDisabled:o,isCombineEnabled:l,shouldClipSubject:c})=>{const d=t.closestScrollable,p=R5(n,d),_=lf(p,r),m=(()=>{if(!d)return null;const w=LR(d),S={scrollHeight:d.scrollHeight,scrollWidth:d.scrollWidth};return{client:w,page:lf(w,r),scroll:y_(d),scrollSize:S,shouldClipSubject:c}})();return b5({descriptor:e,isEnabled:!o,isCombineEnabled:l,isFixedOnPage:t.isFixedOnPage,direction:i,client:p,page:_,closest:m})};const x5={passive:!1},P5={passive:!0};var yS=n=>n.shouldPublishImmediately?x5:P5;const ch=n=>n&&n.env.closestScrollable||null;function k5(n){const e=M.useRef(null),t=pf(sp),r=yv("droppable"),{registry:i,marshal:o}=t,l=EA(n),c=Ke(()=>({id:n.droppableId,type:n.type,mode:n.mode}),[n.droppableId,n.mode,n.type]),d=M.useRef(c),p=Ke(()=>qt((H,Y)=>{e.current||ae();const X={x:H,y:Y};o.updateDroppableScroll(c.id,X)}),[c.id,o]),_=_e(()=>{const H=e.current;return!H||!H.env.closestScrollable?Kt:y_(H.env.closestScrollable)},[]),m=_e(()=>{const H=_();p(H.x,H.y)},[_,p]),y=Ke(()=>lc(m),[m]),w=_e(()=>{const H=e.current,Y=ch(H);if(H&&Y||ae(),H.scrollOptions.shouldPublishImmediately){m();return}y()},[y,m]),S=_e((H,Y)=>{e.current&&ae();const X=l.current,x=X.getDroppableRef();x||ae();const A=C5(x),P={ref:x,descriptor:c,env:A,scrollOptions:Y};e.current=P;const L=A5({ref:x,descriptor:c,env:A,windowScroll:H,direction:X.direction,isDropDisabled:X.isDropDisabled,isCombineEnabled:X.isCombineEnabled,shouldClipSubject:!X.ignoreContainerClipping}),V=A.closestScrollable;return V&&(V.setAttribute(hS.contextId,t.contextId),V.addEventListener("scroll",w,yS(P.scrollOptions))),L},[t.contextId,c,w,l]),b=_e(()=>{const H=e.current,Y=ch(H);return H&&Y||ae(),y_(Y)},[]),C=_e(()=>{const H=e.current;H||ae();const Y=ch(H);e.current=null,Y&&(y.cancel(),Y.removeAttribute(hS.contextId),Y.removeEventListener("scroll",w,yS(H.scrollOptions)))},[w,y]),k=_e(H=>{const Y=e.current;Y||ae();const X=ch(Y);X||ae(),X.scrollTop+=H.y,X.scrollLeft+=H.x},[]),N=Ke(()=>({getDimensionAndWatchScroll:S,getScrollWhileDragging:b,dragStopped:C,scroll:k}),[C,S,b,k]),j=Ke(()=>({uniqueId:r,descriptor:c,callbacks:N}),[N,c,r]);$n(()=>(d.current=j.descriptor,i.droppable.register(j),()=>{e.current&&C(),i.droppable.unregister(j)}),[N,c,C,j,o,i.droppable]),$n(()=>{e.current&&o.updateDroppableIsEnabled(d.current.id,!n.isDropDisabled)},[n.isDropDisabled,o]),$n(()=>{e.current&&o.updateDroppableIsCombineEnabled(d.current.id,n.isCombineEnabled)},[n.isCombineEnabled,o])}function yg(){}const vS={width:0,height:0,margin:FB},N5=({isAnimatingOpenOnMount:n,placeholder:e,animate:t})=>n||t==="close"?vS:{height:e.client.borderBox.height,width:e.client.borderBox.width,margin:e.client.margin},D5=({isAnimatingOpenOnMount:n,placeholder:e,animate:t})=>{const r=N5({isAnimatingOpenOnMount:n,placeholder:e,animate:t});return{display:e.display,boxSizing:"border-box",width:r.width,height:r.height,marginTop:r.margin.top,marginRight:r.margin.right,marginBottom:r.margin.bottom,marginLeft:r.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:t!=="none"?Fu.placeholder:null}},O5=n=>{const e=M.useRef(null),t=_e(()=>{e.current&&(clearTimeout(e.current),e.current=null)},[]),{animate:r,onTransitionEnd:i,onClose:o,contextId:l}=n,[c,d]=M.useState(n.animate==="open");M.useEffect(()=>c?r!=="open"?(t(),d(!1),yg):e.current?yg:(e.current=setTimeout(()=>{e.current=null,d(!1)}),t):yg,[r,c,t]);const p=_e(m=>{m.propertyName==="height"&&(i(),r==="close"&&o())},[r,o,i]),_=D5({isAnimatingOpenOnMount:c,animate:n.animate,placeholder:n.placeholder});return be.createElement(n.placeholder.tagName,{style:_,"data-rfd-placeholder-context-id":l,onTransitionEnd:p,ref:n.innerRef})};var L5=be.memo(O5);class M5 extends be.PureComponent{constructor(...e){super(...e),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(e,t){return e.shouldAnimate?e.on?{isVisible:!0,data:e.on,animate:"open"}:t.isVisible?{isVisible:!0,data:t.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!e.on,data:e.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const e={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(e)}}const V5=n=>{const e=M.useContext(sp);e||ae();const{contextId:t,isMovementAllowed:r}=e,i=M.useRef(null),o=M.useRef(null),{children:l,droppableId:c,type:d,mode:p,direction:_,ignoreContainerClipping:m,isDropDisabled:y,isCombineEnabled:w,snapshot:S,useClone:b,updateViewportMaxScroll:C,getContainerForClone:k}=n,N=_e(()=>i.current,[]),j=_e((V=null)=>{i.current=V},[]);_e(()=>o.current,[]);const H=_e((V=null)=>{o.current=V},[]),Y=_e(()=>{r()&&C({maxScroll:fA()})},[r,C]);k5({droppableId:c,type:d,mode:p,direction:_,isDropDisabled:y,isCombineEnabled:w,ignoreContainerClipping:m,getDroppableRef:N});const X=Ke(()=>be.createElement(M5,{on:n.placeholder,shouldAnimate:n.shouldAnimatePlaceholder},({onClose:V,data:B,animate:O})=>be.createElement(L5,{placeholder:B,onClose:V,innerRef:H,animate:O,contextId:t,onTransitionEnd:Y})),[t,Y,n.placeholder,n.shouldAnimatePlaceholder,H]),x=Ke(()=>({innerRef:j,placeholder:X,droppableProps:{"data-rfd-droppable-id":c,"data-rfd-droppable-context-id":t}}),[t,c,X,j]),A=b?b.dragging.draggableId:null,P=Ke(()=>({droppableId:c,type:d,isUsingCloneFor:A}),[c,A,d]);function L(){if(!b)return null;const{dragging:V,render:B}=b,O=be.createElement(PA,{draggableId:V.draggableId,index:V.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(rt,Je)=>B(rt,Je,V));return yk.createPortal(O,k())}return be.createElement(Ev.Provider,{value:P},l(x,S),L())};function F5(){return document.body||ae(),document.body}const ES={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:F5},OA=n=>{let e={...n},t;for(t in ES)n[t]===void 0&&(e={...e,[t]:ES[t]});return e},vg=(n,e)=>n===e.droppable.type,wS=(n,e)=>e.draggables[n.draggable.id],U5=()=>{const n={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},e={...n,shouldAnimatePlaceholder:!1},t=qt(o=>({draggableId:o.id,type:o.type,source:{index:o.index,droppableId:o.droppableId}})),r=qt((o,l,c,d,p,_)=>{const m=p.descriptor.id;if(p.descriptor.droppableId===o){const S=_?{render:_,dragging:t(p.descriptor)}:null,b={isDraggingOver:c,draggingOverWith:c?m:null,draggingFromThisWith:m,isUsingPlaceholder:!0};return{placeholder:p.placeholder,shouldAnimatePlaceholder:!1,snapshot:b,useClone:S}}if(!l)return e;if(!d)return n;const w={isDraggingOver:c,draggingOverWith:m,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:p.placeholder,shouldAnimatePlaceholder:!0,snapshot:w,useClone:null}});return(o,l)=>{const c=OA(l),d=c.droppableId,p=c.type,_=!c.isDropDisabled,m=c.renderClone;if(pc(o)){const y=o.critical;if(!vg(p,y))return e;const w=wS(y,o.dimensions),S=zn(o.impact)===d;return r(d,_,S,S,w,m)}if(o.phase==="DROP_ANIMATING"){const y=o.completed;if(!vg(p,y.critical))return e;const w=wS(y.critical,o.dimensions);return r(d,_,AA(y.result)===d,zn(y.impact)===d,w,m)}if(o.phase==="IDLE"&&o.completed&&!o.shouldFlush){const y=o.completed;if(!vg(p,y.critical))return e;const w=zn(y.impact)===d,S=!!(y.impact.at&&y.impact.at.type==="COMBINE"),b=y.critical.droppable.id===d;return w?S?n:e:b?n:e}return e}},B5={updateViewportMaxScroll:Y3},j5=NR(U5,B5,(n,e,t)=>({...OA(t),...n,...e}),{context:_v,areStatePropsEqual:RA})(V5);var z5=j5;const LA=({placeholder:n="Search",onSearchChange:e,width:t="100%",height:r="60px",customStyle:i})=>q.jsxs("div",{style:{display:"flex",alignItems:"center",border:"1px solid #BABABA",borderRadius:"9px",width:typeof t=="number"?`${t}px`:t,height:typeof r=="number"?`${r}px`:r,padding:"0 10px",...i},children:[q.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{marginRight:"10px"},children:[q.jsx("path",{d:"M11.5008 21.0002C16.7475 21.0002 21.0008 16.7469 21.0008 11.5002C21.0008 6.25351 16.7475 2.00021 11.5008 2.00021C6.25412 2.00021 2.00082 6.25351 2.00082 11.5002C2.00082 16.7469 6.25412 21.0002 11.5008 21.0002Z",stroke:"#163041",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),q.jsx("path",{d:"M22.0008 22.0002L20.0008 20.0002",stroke:"#163041",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),q.jsx("input",{type:"text",placeholder:n,onChange:e,style:{flex:1,border:"none",outline:"none",fontSize:"30px",color:"#333"},"aria-label":"search"})]}),TS=()=>{const[n,e]=M.useState([{id:"1",title:"Task List",tasks:[]}]),[t,r]=M.useState(""),[i,o]=M.useState("");M.useEffect(()=>{const w=Kr(),S=Ir(w,"Columns"),b=Ir(w,"Task Details"),C=Kg(S,N=>{if(N.exists()){const j=N.val(),H=Object.keys(j).map(Y=>({id:Y,title:j[Y].title||"Untitled Column",tasks:[]}));e(Y=>{var x;return[Y.find(A=>A.id==="0")||{id:"0",title:"Task List",tasks:((x=Y.find(A=>A.id==="0"))==null?void 0:x.tasks)||[]},...H]})}else Re.error("Unexpected error}")}),k=Kg(b,N=>{if(N.exists()){const j=N.val(),H=Object.keys(j).map(Y=>({id:Y,name:j[Y].task_name,column_id:j[Y].column_id||"default",due_date:j[Y].due_date||"No due date"}));e(Y=>Y.map(X=>{if(X.id==="0")return{...X,tasks:H};const x=H.filter(A=>A.column_id===X.id);return{...X,tasks:x}}))}else console.log("No data available in 'Task Details' node.")});return()=>{C(),k()}},[]);const l=w=>{const S=Kr(),b={};w.forEach(C=>{C.tasks.forEach((k,N)=>{b[`Task Details/${k.id}`]={task_name:k.name,column_id:C.id,due_date:k.due_date,position:N}})}),sb(Ir(S),b)},c=w=>{const{source:S,destination:b}=w;if(!b||S.droppableId===b.droppableId)return;const C=n.find(N=>N.id===S.droppableId),k=n.find(N=>N.id===b.droppableId);if(C&&k){const N=Array.from(C.tasks),j=Array.from(k.tasks),[H]=N.splice(S.index,1),Y={...H};j.splice(b.index,0,Y),Y.column_id=k.id;const X=n.map(x=>x.id===C.id?{...x,tasks:N}:x.id===k.id?{...x,tasks:j}:x);e(X),l(X)}},d=w=>{const S=Kr(),b=Ir(S,"Columns"),C={title:w},k=rb(b);Bf(k,C).then(()=>{Re.error("New column added successfully.")}).catch(N=>{Re.error("Error adding new column:",N)})},p=(w,S)=>{e(b=>b.map(C=>C.id===w?{...C,title:S}:C))},_=w=>{if(w===n[0].id){alert("You cannot delete the first column.");return}const S=Kr(),b=Ir(S,`Columns/${w}`);ib(b),e(C=>C.filter(k=>k.id!==w))},m=w=>{r(w.target.value)},y=w=>t?w.filter(S=>{const b=S.name?S.name.toLowerCase():"",C=S.due_date?S.due_date.toLowerCase():"";return b.includes(t.toLowerCase())||C.includes(t.toLowerCase())}):w;return q.jsx("div",{className:"container-xl bg-[#f4f6f8] rounded-t-xl",style:{height:"100vh"},children:q.jsxs("div",{className:"layout-body-wrapper ml-6 pt-6 grid grid-cols-2",children:[q.jsx(LA,{onSearchChange:m,showFilter:!1,width:"120%",height:60}),q.jsxs("div",{className:"mb-4 mr-4 text-right",children:[q.jsx("input",{type:"text",placeholder:"Enter column name",value:i,onChange:w=>o(w.target.value),className:"px-4 py-2 border rounded mr-2"}),q.jsx("button",{className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",onClick:()=>{if(i.trim()===""){alert("Please enter a column name before adding.");return}d(i),o("")},children:"Add Column"})]}),q.jsx(t5,{onDragEnd:c,children:n.map(w=>q.jsx(z5,{droppableId:w.id,children:S=>q.jsxs("div",{ref:S.innerRef,...S.droppableProps,className:"mb-6 mt-3 mr-3 p-4 bg-white rounded shadow",children:[q.jsxs("div",{className:"flex justify-between items-center",children:[q.jsx("input",{className:"text-xl font-semibold border-none bg-transparent focus:ring-0 focus:outline-none",value:w.title,onChange:b=>p(w.id,b.target.value)}),q.jsx("div",{children:w.id!==n[0].id&&q.jsx("button",{className:"text-red-500 hover:text-red-700",onClick:()=>_(w.id),children:"Delete"})})]}),q.jsx("div",{className:"border-b my-4"}),q.jsxs("ul",{children:[y(w.tasks).map((b,C)=>q.jsx(E5,{draggableId:b.id,index:C,children:k=>q.jsxs("li",{ref:k.innerRef,...k.draggableProps,...k.dragHandleProps,className:"flex items-center py-2",children:[q.jsx("input",{type:"radio",className:"mr-2"}),q.jsx("span",{className:"font-semibold",children:b.name}),b.due_date&&q.jsxs("span",{className:"ml-auto text-gray-500",children:["Due: ",b.due_date]})]})},b.id)),S.placeholder]})]})},w.id))})]})})},IS=n=>{const{children:e}=n,t=bf(),r=ks(),[i,o]=M.useState(!0);return M.useEffect(()=>{const l=SC(t,c=>{c?o(!1):(o(!1),r("/login"))});return()=>l()},[t,r]),i?q.jsx("p",{children:"Loading..."}):q.jsx("div",{children:e})},$5=()=>{const n=bf(),e=ks(),t=ti(),[r,i]=M.useState("home"),[o,l]=M.useState(""),c=async()=>{try{await Z1(n),e("/login")}catch(d){Re.error("Error logging out:",d.message)}};return M.useEffect(()=>{(async()=>{var _;const p=n.currentUser;if(p){const m=c_(SR,"users",p.uid),y=await gU(m);y.exists()?l(((_=y.data())==null?void 0:_.name)||"User"):l(p.displayName||"User")}})()},[n.currentUser]),M.useEffect(()=>{t.pathname==="/"?i("home"):t.pathname==="/addTask"?i("addTask"):t.pathname==="/editTask"&&i("editTask")},[t.pathname]),q.jsxs("div",{className:"bg-[#282c34] p-4 flex items-center justify-between shadow-md",children:[q.jsx("div",{className:"flex items-center",children:q.jsx("p",{className:"text-white font-bold py-2 px-1",style:{fontSize:"30px"},children:"Kanban Board"})}),q.jsxs("div",{className:"flex space-x-3",children:[q.jsx(bu,{to:"/home",children:q.jsx("p",{className:`cursor-pointer px-2 py-2 rounded ${r==="home"?"bg-gray-200 text-gray-700":"text-gray-200 hover:bg-gray-700"}`,onClick:()=>i("home"),children:"Home"})}),q.jsx(bu,{to:"/addtask",children:q.jsx("p",{className:`cursor-pointer px-2 py-2 rounded ${r==="addTask"?"bg-gray-200 text-gray-700":"text-gray-200 hover:bg-gray-700"}`,onClick:()=>i("addTask"),children:"Add Task"})}),q.jsx(bu,{to:"/task",children:q.jsx("p",{className:`cursor-pointer px-2 py-2 rounded ${r==="task"?"bg-gray-200 text-gray-700":"text-gray-200 hover:bg-gray-700"}`,onClick:()=>i("task"),children:"Task"})}),q.jsx("p",{className:"text-white font-bold py-2  px-2 mr-5",children:o}),q.jsx("button",{className:"bg-red-500 text-white font-semibold px-1 rounded hover:bg-red-600",onClick:c,children:"Logout"})]})]})},W5=()=>{const[n,e]=M.useState({}),t=ks(),[r,i]=M.useState("");M.useEffect(()=>{const m=Kr(),y=Ir(m,"Task Details"),w=Kg(y,S=>{if(S.exists()){const b=S.val(),C=Object.entries(b).map(([k,N])=>({...N,id:k,status:N.status||"Opened"}));e(C)}else e({})});return()=>w()},[]);const o=m=>{if(window.confirm("Are you sure that you want to delete the Task?")){const y=Kr(),w=Ir(y,`Task Details/${m}`);ib(w).then(()=>{Re.success("Task deleted successfully")}).catch(S=>{Re.error(`Error deleting task: ${S.message}`)})}},l=m=>{t(`/addtask/${m}`)},c=m=>{i(m.target.value)},d=m=>r?m.filter(y=>{const w=y.name?y.name.toLowerCase():"",S=y.due_date?y.due_date.toLowerCase():"",b=y.user?y.user.toLowerCase():"",C=y.status?y.status.toLowerCase():"";return w.includes(r.toLowerCase())||S.includes(r.toLowerCase())||b.includes(r.toLowerCase())||C.includes(r.toLowerCase())}):m,p=Object.entries(n).map(([m,y])=>({id:m,...y})).filter(m=>d([m]).length>0),_=(m,y)=>{const w=Kr(),S=Ir(w,`Task Details/${m}`);sb(S,{status:y}).then(()=>{Re.success("Task status updated successfully")}).catch(b=>{Re.error(`Error updating task status: ${b.message}`)})};return q.jsxs("div",{className:"mt-10 ml-10 mr-10",children:[q.jsx("div",{className:"flex justify-between items-center mb-4",children:q.jsx(LA,{onSearchChange:c,showFilter:!1,width:"80%",height:60})}),q.jsx("div",{className:"mt-10 flex justify-center",children:q.jsxs("table",{className:"min-w-full border-collapse bg-white shadow-lg",children:[q.jsx("thead",{className:"bg-green-600 text-white",children:q.jsxs("tr",{children:[q.jsx("th",{className:"py-2 px-4 text-center",children:"No."}),q.jsx("th",{className:"py-2 px-4 text-center",children:"Title"}),q.jsx("th",{className:"py-2 px-4 text-center",children:"Assigned"}),q.jsx("th",{className:"py-2 px-4 text-center",children:"Description"}),q.jsx("th",{className:"py-2 px-4 text-center",children:"Due Date"}),q.jsx("th",{className:"py-2 px-4 text-center",children:"Status"}),q.jsx("th",{className:"py-2 px-4 text-center",children:"Action"})]})}),q.jsx("tbody",{children:p.length===0?q.jsx("tr",{children:q.jsx("td",{colSpan:6,className:"py-4 px-2 text-center text-gray-500",children:"No tasks found."})}):p.map((m,y)=>q.jsxs("tr",{className:"border-b even:bg-gray-100",children:[q.jsx("td",{className:"py-2 px-4 text-center",children:y+1}),q.jsx("td",{className:"py-2 px-4 text-center",children:m.name}),q.jsx("td",{className:"py-2 px-4 text-center",children:m.user}),q.jsx("td",{className:"py-2 px-4 text-center",children:m.description}),q.jsx("td",{className:"py-2 px-4 text-center",children:m.due_date}),q.jsx("td",{className:"py-2 px-4 text-center",children:q.jsxs("select",{value:m.status,onChange:w=>_(m.id,w.target.value),className:"p-1 border rounded",children:[q.jsx("option",{value:"Opened",children:"Opened"}),q.jsx("option",{value:"In Progress",children:"In Progress"}),q.jsx("option",{value:"Completed",children:"Completed"})]})}),q.jsxs("td",{className:"py-2 px-4 text-center",children:[q.jsx("button",{className:"bg-blue-500 text-white py-1 px-2 rounded hover:bg-blue-600",onClick:()=>l(m.id),children:"Edit"}),q.jsx("button",{className:"bg-red-500 text-white py-1 px-2 rounded hover:bg-red-600 ml-2",onClick:()=>o(m.id),children:"Delete"})]})]},m.id))})]})})]})},SS=()=>{const{id:n}=TP(),[e,t]=M.useState({task_name:"",user:"",description:"",due_date:""}),r=ks();M.useEffect(()=>{n&&(async()=>{try{const c=Kr(),d=Ir(c,`Task Details/${n}`),p=await K2(d);p.exists()?t(p.val()):(Re.error("Task not found."),r("/home"))}catch(c){Re.error(`Error fetching task: ${c.message}`)}})()},[n,r]);const i=l=>{const{name:c,value:d}=l.target;t({...e,[c]:d})},o=async l=>{l.preventDefault();const{task_name:c,user:d,description:p,due_date:_}=e;if(!c||!d||!p||!_){Re.error("Please fill out all fields.");return}try{const m=Kr();if(n){const y=Ir(m,`Task Details/${n}`);await Bf(y,e),Re.success("Task updated successfully!")}else{const y=Ir(m,"Task Details");await rb(y,e),Re.success("Task added successfully!")}r("/home")}catch(m){Re.error(`Error saving task: ${m.message}`)}};return q.jsx("div",{className:"flex items-center justify-center mt-10",children:q.jsxs("form",{className:"w-full max-w-md bg-white p-6 rounded-md shadow-md",onSubmit:o,children:[q.jsx("h2",{className:"text-lg font-bold mb-4",children:n?"Edit Task":"Add Task"}),q.jsx("label",{htmlFor:"task_name",className:"block mb-2 text-gray-700",children:"Task Name"}),q.jsx("input",{type:"text",id:"task_name",name:"task_name",value:e.task_name,onChange:i,className:"w-full mb-4 p-2 border border-gray-300 rounded-md",placeholder:"Enter task name..."}),q.jsx("label",{htmlFor:"user",className:"block mb-2 text-gray-700",children:"Assigned To"}),q.jsx("input",{type:"text",id:"user",name:"user",value:e.user,onChange:i,className:"w-full mb-4 p-2 border border-gray-300 rounded-md",placeholder:"Enter assigned user..."}),q.jsx("label",{htmlFor:"description",className:"block mb-2 text-gray-700",children:"Description"}),q.jsx("input",{type:"text",id:"description",name:"description",value:e.description,onChange:i,className:"w-full mb-4 p-2 border border-gray-300 rounded-md",placeholder:"Enter description..."}),q.jsx("label",{htmlFor:"due_date",className:"block mb-2 text-gray-700",children:"Due Date"}),q.jsx("input",{type:"date",id:"due_date",name:"due_date",value:e.due_date,onChange:i,className:"w-full mb-6 p-2 border border-gray-300 rounded-md"}),q.jsx("button",{type:"submit",className:"w-full bg-blue-500 text-white py-2 px-4 rounded-md hover:bg-blue-600 transition",children:n?"Update Task":"Add Task"})]})})},H5=({children:n})=>{const e=ti(),t=!["/login","/signup"].includes(e.pathname);return q.jsxs(q.Fragment,{children:[t&&q.jsx($5,{}),n]})};Gx.createRoot(document.getElementById("root")).render(q.jsx(be.StrictMode,{children:q.jsxs(lk,{basename:"/kanban_Board",children:[q.jsx(H5,{children:q.jsxs(FP,{children:[q.jsx(Ei,{path:"/",element:q.jsx(IS,{children:q.jsx(TS,{})})}),q.jsx(Ei,{path:"/login",element:q.jsx(wU,{})}),q.jsx(Ei,{path:"/signup",element:q.jsx(TU,{})}),q.jsx(Ei,{path:"/home",element:q.jsx(IS,{children:q.jsx(TS,{})})}),q.jsx(Ei,{path:"/addtask",element:q.jsx(SS,{})}),q.jsx(Ei,{path:"/addtask/:id",element:q.jsx(SS,{})}),q.jsx(Ei,{path:"task",element:q.jsx(W5,{})}),q.jsx(Ei,{path:"*",element:q.jsx(MP,{to:"/"})})]})}),q.jsx(WO,{})]})}));
